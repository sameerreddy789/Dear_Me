(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function LM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rT={exports:{}},Ih={};var VC;function eB(){if(VC)return Ih;VC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Ih.Fragment=e,Ih.jsx=t,Ih.jsxs=t,Ih}var LC;function tB(){return LC||(LC=1,rT.exports=eB()),rT.exports}var $=tB(),iT={exports:{}},Ne={};var BC;function nB(){if(BC)return Ne;BC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function E(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function x(j,se,fe){this.props=j,this.context=se,this.refs=w,this.updater=fe||b}x.prototype.isReactComponent={},x.prototype.setState=function(j,se){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,se,"setState")},x.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function N(){}N.prototype=x.prototype;function V(j,se,fe){this.props=j,this.context=se,this.refs=w,this.updater=fe||b}var q=V.prototype=new N;q.constructor=V,S(q,x.prototype),q.isPureReactComponent=!0;var F=Array.isArray;function Z(){}var I={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function D(j,se,fe){var me=fe.ref;return{$$typeof:n,type:j,key:se,ref:me!==void 0?me:null,props:fe}}function B(j,se){return D(j.type,se,j.props)}function U(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function H(j){var se={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(fe){return se[fe]})}var O=/\/+/g;function ke(j,se){return typeof j=="object"&&j!==null&&j.key!=null?H(""+j.key):se.toString(36)}function Ce(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Z,Z):(j.status="pending",j.then(function(se){j.status==="pending"&&(j.status="fulfilled",j.value=se)},function(se){j.status==="pending"&&(j.status="rejected",j.reason=se)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ee(j,se,fe,me,Ie){var Le=typeof j;(Le==="undefined"||Le==="boolean")&&(j=null);var Qe=!1;if(j===null)Qe=!0;else switch(Le){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(j.$$typeof){case n:case e:Qe=!0;break;case p:return Qe=j._init,ee(Qe(j._payload),se,fe,me,Ie)}}if(Qe)return Ie=Ie(j),Qe=me===""?"."+ke(j,0):me,F(Ie)?(fe="",Qe!=null&&(fe=Qe.replace(O,"$&/")+"/"),ee(Ie,se,fe,"",function(_a){return _a})):Ie!=null&&(U(Ie)&&(Ie=B(Ie,fe+(Ie.key==null||j&&j.key===Ie.key?"":(""+Ie.key).replace(O,"$&/")+"/")+Qe)),se.push(Ie)),1;Qe=0;var nn=me===""?".":me+":";if(F(j))for(var Et=0;Et<j.length;Et++)me=j[Et],Le=nn+ke(me,Et),Qe+=ee(me,se,fe,Le,Ie);else if(Et=E(j),typeof Et=="function")for(j=Et.call(j),Et=0;!(me=j.next()).done;)me=me.value,Le=nn+ke(me,Et++),Qe+=ee(me,se,fe,Le,Ie);else if(Le==="object"){if(typeof j.then=="function")return ee(Ce(j),se,fe,me,Ie);throw se=String(j),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function ae(j,se,fe){if(j==null)return j;var me=[],Ie=0;return ee(j,me,"","",function(Le){return se.call(fe,Le,Ie++)}),me}function ge(j){if(j._status===-1){var se=j._result;se=se(),se.then(function(fe){(j._status===0||j._status===-1)&&(j._status=1,j._result=fe)},function(fe){(j._status===0||j._status===-1)&&(j._status=2,j._result=fe)}),j._status===-1&&(j._status=0,j._result=se)}if(j._status===1)return j._result.default;throw j._result}var Ve=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},He={map:ae,forEach:function(j,se,fe){ae(j,function(){se.apply(this,arguments)},fe)},count:function(j){var se=0;return ae(j,function(){se++}),se},toArray:function(j){return ae(j,function(se){return se})||[]},only:function(j){if(!U(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ne.Activity=m,Ne.Children=He,Ne.Component=x,Ne.Fragment=t,Ne.Profiler=i,Ne.PureComponent=V,Ne.StrictMode=r,Ne.Suspense=h,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(j){return I.H.useMemoCache(j)}},Ne.cache=function(j){return function(){return j.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(j,se,fe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var me=S({},j.props),Ie=j.key;if(se!=null)for(Le in se.key!==void 0&&(Ie=""+se.key),se)!k.call(se,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&se.ref===void 0||(me[Le]=se[Le]);var Le=arguments.length-2;if(Le===1)me.children=fe;else if(1<Le){for(var Qe=Array(Le),nn=0;nn<Le;nn++)Qe[nn]=arguments[nn+2];me.children=Qe}return D(j.type,Ie,me)},Ne.createContext=function(j){return j={$$typeof:a,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:s,_context:j},j},Ne.createElement=function(j,se,fe){var me,Ie={},Le=null;if(se!=null)for(me in se.key!==void 0&&(Le=""+se.key),se)k.call(se,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ie[me]=se[me]);var Qe=arguments.length-2;if(Qe===1)Ie.children=fe;else if(1<Qe){for(var nn=Array(Qe),Et=0;Et<Qe;Et++)nn[Et]=arguments[Et+2];Ie.children=nn}if(j&&j.defaultProps)for(me in Qe=j.defaultProps,Qe)Ie[me]===void 0&&(Ie[me]=Qe[me]);return D(j,Le,Ie)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(j){return{$$typeof:u,render:j}},Ne.isValidElement=U,Ne.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:ge}},Ne.memo=function(j,se){return{$$typeof:f,type:j,compare:se===void 0?null:se}},Ne.startTransition=function(j){var se=I.T,fe={};I.T=fe;try{var me=j(),Ie=I.S;Ie!==null&&Ie(fe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(Z,Ve)}catch(Le){Ve(Le)}finally{se!==null&&fe.types!==null&&(se.types=fe.types),I.T=se}},Ne.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ne.use=function(j){return I.H.use(j)},Ne.useActionState=function(j,se,fe){return I.H.useActionState(j,se,fe)},Ne.useCallback=function(j,se){return I.H.useCallback(j,se)},Ne.useContext=function(j){return I.H.useContext(j)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(j,se){return I.H.useDeferredValue(j,se)},Ne.useEffect=function(j,se){return I.H.useEffect(j,se)},Ne.useEffectEvent=function(j){return I.H.useEffectEvent(j)},Ne.useId=function(){return I.H.useId()},Ne.useImperativeHandle=function(j,se,fe){return I.H.useImperativeHandle(j,se,fe)},Ne.useInsertionEffect=function(j,se){return I.H.useInsertionEffect(j,se)},Ne.useLayoutEffect=function(j,se){return I.H.useLayoutEffect(j,se)},Ne.useMemo=function(j,se){return I.H.useMemo(j,se)},Ne.useOptimistic=function(j,se){return I.H.useOptimistic(j,se)},Ne.useReducer=function(j,se,fe){return I.H.useReducer(j,se,fe)},Ne.useRef=function(j){return I.H.useRef(j)},Ne.useState=function(j){return I.H.useState(j)},Ne.useSyncExternalStore=function(j,se,fe){return I.H.useSyncExternalStore(j,se,fe)},Ne.useTransition=function(){return I.H.useTransition()},Ne.version="19.2.4",Ne}var UC;function Xf(){return UC||(UC=1,iT.exports=nB()),iT.exports}var P=Xf();const vl=LM(P);var sT={exports:{}},Mh={},oT={exports:{}},aT={};var zC;function rB(){return zC||(zC=1,(function(n){function e(ee,ae){var ge=ee.length;ee.push(ae);e:for(;0<ge;){var Ve=ge-1>>>1,He=ee[Ve];if(0<i(He,ae))ee[Ve]=ae,ee[ge]=He,ge=Ve;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ae=ee[0],ge=ee.pop();if(ge!==ae){ee[0]=ge;e:for(var Ve=0,He=ee.length,j=He>>>1;Ve<j;){var se=2*(Ve+1)-1,fe=ee[se],me=se+1,Ie=ee[me];if(0>i(fe,ge))me<He&&0>i(Ie,fe)?(ee[Ve]=Ie,ee[me]=ge,Ve=me):(ee[Ve]=fe,ee[se]=ge,Ve=se);else if(me<He&&0>i(Ie,ge))ee[Ve]=Ie,ee[me]=ge,Ve=me;else break e}}return ae}function i(ee,ae){var ge=ee.sortIndex-ae.sortIndex;return ge!==0?ge:ee.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var h=[],f=[],p=1,m=null,v=3,E=!1,b=!1,S=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function q(ee){for(var ae=t(f);ae!==null;){if(ae.callback===null)r(f);else if(ae.startTime<=ee)r(f),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=t(f)}}function F(ee){if(S=!1,q(ee),!b)if(t(h)!==null)b=!0,Z||(Z=!0,H());else{var ae=t(f);ae!==null&&Ce(F,ae.startTime-ee)}}var Z=!1,I=-1,k=5,D=-1;function B(){return w?!0:!(n.unstable_now()-D<k)}function U(){if(w=!1,Z){var ee=n.unstable_now();D=ee;var ae=!0;try{e:{b=!1,S&&(S=!1,N(I),I=-1),E=!0;var ge=v;try{t:{for(q(ee),m=t(h);m!==null&&!(m.expirationTime>ee&&B());){var Ve=m.callback;if(typeof Ve=="function"){m.callback=null,v=m.priorityLevel;var He=Ve(m.expirationTime<=ee);if(ee=n.unstable_now(),typeof He=="function"){m.callback=He,q(ee),ae=!0;break t}m===t(h)&&r(h),q(ee)}else r(h);m=t(h)}if(m!==null)ae=!0;else{var j=t(f);j!==null&&Ce(F,j.startTime-ee),ae=!1}}break e}finally{m=null,v=ge,E=!1}ae=void 0}}finally{ae?H():Z=!1}}}var H;if(typeof V=="function")H=function(){V(U)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ke=O.port2;O.port1.onmessage=U,H=function(){ke.postMessage(null)}}else H=function(){x(U,0)};function Ce(ee,ae){I=x(function(){ee(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var ge=v;v=ae;try{return ee()}finally{v=ge}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ge=v;v=ee;try{return ae()}finally{v=ge}},n.unstable_scheduleCallback=function(ee,ae,ge){var Ve=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ve+ge:Ve):ge=Ve,ee){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ge+He,ee={id:p++,callback:ae,priorityLevel:ee,startTime:ge,expirationTime:He,sortIndex:-1},ge>Ve?(ee.sortIndex=ge,e(f,ee),t(h)===null&&ee===t(f)&&(S?(N(I),I=-1):S=!0,Ce(F,ge-Ve))):(ee.sortIndex=He,e(h,ee),b||E||(b=!0,Z||(Z=!0,H()))),ee},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(ee){var ae=v;return function(){var ge=v;v=ae;try{return ee.apply(this,arguments)}finally{v=ge}}}})(aT)),aT}var jC;function iB(){return jC||(jC=1,oT.exports=rB()),oT.exports}var lT={exports:{}},Mn={};var FC;function sB(){if(FC)return Mn;FC=1;var n=Xf();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(h,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:h,containerInfo:f,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mn.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return s(h,f,null,p)},Mn.flushSync=function(h){var f=a.T,p=r.p;try{if(a.T=null,r.p=2,h)return h()}finally{a.T=f,r.p=p,r.d.f()}},Mn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Mn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Mn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:E}):p==="script"&&r.d.X(h,{crossOrigin:m,integrity:v,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Mn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Mn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Mn.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Mn.requestFormReset=function(h){r.d.r(h)},Mn.unstable_batchedUpdates=function(h,f){return h(f)},Mn.useFormState=function(h,f,p){return a.H.useFormState(h,f,p)},Mn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Mn.version="19.2.4",Mn}var HC;function BM(){if(HC)return lT.exports;HC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lT.exports=sB(),lT.exports}var qC;function oB(){if(qC)return Mh;qC=1;var n=iB(),e=Xf(),t=BM();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function h(o){if(s(o)!==o)throw Error(r(188))}function f(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var c=o,d=l;;){var y=c.return;if(y===null)break;var T=y.alternate;if(T===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===c)return h(y),o;if(T===d)return h(y),l;T=T.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=T;else{for(var A=!1,R=y.child;R;){if(R===c){A=!0,c=y,d=T;break}if(R===d){A=!0,d=y,c=T;break}R=R.sibling}if(!A){for(R=T.child;R;){if(R===c){A=!0,c=T,d=y;break}if(R===d){A=!0,d=T,c=y;break}R=R.sibling}if(!A)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?o:l}function p(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=p(o),l!==null)return l;o=o.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),V=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function H(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var O=Symbol.for("react.client.reference");function ke(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===O?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case x:return"Profiler";case w:return"StrictMode";case F:return"Suspense";case Z:return"SuspenseList";case D:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case b:return"Portal";case V:return o.displayName||"Context";case N:return(o._context.displayName||"Context")+".Consumer";case q:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return l=o.displayName||null,l!==null?l:ke(o.type)||"Memo";case k:l=o._payload,o=o._init;try{return ke(o(l))}catch{}}return null}var Ce=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Ve=[],He=-1;function j(o){return{current:o}}function se(o){0>He||(o.current=Ve[He],Ve[He]=null,He--)}function fe(o,l){He++,Ve[He]=o.current,o.current=l}var me=j(null),Ie=j(null),Le=j(null),Qe=j(null);function nn(o,l){switch(fe(Le,l),fe(Ie,o),fe(me,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?sC(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=sC(l),o=oC(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}se(me),fe(me,o)}function Et(){se(me),se(Ie),se(Le)}function _a(o){o.memoizedState!==null&&fe(Qe,o);var l=me.current,c=oC(l,o.type);l!==c&&(fe(Ie,o),fe(me,c))}function Bl(o){Ie.current===o&&(se(me),se(Ie)),Qe.current===o&&(se(Qe),Ch._currentValue=ge)}var Ul,zl;function vi(o){if(Ul===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);Ul=l&&l[1]||"",zl=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ul+o+zl}var Cc=!1;function Sa(o,l){if(!o||Cc)return"";Cc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(J){var Q=J}Reflect.construct(o,[],ie)}else{try{ie.call()}catch(J){Q=J}o.call(ie.prototype)}}else{try{throw Error()}catch(J){Q=J}(ie=o())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=d.DetermineComponentFrameRoot(),A=T[0],R=T[1];if(A&&R){var L=A.split(`
`),Y=R.split(`
`);for(y=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(d===L.length||y===Y.length)for(d=L.length-1,y=Y.length-1;1<=d&&0<=y&&L[d]!==Y[y];)y--;for(;1<=d&&0<=y;d--,y--)if(L[d]!==Y[y]){if(d!==1||y!==1)do if(d--,y--,0>y||L[d]!==Y[y]){var te=`
`+L[d].replace(" at new "," at ");return o.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",o.displayName)),te}while(1<=d&&0<=y);break}}}finally{Cc=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?vi(c):""}function xc(o,l){switch(o.tag){case 26:case 27:case 5:return vi(o.type);case 16:return vi("Lazy");case 13:return o.child!==l&&l!==null?vi("Suspense Fallback"):vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return Sa(o.type,!1);case 11:return Sa(o.type.render,!1);case 1:return Sa(o.type,!0);case 31:return vi("Activity");default:return""}}function Rc(o){try{var l="",c=null;do l+=xc(o,c),c=o,o=o.return;while(o);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var jt=Object.prototype.hasOwnProperty,rn=n.unstable_scheduleCallback,Ks=n.unstable_cancelCallback,sv=n.unstable_shouldYield,_d=n.unstable_requestPaint,Un=n.unstable_now,wa=n.unstable_getCurrentPriorityLevel,kc=n.unstable_ImmediatePriority,Ic=n.unstable_UserBlockingPriority,Ws=n.unstable_NormalPriority,ov=n.unstable_LowPriority,Sd=n.unstable_IdlePriority,wd=n.log,Ad=n.unstable_setDisableYieldValue,Gr=null,yn=null;function Sr(o){if(typeof wd=="function"&&Ad(o),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(Gr,o)}catch{}}var Pt=Math.clz32?Math.clz32:xd,Cd=Math.log,jl=Math.LN2;function xd(o){return o>>>=0,o===0?32:31-(Cd(o)/jl|0)|0}var Ti=256,Aa=262144,Ft=4194304;function Ei(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function bi(o,l,c){var d=o.pendingLanes;if(d===0)return 0;var y=0,T=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var R=d&134217727;return R!==0?(d=R&~T,d!==0?y=Ei(d):(A&=R,A!==0?y=Ei(A):c||(c=R&~o,c!==0&&(y=Ei(c))))):(R=d&~T,R!==0?y=Ei(R):A!==0?y=Ei(A):c||(c=d&~o,c!==0&&(y=Ei(c)))),y===0?0:l!==0&&l!==y&&(l&T)===0&&(T=y&-y,c=l&-l,T>=c||T===32&&(c&4194048)!==0)?l:y}function Kr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function av(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rd(){var o=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),o}function _i(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Ca(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function lv(o,l,c,d,y,T){var A=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var R=o.entanglements,L=o.expirationTimes,Y=o.hiddenUpdates;for(c=A&~c;0<c;){var te=31-Pt(c),ie=1<<te;R[te]=0,L[te]=-1;var Q=Y[te];if(Q!==null)for(Y[te]=null,te=0;te<Q.length;te++){var J=Q[te];J!==null&&(J.lane&=-536870913)}c&=~ie}d!==0&&xa(o,d,0),T!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=T&~(A&~l))}function xa(o,l,c){o.pendingLanes|=l,o.suspendedLanes&=~l;var d=31-Pt(l);o.entangledLanes|=l,o.entanglements[d]=o.entanglements[d]|1073741824|c&261930}function Mc(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var d=31-Pt(c),y=1<<d;y&l|o[d]&l&&(o[d]|=l),c&=~y}}function Dc(o,l){var c=l&-l;return c=(c&42)!==0?1:Ra(c),(c&(o.suspendedLanes|l))!==0?0:c}function Ra(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ss(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function kd(){var o=ae.p;return o!==0?o:(o=window.event,o===void 0?32:kC(o.type))}function Wr(o,l){var c=ae.p;try{return ae.p=o,l()}finally{ae.p=c}}var Yr=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Yr,un="__reactProps$"+Yr,Si="__reactContainer$"+Yr,Fl="__reactEvents$"+Yr,uv="__reactListeners$"+Yr,Id="__reactHandles$"+Yr,Md="__reactResources$"+Yr,wi="__reactMarker$"+Yr;function Hl(o){delete o[Ht],delete o[un],delete o[Fl],delete o[uv],delete o[Id]}function Ai(o){var l=o[Ht];if(l)return l;for(var c=o.parentNode;c;){if(l=c[Si]||c[Ht]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=dC(o);o!==null;){if(c=o[Ht])return c;o=dC(o)}return l}o=c,c=o.parentNode}return null}function wr(o){if(o=o[Ht]||o[Si]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function or(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function Ci(o){var l=o[Md];return l||(l=o[Md]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function qt(o){o[wi]=!0}var Nc=new Set,Oc={};function xi(o,l){Ri(o,l),Ri(o+"Capture",l)}function Ri(o,l){for(Oc[o]=l,o=0;o<l.length;o++)Nc.add(l[o])}var Pc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vc={},Lc={};function Dd(o){return jt.call(Lc,o)?!0:jt.call(Vc,o)?!1:Pc.test(o)?Lc[o]=!0:(Vc[o]=!0,!1)}function ql(o,l,c){if(Dd(l))if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+c)}}function ar(o,l,c){if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+c)}}function $t(o,l,c,d){if(d===null)o.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(l,c,""+d)}}function cn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ys(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Bc(o,l,c){var d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,T=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(A){c=""+A,T.call(this,A)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function rt(o){if(!o._valueTracker){var l=Ys(o)?"checked":"value";o._valueTracker=Bc(o,l,""+o[l])}}function ka(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),d="";return o&&(d=Ys(o)?o.checked?"true":"false":o.value),o=d,o!==c?(l.setValue(o),!0):!1}function ki(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ia=/[\n"\\]/g;function Yn(o){return o.replace(Ia,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function $l(o,l,c,d,y,T,A,R){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),l!=null?A==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+cn(l)):o.value!==""+cn(l)&&(o.value=""+cn(l)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),l!=null?Uc(o,A,cn(l)):c!=null?Uc(o,A,cn(c)):d!=null&&o.removeAttribute("value"),y==null&&T!=null&&(o.defaultChecked=!!T),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.name=""+cn(R):o.removeAttribute("name")}function Nd(o,l,c,d,y,T,A,R){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),l!=null||c!=null){if(!(T!=="submit"&&T!=="reset"||l!=null)){rt(o);return}c=c!=null?""+cn(c):"",l=l!=null?""+cn(l):c,R||l===o.value||(o.value=l),o.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=R?o.checked:!!d,o.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A),rt(o)}function Uc(o,l,c){l==="number"&&ki(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function Qs(o,l,c,d){if(o=o.options,l){l={};for(var y=0;y<c.length;y++)l["$"+c[y]]=!0;for(c=0;c<o.length;c++)y=l.hasOwnProperty("$"+o[c].value),o[c].selected!==y&&(o[c].selected=y),y&&d&&(o[c].defaultSelected=!0)}else{for(c=""+cn(c),l=null,y=0;y<o.length;y++){if(o[y].value===c){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Od(o,l,c){if(l!=null&&(l=""+cn(l),l!==o.value&&(o.value=l),c==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=c!=null?""+cn(c):""}function Xs(o,l,c,d){if(l==null){if(d!=null){if(c!=null)throw Error(r(92));if(Ce(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),l=c}c=cn(l),o.defaultValue=c,d=o.textContent,d===c&&d!==""&&d!==null&&(o.value=d),rt(o)}function Qn(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var Pd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zc(o,l,c){var d=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":d?o.setProperty(l,c):typeof c!="number"||c===0||Pd.has(l)?l==="float"?o.cssFloat=c:o[l]=(""+c).trim():o[l]=c+"px"}function jc(o,l,c){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&c[y]!==d&&zc(o,y,d)}else for(var T in l)l.hasOwnProperty(T)&&zc(o,T,l[T])}function Gl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kl(o){return Js.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Qr(){}var Fc=null;function Ar(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Zs=null,Ii=null;function Ma(o){var l=wr(o);if(l&&(o=l.stateNode)){var c=o[un]||null;e:switch(o=l.stateNode,l.type){case"input":if($l(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Yn(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var d=c[l];if(d!==o&&d.form===o.form){var y=d[un]||null;if(!y)throw Error(r(90));$l(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<c.length;l++)d=c[l],d.form===o.form&&ka(d)}break e;case"textarea":Od(o,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&Qs(o,!!c.multiple,l,!1)}}}var Wl=!1;function eo(o,l,c){if(Wl)return o(l,c);Wl=!0;try{var d=o(l);return d}finally{if(Wl=!1,(Zs!==null||Ii!==null)&&(kp(),Zs&&(l=Zs,o=Ii,Ii=Zs=null,Ma(l),o)))for(l=0;l<o.length;l++)Ma(o[l])}}function Xr(o,l){var c=o.stateNode;if(c===null)return null;var d=c[un]||null;if(d===null)return null;c=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(r(231,l,typeof c));return c}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Da=!1;if(Cr)try{var at={};Object.defineProperty(at,"passive",{get:function(){Da=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{Da=!1}var Mi=null,Hc=null,Na=null;function qc(){if(Na)return Na;var o,l=Hc,c=l.length,d,y="value"in Mi?Mi.value:Mi.textContent,T=y.length;for(o=0;o<c&&l[o]===y[o];o++);var A=c-o;for(d=1;d<=A&&l[c-d]===y[T-d];d++);return Na=y.slice(o,1<d?1-d:void 0)}function Oa(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function as(){return!0}function Jr(){return!1}function vn(o){function l(c,d,y,T,A){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=T,this.target=A,this.currentTarget=null;for(var R in o)o.hasOwnProperty(R)&&(c=o[R],this[R]=c?c(T):T[R]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?as:Jr,this.isPropagationStopped=Jr,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),l}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=vn(ls),to=m({},ls,{view:0,detail:0}),$c=vn(to),no,Yl,Ni,Ql=m({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ni&&(Ni&&o.type==="mousemove"?(no=o.screenX-Ni.screenX,Yl=o.screenY-Ni.screenY):Yl=no=0,Ni=o),no)},movementY:function(o){return"movementY"in o?o.movementY:Yl}}),Gc=vn(Ql),Pa=m({},Ql,{dataTransfer:0}),Ld=vn(Pa),Bd=m({},to,{relatedTarget:0}),Va=vn(Bd),Kc=m({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Ud=vn(Kc),Xl=m({},ls,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),zd=vn(Xl),jd=m({},ls,{data:0}),Oi=vn(jd),Fd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $d(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=qd[o])?!!l[o]:!1}function ro(){return $d}var zn=m({},to,{key:function(o){if(o.key){var l=Fd[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Oa(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Hd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(o){return o.type==="keypress"?Oa(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Oa(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Gd=vn(zn),Kd=m({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),us=vn(Kd),g=m({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),_=vn(g),C=m({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),M=vn(C),K=m({},Ql,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),X=vn(K),ce=m({},ls,{newState:0,oldState:0}),Oe=vn(ce),Vt=[9,13,27,32],tt=Cr&&"CompositionEvent"in window,bt=null;Cr&&"documentMode"in document&&(bt=document.documentMode);var xr=Cr&&"TextEvent"in window&&!bt,Pi=Cr&&(!tt||bt&&8<bt&&11>=bt),Zr=" ",ei=!1;function La(o,l){switch(o){case"keyup":return Vt.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jl(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Zl=!1;function w3(o,l){switch(o){case"compositionend":return Jl(l);case"keypress":return l.which!==32?null:(ei=!0,Zr);case"textInput":return o=l.data,o===Zr&&ei?null:o;default:return null}}function A3(o,l){if(Zl)return o==="compositionend"||!tt&&La(o,l)?(o=qc(),Na=Hc=Mi=null,Zl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Pi&&l.locale!=="ko"?null:l.data;default:return null}}var C3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gw(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!C3[o.type]:l==="textarea"}function yw(o,l,c,d){Zs?Ii?Ii.push(d):Ii=[d]:Zs=d,l=Vp(l,"onChange"),0<l.length&&(c=new Di("onChange","change",null,c,d),o.push({event:c,listeners:l}))}var Wc=null,Yc=null;function x3(o){ZA(o,0)}function Wd(o){var l=or(o);if(ka(l))return o}function vw(o,l){if(o==="change")return l}var Tw=!1;if(Cr){var cv;if(Cr){var hv="oninput"in document;if(!hv){var Ew=document.createElement("div");Ew.setAttribute("oninput","return;"),hv=typeof Ew.oninput=="function"}cv=hv}else cv=!1;Tw=cv&&(!document.documentMode||9<document.documentMode)}function bw(){Wc&&(Wc.detachEvent("onpropertychange",_w),Yc=Wc=null)}function _w(o){if(o.propertyName==="value"&&Wd(Yc)){var l=[];yw(l,Yc,o,Ar(o)),eo(x3,l)}}function R3(o,l,c){o==="focusin"?(bw(),Wc=l,Yc=c,Wc.attachEvent("onpropertychange",_w)):o==="focusout"&&bw()}function k3(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Wd(Yc)}function I3(o,l){if(o==="click")return Wd(l)}function M3(o,l){if(o==="input"||o==="change")return Wd(l)}function D3(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var lr=typeof Object.is=="function"?Object.is:D3;function Qc(o,l){if(lr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),d=Object.keys(l);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!jt.call(l,y)||!lr(o[y],l[y]))return!1}return!0}function Sw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ww(o,l){var c=Sw(o);o=0;for(var d;c;){if(c.nodeType===3){if(d=o+c.textContent.length,o<=l&&d>=l)return{node:c,offset:l-o};o=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Sw(c)}}function Aw(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Aw(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Cw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=ki(o.document);l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=ki(o.document)}return l}function fv(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var N3=Cr&&"documentMode"in document&&11>=document.documentMode,eu=null,dv=null,Xc=null,pv=!1;function xw(o,l,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;pv||eu==null||eu!==ki(d)||(d=eu,"selectionStart"in d&&fv(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Xc&&Qc(Xc,d)||(Xc=d,d=Vp(dv,"onSelect"),0<d.length&&(l=new Di("onSelect","select",null,l,c),o.push({event:l,listeners:d}),l.target=eu)))}function Ba(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var tu={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},mv={},Rw={};Cr&&(Rw=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function Ua(o){if(mv[o])return mv[o];if(!tu[o])return o;var l=tu[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in Rw)return mv[o]=l[c];return o}var kw=Ua("animationend"),Iw=Ua("animationiteration"),Mw=Ua("animationstart"),O3=Ua("transitionrun"),P3=Ua("transitionstart"),V3=Ua("transitioncancel"),Dw=Ua("transitionend"),Nw=new Map,gv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gv.push("scrollEnd");function ti(o,l){Nw.set(o,l),xi(l,[o])}var Yd=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Rr=[],nu=0,yv=0;function Qd(){for(var o=nu,l=yv=nu=0;l<o;){var c=Rr[l];Rr[l++]=null;var d=Rr[l];Rr[l++]=null;var y=Rr[l];Rr[l++]=null;var T=Rr[l];if(Rr[l++]=null,d!==null&&y!==null){var A=d.pending;A===null?y.next=y:(y.next=A.next,A.next=y),d.pending=y}T!==0&&Ow(c,y,T)}}function Xd(o,l,c,d){Rr[nu++]=o,Rr[nu++]=l,Rr[nu++]=c,Rr[nu++]=d,yv|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function vv(o,l,c,d){return Xd(o,l,c,d),Jd(o)}function za(o,l){return Xd(o,null,null,l),Jd(o)}function Ow(o,l,c){o.lanes|=c;var d=o.alternate;d!==null&&(d.lanes|=c);for(var y=!1,T=o.return;T!==null;)T.childLanes|=c,d=T.alternate,d!==null&&(d.childLanes|=c),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(y=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,y&&l!==null&&(y=31-Pt(c),o=T.hiddenUpdates,d=o[y],d===null?o[y]=[l]:d.push(l),l.lane=c|536870912),T):null}function Jd(o){if(50<Th)throw Th=0,x0=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var ru={};function L3(o,l,c,d){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(o,l,c,d){return new L3(o,l,c,d)}function Tv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function cs(o,l){var c=o.alternate;return c===null?(c=ur(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function Pw(o,l){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,l=c.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Zd(o,l,c,d,y,T){var A=0;if(d=o,typeof o=="function")Tv(o)&&(A=1);else if(typeof o=="string")A=F4(o,c,me.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case D:return o=ur(31,c,l,y),o.elementType=D,o.lanes=T,o;case S:return ja(c.children,y,T,l);case w:A=8,y|=24;break;case x:return o=ur(12,c,l,y|2),o.elementType=x,o.lanes=T,o;case F:return o=ur(13,c,l,y),o.elementType=F,o.lanes=T,o;case Z:return o=ur(19,c,l,y),o.elementType=Z,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case V:A=10;break e;case N:A=9;break e;case q:A=11;break e;case I:A=14;break e;case k:A=16,d=null;break e}A=29,c=Error(r(130,o===null?"null":typeof o,"")),d=null}return l=ur(A,c,l,y),l.elementType=o,l.type=d,l.lanes=T,l}function ja(o,l,c,d){return o=ur(7,o,d,l),o.lanes=c,o}function Ev(o,l,c){return o=ur(6,o,null,l),o.lanes=c,o}function Vw(o){var l=ur(18,null,null,0);return l.stateNode=o,l}function bv(o,l,c){return l=ur(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var Lw=new WeakMap;function kr(o,l){if(typeof o=="object"&&o!==null){var c=Lw.get(o);return c!==void 0?c:(l={value:o,source:l,stack:Rc(l)},Lw.set(o,l),l)}return{value:o,source:l,stack:Rc(l)}}var iu=[],su=0,ep=null,Jc=0,Ir=[],Mr=0,io=null,Vi=1,Li="";function hs(o,l){iu[su++]=Jc,iu[su++]=ep,ep=o,Jc=l}function Bw(o,l,c){Ir[Mr++]=Vi,Ir[Mr++]=Li,Ir[Mr++]=io,io=o;var d=Vi;o=Li;var y=32-Pt(d)-1;d&=~(1<<y),c+=1;var T=32-Pt(l)+y;if(30<T){var A=y-y%5;T=(d&(1<<A)-1).toString(32),d>>=A,y-=A,Vi=1<<32-Pt(l)+y|c<<y|d,Li=T+o}else Vi=1<<T|c<<y|d,Li=o}function _v(o){o.return!==null&&(hs(o,1),Bw(o,1,0))}function Sv(o){for(;o===ep;)ep=iu[--su],iu[su]=null,Jc=iu[--su],iu[su]=null;for(;o===io;)io=Ir[--Mr],Ir[Mr]=null,Li=Ir[--Mr],Ir[Mr]=null,Vi=Ir[--Mr],Ir[Mr]=null}function Uw(o,l){Ir[Mr++]=Vi,Ir[Mr++]=Li,Ir[Mr++]=io,Vi=l.id,Li=l.overflow,io=o}var Tn=null,yt=null,Ye=!1,so=null,Dr=!1,wv=Error(r(519));function oo(o){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zc(kr(l,o)),wv}function zw(o){var l=o.stateNode,c=o.type,d=o.memoizedProps;switch(l[Ht]=o,l[un]=d,c){case"dialog":Fe("cancel",l),Fe("close",l);break;case"iframe":case"object":case"embed":Fe("load",l);break;case"video":case"audio":for(c=0;c<bh.length;c++)Fe(bh[c],l);break;case"source":Fe("error",l);break;case"img":case"image":case"link":Fe("error",l),Fe("load",l);break;case"details":Fe("toggle",l);break;case"input":Fe("invalid",l),Nd(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Fe("invalid",l);break;case"textarea":Fe("invalid",l),Xs(l,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||d.suppressHydrationWarning===!0||rC(l.textContent,c)?(d.popover!=null&&(Fe("beforetoggle",l),Fe("toggle",l)),d.onScroll!=null&&Fe("scroll",l),d.onScrollEnd!=null&&Fe("scrollend",l),d.onClick!=null&&(l.onclick=Qr),l=!0):l=!1,l||oo(o,!0)}function jw(o){for(Tn=o.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:Tn=Tn.return}}function ou(o){if(o!==Tn)return!1;if(!Ye)return jw(o),Ye=!0,!1;var l=o.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||F0(o.type,o.memoizedProps)),c=!c),c&&yt&&oo(o),jw(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));yt=fC(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));yt=fC(o)}else l===27?(l=yt,bo(o.type)?(o=K0,K0=null,yt=o):yt=l):yt=Tn?Or(o.stateNode.nextSibling):null;return!0}function Fa(){yt=Tn=null,Ye=!1}function Av(){var o=so;return o!==null&&(er===null?er=o:er.push.apply(er,o),so=null),o}function Zc(o){so===null?so=[o]:so.push(o)}var Cv=j(null),Ha=null,fs=null;function ao(o,l,c){fe(Cv,l._currentValue),l._currentValue=c}function ds(o){o._currentValue=Cv.current,se(Cv)}function xv(o,l,c){for(;o!==null;){var d=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),o===c)break;o=o.return}}function Rv(o,l,c,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var T=y.dependencies;if(T!==null){var A=y.child;T=T.firstContext;e:for(;T!==null;){var R=T;T=y;for(var L=0;L<l.length;L++)if(R.context===l[L]){T.lanes|=c,R=T.alternate,R!==null&&(R.lanes|=c),xv(T.return,c,o),d||(A=null);break e}T=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(r(341));A.lanes|=c,T=A.alternate,T!==null&&(T.lanes|=c),xv(A,c,o),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===o){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function au(o,l,c,d){o=null;for(var y=l,T=!1;y!==null;){if(!T){if((y.flags&524288)!==0)T=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var R=y.type;lr(y.pendingProps.value,A.value)||(o!==null?o.push(R):o=[R])}}else if(y===Qe.current){if(A=y.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Ch):o=[Ch])}y=y.return}o!==null&&Rv(l,o,c,d),l.flags|=262144}function tp(o){for(o=o.firstContext;o!==null;){if(!lr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function qa(o){Ha=o,fs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function En(o){return Fw(Ha,o)}function np(o,l){return Ha===null&&qa(o),Fw(o,l)}function Fw(o,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},fs===null){if(o===null)throw Error(r(308));fs=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else fs=fs.next=l;return c}var B3=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(c,d){o.push(d)}};this.abort=function(){l.aborted=!0,o.forEach(function(c){return c()})}},U3=n.unstable_scheduleCallback,z3=n.unstable_NormalPriority,Gt={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kv(){return{controller:new B3,data:new Map,refCount:0}}function eh(o){o.refCount--,o.refCount===0&&U3(z3,function(){o.controller.abort()})}var th=null,Iv=0,lu=0,uu=null;function j3(o,l){if(th===null){var c=th=[];Iv=0,lu=N0(),uu={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Iv++,l.then(Hw,Hw),l}function Hw(){if(--Iv===0&&th!==null){uu!==null&&(uu.status="fulfilled");var o=th;th=null,lu=0,uu=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function F3(o,l){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return o.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<c.length;y++)(0,c[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var qw=ee.S;ee.S=function(o,l){xA=Un(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&j3(o,l),qw!==null&&qw(o,l)};var $a=j(null);function Mv(){var o=$a.current;return o!==null?o:dt.pooledCache}function rp(o,l){l===null?fe($a,$a.current):fe($a,l.pool)}function $w(){var o=Mv();return o===null?null:{parent:Gt._currentValue,pool:o}}var cu=Error(r(460)),Dv=Error(r(474)),ip=Error(r(542)),sp={then:function(){}};function Gw(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Kw(o,l,c){switch(c=o[c],c===void 0?o.push(l):c!==l&&(l.then(Qr,Qr),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Yw(o),o;default:if(typeof l.status=="string")l.then(Qr,Qr);else{if(o=dt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Yw(o),o}throw Ka=l,cu}}function Ga(o){try{var l=o._init;return l(o._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ka=c,cu):c}}var Ka=null;function Ww(){if(Ka===null)throw Error(r(459));var o=Ka;return Ka=null,o}function Yw(o){if(o===cu||o===ip)throw Error(r(483))}var hu=null,nh=0;function op(o){var l=nh;return nh+=1,hu===null&&(hu=[]),Kw(hu,o,l)}function rh(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function ap(o,l){throw l.$$typeof===v?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function Qw(o){function l(G,z){if(o){var W=G.deletions;W===null?(G.deletions=[z],G.flags|=16):W.push(z)}}function c(G,z){if(!o)return null;for(;z!==null;)l(G,z),z=z.sibling;return null}function d(G){for(var z=new Map;G!==null;)G.key!==null?z.set(G.key,G):z.set(G.index,G),G=G.sibling;return z}function y(G,z){return G=cs(G,z),G.index=0,G.sibling=null,G}function T(G,z,W){return G.index=W,o?(W=G.alternate,W!==null?(W=W.index,W<z?(G.flags|=67108866,z):W):(G.flags|=67108866,z)):(G.flags|=1048576,z)}function A(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function R(G,z,W,re){return z===null||z.tag!==6?(z=Ev(W,G.mode,re),z.return=G,z):(z=y(z,W),z.return=G,z)}function L(G,z,W,re){var _e=W.type;return _e===S?te(G,z,W.props.children,re,W.key):z!==null&&(z.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===k&&Ga(_e)===z.type)?(z=y(z,W.props),rh(z,W),z.return=G,z):(z=Zd(W.type,W.key,W.props,null,G.mode,re),rh(z,W),z.return=G,z)}function Y(G,z,W,re){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=bv(W,G.mode,re),z.return=G,z):(z=y(z,W.children||[]),z.return=G,z)}function te(G,z,W,re,_e){return z===null||z.tag!==7?(z=ja(W,G.mode,re,_e),z.return=G,z):(z=y(z,W),z.return=G,z)}function ie(G,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Ev(""+z,G.mode,W),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case E:return W=Zd(z.type,z.key,z.props,null,G.mode,W),rh(W,z),W.return=G,W;case b:return z=bv(z,G.mode,W),z.return=G,z;case k:return z=Ga(z),ie(G,z,W)}if(Ce(z)||H(z))return z=ja(z,G.mode,W,null),z.return=G,z;if(typeof z.then=="function")return ie(G,op(z),W);if(z.$$typeof===V)return ie(G,np(G,z),W);ap(G,z)}return null}function Q(G,z,W,re){var _e=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return _e!==null?null:R(G,z,""+W,re);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return W.key===_e?L(G,z,W,re):null;case b:return W.key===_e?Y(G,z,W,re):null;case k:return W=Ga(W),Q(G,z,W,re)}if(Ce(W)||H(W))return _e!==null?null:te(G,z,W,re,null);if(typeof W.then=="function")return Q(G,z,op(W),re);if(W.$$typeof===V)return Q(G,z,np(G,W),re);ap(G,W)}return null}function J(G,z,W,re,_e){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(W)||null,R(z,G,""+re,_e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case E:return G=G.get(re.key===null?W:re.key)||null,L(z,G,re,_e);case b:return G=G.get(re.key===null?W:re.key)||null,Y(z,G,re,_e);case k:return re=Ga(re),J(G,z,W,re,_e)}if(Ce(re)||H(re))return G=G.get(W)||null,te(z,G,re,_e,null);if(typeof re.then=="function")return J(G,z,W,op(re),_e);if(re.$$typeof===V)return J(G,z,W,np(z,re),_e);ap(z,re)}return null}function ye(G,z,W,re){for(var _e=null,Ze=null,Te=z,Be=z=0,$e=null;Te!==null&&Be<W.length;Be++){Te.index>Be?($e=Te,Te=null):$e=Te.sibling;var et=Q(G,Te,W[Be],re);if(et===null){Te===null&&(Te=$e);break}o&&Te&&et.alternate===null&&l(G,Te),z=T(et,z,Be),Ze===null?_e=et:Ze.sibling=et,Ze=et,Te=$e}if(Be===W.length)return c(G,Te),Ye&&hs(G,Be),_e;if(Te===null){for(;Be<W.length;Be++)Te=ie(G,W[Be],re),Te!==null&&(z=T(Te,z,Be),Ze===null?_e=Te:Ze.sibling=Te,Ze=Te);return Ye&&hs(G,Be),_e}for(Te=d(Te);Be<W.length;Be++)$e=J(Te,G,Be,W[Be],re),$e!==null&&(o&&$e.alternate!==null&&Te.delete($e.key===null?Be:$e.key),z=T($e,z,Be),Ze===null?_e=$e:Ze.sibling=$e,Ze=$e);return o&&Te.forEach(function(Co){return l(G,Co)}),Ye&&hs(G,Be),_e}function Ae(G,z,W,re){if(W==null)throw Error(r(151));for(var _e=null,Ze=null,Te=z,Be=z=0,$e=null,et=W.next();Te!==null&&!et.done;Be++,et=W.next()){Te.index>Be?($e=Te,Te=null):$e=Te.sibling;var Co=Q(G,Te,et.value,re);if(Co===null){Te===null&&(Te=$e);break}o&&Te&&Co.alternate===null&&l(G,Te),z=T(Co,z,Be),Ze===null?_e=Co:Ze.sibling=Co,Ze=Co,Te=$e}if(et.done)return c(G,Te),Ye&&hs(G,Be),_e;if(Te===null){for(;!et.done;Be++,et=W.next())et=ie(G,et.value,re),et!==null&&(z=T(et,z,Be),Ze===null?_e=et:Ze.sibling=et,Ze=et);return Ye&&hs(G,Be),_e}for(Te=d(Te);!et.done;Be++,et=W.next())et=J(Te,G,Be,et.value,re),et!==null&&(o&&et.alternate!==null&&Te.delete(et.key===null?Be:et.key),z=T(et,z,Be),Ze===null?_e=et:Ze.sibling=et,Ze=et);return o&&Te.forEach(function(Z4){return l(G,Z4)}),Ye&&hs(G,Be),_e}function ct(G,z,W,re){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case E:e:{for(var _e=W.key;z!==null;){if(z.key===_e){if(_e=W.type,_e===S){if(z.tag===7){c(G,z.sibling),re=y(z,W.props.children),re.return=G,G=re;break e}}else if(z.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===k&&Ga(_e)===z.type){c(G,z.sibling),re=y(z,W.props),rh(re,W),re.return=G,G=re;break e}c(G,z);break}else l(G,z);z=z.sibling}W.type===S?(re=ja(W.props.children,G.mode,re,W.key),re.return=G,G=re):(re=Zd(W.type,W.key,W.props,null,G.mode,re),rh(re,W),re.return=G,G=re)}return A(G);case b:e:{for(_e=W.key;z!==null;){if(z.key===_e)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){c(G,z.sibling),re=y(z,W.children||[]),re.return=G,G=re;break e}else{c(G,z);break}else l(G,z);z=z.sibling}re=bv(W,G.mode,re),re.return=G,G=re}return A(G);case k:return W=Ga(W),ct(G,z,W,re)}if(Ce(W))return ye(G,z,W,re);if(H(W)){if(_e=H(W),typeof _e!="function")throw Error(r(150));return W=_e.call(W),Ae(G,z,W,re)}if(typeof W.then=="function")return ct(G,z,op(W),re);if(W.$$typeof===V)return ct(G,z,np(G,W),re);ap(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(c(G,z.sibling),re=y(z,W),re.return=G,G=re):(c(G,z),re=Ev(W,G.mode,re),re.return=G,G=re),A(G)):c(G,z)}return function(G,z,W,re){try{nh=0;var _e=ct(G,z,W,re);return hu=null,_e}catch(Te){if(Te===cu||Te===ip)throw Te;var Ze=ur(29,Te,null,G.mode);return Ze.lanes=re,Ze.return=G,Ze}}}var Wa=Qw(!0),Xw=Qw(!1),lo=!1;function Nv(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ov(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function uo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function co(o,l,c){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(nt&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=Jd(o),Ow(o,null,c),l}return Xd(o,d,l,c),Jd(o)}function ih(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var d=l.lanes;d&=o.pendingLanes,c|=d,l.lanes=c,Mc(o,c)}}function Pv(o,l){var c=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,T=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};T===null?y=T=A:T=T.next=A,c=c.next}while(c!==null);T===null?y=T=l:T=T.next=l}else y=T=l;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:d.shared,callbacks:d.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}var Vv=!1;function sh(){if(Vv){var o=uu;if(o!==null)throw o}}function oh(o,l,c,d){Vv=!1;var y=o.updateQueue;lo=!1;var T=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var L=R,Y=L.next;L.next=null,A===null?T=Y:A.next=Y,A=L;var te=o.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==A&&(R===null?te.firstBaseUpdate=Y:R.next=Y,te.lastBaseUpdate=L))}if(T!==null){var ie=y.baseState;A=0,te=Y=L=null,R=T;do{var Q=R.lane&-536870913,J=Q!==R.lane;if(J?(qe&Q)===Q:(d&Q)===Q){Q!==0&&Q===lu&&(Vv=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ye=o,Ae=R;Q=l;var ct=c;switch(Ae.tag){case 1:if(ye=Ae.payload,typeof ye=="function"){ie=ye.call(ct,ie,Q);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Ae.payload,Q=typeof ye=="function"?ye.call(ct,ie,Q):ye,Q==null)break e;ie=m({},ie,Q);break e;case 2:lo=!0}}Q=R.callback,Q!==null&&(o.flags|=64,J&&(o.flags|=8192),J=y.callbacks,J===null?y.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(Y=te=J,L=ie):te=te.next=J,A|=Q;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;J=R,R=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);te===null&&(L=ie),y.baseState=L,y.firstBaseUpdate=Y,y.lastBaseUpdate=te,T===null&&(y.shared.lanes=0),go|=A,o.lanes=A,o.memoizedState=ie}}function Jw(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function Zw(o,l){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)Jw(c[o],l)}var fu=j(null),lp=j(0);function e1(o,l){o=_s,fe(lp,o),fe(fu,l),_s=o|l.baseLanes}function Lv(){fe(lp,_s),fe(fu,fu.current)}function Bv(){_s=lp.current,se(fu),se(lp)}var cr=j(null),Nr=null;function ho(o){var l=o.alternate;fe(Lt,Lt.current&1),fe(cr,o),Nr===null&&(l===null||fu.current!==null||l.memoizedState!==null)&&(Nr=o)}function Uv(o){fe(Lt,Lt.current),fe(cr,o),Nr===null&&(Nr=o)}function t1(o){o.tag===22?(fe(Lt,Lt.current),fe(cr,o),Nr===null&&(Nr=o)):fo()}function fo(){fe(Lt,Lt.current),fe(cr,cr.current)}function hr(o){se(cr),Nr===o&&(Nr=null),se(Lt)}var Lt=j(0);function up(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||$0(c)||G0(c)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ps=0,Pe=null,lt=null,Kt=null,cp=!1,du=!1,Ya=!1,hp=0,ah=0,pu=null,H3=0;function Rt(){throw Error(r(321))}function zv(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!lr(o[c],l[c]))return!1;return!0}function jv(o,l,c,d,y,T){return ps=T,Pe=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ee.H=o===null||o.memoizedState===null?B1:n0,Ya=!1,T=c(d,y),Ya=!1,du&&(T=r1(l,c,d,y)),n1(o),T}function n1(o){ee.H=ch;var l=lt!==null&&lt.next!==null;if(ps=0,Kt=lt=Pe=null,cp=!1,ah=0,pu=null,l)throw Error(r(300));o===null||Wt||(o=o.dependencies,o!==null&&tp(o)&&(Wt=!0))}function r1(o,l,c,d){Pe=o;var y=0;do{if(du&&(pu=null),ah=0,du=!1,25<=y)throw Error(r(301));if(y+=1,Kt=lt=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}ee.H=U1,T=l(c,d)}while(du);return T}function q3(){var o=ee.H,l=o.useState()[0];return l=typeof l.then=="function"?lh(l):l,o=o.useState()[0],(lt!==null?lt.memoizedState:null)!==o&&(Pe.flags|=1024),l}function Fv(){var o=hp!==0;return hp=0,o}function Hv(o,l,c){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~c}function qv(o){if(cp){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}cp=!1}ps=0,Kt=lt=Pe=null,du=!1,ah=hp=0,pu=null}function jn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Pe.memoizedState=Kt=o:Kt=Kt.next=o,Kt}function Bt(){if(lt===null){var o=Pe.alternate;o=o!==null?o.memoizedState:null}else o=lt.next;var l=Kt===null?Pe.memoizedState:Kt.next;if(l!==null)Kt=l,lt=o;else{if(o===null)throw Pe.alternate===null?Error(r(467)):Error(r(310));lt=o,o={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Kt===null?Pe.memoizedState=Kt=o:Kt=Kt.next=o}return Kt}function fp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lh(o){var l=ah;return ah+=1,pu===null&&(pu=[]),o=Kw(pu,o,l),l=Pe,(Kt===null?l.memoizedState:Kt.next)===null&&(l=l.alternate,ee.H=l===null||l.memoizedState===null?B1:n0),o}function dp(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return lh(o);if(o.$$typeof===V)return En(o)}throw Error(r(438,String(o)))}function $v(o){var l=null,c=Pe.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var d=Pe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=fp(),Pe.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(o),d=0;d<o;d++)c[d]=B;return l.index++,c}function ms(o,l){return typeof l=="function"?l(o):l}function pp(o){var l=Bt();return Gv(l,lt,o)}function Gv(o,l,c){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=o.baseQueue,T=d.pending;if(T!==null){if(y!==null){var A=y.next;y.next=T.next,T.next=A}l.baseQueue=y=T,d.pending=null}if(T=o.baseState,y===null)o.memoizedState=T;else{l=y.next;var R=A=null,L=null,Y=l,te=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(qe&ie)===ie:(ps&ie)===ie){var Q=Y.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===lu&&(te=!0);else if((ps&Q)===Q){Y=Y.next,Q===lu&&(te=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(R=L=ie,A=T):L=L.next=ie,Pe.lanes|=Q,go|=Q;ie=Y.action,Ya&&c(T,ie),T=Y.hasEagerState?Y.eagerState:c(T,ie)}else Q={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(R=L=Q,A=T):L=L.next=Q,Pe.lanes|=ie,go|=ie;Y=Y.next}while(Y!==null&&Y!==l);if(L===null?A=T:L.next=R,!lr(T,o.memoizedState)&&(Wt=!0,te&&(c=uu,c!==null)))throw c;o.memoizedState=T,o.baseState=A,o.baseQueue=L,d.lastRenderedState=T}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function Kv(o){var l=Bt(),c=l.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var d=c.dispatch,y=c.pending,T=l.memoizedState;if(y!==null){c.pending=null;var A=y=y.next;do T=o(T,A.action),A=A.next;while(A!==y);lr(T,l.memoizedState)||(Wt=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),c.lastRenderedState=T}return[T,d]}function i1(o,l,c){var d=Pe,y=Bt(),T=Ye;if(T){if(c===void 0)throw Error(r(407));c=c()}else c=l();var A=!lr((lt||y).memoizedState,c);if(A&&(y.memoizedState=c,Wt=!0),y=y.queue,Qv(a1.bind(null,d,y,o),[o]),y.getSnapshot!==l||A||Kt!==null&&Kt.memoizedState.tag&1){if(d.flags|=2048,mu(9,{destroy:void 0},o1.bind(null,d,y,c,l),null),dt===null)throw Error(r(349));T||(ps&127)!==0||s1(d,l,c)}return c}function s1(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=Pe.updateQueue,l===null?(l=fp(),Pe.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function o1(o,l,c,d){l.value=c,l.getSnapshot=d,l1(l)&&u1(o)}function a1(o,l,c){return c(function(){l1(l)&&u1(o)})}function l1(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!lr(o,c)}catch{return!0}}function u1(o){var l=za(o,2);l!==null&&tr(l,o,2)}function Wv(o){var l=jn();if(typeof o=="function"){var c=o;if(o=c(),Ya){Sr(!0);try{c()}finally{Sr(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:o},l}function c1(o,l,c,d){return o.baseState=c,Gv(o,lt,typeof d=="function"?d:ms)}function $3(o,l,c,d,y){if(yp(o))throw Error(r(485));if(o=l.action,o!==null){var T={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){T.listeners.push(A)}};ee.T!==null?c(!0):T.isTransition=!1,d(T),c=l.pending,c===null?(T.next=l.pending=T,h1(l,T)):(T.next=c.next,l.pending=c.next=T)}}function h1(o,l){var c=l.action,d=l.payload,y=o.state;if(l.isTransition){var T=ee.T,A={};ee.T=A;try{var R=c(y,d),L=ee.S;L!==null&&L(A,R),f1(o,l,R)}catch(Y){Yv(o,l,Y)}finally{T!==null&&A.types!==null&&(T.types=A.types),ee.T=T}}else try{T=c(y,d),f1(o,l,T)}catch(Y){Yv(o,l,Y)}}function f1(o,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){d1(o,l,d)},function(d){return Yv(o,l,d)}):d1(o,l,c)}function d1(o,l,c){l.status="fulfilled",l.value=c,p1(l),o.state=c,l=o.pending,l!==null&&(c=l.next,c===l?o.pending=null:(c=c.next,l.next=c,h1(o,c)))}function Yv(o,l,c){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=c,p1(l),l=l.next;while(l!==d)}o.action=null}function p1(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function m1(o,l){return l}function g1(o,l){if(Ye){var c=dt.formState;if(c!==null){e:{var d=Pe;if(Ye){if(yt){t:{for(var y=yt,T=Dr;y.nodeType!==8;){if(!T){y=null;break t}if(y=Or(y.nextSibling),y===null){y=null;break t}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){yt=Or(y.nextSibling),d=y.data==="F!";break e}}oo(d)}d=!1}d&&(l=c[0])}}return c=jn(),c.memoizedState=c.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m1,lastRenderedState:l},c.queue=d,c=P1.bind(null,Pe,d),d.dispatch=c,d=Wv(!1),T=t0.bind(null,Pe,!1,d.queue),d=jn(),y={state:l,dispatch:null,action:o,pending:null},d.queue=y,c=$3.bind(null,Pe,y,T,c),y.dispatch=c,d.memoizedState=o,[l,c,!1]}function y1(o){var l=Bt();return v1(l,lt,o)}function v1(o,l,c){if(l=Gv(o,l,m1)[0],o=pp(ms)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=lh(l)}catch(A){throw A===cu?ip:A}else d=l;l=Bt();var y=l.queue,T=y.dispatch;return c!==l.memoizedState&&(Pe.flags|=2048,mu(9,{destroy:void 0},G3.bind(null,y,c),null)),[d,T,o]}function G3(o,l){o.action=l}function T1(o){var l=Bt(),c=lt;if(c!==null)return v1(l,c,o);Bt(),l=l.memoizedState,c=Bt();var d=c.queue.dispatch;return c.memoizedState=o,[l,d,!1]}function mu(o,l,c,d){return o={tag:o,create:c,deps:d,inst:l,next:null},l=Pe.updateQueue,l===null&&(l=fp(),Pe.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=o.next=o:(d=c.next,c.next=o,o.next=d,l.lastEffect=o),o}function E1(){return Bt().memoizedState}function mp(o,l,c,d){var y=jn();Pe.flags|=o,y.memoizedState=mu(1|l,{destroy:void 0},c,d===void 0?null:d)}function gp(o,l,c,d){var y=Bt();d=d===void 0?null:d;var T=y.memoizedState.inst;lt!==null&&d!==null&&zv(d,lt.memoizedState.deps)?y.memoizedState=mu(l,T,c,d):(Pe.flags|=o,y.memoizedState=mu(1|l,T,c,d))}function b1(o,l){mp(8390656,8,o,l)}function Qv(o,l){gp(2048,8,o,l)}function K3(o){Pe.flags|=4;var l=Pe.updateQueue;if(l===null)l=fp(),Pe.updateQueue=l,l.events=[o];else{var c=l.events;c===null?l.events=[o]:c.push(o)}}function _1(o){var l=Bt().memoizedState;return K3({ref:l,nextImpl:o}),function(){if((nt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function S1(o,l){return gp(4,2,o,l)}function w1(o,l){return gp(4,4,o,l)}function A1(o,l){if(typeof l=="function"){o=o();var c=l(o);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function C1(o,l,c){c=c!=null?c.concat([o]):null,gp(4,4,A1.bind(null,l,o),c)}function Xv(){}function x1(o,l){var c=Bt();l=l===void 0?null:l;var d=c.memoizedState;return l!==null&&zv(l,d[1])?d[0]:(c.memoizedState=[o,l],o)}function R1(o,l){var c=Bt();l=l===void 0?null:l;var d=c.memoizedState;if(l!==null&&zv(l,d[1]))return d[0];if(d=o(),Ya){Sr(!0);try{o()}finally{Sr(!1)}}return c.memoizedState=[d,l],d}function Jv(o,l,c){return c===void 0||(ps&1073741824)!==0&&(qe&261930)===0?o.memoizedState=l:(o.memoizedState=c,o=kA(),Pe.lanes|=o,go|=o,c)}function k1(o,l,c,d){return lr(c,l)?c:fu.current!==null?(o=Jv(o,c,d),lr(o,l)||(Wt=!0),o):(ps&42)===0||(ps&1073741824)!==0&&(qe&261930)===0?(Wt=!0,o.memoizedState=c):(o=kA(),Pe.lanes|=o,go|=o,l)}function I1(o,l,c,d,y){var T=ae.p;ae.p=T!==0&&8>T?T:8;var A=ee.T,R={};ee.T=R,t0(o,!1,l,c);try{var L=y(),Y=ee.S;if(Y!==null&&Y(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=F3(L,d);uh(o,l,te,pr(o))}else uh(o,l,d,pr(o))}catch(ie){uh(o,l,{then:function(){},status:"rejected",reason:ie},pr())}finally{ae.p=T,A!==null&&R.types!==null&&(A.types=R.types),ee.T=A}}function W3(){}function Zv(o,l,c,d){if(o.tag!==5)throw Error(r(476));var y=M1(o).queue;I1(o,y,l,ge,c===null?W3:function(){return D1(o),c(d)})}function M1(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:ge},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:c},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function D1(o){var l=M1(o);l.next===null&&(l=o.alternate.memoizedState),uh(o,l.next.queue,{},pr())}function e0(){return En(Ch)}function N1(){return Bt().memoizedState}function O1(){return Bt().memoizedState}function Y3(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var c=pr();o=uo(c);var d=co(l,o,c);d!==null&&(tr(d,l,c),ih(d,l,c)),l={cache:kv()},o.payload=l;return}l=l.return}}function Q3(o,l,c){var d=pr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},yp(o)?V1(l,c):(c=vv(o,l,c,d),c!==null&&(tr(c,o,d),L1(c,l,d)))}function P1(o,l,c){var d=pr();uh(o,l,c,d)}function uh(o,l,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(yp(o))V1(l,y);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var A=l.lastRenderedState,R=T(A,c);if(y.hasEagerState=!0,y.eagerState=R,lr(R,A))return Xd(o,l,y,0),dt===null&&Qd(),!1}catch{}if(c=vv(o,l,y,d),c!==null)return tr(c,o,d),L1(c,l,d),!0}return!1}function t0(o,l,c,d){if(d={lane:2,revertLane:N0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},yp(o)){if(l)throw Error(r(479))}else l=vv(o,c,d,2),l!==null&&tr(l,o,2)}function yp(o){var l=o.alternate;return o===Pe||l!==null&&l===Pe}function V1(o,l){du=cp=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function L1(o,l,c){if((c&4194048)!==0){var d=l.lanes;d&=o.pendingLanes,c|=d,l.lanes=c,Mc(o,c)}}var ch={readContext:En,use:dp,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};ch.useEffectEvent=Rt;var B1={readContext:En,use:dp,useCallback:function(o,l){return jn().memoizedState=[o,l===void 0?null:l],o},useContext:En,useEffect:b1,useImperativeHandle:function(o,l,c){c=c!=null?c.concat([o]):null,mp(4194308,4,A1.bind(null,l,o),c)},useLayoutEffect:function(o,l){return mp(4194308,4,o,l)},useInsertionEffect:function(o,l){mp(4,2,o,l)},useMemo:function(o,l){var c=jn();l=l===void 0?null:l;var d=o();if(Ya){Sr(!0);try{o()}finally{Sr(!1)}}return c.memoizedState=[d,l],d},useReducer:function(o,l,c){var d=jn();if(c!==void 0){var y=c(l);if(Ya){Sr(!0);try{c(l)}finally{Sr(!1)}}}else y=l;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=Q3.bind(null,Pe,o),[d.memoizedState,o]},useRef:function(o){var l=jn();return o={current:o},l.memoizedState=o},useState:function(o){o=Wv(o);var l=o.queue,c=P1.bind(null,Pe,l);return l.dispatch=c,[o.memoizedState,c]},useDebugValue:Xv,useDeferredValue:function(o,l){var c=jn();return Jv(c,o,l)},useTransition:function(){var o=Wv(!1);return o=I1.bind(null,Pe,o.queue,!0,!1),jn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,c){var d=Pe,y=jn();if(Ye){if(c===void 0)throw Error(r(407));c=c()}else{if(c=l(),dt===null)throw Error(r(349));(qe&127)!==0||s1(d,l,c)}y.memoizedState=c;var T={value:c,getSnapshot:l};return y.queue=T,b1(a1.bind(null,d,T,o),[o]),d.flags|=2048,mu(9,{destroy:void 0},o1.bind(null,d,T,c,l),null),c},useId:function(){var o=jn(),l=dt.identifierPrefix;if(Ye){var c=Li,d=Vi;c=(d&~(1<<32-Pt(d)-1)).toString(32)+c,l="_"+l+"R_"+c,c=hp++,0<c&&(l+="H"+c.toString(32)),l+="_"}else c=H3++,l="_"+l+"r_"+c.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:e0,useFormState:g1,useActionState:g1,useOptimistic:function(o){var l=jn();l.memoizedState=l.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=t0.bind(null,Pe,!0,c),c.dispatch=l,[o,l]},useMemoCache:$v,useCacheRefresh:function(){return jn().memoizedState=Y3.bind(null,Pe)},useEffectEvent:function(o){var l=jn(),c={impl:o};return l.memoizedState=c,function(){if((nt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},n0={readContext:En,use:dp,useCallback:x1,useContext:En,useEffect:Qv,useImperativeHandle:C1,useInsertionEffect:S1,useLayoutEffect:w1,useMemo:R1,useReducer:pp,useRef:E1,useState:function(){return pp(ms)},useDebugValue:Xv,useDeferredValue:function(o,l){var c=Bt();return k1(c,lt.memoizedState,o,l)},useTransition:function(){var o=pp(ms)[0],l=Bt().memoizedState;return[typeof o=="boolean"?o:lh(o),l]},useSyncExternalStore:i1,useId:N1,useHostTransitionStatus:e0,useFormState:y1,useActionState:y1,useOptimistic:function(o,l){var c=Bt();return c1(c,lt,o,l)},useMemoCache:$v,useCacheRefresh:O1};n0.useEffectEvent=_1;var U1={readContext:En,use:dp,useCallback:x1,useContext:En,useEffect:Qv,useImperativeHandle:C1,useInsertionEffect:S1,useLayoutEffect:w1,useMemo:R1,useReducer:Kv,useRef:E1,useState:function(){return Kv(ms)},useDebugValue:Xv,useDeferredValue:function(o,l){var c=Bt();return lt===null?Jv(c,o,l):k1(c,lt.memoizedState,o,l)},useTransition:function(){var o=Kv(ms)[0],l=Bt().memoizedState;return[typeof o=="boolean"?o:lh(o),l]},useSyncExternalStore:i1,useId:N1,useHostTransitionStatus:e0,useFormState:T1,useActionState:T1,useOptimistic:function(o,l){var c=Bt();return lt!==null?c1(c,lt,o,l):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:$v,useCacheRefresh:O1};U1.useEffectEvent=_1;function r0(o,l,c,d){l=o.memoizedState,c=c(d,l),c=c==null?l:m({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var i0={enqueueSetState:function(o,l,c){o=o._reactInternals;var d=pr(),y=uo(d);y.payload=l,c!=null&&(y.callback=c),l=co(o,y,d),l!==null&&(tr(l,o,d),ih(l,o,d))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var d=pr(),y=uo(d);y.tag=1,y.payload=l,c!=null&&(y.callback=c),l=co(o,y,d),l!==null&&(tr(l,o,d),ih(l,o,d))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=pr(),d=uo(c);d.tag=2,l!=null&&(d.callback=l),l=co(o,d,c),l!==null&&(tr(l,o,c),ih(l,o,c))}};function z1(o,l,c,d,y,T,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,T,A):l.prototype&&l.prototype.isPureReactComponent?!Qc(c,d)||!Qc(y,T):!0}function j1(o,l,c,d){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,d),l.state!==o&&i0.enqueueReplaceState(l,l.state,null)}function Qa(o,l){var c=l;if("ref"in l){c={};for(var d in l)d!=="ref"&&(c[d]=l[d])}if(o=o.defaultProps){c===l&&(c=m({},c));for(var y in o)c[y]===void 0&&(c[y]=o[y])}return c}function F1(o){Yd(o)}function H1(o){console.error(o)}function q1(o){Yd(o)}function vp(o,l){try{var c=o.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function $1(o,l,c){try{var d=o.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function s0(o,l,c){return c=uo(c),c.tag=3,c.payload={element:null},c.callback=function(){vp(o,l)},c}function G1(o){return o=uo(o),o.tag=3,o}function K1(o,l,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var T=d.value;o.payload=function(){return y(T)},o.callback=function(){$1(l,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){$1(l,c,d),typeof y!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function X3(o,l,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=c.alternate,l!==null&&au(l,c,y,!0),c=cr.current,c!==null){switch(c.tag){case 31:case 13:return Nr===null?Ip():c.alternate===null&&kt===0&&(kt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===sp?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([d]):l.add(d),I0(o,d,y)),!1;case 22:return c.flags|=65536,d===sp?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([d]):c.add(d)),I0(o,d,y)),!1}throw Error(r(435,c.tag))}return I0(o,d,y),Ip(),!1}if(Ye)return l=cr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==wv&&(o=Error(r(422),{cause:d}),Zc(kr(o,c)))):(d!==wv&&(l=Error(r(423),{cause:d}),Zc(kr(l,c))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=kr(d,c),y=s0(o.stateNode,d,y),Pv(o,y),kt!==4&&(kt=2)),!1;var T=Error(r(520),{cause:d});if(T=kr(T,c),vh===null?vh=[T]:vh.push(T),kt!==4&&(kt=2),l===null)return!0;d=kr(d,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,o=y&-y,c.lanes|=o,o=s0(c.stateNode,d,o),Pv(c,o),!1;case 1:if(l=c.type,T=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(yo===null||!yo.has(T))))return c.flags|=65536,y&=-y,c.lanes|=y,y=G1(y),K1(y,o,c,d),Pv(c,y),!1}c=c.return}while(c!==null);return!1}var o0=Error(r(461)),Wt=!1;function bn(o,l,c,d){l.child=o===null?Xw(l,null,c,d):Wa(l,o.child,c,d)}function W1(o,l,c,d,y){c=c.render;var T=l.ref;if("ref"in d){var A={};for(var R in d)R!=="ref"&&(A[R]=d[R])}else A=d;return qa(l),d=jv(o,l,c,A,T,y),R=Fv(),o!==null&&!Wt?(Hv(o,l,y),gs(o,l,y)):(Ye&&R&&_v(l),l.flags|=1,bn(o,l,d,y),l.child)}function Y1(o,l,c,d,y){if(o===null){var T=c.type;return typeof T=="function"&&!Tv(T)&&T.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=T,Q1(o,l,T,d,y)):(o=Zd(c.type,null,d,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(T=o.child,!p0(o,y)){var A=T.memoizedProps;if(c=c.compare,c=c!==null?c:Qc,c(A,d)&&o.ref===l.ref)return gs(o,l,y)}return l.flags|=1,o=cs(T,d),o.ref=l.ref,o.return=l,l.child=o}function Q1(o,l,c,d,y){if(o!==null){var T=o.memoizedProps;if(Qc(T,d)&&o.ref===l.ref)if(Wt=!1,l.pendingProps=d=T,p0(o,y))(o.flags&131072)!==0&&(Wt=!0);else return l.lanes=o.lanes,gs(o,l,y)}return a0(o,l,c,d,y)}function X1(o,l,c,d){var y=d.children,T=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((l.flags&128)!==0){if(T=T!==null?T.baseLanes|c:c,o!==null){for(d=l.child=o.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~T}else d=0,l.child=null;return J1(o,l,T,c,d)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&rp(l,T!==null?T.cachePool:null),T!==null?e1(l,T):Lv(),t1(l);else return d=l.lanes=536870912,J1(o,l,T!==null?T.baseLanes|c:c,c,d)}else T!==null?(rp(l,T.cachePool),e1(l,T),fo(),l.memoizedState=null):(o!==null&&rp(l,null),Lv(),fo());return bn(o,l,y,c),l.child}function hh(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function J1(o,l,c,d,y){var T=Mv();return T=T===null?null:{parent:Gt._currentValue,pool:T},l.memoizedState={baseLanes:c,cachePool:T},o!==null&&rp(l,null),Lv(),t1(l),o!==null&&au(o,l,d,!0),l.childLanes=y,null}function Tp(o,l){return l=bp({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function Z1(o,l,c){return Wa(l,o.child,null,c),o=Tp(l,l.pendingProps),o.flags|=2,hr(l),l.memoizedState=null,o}function J3(o,l,c){var d=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(Ye){if(d.mode==="hidden")return o=Tp(l,d),l.lanes=536870912,hh(null,o);if(Uv(l),(o=yt)?(o=hC(o,Dr),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:io!==null?{id:Vi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},c=Vw(o),c.return=l,l.child=c,Tn=l,yt=null)):o=null,o===null)throw oo(l);return l.lanes=536870912,null}return Tp(l,d)}var T=o.memoizedState;if(T!==null){var A=T.dehydrated;if(Uv(l),y)if(l.flags&256)l.flags&=-257,l=Z1(o,l,c);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(r(558));else if(Wt||au(o,l,c,!1),y=(c&o.childLanes)!==0,Wt||y){if(d=dt,d!==null&&(A=Dc(d,c),A!==0&&A!==T.retryLane))throw T.retryLane=A,za(o,A),tr(d,o,A),o0;Ip(),l=Z1(o,l,c)}else o=T.treeContext,yt=Or(A.nextSibling),Tn=l,Ye=!0,so=null,Dr=!1,o!==null&&Uw(l,o),l=Tp(l,d),l.flags|=4096;return l}return o=cs(o.child,{mode:d.mode,children:d.children}),o.ref=l.ref,l.child=o,o.return=l,o}function Ep(o,l){var c=l.ref;if(c===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(o===null||o.ref!==c)&&(l.flags|=4194816)}}function a0(o,l,c,d,y){return qa(l),c=jv(o,l,c,d,void 0,y),d=Fv(),o!==null&&!Wt?(Hv(o,l,y),gs(o,l,y)):(Ye&&d&&_v(l),l.flags|=1,bn(o,l,c,y),l.child)}function eA(o,l,c,d,y,T){return qa(l),l.updateQueue=null,c=r1(l,d,c,y),n1(o),d=Fv(),o!==null&&!Wt?(Hv(o,l,T),gs(o,l,T)):(Ye&&d&&_v(l),l.flags|=1,bn(o,l,c,T),l.child)}function tA(o,l,c,d,y){if(qa(l),l.stateNode===null){var T=ru,A=c.contextType;typeof A=="object"&&A!==null&&(T=En(A)),T=new c(d,T),l.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=i0,l.stateNode=T,T._reactInternals=l,T=l.stateNode,T.props=d,T.state=l.memoizedState,T.refs={},Nv(l),A=c.contextType,T.context=typeof A=="object"&&A!==null?En(A):ru,T.state=l.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(r0(l,c,A,d),T.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(A=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),A!==T.state&&i0.enqueueReplaceState(T,T.state,null),oh(l,d,T,y),sh(),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(o===null){T=l.stateNode;var R=l.memoizedProps,L=Qa(c,R);T.props=L;var Y=T.context,te=c.contextType;A=ru,typeof te=="object"&&te!==null&&(A=En(te));var ie=c.getDerivedStateFromProps;te=typeof ie=="function"||typeof T.getSnapshotBeforeUpdate=="function",R=l.pendingProps!==R,te||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R||Y!==A)&&j1(l,T,d,A),lo=!1;var Q=l.memoizedState;T.state=Q,oh(l,d,T,y),sh(),Y=l.memoizedState,R||Q!==Y||lo?(typeof ie=="function"&&(r0(l,c,ie,d),Y=l.memoizedState),(L=lo||z1(l,c,L,d,Q,Y,A))?(te||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=Y),T.props=d,T.state=Y,T.context=A,d=L):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{T=l.stateNode,Ov(o,l),A=l.memoizedProps,te=Qa(c,A),T.props=te,ie=l.pendingProps,Q=T.context,Y=c.contextType,L=ru,typeof Y=="object"&&Y!==null&&(L=En(Y)),R=c.getDerivedStateFromProps,(Y=typeof R=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(A!==ie||Q!==L)&&j1(l,T,d,L),lo=!1,Q=l.memoizedState,T.state=Q,oh(l,d,T,y),sh();var J=l.memoizedState;A!==ie||Q!==J||lo||o!==null&&o.dependencies!==null&&tp(o.dependencies)?(typeof R=="function"&&(r0(l,c,R,d),J=l.memoizedState),(te=lo||z1(l,c,te,d,Q,J,L)||o!==null&&o.dependencies!==null&&tp(o.dependencies))?(Y||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,J,L),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,J,L)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=J),T.props=d,T.state=J,T.context=L,d=te):(typeof T.componentDidUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(l.flags|=1024),d=!1)}return T=d,Ep(o,l),d=(l.flags&128)!==0,T||d?(T=l.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:T.render(),l.flags|=1,o!==null&&d?(l.child=Wa(l,o.child,null,y),l.child=Wa(l,null,c,y)):bn(o,l,c,y),l.memoizedState=T.state,o=l.child):o=gs(o,l,y),o}function nA(o,l,c,d){return Fa(),l.flags|=256,bn(o,l,c,d),l.child}var l0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function u0(o){return{baseLanes:o,cachePool:$w()}}function c0(o,l,c){return o=o!==null?o.childLanes&~c:0,l&&(o|=dr),o}function rA(o,l,c){var d=l.pendingProps,y=!1,T=(l.flags&128)!==0,A;if((A=T)||(A=o!==null&&o.memoizedState===null?!1:(Lt.current&2)!==0),A&&(y=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,o===null){if(Ye){if(y?ho(l):fo(),(o=yt)?(o=hC(o,Dr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:io!==null?{id:Vi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},c=Vw(o),c.return=l,l.child=c,Tn=l,yt=null)):o=null,o===null)throw oo(l);return G0(o)?l.lanes=32:l.lanes=536870912,null}var R=d.children;return d=d.fallback,y?(fo(),y=l.mode,R=bp({mode:"hidden",children:R},y),d=ja(d,y,c,null),R.return=l,d.return=l,R.sibling=d,l.child=R,d=l.child,d.memoizedState=u0(c),d.childLanes=c0(o,A,c),l.memoizedState=l0,hh(null,d)):(ho(l),h0(l,R))}var L=o.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(T)l.flags&256?(ho(l),l.flags&=-257,l=f0(o,l,c)):l.memoizedState!==null?(fo(),l.child=o.child,l.flags|=128,l=null):(fo(),R=d.fallback,y=l.mode,d=bp({mode:"visible",children:d.children},y),R=ja(R,y,c,null),R.flags|=2,d.return=l,R.return=l,d.sibling=R,l.child=d,Wa(l,o.child,null,c),d=l.child,d.memoizedState=u0(c),d.childLanes=c0(o,A,c),l.memoizedState=l0,l=hh(null,d));else if(ho(l),G0(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var Y=A.dgst;A=Y,d=Error(r(419)),d.stack="",d.digest=A,Zc({value:d,source:null,stack:null}),l=f0(o,l,c)}else if(Wt||au(o,l,c,!1),A=(c&o.childLanes)!==0,Wt||A){if(A=dt,A!==null&&(d=Dc(A,c),d!==0&&d!==L.retryLane))throw L.retryLane=d,za(o,d),tr(A,o,d),o0;$0(R)||Ip(),l=f0(o,l,c)}else $0(R)?(l.flags|=192,l.child=o.child,l=null):(o=L.treeContext,yt=Or(R.nextSibling),Tn=l,Ye=!0,so=null,Dr=!1,o!==null&&Uw(l,o),l=h0(l,d.children),l.flags|=4096);return l}return y?(fo(),R=d.fallback,y=l.mode,L=o.child,Y=L.sibling,d=cs(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&65011712,Y!==null?R=cs(Y,R):(R=ja(R,y,c,null),R.flags|=2),R.return=l,d.return=l,d.sibling=R,l.child=d,hh(null,d),d=l.child,R=o.child.memoizedState,R===null?R=u0(c):(y=R.cachePool,y!==null?(L=Gt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=$w(),R={baseLanes:R.baseLanes|c,cachePool:y}),d.memoizedState=R,d.childLanes=c0(o,A,c),l.memoizedState=l0,hh(o.child,d)):(ho(l),c=o.child,o=c.sibling,c=cs(c,{mode:"visible",children:d.children}),c.return=l,c.sibling=null,o!==null&&(A=l.deletions,A===null?(l.deletions=[o],l.flags|=16):A.push(o)),l.child=c,l.memoizedState=null,c)}function h0(o,l){return l=bp({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function bp(o,l){return o=ur(22,o,null,l),o.lanes=0,o}function f0(o,l,c){return Wa(l,o.child,null,c),o=h0(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function iA(o,l,c){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l),xv(o.return,l,c)}function d0(o,l,c,d,y,T){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:T}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=c,A.tailMode=y,A.treeForkCount=T)}function sA(o,l,c){var d=l.pendingProps,y=d.revealOrder,T=d.tail;d=d.children;var A=Lt.current,R=(A&2)!==0;if(R?(A=A&1|2,l.flags|=128):A&=1,fe(Lt,A),bn(o,l,d,c),d=Ye?Jc:0,!R&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&iA(o,c,l);else if(o.tag===19)iA(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(c=l.child,y=null;c!==null;)o=c.alternate,o!==null&&up(o)===null&&(y=c),c=c.sibling;c=y,c===null?(y=l.child,l.child=null):(y=c.sibling,c.sibling=null),d0(l,!1,y,c,T,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&up(o)===null){l.child=y;break}o=y.sibling,y.sibling=c,c=y,y=o}d0(l,!0,c,null,T,d);break;case"together":d0(l,!1,null,null,void 0,d);break;default:l.memoizedState=null}return l.child}function gs(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),go|=l.lanes,(c&l.childLanes)===0)if(o!==null){if(au(o,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,c=cs(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=cs(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function p0(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&tp(o)))}function Z3(o,l,c){switch(l.tag){case 3:nn(l,l.stateNode.containerInfo),ao(l,Gt,o.memoizedState.cache),Fa();break;case 27:case 5:_a(l);break;case 4:nn(l,l.stateNode.containerInfo);break;case 10:ao(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Uv(l),null;break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(ho(l),l.flags|=128,null):(c&l.child.childLanes)!==0?rA(o,l,c):(ho(l),o=gs(o,l,c),o!==null?o.sibling:null);ho(l);break;case 19:var y=(o.flags&128)!==0;if(d=(c&l.childLanes)!==0,d||(au(o,l,c,!1),d=(c&l.childLanes)!==0),y){if(d)return sA(o,l,c);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(Lt,Lt.current),d)break;return null;case 22:return l.lanes=0,X1(o,l,c,l.pendingProps);case 24:ao(l,Gt,o.memoizedState.cache)}return gs(o,l,c)}function oA(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps)Wt=!0;else{if(!p0(o,c)&&(l.flags&128)===0)return Wt=!1,Z3(o,l,c);Wt=(o.flags&131072)!==0}else Wt=!1,Ye&&(l.flags&1048576)!==0&&Bw(l,Jc,l.index);switch(l.lanes=0,l.tag){case 16:e:{var d=l.pendingProps;if(o=Ga(l.elementType),l.type=o,typeof o=="function")Tv(o)?(d=Qa(o,d),l.tag=1,l=tA(null,l,o,d,c)):(l.tag=0,l=a0(null,l,o,d,c));else{if(o!=null){var y=o.$$typeof;if(y===q){l.tag=11,l=W1(null,l,o,d,c);break e}else if(y===I){l.tag=14,l=Y1(null,l,o,d,c);break e}}throw l=ke(o)||o,Error(r(306,l,""))}}return l;case 0:return a0(o,l,l.type,l.pendingProps,c);case 1:return d=l.type,y=Qa(d,l.pendingProps),tA(o,l,d,y,c);case 3:e:{if(nn(l,l.stateNode.containerInfo),o===null)throw Error(r(387));d=l.pendingProps;var T=l.memoizedState;y=T.element,Ov(o,l),oh(l,d,null,c);var A=l.memoizedState;if(d=A.cache,ao(l,Gt,d),d!==T.cache&&Rv(l,[Gt],c,!0),sh(),d=A.element,T.isDehydrated)if(T={element:d,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){l=nA(o,l,d,c);break e}else if(d!==y){y=kr(Error(r(424)),l),Zc(y),l=nA(o,l,d,c);break e}else for(o=l.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,yt=Or(o.firstChild),Tn=l,Ye=!0,so=null,Dr=!0,c=Xw(l,null,d,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Fa(),d===y){l=gs(o,l,c);break e}bn(o,l,d,c)}l=l.child}return l;case 26:return Ep(o,l),o===null?(c=yC(l.type,null,l.pendingProps,null))?l.memoizedState=c:Ye||(c=l.type,o=l.pendingProps,d=Lp(Le.current).createElement(c),d[Ht]=l,d[un]=o,_n(d,c,o),qt(d),l.stateNode=d):l.memoizedState=yC(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return _a(l),o===null&&Ye&&(d=l.stateNode=pC(l.type,l.pendingProps,Le.current),Tn=l,Dr=!0,y=yt,bo(l.type)?(K0=y,yt=Or(d.firstChild)):yt=y),bn(o,l,l.pendingProps.children,c),Ep(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Ye&&((y=d=yt)&&(d=k4(d,l.type,l.pendingProps,Dr),d!==null?(l.stateNode=d,Tn=l,yt=Or(d.firstChild),Dr=!1,y=!0):y=!1),y||oo(l)),_a(l),y=l.type,T=l.pendingProps,A=o!==null?o.memoizedProps:null,d=T.children,F0(y,T)?d=null:A!==null&&F0(y,A)&&(l.flags|=32),l.memoizedState!==null&&(y=jv(o,l,q3,null,null,c),Ch._currentValue=y),Ep(o,l),bn(o,l,d,c),l.child;case 6:return o===null&&Ye&&((o=c=yt)&&(c=I4(c,l.pendingProps,Dr),c!==null?(l.stateNode=c,Tn=l,yt=null,o=!0):o=!1),o||oo(l)),null;case 13:return rA(o,l,c);case 4:return nn(l,l.stateNode.containerInfo),d=l.pendingProps,o===null?l.child=Wa(l,null,d,c):bn(o,l,d,c),l.child;case 11:return W1(o,l,l.type,l.pendingProps,c);case 7:return bn(o,l,l.pendingProps,c),l.child;case 8:return bn(o,l,l.pendingProps.children,c),l.child;case 12:return bn(o,l,l.pendingProps.children,c),l.child;case 10:return d=l.pendingProps,ao(l,l.type,d.value),bn(o,l,d.children,c),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,qa(l),y=En(y),d=d(y),l.flags|=1,bn(o,l,d,c),l.child;case 14:return Y1(o,l,l.type,l.pendingProps,c);case 15:return Q1(o,l,l.type,l.pendingProps,c);case 19:return sA(o,l,c);case 31:return J3(o,l,c);case 22:return X1(o,l,c,l.pendingProps);case 24:return qa(l),d=En(Gt),o===null?(y=Mv(),y===null&&(y=dt,T=kv(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=c),y=T),l.memoizedState={parent:d,cache:y},Nv(l),ao(l,Gt,y)):((o.lanes&c)!==0&&(Ov(o,l),oh(l,null,null,c),sh()),y=o.memoizedState,T=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),ao(l,Gt,d)):(d=T.cache,ao(l,Gt,d),d!==y.cache&&Rv(l,[Gt],c,!0))),bn(o,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ys(o){o.flags|=4}function m0(o,l,c,d,y){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(NA())o.flags|=8192;else throw Ka=sp,Dv}else o.flags&=-16777217}function aA(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!_C(l))if(NA())o.flags|=8192;else throw Ka=sp,Dv}function _p(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Rd():536870912,o.lanes|=l,Tu|=l)}function fh(o,l){if(!Ye)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function vt(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,d=0;if(l)for(var y=o.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=c,l}function e4(o,l,c){var d=l.pendingProps;switch(Sv(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(l),null;case 1:return vt(l),null;case 3:return c=l.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ds(Gt),Et(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(ou(l)?ys(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Av())),vt(l),null;case 26:var y=l.type,T=l.memoizedState;return o===null?(ys(l),T!==null?(vt(l),aA(l,T)):(vt(l),m0(l,y,null,d,c))):T?T!==o.memoizedState?(ys(l),vt(l),aA(l,T)):(vt(l),l.flags&=-16777217):(o=o.memoizedProps,o!==d&&ys(l),vt(l),m0(l,y,o,d,c)),null;case 27:if(Bl(l),c=Le.current,y=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&ys(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return vt(l),null}o=me.current,ou(l)?zw(l):(o=pC(y,d,c),l.stateNode=o,ys(l))}return vt(l),null;case 5:if(Bl(l),y=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&ys(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return vt(l),null}if(T=me.current,ou(l))zw(l);else{var A=Lp(Le.current);switch(T){case 1:T=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:T=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":T=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":T=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":T=A.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?T.multiple=!0:d.size&&(T.size=d.size);break;default:T=typeof d.is=="string"?A.createElement(y,{is:d.is}):A.createElement(y)}}T[Ht]=l,T[un]=d;e:for(A=l.child;A!==null;){if(A.tag===5||A.tag===6)T.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===l)break e;for(;A.sibling===null;){if(A.return===null||A.return===l)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}l.stateNode=T;e:switch(_n(T,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ys(l)}}return vt(l),m0(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,c),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==d&&ys(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(o=Le.current,ou(l)){if(o=l.stateNode,c=l.memoizedProps,d=null,y=Tn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[Ht]=l,o=!!(o.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||rC(o.nodeValue,c)),o||oo(l,!0)}else o=Lp(o).createTextNode(d),o[Ht]=l,l.stateNode=o}return vt(l),null;case 31:if(c=l.memoizedState,o===null||o.memoizedState!==null){if(d=ou(l),c!==null){if(o===null){if(!d)throw Error(r(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[Ht]=l}else Fa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vt(l),o=!1}else c=Av(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=c),o=!0;if(!o)return l.flags&256?(hr(l),l):(hr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return vt(l),null;case 13:if(d=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=ou(l),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Ht]=l}else Fa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vt(l),y=!1}else y=Av(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(hr(l),l):(hr(l),null)}return hr(l),(l.flags&128)!==0?(l.lanes=c,l):(c=d!==null,o=o!==null&&o.memoizedState!==null,c&&(d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==y&&(d.flags|=2048)),c!==o&&c&&(l.child.flags|=8192),_p(l,l.updateQueue),vt(l),null);case 4:return Et(),o===null&&L0(l.stateNode.containerInfo),vt(l),null;case 10:return ds(l.type),vt(l),null;case 19:if(se(Lt),d=l.memoizedState,d===null)return vt(l),null;if(y=(l.flags&128)!==0,T=d.rendering,T===null)if(y)fh(d,!1);else{if(kt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(T=up(o),T!==null){for(l.flags|=128,fh(d,!1),o=T.updateQueue,l.updateQueue=o,_p(l,o),l.subtreeFlags=0,o=c,c=l.child;c!==null;)Pw(c,o),c=c.sibling;return fe(Lt,Lt.current&1|2),Ye&&hs(l,d.treeForkCount),l.child}o=o.sibling}d.tail!==null&&Un()>xp&&(l.flags|=128,y=!0,fh(d,!1),l.lanes=4194304)}else{if(!y)if(o=up(T),o!==null){if(l.flags|=128,y=!0,o=o.updateQueue,l.updateQueue=o,_p(l,o),fh(d,!0),d.tail===null&&d.tailMode==="hidden"&&!T.alternate&&!Ye)return vt(l),null}else 2*Un()-d.renderingStartTime>xp&&c!==536870912&&(l.flags|=128,y=!0,fh(d,!1),l.lanes=4194304);d.isBackwards?(T.sibling=l.child,l.child=T):(o=d.last,o!==null?o.sibling=T:l.child=T,d.last=T)}return d.tail!==null?(o=d.tail,d.rendering=o,d.tail=o.sibling,d.renderingStartTime=Un(),o.sibling=null,c=Lt.current,fe(Lt,y?c&1|2:c&1),Ye&&hs(l,d.treeForkCount),o):(vt(l),null);case 22:case 23:return hr(l),Bv(),d=l.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(c&536870912)!==0&&(l.flags&128)===0&&(vt(l),l.subtreeFlags&6&&(l.flags|=8192)):vt(l),c=l.updateQueue,c!==null&&_p(l,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048),o!==null&&se($a),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),ds(Gt),vt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function t4(o,l){switch(Sv(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return ds(Gt),Et(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Bl(l),null;case 31:if(l.memoizedState!==null){if(hr(l),l.alternate===null)throw Error(r(340));Fa()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(hr(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Fa()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return se(Lt),null;case 4:return Et(),null;case 10:return ds(l.type),null;case 22:case 23:return hr(l),Bv(),o!==null&&se($a),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return ds(Gt),null;case 25:return null;default:return null}}function lA(o,l){switch(Sv(l),l.tag){case 3:ds(Gt),Et();break;case 26:case 27:case 5:Bl(l);break;case 4:Et();break;case 31:l.memoizedState!==null&&hr(l);break;case 13:hr(l);break;case 19:se(Lt);break;case 10:ds(l.type);break;case 22:case 23:hr(l),Bv(),o!==null&&se($a);break;case 24:ds(Gt)}}function dh(o,l){try{var c=l.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&o)===o){d=void 0;var T=c.create,A=c.inst;d=T(),A.destroy=d}c=c.next}while(c!==y)}}catch(R){st(l,l.return,R)}}function po(o,l,c){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var T=y.next;d=T;do{if((d.tag&o)===o){var A=d.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=l;var L=c,Y=R;try{Y()}catch(te){st(y,L,te)}}}d=d.next}while(d!==T)}}catch(te){st(l,l.return,te)}}function uA(o){var l=o.updateQueue;if(l!==null){var c=o.stateNode;try{Zw(l,c)}catch(d){st(o,o.return,d)}}}function cA(o,l,c){c.props=Qa(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(d){st(o,l,d)}}function ph(o,l){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof c=="function"?o.refCleanup=c(d):c.current=d}}catch(y){st(o,l,y)}}function Bi(o,l){var c=o.ref,d=o.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){st(o,l,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){st(o,l,y)}else c.current=null}function hA(o){var l=o.type,c=o.memoizedProps,d=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){st(o,o.return,y)}}function g0(o,l,c){try{var d=o.stateNode;S4(d,o.type,c,l),d[un]=l}catch(y){st(o,o.return,y)}}function fA(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&bo(o.type)||o.tag===4}function y0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||fA(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&bo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function v0(o,l,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(o),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Qr));else if(d!==4&&(d===27&&bo(o.type)&&(c=o.stateNode,l=null),o=o.child,o!==null))for(v0(o,l,c),o=o.sibling;o!==null;)v0(o,l,c),o=o.sibling}function Sp(o,l,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(d!==4&&(d===27&&bo(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(Sp(o,l,c),o=o.sibling;o!==null;)Sp(o,l,c),o=o.sibling}function dA(o){var l=o.stateNode,c=o.memoizedProps;try{for(var d=o.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);_n(l,d,c),l[Ht]=o,l[un]=c}catch(T){st(o,o.return,T)}}var vs=!1,Yt=!1,T0=!1,pA=typeof WeakSet=="function"?WeakSet:Set,hn=null;function n4(o,l){if(o=o.containerInfo,z0=qp,o=Cw(o),fv(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,T=d.focusNode;d=d.focusOffset;try{c.nodeType,T.nodeType}catch{c=null;break e}var A=0,R=-1,L=-1,Y=0,te=0,ie=o,Q=null;t:for(;;){for(var J;ie!==c||y!==0&&ie.nodeType!==3||(R=A+y),ie!==T||d!==0&&ie.nodeType!==3||(L=A+d),ie.nodeType===3&&(A+=ie.nodeValue.length),(J=ie.firstChild)!==null;)Q=ie,ie=J;for(;;){if(ie===o)break t;if(Q===c&&++Y===y&&(R=A),Q===T&&++te===d&&(L=A),(J=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=J}c=R===-1||L===-1?null:{start:R,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(j0={focusedElem:o,selectionRange:c},qp=!1,hn=l;hn!==null;)if(l=hn,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,hn=o;else for(;hn!==null;){switch(l=hn,T=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(c=0;c<o.length;c++)y=o[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,c=l,y=T.memoizedProps,T=T.memoizedState,d=c.stateNode;try{var ye=Qa(c.type,y);o=d.getSnapshotBeforeUpdate(ye,T),d.__reactInternalSnapshotBeforeUpdate=o}catch(Ae){st(c,c.return,Ae)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,c=o.nodeType,c===9)q0(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":q0(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,hn=o;break}hn=l.return}}function mA(o,l,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Es(o,c),d&4&&dh(5,c);break;case 1:if(Es(o,c),d&4)if(o=c.stateNode,l===null)try{o.componentDidMount()}catch(A){st(c,c.return,A)}else{var y=Qa(c.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(y,l,o.__reactInternalSnapshotBeforeUpdate)}catch(A){st(c,c.return,A)}}d&64&&uA(c),d&512&&ph(c,c.return);break;case 3:if(Es(o,c),d&64&&(o=c.updateQueue,o!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{Zw(o,l)}catch(A){st(c,c.return,A)}}break;case 27:l===null&&d&4&&dA(c);case 26:case 5:Es(o,c),l===null&&d&4&&hA(c),d&512&&ph(c,c.return);break;case 12:Es(o,c);break;case 31:Es(o,c),d&4&&vA(o,c);break;case 13:Es(o,c),d&4&&TA(o,c),d&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=h4.bind(null,c),M4(o,c))));break;case 22:if(d=c.memoizedState!==null||vs,!d){l=l!==null&&l.memoizedState!==null||Yt,y=vs;var T=Yt;vs=d,(Yt=l)&&!T?bs(o,c,(c.subtreeFlags&8772)!==0):Es(o,c),vs=y,Yt=T}break;case 30:break;default:Es(o,c)}}function gA(o){var l=o.alternate;l!==null&&(o.alternate=null,gA(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Hl(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var _t=null,Xn=!1;function Ts(o,l,c){for(c=c.child;c!==null;)yA(o,l,c),c=c.sibling}function yA(o,l,c){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Gr,c)}catch{}switch(c.tag){case 26:Yt||Bi(c,l),Ts(o,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Yt||Bi(c,l);var d=_t,y=Xn;bo(c.type)&&(_t=c.stateNode,Xn=!1),Ts(o,l,c),Sh(c.stateNode),_t=d,Xn=y;break;case 5:Yt||Bi(c,l);case 6:if(d=_t,y=Xn,_t=null,Ts(o,l,c),_t=d,Xn=y,_t!==null)if(Xn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(c.stateNode)}catch(T){st(c,l,T)}else try{_t.removeChild(c.stateNode)}catch(T){st(c,l,T)}break;case 18:_t!==null&&(Xn?(o=_t,uC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),xu(o)):uC(_t,c.stateNode));break;case 4:d=_t,y=Xn,_t=c.stateNode.containerInfo,Xn=!0,Ts(o,l,c),_t=d,Xn=y;break;case 0:case 11:case 14:case 15:po(2,c,l),Yt||po(4,c,l),Ts(o,l,c);break;case 1:Yt||(Bi(c,l),d=c.stateNode,typeof d.componentWillUnmount=="function"&&cA(c,l,d)),Ts(o,l,c);break;case 21:Ts(o,l,c);break;case 22:Yt=(d=Yt)||c.memoizedState!==null,Ts(o,l,c),Yt=d;break;default:Ts(o,l,c)}}function vA(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{xu(o)}catch(c){st(l,l.return,c)}}}function TA(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{xu(o)}catch(c){st(l,l.return,c)}}function r4(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new pA),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new pA),l;default:throw Error(r(435,o.tag))}}function wp(o,l){var c=r4(o);l.forEach(function(d){if(!c.has(d)){c.add(d);var y=f4.bind(null,o,d);d.then(y,y)}})}function Jn(o,l){var c=l.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],T=o,A=l,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(bo(R.type)){_t=R.stateNode,Xn=!1;break e}break;case 5:_t=R.stateNode,Xn=!1;break e;case 3:case 4:_t=R.stateNode.containerInfo,Xn=!0;break e}R=R.return}if(_t===null)throw Error(r(160));yA(T,A,y),_t=null,Xn=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)EA(l,o),l=l.sibling}var ni=null;function EA(o,l){var c=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Jn(l,o),Zn(o),d&4&&(po(3,o,o.return),dh(3,o),po(5,o,o.return));break;case 1:Jn(l,o),Zn(o),d&512&&(Yt||c===null||Bi(c,c.return)),d&64&&vs&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=ni;if(Jn(l,o),Zn(o),d&512&&(Yt||c===null||Bi(c,c.return)),d&4){var T=c!==null?c.memoizedState:null;if(d=o.memoizedState,c===null)if(d===null)if(o.stateNode===null){e:{d=o.type,c=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":T=y.getElementsByTagName("title")[0],(!T||T[wi]||T[Ht]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(d),y.head.insertBefore(T,y.querySelector("head > title"))),_n(T,d,c),T[Ht]=o,qt(T),d=T;break e;case"link":var A=EC("link","href",y).get(d+(c.href||""));if(A){for(var R=0;R<A.length;R++)if(T=A[R],T.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&T.getAttribute("rel")===(c.rel==null?null:c.rel)&&T.getAttribute("title")===(c.title==null?null:c.title)&&T.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(R,1);break t}}T=y.createElement(d),_n(T,d,c),y.head.appendChild(T);break;case"meta":if(A=EC("meta","content",y).get(d+(c.content||""))){for(R=0;R<A.length;R++)if(T=A[R],T.getAttribute("content")===(c.content==null?null:""+c.content)&&T.getAttribute("name")===(c.name==null?null:c.name)&&T.getAttribute("property")===(c.property==null?null:c.property)&&T.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&T.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(R,1);break t}}T=y.createElement(d),_n(T,d,c),y.head.appendChild(T);break;default:throw Error(r(468,d))}T[Ht]=o,qt(T),d=T}o.stateNode=d}else bC(y,o.type,o.stateNode);else o.stateNode=TC(y,d,o.memoizedProps);else T!==d?(T===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):T.count--,d===null?bC(y,o.type,o.stateNode):TC(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&g0(o,o.memoizedProps,c.memoizedProps)}break;case 27:Jn(l,o),Zn(o),d&512&&(Yt||c===null||Bi(c,c.return)),c!==null&&d&4&&g0(o,o.memoizedProps,c.memoizedProps);break;case 5:if(Jn(l,o),Zn(o),d&512&&(Yt||c===null||Bi(c,c.return)),o.flags&32){y=o.stateNode;try{Qn(y,"")}catch(ye){st(o,o.return,ye)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,g0(o,y,c!==null?c.memoizedProps:y)),d&1024&&(T0=!0);break;case 6:if(Jn(l,o),Zn(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,c=o.stateNode;try{c.nodeValue=d}catch(ye){st(o,o.return,ye)}}break;case 3:if(zp=null,y=ni,ni=Bp(l.containerInfo),Jn(l,o),ni=y,Zn(o),d&4&&c!==null&&c.memoizedState.isDehydrated)try{xu(l.containerInfo)}catch(ye){st(o,o.return,ye)}T0&&(T0=!1,bA(o));break;case 4:d=ni,ni=Bp(o.stateNode.containerInfo),Jn(l,o),Zn(o),ni=d;break;case 12:Jn(l,o),Zn(o);break;case 31:Jn(l,o),Zn(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,wp(o,d)));break;case 13:Jn(l,o),Zn(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Cp=Un()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,wp(o,d)));break;case 22:y=o.memoizedState!==null;var L=c!==null&&c.memoizedState!==null,Y=vs,te=Yt;if(vs=Y||y,Yt=te||L,Jn(l,o),Yt=te,vs=Y,Zn(o),d&8192)e:for(l=o.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(c===null||L||vs||Yt||Xa(o)),c=null,l=o;;){if(l.tag===5||l.tag===26){if(c===null){L=c=l;try{if(T=L.stateNode,y)A=T.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=L.stateNode;var ie=L.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;R.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ye){st(L,L.return,ye)}}}else if(l.tag===6){if(c===null){L=l;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ye){st(L,L.return,ye)}}}else if(l.tag===18){if(c===null){L=l;try{var J=L.stateNode;y?cC(J,!0):cC(L.stateNode,!1)}catch(ye){st(L,L.return,ye)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=o.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,wp(o,c))));break;case 19:Jn(l,o),Zn(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,wp(o,d)));break;case 30:break;case 21:break;default:Jn(l,o),Zn(o)}}function Zn(o){var l=o.flags;if(l&2){try{for(var c,d=o.return;d!==null;){if(fA(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,T=y0(o);Sp(o,T,y);break;case 5:var A=c.stateNode;c.flags&32&&(Qn(A,""),c.flags&=-33);var R=y0(o);Sp(o,R,A);break;case 3:case 4:var L=c.stateNode.containerInfo,Y=y0(o);v0(o,Y,L);break;default:throw Error(r(161))}}catch(te){st(o,o.return,te)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function bA(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;bA(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Es(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)mA(o,l.alternate,l),l=l.sibling}function Xa(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:po(4,l,l.return),Xa(l);break;case 1:Bi(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&cA(l,l.return,c),Xa(l);break;case 27:Sh(l.stateNode);case 26:case 5:Bi(l,l.return),Xa(l);break;case 22:l.memoizedState===null&&Xa(l);break;case 30:Xa(l);break;default:Xa(l)}o=o.sibling}}function bs(o,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=o,T=l,A=T.flags;switch(T.tag){case 0:case 11:case 15:bs(y,T,c),dh(4,T);break;case 1:if(bs(y,T,c),d=T,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){st(d,d.return,Y)}if(d=T,y=d.updateQueue,y!==null){var R=d.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Jw(L[y],R)}catch(Y){st(d,d.return,Y)}}c&&A&64&&uA(T),ph(T,T.return);break;case 27:dA(T);case 26:case 5:bs(y,T,c),c&&d===null&&A&4&&hA(T),ph(T,T.return);break;case 12:bs(y,T,c);break;case 31:bs(y,T,c),c&&A&4&&vA(y,T);break;case 13:bs(y,T,c),c&&A&4&&TA(y,T);break;case 22:T.memoizedState===null&&bs(y,T,c),ph(T,T.return);break;case 30:break;default:bs(y,T,c)}l=l.sibling}}function E0(o,l){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&eh(c))}function b0(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&eh(o))}function ri(o,l,c,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)_A(o,l,c,d),l=l.sibling}function _A(o,l,c,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:ri(o,l,c,d),y&2048&&dh(9,l);break;case 1:ri(o,l,c,d);break;case 3:ri(o,l,c,d),y&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&eh(o)));break;case 12:if(y&2048){ri(o,l,c,d),o=l.stateNode;try{var T=l.memoizedProps,A=T.id,R=T.onPostCommit;typeof R=="function"&&R(A,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(L){st(l,l.return,L)}}else ri(o,l,c,d);break;case 31:ri(o,l,c,d);break;case 13:ri(o,l,c,d);break;case 23:break;case 22:T=l.stateNode,A=l.alternate,l.memoizedState!==null?T._visibility&2?ri(o,l,c,d):mh(o,l):T._visibility&2?ri(o,l,c,d):(T._visibility|=2,gu(o,l,c,d,(l.subtreeFlags&10256)!==0||!1)),y&2048&&E0(A,l);break;case 24:ri(o,l,c,d),y&2048&&b0(l.alternate,l);break;default:ri(o,l,c,d)}}function gu(o,l,c,d,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var T=o,A=l,R=c,L=d,Y=A.flags;switch(A.tag){case 0:case 11:case 15:gu(T,A,R,L,y),dh(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?gu(T,A,R,L,y):mh(T,A):(te._visibility|=2,gu(T,A,R,L,y)),y&&Y&2048&&E0(A.alternate,A);break;case 24:gu(T,A,R,L,y),y&&Y&2048&&b0(A.alternate,A);break;default:gu(T,A,R,L,y)}l=l.sibling}}function mh(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=o,d=l,y=d.flags;switch(d.tag){case 22:mh(c,d),y&2048&&E0(d.alternate,d);break;case 24:mh(c,d),y&2048&&b0(d.alternate,d);break;default:mh(c,d)}l=l.sibling}}var gh=8192;function yu(o,l,c){if(o.subtreeFlags&gh)for(o=o.child;o!==null;)SA(o,l,c),o=o.sibling}function SA(o,l,c){switch(o.tag){case 26:yu(o,l,c),o.flags&gh&&o.memoizedState!==null&&H4(c,ni,o.memoizedState,o.memoizedProps);break;case 5:yu(o,l,c);break;case 3:case 4:var d=ni;ni=Bp(o.stateNode.containerInfo),yu(o,l,c),ni=d;break;case 22:o.memoizedState===null&&(d=o.alternate,d!==null&&d.memoizedState!==null?(d=gh,gh=16777216,yu(o,l,c),gh=d):yu(o,l,c));break;default:yu(o,l,c)}}function wA(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function yh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];hn=d,CA(d,o)}wA(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)AA(o),o=o.sibling}function AA(o){switch(o.tag){case 0:case 11:case 15:yh(o),o.flags&2048&&po(9,o,o.return);break;case 3:yh(o);break;case 12:yh(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Ap(o)):yh(o);break;default:yh(o)}}function Ap(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];hn=d,CA(d,o)}wA(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:po(8,l,l.return),Ap(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,Ap(l));break;default:Ap(l)}o=o.sibling}}function CA(o,l){for(;hn!==null;){var c=hn;switch(c.tag){case 0:case 11:case 15:po(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:eh(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,hn=d;else e:for(c=o;hn!==null;){d=hn;var y=d.sibling,T=d.return;if(gA(d),d===c){hn=null;break e}if(y!==null){y.return=T,hn=y;break e}hn=T}}}var i4={getCacheForType:function(o){var l=En(Gt),c=l.data.get(o);return c===void 0&&(c=o(),l.data.set(o,c)),c},cacheSignal:function(){return En(Gt).controller.signal}},s4=typeof WeakMap=="function"?WeakMap:Map,nt=0,dt=null,je=null,qe=0,it=0,fr=null,mo=!1,vu=!1,_0=!1,_s=0,kt=0,go=0,Ja=0,S0=0,dr=0,Tu=0,vh=null,er=null,w0=!1,Cp=0,xA=0,xp=1/0,Rp=null,yo=null,sn=0,vo=null,Eu=null,Ss=0,A0=0,C0=null,RA=null,Th=0,x0=null;function pr(){return(nt&2)!==0&&qe!==0?qe&-qe:ee.T!==null?N0():kd()}function kA(){if(dr===0)if((qe&536870912)===0||Ye){var o=Aa;Aa<<=1,(Aa&3932160)===0&&(Aa=262144),dr=o}else dr=536870912;return o=cr.current,o!==null&&(o.flags|=32),dr}function tr(o,l,c){(o===dt&&(it===2||it===9)||o.cancelPendingCommit!==null)&&(bu(o,0),To(o,qe,dr,!1)),Ca(o,c),((nt&2)===0||o!==dt)&&(o===dt&&((nt&2)===0&&(Ja|=c),kt===4&&To(o,qe,dr,!1)),Ui(o))}function IA(o,l,c){if((nt&6)!==0)throw Error(r(327));var d=!c&&(l&127)===0&&(l&o.expiredLanes)===0||Kr(o,l),y=d?l4(o,l):k0(o,l,!0),T=d;do{if(y===0){vu&&!d&&To(o,l,0,!1);break}else{if(c=o.current.alternate,T&&!o4(c)){y=k0(o,l,!1),T=!1;continue}if(y===2){if(T=l,o.errorRecoveryDisabledLanes&T)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var R=o;y=vh;var L=R.current.memoizedState.isDehydrated;if(L&&(bu(R,A).flags|=256),A=k0(R,A,!1),A!==2){if(_0&&!L){R.errorRecoveryDisabledLanes|=T,Ja|=T,y=4;break e}T=er,er=y,T!==null&&(er===null?er=T:er.push.apply(er,T))}y=A}if(T=!1,y!==2)continue}}if(y===1){bu(o,0),To(o,l,0,!0);break}e:{switch(d=o,T=y,T){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:To(d,l,dr,!mo);break e;case 2:er=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=Cp+300-Un(),10<y)){if(To(d,l,dr,!mo),bi(d,0,!0)!==0)break e;Ss=l,d.timeoutHandle=aC(MA.bind(null,d,c,er,Rp,w0,l,dr,Ja,Tu,mo,T,"Throttled",-0,0),y);break e}MA(d,c,er,Rp,w0,l,dr,Ja,Tu,mo,T,null,-0,0)}}break}while(!0);Ui(o)}function MA(o,l,c,d,y,T,A,R,L,Y,te,ie,Q,J){if(o.timeoutHandle=-1,ie=l.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qr},SA(l,T,ie);var ye=(T&62914560)===T?Cp-Un():(T&4194048)===T?xA-Un():0;if(ye=q4(ie,ye),ye!==null){Ss=T,o.cancelPendingCommit=ye(UA.bind(null,o,l,T,c,d,y,A,R,L,te,ie,null,Q,J)),To(o,T,A,!Y);return}}UA(o,l,T,c,d,y,A,R,L)}function o4(o){for(var l=o;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],T=y.getSnapshot;y=y.value;try{if(!lr(T(),y))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function To(o,l,c,d){l&=~S0,l&=~Ja,o.suspendedLanes|=l,o.pingedLanes&=~l,d&&(o.warmLanes|=l),d=o.expirationTimes;for(var y=l;0<y;){var T=31-Pt(y),A=1<<T;d[T]=-1,y&=~A}c!==0&&xa(o,c,l)}function kp(){return(nt&6)===0?(Eh(0),!1):!0}function R0(){if(je!==null){if(it===0)var o=je.return;else o=je,fs=Ha=null,qv(o),hu=null,nh=0,o=je;for(;o!==null;)lA(o.alternate,o),o=o.return;je=null}}function bu(o,l){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,C4(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),Ss=0,R0(),dt=o,je=c=cs(o.current,null),qe=l,it=0,fr=null,mo=!1,vu=Kr(o,l),_0=!1,Tu=dr=S0=Ja=go=kt=0,er=vh=null,w0=!1,(l&8)!==0&&(l|=l&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=l;0<d;){var y=31-Pt(d),T=1<<y;l|=o[y],d&=~T}return _s=l,Qd(),c}function DA(o,l){Pe=null,ee.H=ch,l===cu||l===ip?(l=Ww(),it=3):l===Dv?(l=Ww(),it=4):it=l===o0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,fr=l,je===null&&(kt=1,vp(o,kr(l,o.current)))}function NA(){var o=cr.current;return o===null?!0:(qe&4194048)===qe?Nr===null:(qe&62914560)===qe||(qe&536870912)!==0?o===Nr:!1}function OA(){var o=ee.H;return ee.H=ch,o===null?ch:o}function PA(){var o=ee.A;return ee.A=i4,o}function Ip(){kt=4,mo||(qe&4194048)!==qe&&cr.current!==null||(vu=!0),(go&134217727)===0&&(Ja&134217727)===0||dt===null||To(dt,qe,dr,!1)}function k0(o,l,c){var d=nt;nt|=2;var y=OA(),T=PA();(dt!==o||qe!==l)&&(Rp=null,bu(o,l)),l=!1;var A=kt;e:do try{if(it!==0&&je!==null){var R=je,L=fr;switch(it){case 8:R0(),A=6;break e;case 3:case 2:case 9:case 6:cr.current===null&&(l=!0);var Y=it;if(it=0,fr=null,_u(o,R,L,Y),c&&vu){A=0;break e}break;default:Y=it,it=0,fr=null,_u(o,R,L,Y)}}a4(),A=kt;break}catch(te){DA(o,te)}while(!0);return l&&o.shellSuspendCounter++,fs=Ha=null,nt=d,ee.H=y,ee.A=T,je===null&&(dt=null,qe=0,Qd()),A}function a4(){for(;je!==null;)VA(je)}function l4(o,l){var c=nt;nt|=2;var d=OA(),y=PA();dt!==o||qe!==l?(Rp=null,xp=Un()+500,bu(o,l)):vu=Kr(o,l);e:do try{if(it!==0&&je!==null){l=je;var T=fr;t:switch(it){case 1:it=0,fr=null,_u(o,l,T,1);break;case 2:case 9:if(Gw(T)){it=0,fr=null,LA(l);break}l=function(){it!==2&&it!==9||dt!==o||(it=7),Ui(o)},T.then(l,l);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Gw(T)?(it=0,fr=null,LA(l)):(it=0,fr=null,_u(o,l,T,7));break;case 5:var A=null;switch(je.tag){case 26:A=je.memoizedState;case 5:case 27:var R=je;if(A?_C(A):R.stateNode.complete){it=0,fr=null;var L=R.sibling;if(L!==null)je=L;else{var Y=R.return;Y!==null?(je=Y,Mp(Y)):je=null}break t}}it=0,fr=null,_u(o,l,T,5);break;case 6:it=0,fr=null,_u(o,l,T,6);break;case 8:R0(),kt=6;break e;default:throw Error(r(462))}}u4();break}catch(te){DA(o,te)}while(!0);return fs=Ha=null,ee.H=d,ee.A=y,nt=c,je!==null?0:(dt=null,qe=0,Qd(),kt)}function u4(){for(;je!==null&&!sv();)VA(je)}function VA(o){var l=oA(o.alternate,o,_s);o.memoizedProps=o.pendingProps,l===null?Mp(o):je=l}function LA(o){var l=o,c=l.alternate;switch(l.tag){case 15:case 0:l=eA(c,l,l.pendingProps,l.type,void 0,qe);break;case 11:l=eA(c,l,l.pendingProps,l.type.render,l.ref,qe);break;case 5:qv(l);default:lA(c,l),l=je=Pw(l,_s),l=oA(c,l,_s)}o.memoizedProps=o.pendingProps,l===null?Mp(o):je=l}function _u(o,l,c,d){fs=Ha=null,qv(l),hu=null,nh=0;var y=l.return;try{if(X3(o,y,l,c,qe)){kt=1,vp(o,kr(c,o.current)),je=null;return}}catch(T){if(y!==null)throw je=y,T;kt=1,vp(o,kr(c,o.current)),je=null;return}l.flags&32768?(Ye||d===1?o=!0:vu||(qe&536870912)!==0?o=!1:(mo=o=!0,(d===2||d===9||d===3||d===6)&&(d=cr.current,d!==null&&d.tag===13&&(d.flags|=16384))),BA(l,o)):Mp(l)}function Mp(o){var l=o;do{if((l.flags&32768)!==0){BA(l,mo);return}o=l.return;var c=e4(l.alternate,l,_s);if(c!==null){je=c;return}if(l=l.sibling,l!==null){je=l;return}je=l=o}while(l!==null);kt===0&&(kt=5)}function BA(o,l){do{var c=t4(o.alternate,o);if(c!==null){c.flags&=32767,je=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(o=o.sibling,o!==null)){je=o;return}je=o=c}while(o!==null);kt=6,je=null}function UA(o,l,c,d,y,T,A,R,L){o.cancelPendingCommit=null;do Dp();while(sn!==0);if((nt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(T=l.lanes|l.childLanes,T|=yv,lv(o,c,T,A,R,L),o===dt&&(je=dt=null,qe=0),Eu=l,vo=o,Ss=c,A0=T,C0=y,RA=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,d4(Ws,function(){return qA(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null,y=ae.p,ae.p=2,A=nt,nt|=4;try{n4(o,l,c)}finally{nt=A,ae.p=y,ee.T=d}}sn=1,zA(),jA(),FA()}}function zA(){if(sn===1){sn=0;var o=vo,l=Eu,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null;var d=ae.p;ae.p=2;var y=nt;nt|=4;try{EA(l,o);var T=j0,A=Cw(o.containerInfo),R=T.focusedElem,L=T.selectionRange;if(A!==R&&R&&R.ownerDocument&&Aw(R.ownerDocument.documentElement,R)){if(L!==null&&fv(R)){var Y=L.start,te=L.end;if(te===void 0&&(te=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(te,R.value.length);else{var ie=R.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),ye=R.textContent.length,Ae=Math.min(L.start,ye),ct=L.end===void 0?Ae:Math.min(L.end,ye);!J.extend&&Ae>ct&&(A=ct,ct=Ae,Ae=A);var G=ww(R,Ae),z=ww(R,ct);if(G&&z&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==z.node||J.focusOffset!==z.offset)){var W=ie.createRange();W.setStart(G.node,G.offset),J.removeAllRanges(),Ae>ct?(J.addRange(W),J.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),J.addRange(W))}}}}for(ie=[],J=R;J=J.parentNode;)J.nodeType===1&&ie.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ie.length;R++){var re=ie[R];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}qp=!!z0,j0=z0=null}finally{nt=y,ae.p=d,ee.T=c}}o.current=l,sn=2}}function jA(){if(sn===2){sn=0;var o=vo,l=Eu,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=ee.T,ee.T=null;var d=ae.p;ae.p=2;var y=nt;nt|=4;try{mA(o,l.alternate,l)}finally{nt=y,ae.p=d,ee.T=c}}sn=3}}function FA(){if(sn===4||sn===3){sn=0,_d();var o=vo,l=Eu,c=Ss,d=RA;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?sn=5:(sn=0,Eu=vo=null,HA(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(yo=null),ss(c),l=l.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Gr,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=ee.T,y=ae.p,ae.p=2,ee.T=null;try{for(var T=o.onRecoverableError,A=0;A<d.length;A++){var R=d[A];T(R.value,{componentStack:R.stack})}}finally{ee.T=l,ae.p=y}}(Ss&3)!==0&&Dp(),Ui(o),y=o.pendingLanes,(c&261930)!==0&&(y&42)!==0?o===x0?Th++:(Th=0,x0=o):Th=0,Eh(0)}}function HA(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,eh(l)))}function Dp(){return zA(),jA(),FA(),qA()}function qA(){if(sn!==5)return!1;var o=vo,l=A0;A0=0;var c=ss(Ss),d=ee.T,y=ae.p;try{ae.p=32>c?32:c,ee.T=null,c=C0,C0=null;var T=vo,A=Ss;if(sn=0,Eu=vo=null,Ss=0,(nt&6)!==0)throw Error(r(331));var R=nt;if(nt|=4,AA(T.current),_A(T,T.current,A,c),nt=R,Eh(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Gr,T)}catch{}return!0}finally{ae.p=y,ee.T=d,HA(o,l)}}function $A(o,l,c){l=kr(c,l),l=s0(o.stateNode,l,2),o=co(o,l,2),o!==null&&(Ca(o,2),Ui(o))}function st(o,l,c){if(o.tag===3)$A(o,o,c);else for(;l!==null;){if(l.tag===3){$A(l,o,c);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(yo===null||!yo.has(d))){o=kr(c,o),c=G1(2),d=co(l,c,2),d!==null&&(K1(c,d,l,o),Ca(d,2),Ui(d));break}}l=l.return}}function I0(o,l,c){var d=o.pingCache;if(d===null){d=o.pingCache=new s4;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(c)||(_0=!0,y.add(c),o=c4.bind(null,o,l,c),l.then(o,o))}function c4(o,l,c){var d=o.pingCache;d!==null&&d.delete(l),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,dt===o&&(qe&c)===c&&(kt===4||kt===3&&(qe&62914560)===qe&&300>Un()-Cp?(nt&2)===0&&bu(o,0):S0|=c,Tu===qe&&(Tu=0)),Ui(o)}function GA(o,l){l===0&&(l=Rd()),o=za(o,l),o!==null&&(Ca(o,l),Ui(o))}function h4(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),GA(o,c)}function f4(o,l){var c=0;switch(o.tag){case 31:case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),GA(o,c)}function d4(o,l){return rn(o,l)}var Np=null,Su=null,M0=!1,Op=!1,D0=!1,Eo=0;function Ui(o){o!==Su&&o.next===null&&(Su===null?Np=Su=o:Su=Su.next=o),Op=!0,M0||(M0=!0,m4())}function Eh(o,l){if(!D0&&Op){D0=!0;do for(var c=!1,d=Np;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var T=0;else{var A=d.suspendedLanes,R=d.pingedLanes;T=(1<<31-Pt(42|o)+1)-1,T&=y&~(A&~R),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(c=!0,QA(d,T))}else T=qe,T=bi(d,d===dt?T:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(T&3)===0||Kr(d,T)||(c=!0,QA(d,T));d=d.next}while(c);D0=!1}}function p4(){KA()}function KA(){Op=M0=!1;var o=0;Eo!==0&&A4()&&(o=Eo);for(var l=Un(),c=null,d=Np;d!==null;){var y=d.next,T=WA(d,l);T===0?(d.next=null,c===null?Np=y:c.next=y,y===null&&(Su=c)):(c=d,(o!==0||(T&3)!==0)&&(Op=!0)),d=y}sn!==0&&sn!==5||Eh(o),Eo!==0&&(Eo=0)}function WA(o,l){for(var c=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var A=31-Pt(T),R=1<<A,L=y[A];L===-1?((R&c)===0||(R&d)!==0)&&(y[A]=av(R,l)):L<=l&&(o.expiredLanes|=R),T&=~R}if(l=dt,c=qe,c=bi(o,o===l?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,c===0||o===l&&(it===2||it===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&Ks(d),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||Kr(o,c)){if(l=c&-c,l===o.callbackPriority)return l;switch(d!==null&&Ks(d),ss(c)){case 2:case 8:c=Ic;break;case 32:c=Ws;break;case 268435456:c=Sd;break;default:c=Ws}return d=YA.bind(null,o),c=rn(c,d),o.callbackPriority=l,o.callbackNode=c,l}return d!==null&&d!==null&&Ks(d),o.callbackPriority=2,o.callbackNode=null,2}function YA(o,l){if(sn!==0&&sn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(Dp()&&o.callbackNode!==c)return null;var d=qe;return d=bi(o,o===dt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(IA(o,d,l),WA(o,Un()),o.callbackNode!=null&&o.callbackNode===c?YA.bind(null,o):null)}function QA(o,l){if(Dp())return null;IA(o,l,!0)}function m4(){x4(function(){(nt&6)!==0?rn(kc,p4):KA()})}function N0(){if(Eo===0){var o=lu;o===0&&(o=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),Eo=o}return Eo}function XA(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Kl(""+o)}function JA(o,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,o.id&&c.setAttribute("form",o.id),l.parentNode.insertBefore(c,l),o=new FormData(o),c.parentNode.removeChild(c),o}function g4(o,l,c,d,y){if(l==="submit"&&c&&c.stateNode===y){var T=XA((y[un]||null).action),A=d.submitter;A&&(l=(l=A[un]||null)?XA(l.formAction):A.getAttribute("formAction"),l!==null&&(T=l,A=null));var R=new Di("action","action",null,d,y);o.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Eo!==0){var L=A?JA(y,A):new FormData(y);Zv(c,{pending:!0,data:L,method:y.method,action:T},null,L)}}else typeof T=="function"&&(R.preventDefault(),L=A?JA(y,A):new FormData(y),Zv(c,{pending:!0,data:L,method:y.method,action:T},T,L))},currentTarget:y}]})}}for(var O0=0;O0<gv.length;O0++){var P0=gv[O0],y4=P0.toLowerCase(),v4=P0[0].toUpperCase()+P0.slice(1);ti(y4,"on"+v4)}ti(kw,"onAnimationEnd"),ti(Iw,"onAnimationIteration"),ti(Mw,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(O3,"onTransitionRun"),ti(P3,"onTransitionStart"),ti(V3,"onTransitionCancel"),ti(Dw,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bh));function ZA(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var d=o[c],y=d.event;d=d.listeners;e:{var T=void 0;if(l)for(var A=d.length-1;0<=A;A--){var R=d[A],L=R.instance,Y=R.currentTarget;if(R=R.listener,L!==T&&y.isPropagationStopped())break e;T=R,y.currentTarget=Y;try{T(y)}catch(te){Yd(te)}y.currentTarget=null,T=L}else for(A=0;A<d.length;A++){if(R=d[A],L=R.instance,Y=R.currentTarget,R=R.listener,L!==T&&y.isPropagationStopped())break e;T=R,y.currentTarget=Y;try{T(y)}catch(te){Yd(te)}y.currentTarget=null,T=L}}}}function Fe(o,l){var c=l[Fl];c===void 0&&(c=l[Fl]=new Set);var d=o+"__bubble";c.has(d)||(eC(l,o,2,!1),c.add(d))}function V0(o,l,c){var d=0;l&&(d|=4),eC(c,o,d,l)}var Pp="_reactListening"+Math.random().toString(36).slice(2);function L0(o){if(!o[Pp]){o[Pp]=!0,Nc.forEach(function(c){c!=="selectionchange"&&(T4.has(c)||V0(c,!1,o),V0(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Pp]||(l[Pp]=!0,V0("selectionchange",!1,l))}}function eC(o,l,c,d){switch(kC(l)){case 2:var y=K4;break;case 8:y=W4;break;default:y=J0}c=y.bind(null,l,c,o),y=void 0,!Da||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(l,c,{capture:!0,passive:y}):o.addEventListener(l,c,!0):y!==void 0?o.addEventListener(l,c,{passive:y}):o.addEventListener(l,c,!1)}function B0(o,l,c,d,y){var T=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var R=d.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=d.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Ai(R),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){d=T=A;continue e}R=R.parentNode}}d=d.return}eo(function(){var Y=T,te=Ar(c),ie=[];e:{var Q=Nw.get(o);if(Q!==void 0){var J=Di,ye=o;switch(o){case"keypress":if(Oa(c)===0)break e;case"keydown":case"keyup":J=Gd;break;case"focusin":ye="focus",J=Va;break;case"focusout":ye="blur",J=Va;break;case"beforeblur":case"afterblur":J=Va;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Ld;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=_;break;case kw:case Iw:case Mw:J=Ud;break;case Dw:J=M;break;case"scroll":case"scrollend":J=$c;break;case"wheel":J=X;break;case"copy":case"cut":case"paste":J=zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=us;break;case"toggle":case"beforetoggle":J=Oe}var Ae=(l&4)!==0,ct=!Ae&&(o==="scroll"||o==="scrollend"),G=Ae?Q!==null?Q+"Capture":null:Q;Ae=[];for(var z=Y,W;z!==null;){var re=z;if(W=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||W===null||G===null||(re=Xr(z,G),re!=null&&Ae.push(_h(z,re,W))),ct)break;z=z.return}0<Ae.length&&(Q=new J(Q,ye,null,c,te),ie.push({event:Q,listeners:Ae}))}}if((l&7)===0){e:{if(Q=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",Q&&c!==Fc&&(ye=c.relatedTarget||c.fromElement)&&(Ai(ye)||ye[Si]))break e;if((J||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(ye=c.relatedTarget||c.toElement,J=Y,ye=ye?Ai(ye):null,ye!==null&&(ct=s(ye),Ae=ye.tag,ye!==ct||Ae!==5&&Ae!==27&&Ae!==6)&&(ye=null)):(J=null,ye=Y),J!==ye)){if(Ae=Gc,re="onMouseLeave",G="onMouseEnter",z="mouse",(o==="pointerout"||o==="pointerover")&&(Ae=us,re="onPointerLeave",G="onPointerEnter",z="pointer"),ct=J==null?Q:or(J),W=ye==null?Q:or(ye),Q=new Ae(re,z+"leave",J,c,te),Q.target=ct,Q.relatedTarget=W,re=null,Ai(te)===Y&&(Ae=new Ae(G,z+"enter",ye,c,te),Ae.target=W,Ae.relatedTarget=ct,re=Ae),ct=re,J&&ye)t:{for(Ae=E4,G=J,z=ye,W=0,re=G;re;re=Ae(re))W++;re=0;for(var _e=z;_e;_e=Ae(_e))re++;for(;0<W-re;)G=Ae(G),W--;for(;0<re-W;)z=Ae(z),re--;for(;W--;){if(G===z||z!==null&&G===z.alternate){Ae=G;break t}G=Ae(G),z=Ae(z)}Ae=null}else Ae=null;J!==null&&tC(ie,Q,J,Ae,!1),ye!==null&&ct!==null&&tC(ie,ct,ye,Ae,!0)}}e:{if(Q=Y?or(Y):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var Ze=vw;else if(gw(Q))if(Tw)Ze=M3;else{Ze=k3;var Te=R3}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&Gl(Y.elementType)&&(Ze=vw):Ze=I3;if(Ze&&(Ze=Ze(o,Y))){yw(ie,Ze,c,te);break e}Te&&Te(o,Q,Y),o==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&Uc(Q,"number",Q.value)}switch(Te=Y?or(Y):window,o){case"focusin":(gw(Te)||Te.contentEditable==="true")&&(eu=Te,dv=Y,Xc=null);break;case"focusout":Xc=dv=eu=null;break;case"mousedown":pv=!0;break;case"contextmenu":case"mouseup":case"dragend":pv=!1,xw(ie,c,te);break;case"selectionchange":if(N3)break;case"keydown":case"keyup":xw(ie,c,te)}var Be;if(tt)e:{switch(o){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Zl?La(o,c)&&($e="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&($e="onCompositionStart");$e&&(Pi&&c.locale!=="ko"&&(Zl||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Zl&&(Be=qc()):(Mi=te,Hc="value"in Mi?Mi.value:Mi.textContent,Zl=!0)),Te=Vp(Y,$e),0<Te.length&&($e=new Oi($e,o,null,c,te),ie.push({event:$e,listeners:Te}),Be?$e.data=Be:(Be=Jl(c),Be!==null&&($e.data=Be)))),(Be=xr?w3(o,c):A3(o,c))&&($e=Vp(Y,"onBeforeInput"),0<$e.length&&(Te=new Oi("onBeforeInput","beforeinput",null,c,te),ie.push({event:Te,listeners:$e}),Te.data=Be)),g4(ie,o,Y,c,te)}ZA(ie,l)})}function _h(o,l,c){return{instance:o,listener:l,currentTarget:c}}function Vp(o,l){for(var c=l+"Capture",d=[];o!==null;){var y=o,T=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=Xr(o,c),y!=null&&d.unshift(_h(o,y,T)),y=Xr(o,l),y!=null&&d.push(_h(o,y,T))),o.tag===3)return d;o=o.return}return[]}function E4(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function tC(o,l,c,d,y){for(var T=l._reactName,A=[];c!==null&&c!==d;){var R=c,L=R.alternate,Y=R.stateNode;if(R=R.tag,L!==null&&L===d)break;R!==5&&R!==26&&R!==27||Y===null||(L=Y,y?(Y=Xr(c,T),Y!=null&&A.unshift(_h(c,Y,L))):y||(Y=Xr(c,T),Y!=null&&A.push(_h(c,Y,L)))),c=c.return}A.length!==0&&o.push({event:l,listeners:A})}var b4=/\r\n?/g,_4=/\u0000|\uFFFD/g;function nC(o){return(typeof o=="string"?o:""+o).replace(b4,`
`).replace(_4,"")}function rC(o,l){return l=nC(l),nC(o)===l}function ut(o,l,c,d,y,T){switch(c){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Qn(o,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Qn(o,""+d);break;case"className":ar(o,"class",d);break;case"tabIndex":ar(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(o,c,d);break;case"style":jc(o,d,T);break;case"data":if(l!=="object"){ar(o,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||c!=="href")){o.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Kl(""+d),o.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(c==="formAction"?(l!=="input"&&ut(o,l,"name",y.name,y,null),ut(o,l,"formEncType",y.formEncType,y,null),ut(o,l,"formMethod",y.formMethod,y,null),ut(o,l,"formTarget",y.formTarget,y,null)):(ut(o,l,"encType",y.encType,y,null),ut(o,l,"method",y.method,y,null),ut(o,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Kl(""+d),o.setAttribute(c,d);break;case"onClick":d!=null&&(o.onclick=Qr);break;case"onScroll":d!=null&&Fe("scroll",o);break;case"onScrollEnd":d!=null&&Fe("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}c=Kl(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""+d):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":d===!0?o.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,d):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(c,d):o.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(c):o.setAttribute(c,d);break;case"popover":Fe("beforetoggle",o),Fe("toggle",o),ql(o,"popover",d);break;case"xlinkActuate":$t(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":$t(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":$t(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":$t(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":$t(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":$t(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":$t(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":$t(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":$t(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ql(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Vd.get(c)||c,ql(o,c,d))}}function U0(o,l,c,d,y,T){switch(c){case"style":jc(o,d,T);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"children":typeof d=="string"?Qn(o,d):(typeof d=="number"||typeof d=="bigint")&&Qn(o,""+d);break;case"onScroll":d!=null&&Fe("scroll",o);break;case"onScrollEnd":d!=null&&Fe("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),l=c.slice(2,y?c.length-7:void 0),T=o[un]||null,T=T!=null?T[c]:null,typeof T=="function"&&o.removeEventListener(l,T,y),typeof d=="function")){typeof T!="function"&&T!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(l,d,y);break e}c in o?o[c]=d:d===!0?o.setAttribute(c,""):ql(o,c,d)}}}function _n(o,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",o),Fe("load",o);var d=!1,y=!1,T;for(T in c)if(c.hasOwnProperty(T)){var A=c[T];if(A!=null)switch(T){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:ut(o,l,T,A,c,null)}}y&&ut(o,l,"srcSet",c.srcSet,c,null),d&&ut(o,l,"src",c.src,c,null);return;case"input":Fe("invalid",o);var R=T=A=y=null,L=null,Y=null;for(d in c)if(c.hasOwnProperty(d)){var te=c[d];if(te!=null)switch(d){case"name":y=te;break;case"type":A=te;break;case"checked":L=te;break;case"defaultChecked":Y=te;break;case"value":T=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:ut(o,l,d,te,c,null)}}Nd(o,T,R,L,Y,A,y,!1);return;case"select":Fe("invalid",o),d=A=T=null;for(y in c)if(c.hasOwnProperty(y)&&(R=c[y],R!=null))switch(y){case"value":T=R;break;case"defaultValue":A=R;break;case"multiple":d=R;default:ut(o,l,y,R,c,null)}l=T,c=A,o.multiple=!!d,l!=null?Qs(o,!!d,l,!1):c!=null&&Qs(o,!!d,c,!0);return;case"textarea":Fe("invalid",o),T=y=d=null;for(A in c)if(c.hasOwnProperty(A)&&(R=c[A],R!=null))switch(A){case"value":d=R;break;case"defaultValue":y=R;break;case"children":T=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:ut(o,l,A,R,c,null)}Xs(o,d,y,T);return;case"option":for(L in c)c.hasOwnProperty(L)&&(d=c[L],d!=null)&&(L==="selected"?o.selected=d&&typeof d!="function"&&typeof d!="symbol":ut(o,l,L,d,c,null));return;case"dialog":Fe("beforetoggle",o),Fe("toggle",o),Fe("cancel",o),Fe("close",o);break;case"iframe":case"object":Fe("load",o);break;case"video":case"audio":for(d=0;d<bh.length;d++)Fe(bh[d],o);break;case"image":Fe("error",o),Fe("load",o);break;case"details":Fe("toggle",o);break;case"embed":case"source":case"link":Fe("error",o),Fe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(d=c[Y],d!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:ut(o,l,Y,d,c,null)}return;default:if(Gl(l)){for(te in c)c.hasOwnProperty(te)&&(d=c[te],d!==void 0&&U0(o,l,te,d,c,void 0));return}}for(R in c)c.hasOwnProperty(R)&&(d=c[R],d!=null&&ut(o,l,R,d,c,null))}function S4(o,l,c,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,A=null,R=null,L=null,Y=null,te=null;for(J in c){var ie=c[J];if(c.hasOwnProperty(J)&&ie!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":L=ie;default:d.hasOwnProperty(J)||ut(o,l,J,null,d,ie)}}for(var Q in d){var J=d[Q];if(ie=c[Q],d.hasOwnProperty(Q)&&(J!=null||ie!=null))switch(Q){case"type":T=J;break;case"name":y=J;break;case"checked":Y=J;break;case"defaultChecked":te=J;break;case"value":A=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,l));break;default:J!==ie&&ut(o,l,Q,J,d,ie)}}$l(o,A,R,L,Y,te,T,y);return;case"select":J=A=R=Q=null;for(T in c)if(L=c[T],c.hasOwnProperty(T)&&L!=null)switch(T){case"value":break;case"multiple":J=L;default:d.hasOwnProperty(T)||ut(o,l,T,null,d,L)}for(y in d)if(T=d[y],L=c[y],d.hasOwnProperty(y)&&(T!=null||L!=null))switch(y){case"value":Q=T;break;case"defaultValue":R=T;break;case"multiple":A=T;default:T!==L&&ut(o,l,y,T,d,L)}l=R,c=A,d=J,Q!=null?Qs(o,!!c,Q,!1):!!d!=!!c&&(l!=null?Qs(o,!!c,l,!0):Qs(o,!!c,c?[]:"",!1));return;case"textarea":J=Q=null;for(R in c)if(y=c[R],c.hasOwnProperty(R)&&y!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ut(o,l,R,null,d,y)}for(A in d)if(y=d[A],T=c[A],d.hasOwnProperty(A)&&(y!=null||T!=null))switch(A){case"value":Q=y;break;case"defaultValue":J=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==T&&ut(o,l,A,y,d,T)}Od(o,Q,J);return;case"option":for(var ye in c)Q=c[ye],c.hasOwnProperty(ye)&&Q!=null&&!d.hasOwnProperty(ye)&&(ye==="selected"?o.selected=!1:ut(o,l,ye,null,d,Q));for(L in d)Q=d[L],J=c[L],d.hasOwnProperty(L)&&Q!==J&&(Q!=null||J!=null)&&(L==="selected"?o.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":ut(o,l,L,Q,d,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in c)Q=c[Ae],c.hasOwnProperty(Ae)&&Q!=null&&!d.hasOwnProperty(Ae)&&ut(o,l,Ae,null,d,Q);for(Y in d)if(Q=d[Y],J=c[Y],d.hasOwnProperty(Y)&&Q!==J&&(Q!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,l));break;default:ut(o,l,Y,Q,d,J)}return;default:if(Gl(l)){for(var ct in c)Q=c[ct],c.hasOwnProperty(ct)&&Q!==void 0&&!d.hasOwnProperty(ct)&&U0(o,l,ct,void 0,d,Q);for(te in d)Q=d[te],J=c[te],!d.hasOwnProperty(te)||Q===J||Q===void 0&&J===void 0||U0(o,l,te,Q,d,J);return}}for(var G in c)Q=c[G],c.hasOwnProperty(G)&&Q!=null&&!d.hasOwnProperty(G)&&ut(o,l,G,null,d,Q);for(ie in d)Q=d[ie],J=c[ie],!d.hasOwnProperty(ie)||Q===J||Q==null&&J==null||ut(o,l,ie,Q,d,J)}function iC(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function w4(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],T=y.transferSize,A=y.initiatorType,R=y.duration;if(T&&R&&iC(A)){for(A=0,R=y.responseEnd,d+=1;d<c.length;d++){var L=c[d],Y=L.startTime;if(Y>R)break;var te=L.transferSize,ie=L.initiatorType;te&&iC(ie)&&(L=L.responseEnd,A+=te*(L<R?1:(R-Y)/(L-Y)))}if(--d,l+=8*(T+A)/(y.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var z0=null,j0=null;function Lp(o){return o.nodeType===9?o:o.ownerDocument}function sC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oC(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function F0(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var H0=null;function A4(){var o=window.event;return o&&o.type==="popstate"?o===H0?!1:(H0=o,!0):(H0=null,!1)}var aC=typeof setTimeout=="function"?setTimeout:void 0,C4=typeof clearTimeout=="function"?clearTimeout:void 0,lC=typeof Promise=="function"?Promise:void 0,x4=typeof queueMicrotask=="function"?queueMicrotask:typeof lC<"u"?function(o){return lC.resolve(null).then(o).catch(R4)}:aC;function R4(o){setTimeout(function(){throw o})}function bo(o){return o==="head"}function uC(o,l){var c=l,d=0;do{var y=c.nextSibling;if(o.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){o.removeChild(y),xu(l);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Sh(o.ownerDocument.documentElement);else if(c==="head"){c=o.ownerDocument.head,Sh(c);for(var T=c.firstChild;T;){var A=T.nextSibling,R=T.nodeName;T[wi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&T.rel.toLowerCase()==="stylesheet"||c.removeChild(T),T=A}}else c==="body"&&Sh(o.ownerDocument.body);c=y}while(c);xu(l)}function cC(o,l){var c=o;o=0;do{var d=c.nextSibling;if(c.nodeType===1?l?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(l?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(o===0)break;o--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||o++;c=d}while(c)}function q0(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":q0(c),Hl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function k4(o,l,c,d){for(;o.nodeType===1;){var y=c;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[wi])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=Or(o.nextSibling),o===null)break}return null}function I4(o,l,c){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Or(o.nextSibling),o===null))return null;return o}function hC(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Or(o.nextSibling),o===null))return null;return o}function $0(o){return o.data==="$?"||o.data==="$~"}function G0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function M4(o,l){var c=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||c.readyState!=="loading")l();else{var d=function(){l(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Or(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var K0=null;function fC(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"||c==="/&"){if(l===0)return Or(o.nextSibling);l--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||l++}o=o.nextSibling}return null}function dC(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(l===0)return o;l--}else c!=="/$"&&c!=="/&"||l++}o=o.previousSibling}return null}function pC(o,l,c){switch(l=Lp(c),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Sh(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Hl(o)}var Pr=new Map,mC=new Set;function Bp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ws=ae.d;ae.d={f:D4,r:N4,D:O4,C:P4,L:V4,m:L4,X:U4,S:B4,M:z4};function D4(){var o=ws.f(),l=kp();return o||l}function N4(o){var l=wr(o);l!==null&&l.tag===5&&l.type==="form"?D1(l):ws.r(o)}var wu=typeof document>"u"?null:document;function gC(o,l,c){var d=wu;if(d&&typeof l=="string"&&l){var y=Yn(l);y='link[rel="'+o+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),mC.has(y)||(mC.add(y),o={rel:o,crossOrigin:c,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),_n(l,"link",o),qt(l),d.head.appendChild(l)))}}function O4(o){ws.D(o),gC("dns-prefetch",o,null)}function P4(o,l){ws.C(o,l),gC("preconnect",o,l)}function V4(o,l,c){ws.L(o,l,c);var d=wu;if(d&&o&&l){var y='link[rel="preload"][as="'+Yn(l)+'"]';l==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Yn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Yn(c.imageSizes)+'"]')):y+='[href="'+Yn(o)+'"]';var T=y;switch(l){case"style":T=Au(o);break;case"script":T=Cu(o)}Pr.has(T)||(o=m({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:o,as:l},c),Pr.set(T,o),d.querySelector(y)!==null||l==="style"&&d.querySelector(wh(T))||l==="script"&&d.querySelector(Ah(T))||(l=d.createElement("link"),_n(l,"link",o),qt(l),d.head.appendChild(l)))}}function L4(o,l){ws.m(o,l);var c=wu;if(c&&o){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Yn(d)+'"][href="'+Yn(o)+'"]',T=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Cu(o)}if(!Pr.has(T)&&(o=m({rel:"modulepreload",href:o},l),Pr.set(T,o),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Ah(T)))return}d=c.createElement("link"),_n(d,"link",o),qt(d),c.head.appendChild(d)}}}function B4(o,l,c){ws.S(o,l,c);var d=wu;if(d&&o){var y=Ci(d).hoistableStyles,T=Au(o);l=l||"default";var A=y.get(T);if(!A){var R={loading:0,preload:null};if(A=d.querySelector(wh(T)))R.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":l},c),(c=Pr.get(T))&&W0(o,c);var L=A=d.createElement("link");qt(L),_n(L,"link",o),L._p=new Promise(function(Y,te){L.onload=Y,L.onerror=te}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Up(A,l,d)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(T,A)}}}function U4(o,l){ws.X(o,l);var c=wu;if(c&&o){var d=Ci(c).hoistableScripts,y=Cu(o),T=d.get(y);T||(T=c.querySelector(Ah(y)),T||(o=m({src:o,async:!0},l),(l=Pr.get(y))&&Y0(o,l),T=c.createElement("script"),qt(T),_n(T,"link",o),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(y,T))}}function z4(o,l){ws.M(o,l);var c=wu;if(c&&o){var d=Ci(c).hoistableScripts,y=Cu(o),T=d.get(y);T||(T=c.querySelector(Ah(y)),T||(o=m({src:o,async:!0,type:"module"},l),(l=Pr.get(y))&&Y0(o,l),T=c.createElement("script"),qt(T),_n(T,"link",o),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},d.set(y,T))}}function yC(o,l,c,d){var y=(y=Le.current)?Bp(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=Au(c.href),c=Ci(y).hoistableStyles,d=c.get(l),d||(d={type:"style",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=Au(c.href);var T=Ci(y).hoistableStyles,A=T.get(o);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,A),(T=y.querySelector(wh(o)))&&!T._p&&(A.instance=T,A.state.loading=5),Pr.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Pr.set(o,c),T||j4(y,o,c,A.state))),l&&d===null)throw Error(r(528,""));return A}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Cu(c),c=Ci(y).hoistableScripts,d=c.get(l),d||(d={type:"script",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Au(o){return'href="'+Yn(o)+'"'}function wh(o){return'link[rel="stylesheet"]['+o+"]"}function vC(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function j4(o,l,c,d){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=o.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),_n(l,"link",c),qt(l),o.head.appendChild(l))}function Cu(o){return'[src="'+Yn(o)+'"]'}function Ah(o){return"script[async]"+o}function TC(o,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var d=o.querySelector('style[data-href~="'+Yn(c.href)+'"]');if(d)return l.instance=d,qt(d),d;var y=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),qt(d),_n(d,"style",y),Up(d,c.precedence,o),l.instance=d;case"stylesheet":y=Au(c.href);var T=o.querySelector(wh(y));if(T)return l.state.loading|=4,l.instance=T,qt(T),T;d=vC(c),(y=Pr.get(y))&&W0(d,y),T=(o.ownerDocument||o).createElement("link"),qt(T);var A=T;return A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),_n(T,"link",d),l.state.loading|=4,Up(T,c.precedence,o),l.instance=T;case"script":return T=Cu(c.src),(y=o.querySelector(Ah(T)))?(l.instance=y,qt(y),y):(d=c,(y=Pr.get(T))&&(d=m({},c),Y0(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),qt(y),_n(y,"link",d),o.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,Up(d,c.precedence,o));return l.instance}function Up(o,l,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,T=y,A=0;A<d.length;A++){var R=d[A];if(R.dataset.precedence===l)T=R;else if(T!==y)break}T?T.parentNode.insertBefore(o,T.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(o,l.firstChild))}function W0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Y0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var zp=null;function EC(o,l,c){if(zp===null){var d=new Map,y=zp=new Map;y.set(c,d)}else y=zp,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(o))return d;for(d.set(o,null),c=c.getElementsByTagName(o),y=0;y<c.length;y++){var T=c[y];if(!(T[wi]||T[Ht]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var A=T.getAttribute(l)||"";A=o+A;var R=d.get(A);R?R.push(T):d.set(A,[T])}}return d}function bC(o,l,c){o=o.ownerDocument||o,o.head.insertBefore(c,l==="title"?o.querySelector("head > title"):null)}function F4(o,l,c){if(c===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(o=l.disabled,typeof l.precedence=="string"&&o==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function _C(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function H4(o,l,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Au(d.href),T=l.querySelector(wh(y));if(T){l=T._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=jp.bind(o),l.then(o,o)),c.state.loading|=4,c.instance=T,qt(T);return}T=l.ownerDocument||l,d=vC(d),(y=Pr.get(y))&&W0(d,y),T=T.createElement("link"),qt(T);var A=T;A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),_n(T,"link",d),c.instance=T}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(o.count++,c=jp.bind(o),l.addEventListener("load",c),l.addEventListener("error",c))}}var Q0=0;function q4(o,l){return o.stylesheets&&o.count===0&&Hp(o,o.stylesheets),0<o.count||0<o.imgCount?function(c){var d=setTimeout(function(){if(o.stylesheets&&Hp(o,o.stylesheets),o.unsuspend){var T=o.unsuspend;o.unsuspend=null,T()}},6e4+l);0<o.imgBytes&&Q0===0&&(Q0=62500*w4());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Hp(o,o.stylesheets),o.unsuspend)){var T=o.unsuspend;o.unsuspend=null,T()}},(o.imgBytes>Q0?50:800)+l);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function jp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Fp=null;function Hp(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Fp=new Map,l.forEach($4,o),Fp=null,jp.call(o))}function $4(o,l){if(!(l.state.loading&4)){var c=Fp.get(o);if(c)var d=c.get(null);else{c=new Map,Fp.set(o,c);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var A=y[T];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}y=l.instance,A=y.getAttribute("data-precedence"),T=c.get(A)||d,T===d&&c.set(null,y),c.set(A,y),this.count++,d=jp.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),T?T.parentNode.insertBefore(y,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),l.state.loading|=4}}var Ch={$$typeof:V,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function G4(o,l,c,d,y,T,A,R,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function SC(o,l,c,d,y,T,A,R,L,Y,te,ie){return o=new G4(o,l,c,A,L,Y,te,ie,R),l=1,T===!0&&(l|=24),T=ur(3,null,null,l),o.current=T,T.stateNode=o,l=kv(),l.refCount++,o.pooledCache=l,l.refCount++,T.memoizedState={element:d,isDehydrated:c,cache:l},Nv(T),o}function wC(o){return o?(o=ru,o):ru}function AC(o,l,c,d,y,T){y=wC(y),d.context===null?d.context=y:d.pendingContext=y,d=uo(l),d.payload={element:c},T=T===void 0?null:T,T!==null&&(d.callback=T),c=co(o,d,l),c!==null&&(tr(c,o,l),ih(c,o,l))}function CC(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function X0(o,l){CC(o,l),(o=o.alternate)&&CC(o,l)}function xC(o){if(o.tag===13||o.tag===31){var l=za(o,67108864);l!==null&&tr(l,o,67108864),X0(o,67108864)}}function RC(o){if(o.tag===13||o.tag===31){var l=pr();l=Ra(l);var c=za(o,l);c!==null&&tr(c,o,l),X0(o,l)}}var qp=!0;function K4(o,l,c,d){var y=ee.T;ee.T=null;var T=ae.p;try{ae.p=2,J0(o,l,c,d)}finally{ae.p=T,ee.T=y}}function W4(o,l,c,d){var y=ee.T;ee.T=null;var T=ae.p;try{ae.p=8,J0(o,l,c,d)}finally{ae.p=T,ee.T=y}}function J0(o,l,c,d){if(qp){var y=Z0(d);if(y===null)B0(o,l,d,$p,c),IC(o,d);else if(Q4(y,o,l,c,d))d.stopPropagation();else if(IC(o,d),l&4&&-1<Y4.indexOf(o)){for(;y!==null;){var T=wr(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var A=Ei(T.pendingLanes);if(A!==0){var R=T;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var L=1<<31-Pt(A);R.entanglements[1]|=L,A&=~L}Ui(T),(nt&6)===0&&(xp=Un()+500,Eh(0))}}break;case 31:case 13:R=za(T,2),R!==null&&tr(R,T,2),kp(),X0(T,2)}if(T=Z0(d),T===null&&B0(o,l,d,$p,c),T===y)break;y=T}y!==null&&d.stopPropagation()}else B0(o,l,d,null,c)}}function Z0(o){return o=Ar(o),eT(o)}var $p=null;function eT(o){if($p=null,o=Ai(o),o!==null){var l=s(o);if(l===null)o=null;else{var c=l.tag;if(c===13){if(o=a(l),o!==null)return o;o=null}else if(c===31){if(o=u(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return $p=o,null}function kC(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wa()){case kc:return 2;case Ic:return 8;case Ws:case ov:return 32;case Sd:return 268435456;default:return 32}default:return 32}}var tT=!1,_o=null,So=null,wo=null,xh=new Map,Rh=new Map,Ao=[],Y4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function IC(o,l){switch(o){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":xh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(l.pointerId)}}function kh(o,l,c,d,y,T){return o===null||o.nativeEvent!==T?(o={blockedOn:l,domEventName:c,eventSystemFlags:d,nativeEvent:T,targetContainers:[y]},l!==null&&(l=wr(l),l!==null&&xC(l)),o):(o.eventSystemFlags|=d,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function Q4(o,l,c,d,y){switch(l){case"focusin":return _o=kh(_o,o,l,c,d,y),!0;case"dragenter":return So=kh(So,o,l,c,d,y),!0;case"mouseover":return wo=kh(wo,o,l,c,d,y),!0;case"pointerover":var T=y.pointerId;return xh.set(T,kh(xh.get(T)||null,o,l,c,d,y)),!0;case"gotpointercapture":return T=y.pointerId,Rh.set(T,kh(Rh.get(T)||null,o,l,c,d,y)),!0}return!1}function MC(o){var l=Ai(o.target);if(l!==null){var c=s(l);if(c!==null){if(l=c.tag,l===13){if(l=a(c),l!==null){o.blockedOn=l,Wr(o.priority,function(){RC(c)});return}}else if(l===31){if(l=u(c),l!==null){o.blockedOn=l,Wr(o.priority,function(){RC(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Gp(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=Z0(o.nativeEvent);if(c===null){c=o.nativeEvent;var d=new c.constructor(c.type,c);Fc=d,c.target.dispatchEvent(d),Fc=null}else return l=wr(c),l!==null&&xC(l),o.blockedOn=c,!1;l.shift()}return!0}function DC(o,l,c){Gp(o)&&c.delete(l)}function X4(){tT=!1,_o!==null&&Gp(_o)&&(_o=null),So!==null&&Gp(So)&&(So=null),wo!==null&&Gp(wo)&&(wo=null),xh.forEach(DC),Rh.forEach(DC)}function Kp(o,l){o.blockedOn===l&&(o.blockedOn=null,tT||(tT=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,X4)))}var Wp=null;function NC(o){Wp!==o&&(Wp=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wp===o&&(Wp=null);for(var l=0;l<o.length;l+=3){var c=o[l],d=o[l+1],y=o[l+2];if(typeof d!="function"){if(eT(d||c)===null)continue;break}var T=wr(c);T!==null&&(o.splice(l,3),l-=3,Zv(T,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function xu(o){function l(L){return Kp(L,o)}_o!==null&&Kp(_o,o),So!==null&&Kp(So,o),wo!==null&&Kp(wo,o),xh.forEach(l),Rh.forEach(l);for(var c=0;c<Ao.length;c++){var d=Ao[c];d.blockedOn===o&&(d.blockedOn=null)}for(;0<Ao.length&&(c=Ao[0],c.blockedOn===null);)MC(c),c.blockedOn===null&&Ao.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],T=c[d+1],A=y[un]||null;if(typeof T=="function")A||NC(c);else if(A){var R=null;if(T&&T.hasAttribute("formAction")){if(y=T,A=T[un]||null)R=A.formAction;else if(eT(y)!==null)continue}else R=A.action;typeof R=="function"?c[d+1]=R:(c.splice(d,3),d-=3),NC(c)}}}function OC(){function o(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function nT(o){this._internalRoot=o}Yp.prototype.render=nT.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var c=l.current,d=pr();AC(c,d,o,l,null,null)},Yp.prototype.unmount=nT.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;AC(o.current,2,null,o,null,null),kp(),l[Si]=null}};function Yp(o){this._internalRoot=o}Yp.prototype.unstable_scheduleHydration=function(o){if(o){var l=kd();o={blockedOn:null,target:o,priority:l};for(var c=0;c<Ao.length&&l!==0&&l<Ao[c].priority;c++);Ao.splice(c,0,o),c===0&&MC(o)}};var PC=e.version;if(PC!=="19.2.4")throw Error(r(527,PC,"19.2.4"));ae.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(l),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var J4={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qp.isDisabled&&Qp.supportsFiber)try{Gr=Qp.inject(J4),yn=Qp}catch{}}return Mh.createRoot=function(o,l){if(!i(o))throw Error(r(299));var c=!1,d="",y=F1,T=H1,A=q1;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=SC(o,1,!1,null,null,c,d,null,y,T,A,OC),o[Si]=l.current,L0(o),new nT(l)},Mh.hydrateRoot=function(o,l,c){if(!i(o))throw Error(r(299));var d=!1,y="",T=F1,A=H1,R=q1,L=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.formState!==void 0&&(L=c.formState)),l=SC(o,1,!0,l,c??null,d,y,L,T,A,R,OC),l.context=wC(null),c=l.current,d=pr(),d=Ra(d),y=uo(d),y.callback=null,co(c,y,d),c=d,l.current.lanes=c,Ca(l,c),Ui(l),o[Si]=l.current,L0(o),new Yp(l)},Mh.version="19.2.4",Mh}var $C;function aB(){if($C)return sT.exports;$C=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sT.exports=oB(),sT.exports}var lB=aB();var GC="popstate";function uB(n={}){function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return vE("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Sf(i)}return hB(e,t,null,n)}function St(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function gi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cB(){return Math.random().toString(36).substring(2,10)}function KC(n,e){return{usr:n.state,key:n.key,idx:e}}function vE(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?fc(e):e,state:t,key:e&&e.key||r||cB()}}function Sf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function fc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function hB(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u="POP",h=null,f=p();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function p(){return(a.state||{idx:null}).idx}function m(){u="POP";let w=p(),x=w==null?null:w-f;f=w,h&&h({action:u,location:S.location,delta:x})}function v(w,x){u="PUSH";let N=vE(S.location,w,x);f=p()+1;let V=KC(N,f),q=S.createHref(N);try{a.pushState(V,"",q)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(q)}s&&h&&h({action:u,location:S.location,delta:1})}function E(w,x){u="REPLACE";let N=vE(S.location,w,x);f=p();let V=KC(N,f),q=S.createHref(N);a.replaceState(V,"",q),s&&h&&h({action:u,location:S.location,delta:0})}function b(w){return fB(w)}let S={get action(){return u},get location(){return n(i,a)},listen(w){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(GC,m),h=w,()=>{i.removeEventListener(GC,m),h=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:v,replace:E,go(w){return a.go(w)}};return S}function fB(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),St(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Sf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function UM(n,e,t="/"){return dB(n,e,t,!1)}function dB(n,e,t,r){let i=typeof e=="string"?fc(e):e,s=Us(i.pathname||"/",t);if(s==null)return null;let a=zM(n);pB(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=AB(s);u=SB(a[h],f,r)}return u}function zM(n,e=[],t=[],r="",i=!1){let s=(a,u,h=i,f)=>{let p={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&h)return;St(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=Os([r,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(St(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),zM(a.children,e,v,m,h)),!(a.path==null&&!a.index)&&e.push({path:m,score:bB(m,a.index),routesMeta:v})};return n.forEach((a,u)=>{if(a.path===""||!a.path?.includes("?"))s(a,u);else for(let h of jM(a.path))s(a,u,!0,h)}),e}function jM(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=jM(r.join("/")),u=[];return u.push(...a.map(h=>h===""?s:[s,h].join("/"))),i&&u.push(...a),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function pB(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_B(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var mB=/^:[\w-]+$/,gB=3,yB=2,vB=1,TB=10,EB=-2,WC=n=>n==="*";function bB(n,e){let t=n.split("/"),r=t.length;return t.some(WC)&&(r+=EB),e&&(r+=yB),t.filter(i=>!WC(i)).reduce((i,s)=>i+(mB.test(s)?gB:s===""?vB:TB),r)}function _B(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function SB(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=$m({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!m&&f&&t&&!r[r.length-1].route.index&&(m=$m({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Os([s,m.pathname]),pathnameBase:kB(Os([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=Os([s,m.pathnameBase]))}return a}function $m(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=wB(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:m},v)=>{if(p==="*"){let b=u[v]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const E=u[v];return m&&!E?f[p]=void 0:f[p]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function wB(n,e=!1,t=!0){gi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function AB(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Us(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var CB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function xB(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?fc(n):n,s;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?s=YC(t.substring(1),"/"):s=YC(t,e)):s=e,{pathname:s,search:IB(r),hash:MB(i)}}function YC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function uT(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RB(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $b(n){let e=RB(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Gb(n,e,t,r=!1){let i;typeof n=="string"?i=fc(n):(i={...n},St(!i.pathname||!i.pathname.includes("?"),uT("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),uT("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),uT("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let m=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}u=m>=0?e[m]:"/"}let h=xB(i,u),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var Os=n=>n.join("/").replace(/\/\/+/g,"/"),kB=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IB=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,MB=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,DB=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function NB(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function OB(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var FM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function HM(n,e){let t=n;if(typeof t!="string"||!CB.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,i=!1;if(FM)try{let s=new URL(window.location.href),a=t.startsWith("//")?new URL(s.protocol+t):new URL(t),u=Us(a.pathname,e);a.origin===s.origin&&u!=null?t=u+a.search+a.hash:i=!0}catch{gi(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qM=["POST","PUT","PATCH","DELETE"];new Set(qM);var PB=["GET",...qM];new Set(PB);var dc=P.createContext(null);dc.displayName="DataRouter";var dy=P.createContext(null);dy.displayName="DataRouterState";var VB=P.createContext(!1),$M=P.createContext({isTransitioning:!1});$M.displayName="ViewTransition";var LB=P.createContext(new Map);LB.displayName="Fetchers";var BB=P.createContext(null);BB.displayName="Await";var br=P.createContext(null);br.displayName="Navigation";var Jf=P.createContext(null);Jf.displayName="Location";var $r=P.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var Kb=P.createContext(null);Kb.displayName="RouteError";var GM="REACT_ROUTER_ERROR",UB="REDIRECT",zB="ROUTE_ERROR_RESPONSE";function jB(n){if(n.startsWith(`${GM}:${UB}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function FB(n){if(n.startsWith(`${GM}:${zB}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new DB(e.status,e.statusText,e.data)}catch{}}function HB(n,{relative:e}={}){St(pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(br),{hash:i,pathname:s,search:a}=ed(n,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:Os([t,s])),r.createHref({pathname:u,search:a,hash:i})}function pc(){return P.useContext(Jf)!=null}function ha(){return St(pc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Jf).location}var KM="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WM(n){P.useContext(br).static||P.useLayoutEffect(n)}function Zf(){let{isDataRoute:n}=P.useContext($r);return n?sU():qB()}function qB(){St(pc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(dc),{basename:e,navigator:t}=P.useContext(br),{matches:r}=P.useContext($r),{pathname:i}=ha(),s=JSON.stringify($b(r)),a=P.useRef(!1);return WM(()=>{a.current=!0}),P.useCallback((h,f={})=>{if(gi(a.current,KM),!a.current)return;if(typeof h=="number"){t.go(h);return}let p=Gb(h,JSON.parse(s),i,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Os([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,s,i,n])}var $B=P.createContext(null);function GB(n){let e=P.useContext($r).outlet;return P.useMemo(()=>e&&P.createElement($B.Provider,{value:n},e),[e,n])}function KB(){let{matches:n}=P.useContext($r),e=n[n.length-1];return e?e.params:{}}function ed(n,{relative:e}={}){let{matches:t}=P.useContext($r),{pathname:r}=ha(),i=JSON.stringify($b(t));return P.useMemo(()=>Gb(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function WB(n,e){return YM(n,e)}function YM(n,e,t,r,i){St(pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(br),{matches:a}=P.useContext($r),u=a[a.length-1],h=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let N=m&&m.path||"";XM(f,!m||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=ha(),E;if(e){let N=typeof e=="string"?fc(e):e;St(p==="/"||N.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${N.pathname}" was given in the \`location\` prop.`),E=N}else E=v;let b=E.pathname||"/",S=b;if(p!=="/"){let N=p.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let w=UM(n,{pathname:S});gi(m||w!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),gi(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=ZB(w&&w.map(N=>Object.assign({},N,{params:Object.assign({},h,N.params),pathname:Os([p,s.encodeLocation?s.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:Os([p,s.encodeLocation?s.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),a,t,r,i);return e&&x?P.createElement(Jf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},x):x}function YB(){let n=iU(),e=NB(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,a)}var QB=P.createElement(YB,null),QM=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=FB(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement($r.Provider,{value:this.props.routeContext},P.createElement(Kb.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(XB,{error:n},e):e}};QM.contextType=VB;var cT=new WeakMap;function XB({children:n,error:e}){let{basename:t}=P.useContext(br);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=jB(e.digest);if(r){let i=cT.get(e);if(i)throw i;let s=HM(r.location,t);if(FM&&!cT.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw cT.set(e,a),a}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return n}function JB({routeContext:n,match:e,children:t}){let r=P.useContext(dc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement($r.Provider,{value:n},t)}function ZB(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t?.errors;if(a!=null){let p=s.findIndex(m=>m.route.id&&a?.[m.route.id]!==void 0);St(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,h=-1;if(t)for(let p=0;p<s.length;p++){let m=s[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:v,errors:E}=t,b=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||b){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}let f=t&&r?(p,m)=>{r(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:OB(t.matches),errorInfo:m})}:void 0;return s.reduceRight((p,m,v)=>{let E,b=!1,S=null,w=null;t&&(E=a&&m.route.id?a[m.route.id]:void 0,S=m.route.errorElement||QB,u&&(h<0&&v===0?(XM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):h===v&&(b=!0,w=m.route.hydrateFallbackElement||null)));let x=e.concat(s.slice(0,v+1)),N=()=>{let V;return E?V=S:b?V=w:m.route.Component?V=P.createElement(m.route.Component,null):m.route.element?V=m.route.element:V=p,P.createElement(JB,{match:m,routeContext:{outlet:p,matches:x,isDataRoute:t!=null},children:V})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?P.createElement(QM,{location:t.location,revalidation:t.revalidation,component:S,error:E,children:N(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:f}):N()},null)}function Wb(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eU(n){let e=P.useContext(dc);return St(e,Wb(n)),e}function tU(n){let e=P.useContext(dy);return St(e,Wb(n)),e}function nU(n){let e=P.useContext($r);return St(e,Wb(n)),e}function Yb(n){let e=nU(n),t=e.matches[e.matches.length-1];return St(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function rU(){return Yb("useRouteId")}function iU(){let n=P.useContext(Kb),e=tU("useRouteError"),t=Yb("useRouteError");return n!==void 0?n:e.errors?.[t]}function sU(){let{router:n}=eU("useNavigate"),e=Yb("useNavigate"),t=P.useRef(!1);return WM(()=>{t.current=!0}),P.useCallback(async(i,s={})=>{gi(t.current,KM),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var QC={};function XM(n,e,t){!e&&!QC[n]&&(QC[n]=!0,gi(!1,t))}P.memo(oU);function oU({routes:n,future:e,state:t,onError:r}){return YM(n,void 0,t,r,e)}function JM({to:n,replace:e,state:t,relative:r}){St(pc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(br);gi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext($r),{pathname:a}=ha(),u=Zf(),h=Gb(n,$b(s),a,r==="path"),f=JSON.stringify(h);return P.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:r})},[u,f,r,e,t]),null}function ZM(n){return GB(n.context)}function ko(n){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aU({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){St(!pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:u,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[u,i,s,a]);typeof t=="string"&&(t=fc(t));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:E="default"}=t,b=P.useMemo(()=>{let S=Us(f,u);return S==null?null:{location:{pathname:S,search:p,hash:m,state:v,key:E},navigationType:r}},[u,f,p,m,v,E,r]);return gi(b!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:P.createElement(br.Provider,{value:h},P.createElement(Jf.Provider,{children:e,value:b}))}function lU({children:n,location:e}){return WB(TE(n),e)}function TE(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let s=[...e,i];if(r.type===P.Fragment){t.push.apply(t,TE(r.props.children,s));return}St(r.type===ko,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=TE(r.props.children,s)),t.push(a)}),t}var bm="get",_m="application/x-www-form-urlencoded";function py(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function uU(n){return py(n)&&n.tagName.toLowerCase()==="button"}function cU(n){return py(n)&&n.tagName.toLowerCase()==="form"}function hU(n){return py(n)&&n.tagName.toLowerCase()==="input"}function fU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function dU(n,e){return n.button===0&&(!e||e==="_self")&&!fU(n)}var Xp=null;function pU(){if(Xp===null)try{new FormData(document.createElement("form"),0),Xp=!1}catch{Xp=!0}return Xp}var mU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hT(n){return n!=null&&!mU.has(n)?(gi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_m}"`),null):n}function gU(n,e){let t,r,i,s,a;if(cU(n)){let u=n.getAttribute("action");r=u?Us(u,e):null,t=n.getAttribute("method")||bm,i=hT(n.getAttribute("enctype"))||_m,s=new FormData(n)}else if(uU(n)||hU(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(r=h?Us(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||bm,i=hT(n.getAttribute("formenctype"))||hT(u.getAttribute("enctype"))||_m,s=new FormData(u,n),!pU()){let{name:f,type:p,value:m}=n;if(p==="image"){let v=f?`${f}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else f&&s.append(f,m)}}else{if(py(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bm,r=null,i=_m,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qb(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function yU(n,e,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Us(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function vU(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TU(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function EU(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await vU(s,t);return a.links?a.links():[]}return[]}));return wU(r.flat(1).filter(TU).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function XC(n,e,t,r,i,s){let a=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return s==="assets"?e.filter((h,f)=>a(h,f)||u(h,f)):s==="data"?e.filter((h,f)=>{let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(a(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let m=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function bU(n,e,{includeHydrateFallback:t}={}){return _U(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function _U(n){return[...new Set(n)]}function SU(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function wU(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(SU(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function eD(){let n=P.useContext(dc);return Qb(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function AU(){let n=P.useContext(dy);return Qb(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Xb=P.createContext(void 0);Xb.displayName="FrameworkContext";function tD(){let n=P.useContext(Xb);return Qb(n,"You must render this element inside a <HydratedRouter> element"),n}function CU(n,e){let t=P.useContext(Xb),[r,i]=P.useState(!1),[s,a]=P.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:m}=e,v=P.useRef(null);P.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let S=x=>{x.forEach(N=>{a(N.isIntersecting)})},w=new IntersectionObserver(S,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[n]),P.useEffect(()=>{if(r){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},b=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,v,{}]:[s,v,{onFocus:Dh(u,E),onBlur:Dh(h,b),onMouseEnter:Dh(f,E),onMouseLeave:Dh(p,b),onTouchStart:Dh(m,E)}]:[!1,v,{}]}function Dh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function xU({page:n,...e}){let{router:t}=eD(),r=P.useMemo(()=>UM(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(kU,{page:n,matches:r,...e}):null}function RU(n){let{manifest:e,routeModules:t}=tD(),[r,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return EU(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function kU({page:n,matches:e,...t}){let r=ha(),{future:i,manifest:s,routeModules:a}=tD(),{basename:u}=eD(),{loaderData:h,matches:f}=AU(),p=P.useMemo(()=>XC(n,e,f,s,r,"data"),[n,e,f,s,r]),m=P.useMemo(()=>XC(n,e,f,s,r,"assets"),[n,e,f,s,r]),v=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,w=!1;if(e.forEach(N=>{let V=s.routes[N.route.id];!V||!V.hasLoader||(!p.some(q=>q.route.id===N.route.id)&&N.route.id in h&&a[N.route.id]?.shouldRevalidate||V.hasClientLoader?w=!0:S.add(N.route.id))}),S.size===0)return[];let x=yU(n,u,i.unstable_trailingSlashAwareDataRequests,"data");return w&&S.size>0&&x.searchParams.set("_routes",e.filter(N=>S.has(N.route.id)).map(N=>N.route.id).join(",")),[x.pathname+x.search]},[u,i.unstable_trailingSlashAwareDataRequests,h,r,s,p,e,n,a]),E=P.useMemo(()=>bU(m,s),[m,s]),b=RU(m);return P.createElement(P.Fragment,null,v.map(S=>P.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>P.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),b.map(({key:S,link:w})=>P.createElement("link",{key:S,nonce:t.nonce,...w,crossOrigin:w.crossOrigin??t.crossOrigin})))}function IU(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var MU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MU&&(window.__reactRouterVersion="7.13.0")}catch{}function DU({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=P.useRef();i.current==null&&(i.current=uB({window:r,v5Compat:!0}));let s=i.current,[a,u]=P.useState({action:s.action,location:s.location}),h=P.useCallback(f=>{t===!1?u(f):P.startTransition(()=>u(f))},[t]);return P.useLayoutEffect(()=>s.listen(h),[s,h]),P.createElement(aU,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:t})}var nD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jb=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:u,target:h,to:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...E},b){let{basename:S,unstable_useTransitions:w}=P.useContext(br),x=typeof f=="string"&&nD.test(f),N=HM(f,S);f=N.to;let V=HB(f,{relative:i}),[q,F,Z]=CU(r,E),I=PU(f,{replace:a,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:w});function k(B){e&&e(B),B.defaultPrevented||I(B)}let D=P.createElement("a",{...E,...Z,href:N.absoluteURL||V,onClick:N.isExternal||s?e:k,ref:IU(b,F),target:h,"data-discover":!x&&t==="render"?"true":void 0});return q&&!x?P.createElement(P.Fragment,null,D,P.createElement(xU,{page:V})):D});Jb.displayName="Link";var rD=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:u,children:h,...f},p){let m=ed(a,{relative:f.relative}),v=ha(),E=P.useContext(dy),{navigator:b,basename:S}=P.useContext(br),w=E!=null&&zU(m)&&u===!0,x=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,N=v.pathname,V=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(N=N.toLowerCase(),V=V?V.toLowerCase():null,x=x.toLowerCase()),V&&S&&(V=Us(V,S)||V);const q=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let F=N===x||!i&&N.startsWith(x)&&N.charAt(q)==="/",Z=V!=null&&(V===x||!i&&V.startsWith(x)&&V.charAt(x.length)==="/"),I={isActive:F,isPending:Z,isTransitioning:w},k=F?e:void 0,D;typeof r=="function"?D=r(I):D=[r,F?"active":null,Z?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(I):s;return P.createElement(Jb,{...f,"aria-current":k,className:D,ref:p,style:B,to:a,viewTransition:u},typeof h=="function"?h(I):h)});rD.displayName="NavLink";var NU=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=bm,action:u,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...E},b)=>{let{unstable_useTransitions:S}=P.useContext(br),w=BU(),x=UU(u,{relative:f}),N=a.toLowerCase()==="get"?"get":"post",V=typeof u=="string"&&nD.test(u),q=F=>{if(h&&h(F),F.defaultPrevented)return;F.preventDefault();let Z=F.nativeEvent.submitter,I=Z?.getAttribute("formmethod")||a,k=()=>w(Z||F.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:i,state:s,relative:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v});S&&t!==!1?P.startTransition(()=>k()):k()};return P.createElement("form",{ref:b,method:N,action:x,onSubmit:r?h:q,...E,"data-discover":!V&&n==="render"?"true":void 0})});NU.displayName="Form";function OU(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iD(n){let e=P.useContext(dc);return St(e,OU(n)),e}function PU(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let f=Zf(),p=ha(),m=ed(n,{relative:s});return P.useCallback(v=>{if(dU(v,e)){v.preventDefault();let E=t!==void 0?t:Sf(p)===Sf(m),b=()=>f(n,{replace:E,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:u});h?P.startTransition(()=>b()):b()}},[p,f,m,t,r,e,n,i,s,a,u,h])}var VU=0,LU=()=>`__${String(++VU)}__`;function BU(){let{router:n}=iD("useSubmit"),{basename:e}=P.useContext(br),t=rU(),r=n.fetch,i=n.navigate;return P.useCallback(async(s,a={})=>{let{action:u,method:h,encType:f,formData:p,body:m}=gU(s,e);if(a.navigate===!1){let v=a.fetcherKey||LU();await r(v,t,a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||h,formEncType:a.encType||f,flushSync:a.flushSync})}else await i(a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||h,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,t])}function UU(n,{relative:e}={}){let{basename:t}=P.useContext(br),r=P.useContext($r);St(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ed(n||".",{relative:e})},a=ha();if(n==null){s.search=a.search;let u=new URLSearchParams(s.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Os([t,s.pathname])),Sf(s)}function zU(n,{relative:e}={}){let t=P.useContext($M);St(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=iD("useViewTransitionState"),i=ed(n,{relative:e});if(!t.isTransitioning)return!1;let s=Us(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Us(t.nextLocation.pathname,r)||t.nextLocation.pathname;return $m(i.pathname,a)!=null||$m(i.pathname,s)!=null}var jU=BM();const FU=LM(jU),HU=()=>{};var JC={};const sD=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qU=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},oD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,p=s>>2,m=(s&3)<<4|u>>4;let v=(u&15)<<2|f>>6,E=f&63;h||(E=64,a||(v=64)),r.push(t[p],t[m],t[v],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||f==null||m==null)throw new $U;const v=s<<2|u>>4;if(r.push(v),f!==64){const E=u<<4&240|f>>2;if(r.push(E),m!==64){const b=f<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $U extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GU=function(n){const e=sD(n);return oD.encodeByteArray(e,!0)},Gm=function(n){return GU(n).replace(/\./g,"")},aD=function(n){try{return oD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const WU=()=>KU().__FIREBASE_DEFAULTS__,YU=()=>{if(typeof process>"u"||typeof JC>"u")return;const n=JC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&aD(n[1]);return e&&JSON.parse(e)},my=()=>{try{return HU()||WU()||YU()||QU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lD=n=>my()?.emulatorHosts?.[n],uD=n=>{const e=lD(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cD=()=>my()?.config,hD=n=>my()?.[`_${n}`];class XU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Dl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zb(n){return(await fetch(n,{credentials:"include"})).ok}function fD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Gm(JSON.stringify(t)),Gm(JSON.stringify(a)),""].join(".")}const ef={};function JU(){const n={prod:[],emulator:[]};for(const e of Object.keys(ef))ef[e]?n.emulator.push(e):n.prod.push(e);return n}function ZU(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ZC=!1;function e_(n,e){if(typeof window>"u"||typeof document>"u"||!Dl(window.location.host)||ef[n]===e||ef[n]||ZC)return;ef[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=JU().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{ZC=!0,a()},v}function p(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=ZU(r),E=t("text"),b=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),w=document.getElementById(S)||document.createElement("a"),x=t("preprendIcon"),N=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const V=v.element;u(V),p(w,S);const q=f();h(N,x),V.append(N,b,w,q),document.body.appendChild(V)}s?(b.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ez(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function tz(){const n=my()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rz(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sz(){const n=Vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oz(){return!tz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function az(){try{return typeof indexedDB=="object"}catch{return!1}}function lz(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const uz="FirebaseError";class rs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=uz,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,td.prototype.create)}}class td{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?cz(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new rs(i,u,r)}}function cz(n,e){return n.replace(hz,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const hz=/\{\$([^}]+)}/g;function fz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Tl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(ex(s)&&ex(a)){if(!Tl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function ex(n){return n!==null&&typeof n=="object"}function nd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dz(n,e){const t=new pz(n,e);return t.subscribe.bind(t)}class pz{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=fT),i.error===void 0&&(i.error=fT),i.complete===void 0&&(i.complete=fT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mz(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fT(){}function zt(n){return n&&n._delegate?n._delegate:n}class ea{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tl="[DEFAULT]";class gz{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new XU;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vz(e))try{this.getOrInitializeService({instanceIdentifier:tl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tl){return this.instances.has(e)}getOptions(e=tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tl){return this.component?this.component.multipleInstances?e:tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yz(n){return n===tl?void 0:n}function vz(n){return n.instantiationMode==="EAGER"}class Tz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gz(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const Ez={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},bz=Ge.INFO,_z={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},Sz=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=_z[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t_{constructor(e){this.name=e,this._logLevel=bz,this._logHandler=Sz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ez[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const wz=(n,e)=>e.some(t=>n instanceof t);let tx,nx;function Az(){return tx||(tx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cz(){return nx||(nx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dD=new WeakMap,EE=new WeakMap,pD=new WeakMap,dT=new WeakMap,n_=new WeakMap;function xz(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t($o(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&dD.set(t,n)}).catch(()=>{}),n_.set(e,n),e}function Rz(n){if(EE.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});EE.set(n,e)}let bE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return EE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $o(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kz(n){bE=n(bE)}function Iz(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(pT(this),e,...t);return pD.set(r,e.sort?e.sort():[e]),$o(r)}:Cz().includes(n)?function(...e){return n.apply(pT(this),e),$o(dD.get(this))}:function(...e){return $o(n.apply(pT(this),e))}}function Mz(n){return typeof n=="function"?Iz(n):(n instanceof IDBTransaction&&Rz(n),wz(n,Az())?new Proxy(n,bE):n)}function $o(n){if(n instanceof IDBRequest)return xz(n);if(dT.has(n))return dT.get(n);const e=Mz(n);return e!==n&&(dT.set(n,e),n_.set(e,n)),e}const pT=n=>n_.get(n);function Dz(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=$o(a);return r&&a.addEventListener("upgradeneeded",h=>{r($o(a.result),h.oldVersion,h.newVersion,$o(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const Nz=["get","getKey","getAll","getAllKeys","count"],Oz=["put","add","delete","clear"],mT=new Map;function rx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mT.get(e))return mT.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Oz.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Nz.includes(t)))return;const s=async function(a,...u){const h=this.transaction(a,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&h.done]))[0]};return mT.set(e,s),s}kz(n=>({...n,get:(e,t,r)=>rx(e,t)||n.get(e,t,r),has:(e,t)=>!!rx(e,t)||n.has(e,t)}));class Pz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Vz(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Vz(n){return n.getComponent()?.type==="VERSION"}const _E="@firebase/app",ix="0.14.8";const zs=new t_("@firebase/app"),Lz="@firebase/app-compat",Bz="@firebase/analytics-compat",Uz="@firebase/analytics",zz="@firebase/app-check-compat",jz="@firebase/app-check",Fz="@firebase/auth",Hz="@firebase/auth-compat",qz="@firebase/database",$z="@firebase/data-connect",Gz="@firebase/database-compat",Kz="@firebase/functions",Wz="@firebase/functions-compat",Yz="@firebase/installations",Qz="@firebase/installations-compat",Xz="@firebase/messaging",Jz="@firebase/messaging-compat",Zz="@firebase/performance",e6="@firebase/performance-compat",t6="@firebase/remote-config",n6="@firebase/remote-config-compat",r6="@firebase/storage",i6="@firebase/storage-compat",s6="@firebase/firestore",o6="@firebase/ai",a6="@firebase/firestore-compat",l6="firebase",u6="12.9.0";const SE="[DEFAULT]",c6={[_E]:"fire-core",[Lz]:"fire-core-compat",[Uz]:"fire-analytics",[Bz]:"fire-analytics-compat",[jz]:"fire-app-check",[zz]:"fire-app-check-compat",[Fz]:"fire-auth",[Hz]:"fire-auth-compat",[qz]:"fire-rtdb",[$z]:"fire-data-connect",[Gz]:"fire-rtdb-compat",[Kz]:"fire-fn",[Wz]:"fire-fn-compat",[Yz]:"fire-iid",[Qz]:"fire-iid-compat",[Xz]:"fire-fcm",[Jz]:"fire-fcm-compat",[Zz]:"fire-perf",[e6]:"fire-perf-compat",[t6]:"fire-rc",[n6]:"fire-rc-compat",[r6]:"fire-gcs",[i6]:"fire-gcs-compat",[s6]:"fire-fst",[a6]:"fire-fst-compat",[o6]:"fire-vertex","fire-js":"fire-js",[l6]:"fire-js-all"};const Km=new Map,h6=new Map,wE=new Map;function sx(n,e){try{n.container.addComponent(e)}catch(t){zs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function El(n){const e=n.name;if(wE.has(e))return zs.debug(`There were multiple attempts to register component ${e}.`),!1;wE.set(e,n);for(const t of Km.values())sx(t,n);for(const t of h6.values())sx(t,n);return!0}function gy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ir(n){return n==null?!1:n.settings!==void 0}const f6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Go=new td("app","Firebase",f6);class d6{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}}const Nl=u6;function mD(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:SE,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Go.create("bad-app-name",{appName:String(i)});if(t||(t=cD()),!t)throw Go.create("no-options");const s=Km.get(i);if(s){if(Tl(t,s.options)&&Tl(r,s.config))return s;throw Go.create("duplicate-app",{appName:i})}const a=new Tz(i);for(const h of wE.values())a.addComponent(h);const u=new d6(t,r,a);return Km.set(i,u),u}function r_(n=SE){const e=Km.get(n);if(!e&&n===SE&&cD())return mD();if(!e)throw Go.create("no-app",{appName:n});return e}function $i(n,e,t){let r=c6[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zs.warn(a.join(" "));return}El(new ea(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const p6="firebase-heartbeat-database",m6=1,wf="firebase-heartbeat-store";let gT=null;function gD(){return gT||(gT=Dz(p6,m6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Go.create("idb-open",{originalErrorMessage:n.message})})),gT}async function g6(n){try{const t=(await gD()).transaction(wf),r=await t.objectStore(wf).get(yD(n));return await t.done,r}catch(e){if(e instanceof rs)zs.warn(e.message);else{const t=Go.create("idb-get",{originalErrorMessage:e?.message});zs.warn(t.message)}}}async function ox(n,e){try{const r=(await gD()).transaction(wf,"readwrite");await r.objectStore(wf).put(e,yD(n)),await r.done}catch(t){if(t instanceof rs)zs.warn(t.message);else{const r=Go.create("idb-set",{originalErrorMessage:t?.message});zs.warn(r.message)}}}function yD(n){return`${n.name}!${n.options.appId}`}const y6=1024,v6=30;class T6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new b6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ax();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>v6){const i=_6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ax(),{heartbeatsToSend:t,unsentEntries:r}=E6(this._heartbeatsCache.heartbeats),i=Gm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return zs.warn(e),""}}}function ax(){return new Date().toISOString().substring(0,10)}function E6(n,e=y6){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),lx(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),lx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class b6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return az()?lz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await g6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ox(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ox(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function lx(n){return Gm(JSON.stringify({version:2,heartbeats:n})).length}function _6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function S6(n){El(new ea("platform-logger",e=>new Pz(e),"PRIVATE")),El(new ea("heartbeat",e=>new T6(e),"PRIVATE")),$i(_E,ix,n),$i(_E,ix,"esm2020"),$i("fire-js","")}S6("");function vD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w6=vD,TD=new td("auth","Firebase",vD());const Wm=new t_("@firebase/auth");function A6(n,...e){Wm.logLevel<=Ge.WARN&&Wm.warn(`Auth (${Nl}): ${n}`,...e)}function Sm(n,...e){Wm.logLevel<=Ge.ERROR&&Wm.error(`Auth (${Nl}): ${n}`,...e)}function qr(n,...e){throw s_(n,...e)}function hi(n,...e){return s_(n,...e)}function i_(n,e,t){const r={...w6(),[e]:t};return new td("auth","Firebase",r).create(e,{appName:n.name})}function Ps(n){return i_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function C6(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&qr(n,"argument-error"),i_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function s_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return TD.create(n,...e)}function Re(n,e,...t){if(!n)throw s_(e,...t)}function Ms(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sm(e),new Error(e)}function js(n,e){n||Ms(e)}function AE(){return typeof self<"u"&&self.location?.href||""}function x6(){return ux()==="http:"||ux()==="https:"}function ux(){return typeof self<"u"&&self.location?.protocol||null}function R6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x6()||rz()||"connection"in navigator)?navigator.onLine:!0}function k6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class rd{constructor(e,t){this.shortDelay=e,this.longDelay=t,js(t>e,"Short delay should be less than long delay!"),this.isMobile=ez()||iz()}get(){return R6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function o_(n,e){js(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ED{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const I6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const M6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D6=new rd(3e4,6e4);function fa(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function da(n,e,t,r,i={}){return bD(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=nd({key:n.config.apiKey,...a}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...s};return nz()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Dl(n.emulatorConfig.host)&&(f.credentials="include"),ED.fetch()(await _D(n,n.config.apiHost,t,u),f)})}async function bD(n,e,t){n._canInitEmulator=!1;const r={...I6,...e};try{const i=new O6(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Jp(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jp(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Jp(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw Jp(n,"user-disabled",a);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw i_(n,p,f);qr(n,p)}}catch(i){if(i instanceof rs)throw i;qr(n,"network-request-failed",{message:String(i)})}}async function id(n,e,t,r,i={}){const s=await da(n,e,t,r,i);return"mfaPendingCredential"in s&&qr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function _D(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?o_(n.config,i):`${n.config.apiScheme}://${i}`;return M6.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function N6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(hi(this.auth,"network-request-failed")),D6.get())})}}function Jp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=hi(n,e,r);return i.customData._tokenResponse=t,i}function cx(n){return n!==void 0&&n.enterprise!==void 0}class P6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return N6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V6(n,e){return da(n,"GET","/v2/recaptchaConfig",fa(n,e))}async function L6(n,e){return da(n,"POST","/v1/accounts:delete",e)}async function Ym(n,e){return da(n,"POST","/v1/accounts:lookup",e)}function tf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B6(n,e=!1){const t=zt(n),r=await t.getIdToken(e),i=a_(r);Re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:tf(yT(i.auth_time)),issuedAtTime:tf(yT(i.iat)),expirationTime:tf(yT(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function yT(n){return Number(n)*1e3}function a_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Sm("JWT malformed, contained fewer than 3 sections"),null;try{const i=aD(t);return i?JSON.parse(i):(Sm("Failed to decode base64 JWT payload"),null)}catch(i){return Sm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hx(n){const e=a_(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Af(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rs&&U6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function U6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class z6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class CE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tf(this.lastLoginAt),this.creationTime=tf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qm(n){const e=n.auth,t=await n.getIdToken(),r=await Af(n,Ym(e,{idToken:t}));Re(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?SD(i.providerUserInfo):[],a=F6(n.providerData,s),u=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!a?.length,f=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new CE(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function j6(n){const e=zt(n);await Qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function F6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SD(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function H6(n,e){const t=await bD(n,{},async()=>{const r=nd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await _D(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&Dl(n.emulatorConfig.host)&&(h.credentials="include"),ED.fetch()(a,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function q6(n,e){return da(n,"POST","/v2/accounts:revokeToken",fa(n,e))}class $u{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=hx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await H6(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new $u;return r&&(Re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Re(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $u,this.toJSON())}_performRefresh(){return Ms("not implemented")}}function xo(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new z6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new CE(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Af(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return B6(this,e)}reload(){return j6(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Qm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Ps(this.auth));const e=await this.getIdToken();return await Af(this,L6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:E,providerData:b,stsTokenManager:S}=t;Re(m&&S,e,"internal-error");const w=$u.fromJSON(this.name,S);Re(typeof m=="string",e,"internal-error"),xo(r,e.name),xo(i,e.name),Re(typeof v=="boolean",e,"internal-error"),Re(typeof E=="boolean",e,"internal-error"),xo(s,e.name),xo(a,e.name),xo(u,e.name),xo(h,e.name),xo(f,e.name),xo(p,e.name);const x=new ai({uid:m,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:E,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:w,createdAt:f,lastLoginAt:p});return b&&Array.isArray(b)&&(x.providerData=b.map(N=>({...N}))),h&&(x._redirectEventId=h),x}static async _fromIdTokenResponse(e,t,r=!1){const i=new $u;i.updateFromServerResponse(t);const s=new ai({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Qm(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Re(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?SD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new $u;u.updateFromIdToken(r);const h=new ai({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new CE(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(h,f),h}}const fx=new Map;function Ds(n){js(n instanceof Function,"Expected a class definition");let e=fx.get(n);return e?(js(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fx.set(n,e),e)}class wD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wD.type="NONE";const dx=wD;function wm(n,e,t){return`firebase:${n}:${e}:${t}`}class Gu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=wm(this.userKey,i.apiKey,s),this.fullPersistenceKey=wm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ym(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Gu(Ds(dx),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||Ds(dx);const a=wm(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(a);if(p){let m;if(typeof p=="string"){const v=await Ym(e,{idToken:p}).catch(()=>{});if(!v)break;m=await ai._fromGetAccountInfoResponse(e,v,p)}else m=ai._fromJSON(e,p);f!==s&&(u=m),s=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Gu(s,e,r):(s=h[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new Gu(s,e,r))}}function px(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ID(e))return"Blackberry";if(MD(e))return"Webos";if(CD(e))return"Safari";if((e.includes("chrome/")||xD(e))&&!e.includes("edge/"))return"Chrome";if(kD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function AD(n=Vn()){return/firefox\//i.test(n)}function CD(n=Vn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xD(n=Vn()){return/crios\//i.test(n)}function RD(n=Vn()){return/iemobile/i.test(n)}function kD(n=Vn()){return/android/i.test(n)}function ID(n=Vn()){return/blackberry/i.test(n)}function MD(n=Vn()){return/webos/i.test(n)}function l_(n=Vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $6(n=Vn()){return l_(n)&&!!window.navigator?.standalone}function G6(){return sz()&&document.documentMode===10}function DD(n=Vn()){return l_(n)||kD(n)||MD(n)||ID(n)||/windows phone/i.test(n)||RD(n)}function ND(n,e=[]){let t;switch(n){case"Browser":t=px(Vn());break;case"Worker":t=`${px(Vn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nl}/${r}`}class K6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const h=e(s);a(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function W6(n,e={}){return da(n,"GET","/v2/passwordPolicy",fa(n,e))}const Y6=6;class Q6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Y6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class X6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mx(this),this.idTokenSubscription=new mx(this),this.beforeStateQueue=new K6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ds(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Gu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ym(this,{idToken:e}),r=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ir(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=k6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Ps(this));const t=e?zt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W6(this),t=new Q6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new td("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await q6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ds(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Gu.create(this,[Ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(t);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ND(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&A6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function pa(n){return zt(n)}class mx{constructor(e){this.auth=e,this.observer=null,this.addObserver=dz(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function J6(n){yy=n}function OD(n){return yy.loadJS(n)}function Z6(){return yy.recaptchaEnterpriseScript}function e5(){return yy.gapiScript}function t5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class n5{constructor(){this.enterprise=new r5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class r5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const i5="recaptcha-enterprise",PD="NO_RECAPTCHA";class s5{constructor(e){this.type=i5,this.auth=pa(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{V6(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new P6(h);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(h=>{u(h)})})}function i(s,a,u){const h=window.grecaptcha;cx(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a(PD)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new n5().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&cx(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Z6();h.length!==0&&(h+=u),OD(h).then(()=>{i(u,s,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function gx(n,e,t,r=!1,i=!1){const s=new s5(n);let a;if(i)a=PD;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function xE(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await gx(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await gx(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function o5(n,e){const t=gy(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Tl(s,e??{}))return i;qr(i,"already-initialized")}return t.initialize({options:e})}function a5(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ds);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function l5(n,e,t){const r=pa(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=VD(e),{host:a,port:u}=u5(e),h=u===null?"":`:${u}`,f={url:`${s}//${a}${h}/`},p=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Tl(f,r.config.emulator)&&Tl(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Dl(a)?(Zb(`${s}//${a}${h}`),e_("Auth",!0)):c5()}function VD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function u5(n){const e=VD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:yx(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:yx(a)}}}function yx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function c5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class u_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,t){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}async function h5(n,e){return da(n,"POST","/v1/accounts:signUp",e)}async function f5(n,e){return id(n,"POST","/v1/accounts:signInWithPassword",fa(n,e))}async function d5(n,e){return id(n,"POST","/v1/accounts:signInWithEmailLink",fa(n,e))}async function p5(n,e){return id(n,"POST","/v1/accounts:signInWithEmailLink",fa(n,e))}class Cf extends u_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Cf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Cf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xE(e,t,"signInWithPassword",f5);case"emailLink":return d5(e,{email:this._email,oobCode:this._password});default:qr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xE(e,r,"signUpPassword",h5);case"emailLink":return p5(e,{idToken:t,email:this._email,oobCode:this._password});default:qr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ku(n,e){return id(n,"POST","/v1/accounts:signInWithIdp",fa(n,e))}const m5="http://localhost";class bl extends u_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new bl(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Ku(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ku(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ku(e,t)}buildRequest(){const e={requestUri:m5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nd(t)}return e}}function g5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y5(n){const e=Fh(Hh(n)).link,t=e?Fh(Hh(e)).deep_link_id:null,r=Fh(Hh(n)).deep_link_id;return(r?Fh(Hh(r)).link:null)||r||t||e||n}class c_{constructor(e){const t=Fh(Hh(e)),r=t.apiKey??null,i=t.oobCode??null,s=g5(t.mode??null);Re(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=y5(e);try{return new c_(t)}catch{return null}}}class mc{constructor(){this.providerId=mc.PROVIDER_ID}static credential(e,t){return Cf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=c_.parseLink(t);return Re(r,"argument-error"),Cf._fromEmailAndCode(e,r.code,r.tenantId)}}mc.PROVIDER_ID="password";mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class h_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sd extends h_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Po extends sd{constructor(){super("facebook.com")}static credential(e){return bl._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.FACEBOOK_SIGN_IN_METHOD="facebook.com";Po.PROVIDER_ID="facebook.com";class Is extends sd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bl._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Is.credential(t,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";class Vo extends sd{constructor(){super("github.com")}static credential(e){return bl._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vo.credential(e.oauthAccessToken)}catch{return null}}}Vo.GITHUB_SIGN_IN_METHOD="github.com";Vo.PROVIDER_ID="github.com";class Lo extends sd{constructor(){super("twitter.com")}static credential(e,t){return bl._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Lo.credential(t,r)}catch{return null}}}Lo.TWITTER_SIGN_IN_METHOD="twitter.com";Lo.PROVIDER_ID="twitter.com";async function v5(n,e){return id(n,"POST","/v1/accounts:signUp",fa(n,e))}class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await ai._fromIdTokenResponse(e,r,i),a=vx(r);return new _l({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=vx(r);return new _l({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function vx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Xm extends rs{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Xm(e,t,r,i)}}function LD(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xm._fromErrorAndOperation(n,s,e,r):s})}async function T5(n,e,t=!1){const r=await Af(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _l._forOperation(n,"link",r)}async function E5(n,e,t=!1){const{auth:r}=n;if(ir(r.app))return Promise.reject(Ps(r));const i="reauthenticate";try{const s=await Af(n,LD(r,i,e,n),t);Re(s.idToken,r,"internal-error");const a=a_(s.idToken);Re(a,r,"internal-error");const{sub:u}=a;return Re(n.uid===u,r,"user-mismatch"),_l._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&qr(r,"user-mismatch"),s}}async function BD(n,e,t=!1){if(ir(n.app))return Promise.reject(Ps(n));const r="signIn",i=await LD(n,r,e),s=await _l._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function b5(n,e){return BD(pa(n),e)}async function UD(n){const e=pa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _5(n,e,t){if(ir(n.app))return Promise.reject(Ps(n));const r=pa(n),a=await xE(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v5).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&UD(n),h}),u=await _l._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function S5(n,e,t){return ir(n.app)?Promise.reject(Ps(n)):b5(zt(n),mc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&UD(n),r})}function w5(n,e,t,r){return zt(n).onIdTokenChanged(e,t,r)}function A5(n,e,t){return zt(n).beforeAuthStateChanged(e,t)}function C5(n,e,t,r){return zt(n).onAuthStateChanged(e,t,r)}function x5(n){return zt(n).signOut()}const Jm="__sak";class zD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jm,"1"),this.storage.removeItem(Jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const R5=1e3,k5=10;class jD extends zD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);G6()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,k5):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},R5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jD.type="LOCAL";const I5=jD;class FD extends zD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FD.type="SESSION";const HD=FD;function M5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class vy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new vy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async f=>f(t.origin,s)),h=await M5(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vy.receivers=[];function f_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class D5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,h)=>{const f=f_("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(m){const v=m;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(v.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Gi(){return window}function N5(n){Gi().location.href=n}function qD(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function O5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P5(){return navigator?.serviceWorker?.controller||null}function V5(){return qD()?self:null}const $D="firebaseLocalStorageDb",L5=1,Zm="firebaseLocalStorage",GD="fbase_key";class od{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ty(n,e){return n.transaction([Zm],e?"readwrite":"readonly").objectStore(Zm)}function B5(){const n=indexedDB.deleteDatabase($D);return new od(n).toPromise()}function RE(){const n=indexedDB.open($D,L5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Zm,{keyPath:GD})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Zm)?e(r):(r.close(),await B5(),e(await RE()))})})}async function Tx(n,e,t){const r=Ty(n,!0).put({[GD]:e,value:t});return new od(r).toPromise()}async function U5(n,e){const t=Ty(n,!1).get(e),r=await new od(t).toPromise();return r===void 0?null:r.value}function Ex(n,e){const t=Ty(n,!0).delete(e);return new od(t).toPromise()}const z5=800,j5=3;class KD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await RE(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>j5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vy._getInstance(V5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await O5(),!this.activeServiceWorker)return;this.sender=new D5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await RE();return await Tx(e,Jm,"1"),await Ex(e,Jm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>U5(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ex(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ty(i,!1).getAll();return new od(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KD.type="LOCAL";const F5=KD;new rd(3e4,6e4);function WD(n,e){return e?Ds(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class d_ extends u_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ku(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ku(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ku(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function H5(n){return BD(n.auth,new d_(n),n.bypassAuthState)}function q5(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),E5(t,new d_(n),n.bypassAuthState)}async function $5(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),T5(t,new d_(n),n.bypassAuthState)}class YD{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H5;case"linkViaPopup":case"linkViaRedirect":return $5;case"reauthViaPopup":case"reauthViaRedirect":return q5;default:qr(this.auth,"internal-error")}}resolve(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const G5=new rd(2e3,1e4);async function K5(n,e,t){if(ir(n.app))return Promise.reject(hi(n,"operation-not-supported-in-this-environment"));const r=pa(n);C6(n,e,h_);const i=WD(r,t);return new il(r,"signInViaPopup",e,i).executeNotNull()}class il extends YD{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,il.currentPopupAction&&il.currentPopupAction.cancel(),il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){js(this.filter.length===1,"Popup operations only handle one event");const e=f_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,il.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G5.get())};e()}}il.currentPopupAction=null;const W5="pendingRedirect",Am=new Map;class Y5 extends YD{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Am.get(this.auth._key());if(!e){try{const r=await Q5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Am.set(this.auth._key(),e)}return this.bypassAuthState||Am.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q5(n,e){const t=Z5(e),r=J5(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function X5(n,e){Am.set(n._key(),e)}function J5(n){return Ds(n._redirectPersistence)}function Z5(n){return wm(W5,n.config.apiKey,n.name)}async function ej(n,e,t=!1){if(ir(n.app))return Promise.reject(Ps(n));const r=pa(n),i=WD(r,e),a=await new Y5(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const tj=600*1e3;class nj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!QD(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(hi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tj&&this.cachedEventUids.clear(),this.cachedEventUids.has(bx(e))}saveEventToCache(e){this.cachedEventUids.add(bx(e)),this.lastProcessedEventTime=Date.now()}}function bx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QD({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function rj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QD(n);default:return!1}}async function ij(n,e={}){return da(n,"GET","/v1/projects",e)}const sj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oj=/^https?/;async function aj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ij(n);for(const t of e)try{if(lj(t))return}catch{}qr(n,"unauthorized-domain")}function lj(n){const e=AE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!oj.test(t))return!1;if(sj.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const uj=new rd(3e4,6e4);function _x(){const n=Gi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cj(n){return new Promise((e,t)=>{function r(){_x(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_x(),t(hi(n,"network-request-failed"))},timeout:uj.get()})}if(Gi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Gi().gapi?.load)r();else{const i=t5("iframefcb");return Gi()[i]=()=>{gapi.load?r():t(hi(n,"network-request-failed"))},OD(`${e5()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Cm=null,e})}let Cm=null;function hj(n){return Cm=Cm||cj(n),Cm}const fj=new rd(5e3,15e3),dj="__/auth/iframe",pj="emulator/auth/iframe",mj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yj(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?o_(e,pj):`https://${n.config.authDomain}/${dj}`,r={apiKey:e.apiKey,appName:n.name,v:Nl},i=gj.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${nd(r).slice(1)}`}async function vj(n){const e=await hj(n),t=Gi().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:yj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=hi(n,"network-request-failed"),u=Gi().setTimeout(()=>{s(a)},fj.get());function h(){Gi().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{s(a)})}))}const Tj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ej=500,bj=600,_j="_blank",Sj="http://localhost";class Sx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wj(n,e,t,r=Ej,i=bj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...Tj,width:r.toString(),height:i.toString(),top:s,left:a},f=Vn().toLowerCase();t&&(u=xD(f)?_j:t),AD(f)&&(e=e||Sj,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[E,b])=>`${v}${E}=${b},`,"");if($6(f)&&u!=="_self")return Aj(e||"",u),new Sx(null);const m=window.open(e||"",u,p);Re(m,n,"popup-blocked");try{m.focus()}catch{}return new Sx(m)}function Aj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Cj="__/auth/handler",xj="emulator/auth/handler",Rj=encodeURIComponent("fac");async function wx(n,e,t,r,i,s){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Nl,eventId:i};if(e instanceof h_){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",fz(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof sd){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await n._getAppCheckToken(),f=h?`#${Rj}=${encodeURIComponent(h)}`:"";return`${kj(n)}?${nd(u).slice(1)}${f}`}function kj({config:n}){return n.emulator?o_(n,xj):`https://${n.authDomain}/${Cj}`}const vT="webStorageSupport";class Ij{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HD,this._completeRedirectFn=ej,this._overrideRedirectResult=X5}async _openPopup(e,t,r,i){js(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await wx(e,t,r,AE(),i);return wj(e,s,f_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await wx(e,t,r,AE(),i);return N5(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(js(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vj(e),r=new nj(e);return t.register("authEvent",i=>(Re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vT,{type:vT},i=>{const s=i?.[0]?.[vT];s!==void 0&&t(!!s),qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DD()||CD()||l_()}}const Mj=Ij;var Ax="@firebase/auth",Cx="1.12.0";class Dj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Nj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Oj(n){El(new ea("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;Re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ND(n)},f=new X6(r,i,s,h);return a5(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),El(new ea("auth-internal",e=>{const t=pa(e.getProvider("auth").getImmediate());return(r=>new Dj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(Ax,Cx,Nj(n)),$i(Ax,Cx,"esm2020")}const Pj=300,Vj=hD("authIdTokenMaxAge")||Pj;let xx=null;const Lj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Vj)return;const i=t?.token;xx!==i&&(xx=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Bj(n=r_()){const e=gy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=o5(n,{popupRedirectResolver:Mj,persistence:[F5,I5,HD]}),r=hD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Lj(s.toString());A5(t,a,()=>a(t.currentUser)),w5(t,u=>a(u))}}const i=lD("auth");return i&&l5(t,`http://${i}`),t}function Uj(){return document.getElementsByTagName("head")?.[0]??document}J6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=hi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Uj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Oj("Browser");var Rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ko,XD;(function(){var n;function e(I,k){function D(){}D.prototype=k.prototype,I.F=k.prototype,I.prototype=new D,I.prototype.constructor=I,I.D=function(B,U,H){for(var O=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)O[ke-2]=arguments[ke];return k.prototype[U].apply(B,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,k,D){D||(D=0);const B=Array(16);if(typeof k=="string")for(var U=0;U<16;++U)B[U]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(U=0;U<16;++U)B[U]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=I.g[0],D=I.g[1],U=I.g[2];let H=I.g[3],O;O=k+(H^D&(U^H))+B[0]+3614090360&4294967295,k=D+(O<<7&4294967295|O>>>25),O=H+(U^k&(D^U))+B[1]+3905402710&4294967295,H=k+(O<<12&4294967295|O>>>20),O=U+(D^H&(k^D))+B[2]+606105819&4294967295,U=H+(O<<17&4294967295|O>>>15),O=D+(k^U&(H^k))+B[3]+3250441966&4294967295,D=U+(O<<22&4294967295|O>>>10),O=k+(H^D&(U^H))+B[4]+4118548399&4294967295,k=D+(O<<7&4294967295|O>>>25),O=H+(U^k&(D^U))+B[5]+1200080426&4294967295,H=k+(O<<12&4294967295|O>>>20),O=U+(D^H&(k^D))+B[6]+2821735955&4294967295,U=H+(O<<17&4294967295|O>>>15),O=D+(k^U&(H^k))+B[7]+4249261313&4294967295,D=U+(O<<22&4294967295|O>>>10),O=k+(H^D&(U^H))+B[8]+1770035416&4294967295,k=D+(O<<7&4294967295|O>>>25),O=H+(U^k&(D^U))+B[9]+2336552879&4294967295,H=k+(O<<12&4294967295|O>>>20),O=U+(D^H&(k^D))+B[10]+4294925233&4294967295,U=H+(O<<17&4294967295|O>>>15),O=D+(k^U&(H^k))+B[11]+2304563134&4294967295,D=U+(O<<22&4294967295|O>>>10),O=k+(H^D&(U^H))+B[12]+1804603682&4294967295,k=D+(O<<7&4294967295|O>>>25),O=H+(U^k&(D^U))+B[13]+4254626195&4294967295,H=k+(O<<12&4294967295|O>>>20),O=U+(D^H&(k^D))+B[14]+2792965006&4294967295,U=H+(O<<17&4294967295|O>>>15),O=D+(k^U&(H^k))+B[15]+1236535329&4294967295,D=U+(O<<22&4294967295|O>>>10),O=k+(U^H&(D^U))+B[1]+4129170786&4294967295,k=D+(O<<5&4294967295|O>>>27),O=H+(D^U&(k^D))+B[6]+3225465664&4294967295,H=k+(O<<9&4294967295|O>>>23),O=U+(k^D&(H^k))+B[11]+643717713&4294967295,U=H+(O<<14&4294967295|O>>>18),O=D+(H^k&(U^H))+B[0]+3921069994&4294967295,D=U+(O<<20&4294967295|O>>>12),O=k+(U^H&(D^U))+B[5]+3593408605&4294967295,k=D+(O<<5&4294967295|O>>>27),O=H+(D^U&(k^D))+B[10]+38016083&4294967295,H=k+(O<<9&4294967295|O>>>23),O=U+(k^D&(H^k))+B[15]+3634488961&4294967295,U=H+(O<<14&4294967295|O>>>18),O=D+(H^k&(U^H))+B[4]+3889429448&4294967295,D=U+(O<<20&4294967295|O>>>12),O=k+(U^H&(D^U))+B[9]+568446438&4294967295,k=D+(O<<5&4294967295|O>>>27),O=H+(D^U&(k^D))+B[14]+3275163606&4294967295,H=k+(O<<9&4294967295|O>>>23),O=U+(k^D&(H^k))+B[3]+4107603335&4294967295,U=H+(O<<14&4294967295|O>>>18),O=D+(H^k&(U^H))+B[8]+1163531501&4294967295,D=U+(O<<20&4294967295|O>>>12),O=k+(U^H&(D^U))+B[13]+2850285829&4294967295,k=D+(O<<5&4294967295|O>>>27),O=H+(D^U&(k^D))+B[2]+4243563512&4294967295,H=k+(O<<9&4294967295|O>>>23),O=U+(k^D&(H^k))+B[7]+1735328473&4294967295,U=H+(O<<14&4294967295|O>>>18),O=D+(H^k&(U^H))+B[12]+2368359562&4294967295,D=U+(O<<20&4294967295|O>>>12),O=k+(D^U^H)+B[5]+4294588738&4294967295,k=D+(O<<4&4294967295|O>>>28),O=H+(k^D^U)+B[8]+2272392833&4294967295,H=k+(O<<11&4294967295|O>>>21),O=U+(H^k^D)+B[11]+1839030562&4294967295,U=H+(O<<16&4294967295|O>>>16),O=D+(U^H^k)+B[14]+4259657740&4294967295,D=U+(O<<23&4294967295|O>>>9),O=k+(D^U^H)+B[1]+2763975236&4294967295,k=D+(O<<4&4294967295|O>>>28),O=H+(k^D^U)+B[4]+1272893353&4294967295,H=k+(O<<11&4294967295|O>>>21),O=U+(H^k^D)+B[7]+4139469664&4294967295,U=H+(O<<16&4294967295|O>>>16),O=D+(U^H^k)+B[10]+3200236656&4294967295,D=U+(O<<23&4294967295|O>>>9),O=k+(D^U^H)+B[13]+681279174&4294967295,k=D+(O<<4&4294967295|O>>>28),O=H+(k^D^U)+B[0]+3936430074&4294967295,H=k+(O<<11&4294967295|O>>>21),O=U+(H^k^D)+B[3]+3572445317&4294967295,U=H+(O<<16&4294967295|O>>>16),O=D+(U^H^k)+B[6]+76029189&4294967295,D=U+(O<<23&4294967295|O>>>9),O=k+(D^U^H)+B[9]+3654602809&4294967295,k=D+(O<<4&4294967295|O>>>28),O=H+(k^D^U)+B[12]+3873151461&4294967295,H=k+(O<<11&4294967295|O>>>21),O=U+(H^k^D)+B[15]+530742520&4294967295,U=H+(O<<16&4294967295|O>>>16),O=D+(U^H^k)+B[2]+3299628645&4294967295,D=U+(O<<23&4294967295|O>>>9),O=k+(U^(D|~H))+B[0]+4096336452&4294967295,k=D+(O<<6&4294967295|O>>>26),O=H+(D^(k|~U))+B[7]+1126891415&4294967295,H=k+(O<<10&4294967295|O>>>22),O=U+(k^(H|~D))+B[14]+2878612391&4294967295,U=H+(O<<15&4294967295|O>>>17),O=D+(H^(U|~k))+B[5]+4237533241&4294967295,D=U+(O<<21&4294967295|O>>>11),O=k+(U^(D|~H))+B[12]+1700485571&4294967295,k=D+(O<<6&4294967295|O>>>26),O=H+(D^(k|~U))+B[3]+2399980690&4294967295,H=k+(O<<10&4294967295|O>>>22),O=U+(k^(H|~D))+B[10]+4293915773&4294967295,U=H+(O<<15&4294967295|O>>>17),O=D+(H^(U|~k))+B[1]+2240044497&4294967295,D=U+(O<<21&4294967295|O>>>11),O=k+(U^(D|~H))+B[8]+1873313359&4294967295,k=D+(O<<6&4294967295|O>>>26),O=H+(D^(k|~U))+B[15]+4264355552&4294967295,H=k+(O<<10&4294967295|O>>>22),O=U+(k^(H|~D))+B[6]+2734768916&4294967295,U=H+(O<<15&4294967295|O>>>17),O=D+(H^(U|~k))+B[13]+1309151649&4294967295,D=U+(O<<21&4294967295|O>>>11),O=k+(U^(D|~H))+B[4]+4149444226&4294967295,k=D+(O<<6&4294967295|O>>>26),O=H+(D^(k|~U))+B[11]+3174756917&4294967295,H=k+(O<<10&4294967295|O>>>22),O=U+(k^(H|~D))+B[2]+718787259&4294967295,U=H+(O<<15&4294967295|O>>>17),O=D+(H^(U|~k))+B[9]+3951481745&4294967295,I.g[0]=I.g[0]+k&4294967295,I.g[1]=I.g[1]+(U+(O<<21&4294967295|O>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+H&4294967295}r.prototype.v=function(I,k){k===void 0&&(k=I.length);const D=k-this.blockSize,B=this.C;let U=this.h,H=0;for(;H<k;){if(U==0)for(;H<=D;)i(this,I,H),H+=this.blockSize;if(typeof I=="string"){for(;H<k;)if(B[U++]=I.charCodeAt(H++),U==this.blockSize){i(this,B),U=0;break}}else for(;H<k;)if(B[U++]=I[H++],U==this.blockSize){i(this,B),U=0;break}}this.h=U,this.o+=k},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var k=1;k<I.length-8;++k)I[k]=0;k=this.o*8;for(var D=I.length-8;D<I.length;++D)I[D]=k&255,k/=256;for(this.v(I),I=Array(16),k=0,D=0;D<4;++D)for(let B=0;B<32;B+=8)I[k++]=this.g[D]>>>B&255;return I};function s(I,k){var D=u;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=k(I)}function a(I,k){this.h=k;const D=[];let B=!0;for(let U=I.length-1;U>=0;U--){const H=I[U]|0;B&&H==k||(D[U]=H,B=!1)}this.g=D}var u={};function h(I){return-128<=I&&I<128?s(I,function(k){return new a([k|0],k<0?-1:0)}):new a([I|0],I<0?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return m;if(I<0)return w(f(-I));const k=[];let D=1;for(let B=0;I>=D;B++)k[B]=I/D|0,D*=4294967296;return new a(k,0)}function p(I,k){if(I.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(I.charAt(0)=="-")return w(p(I.substring(1),k));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=f(Math.pow(k,8));let B=m;for(let H=0;H<I.length;H+=8){var U=Math.min(8,I.length-H);const O=parseInt(I.substring(H,H+U),k);U<8?(U=f(Math.pow(k,U)),B=B.j(U).add(f(O))):(B=B.j(D),B=B.add(f(O)))}return B}var m=h(0),v=h(1),E=h(16777216);n=a.prototype,n.m=function(){if(S(this))return-w(this).m();let I=0,k=1;for(let D=0;D<this.g.length;D++){const B=this.i(D);I+=(B>=0?B:4294967296+B)*k,k*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(S(this))return"-"+w(this).toString(I);const k=f(Math.pow(I,6));var D=this;let B="";for(;;){const U=q(D,k).g;D=x(D,U.j(k));let H=((D.g.length>0?D.g[0]:D.h)>>>0).toString(I);if(D=U,b(D))return H+B;for(;H.length<6;)H="0"+H;B=H+B}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(let k=0;k<I.g.length;k++)if(I.g[k]!=0)return!1;return!0}function S(I){return I.h==-1}n.l=function(I){return I=x(this,I),S(I)?-1:b(I)?0:1};function w(I){const k=I.g.length,D=[];for(let B=0;B<k;B++)D[B]=~I.g[B];return new a(D,~I.h).add(v)}n.abs=function(){return S(this)?w(this):this},n.add=function(I){const k=Math.max(this.g.length,I.g.length),D=[];let B=0;for(let U=0;U<=k;U++){let H=B+(this.i(U)&65535)+(I.i(U)&65535),O=(H>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);B=O>>>16,H&=65535,O&=65535,D[U]=O<<16|H}return new a(D,D[D.length-1]&-2147483648?-1:0)};function x(I,k){return I.add(w(k))}n.j=function(I){if(b(this)||b(I))return m;if(S(this))return S(I)?w(this).j(w(I)):w(w(this).j(I));if(S(I))return w(this.j(w(I)));if(this.l(E)<0&&I.l(E)<0)return f(this.m()*I.m());const k=this.g.length+I.g.length,D=[];for(var B=0;B<2*k;B++)D[B]=0;for(B=0;B<this.g.length;B++)for(let U=0;U<I.g.length;U++){const H=this.i(B)>>>16,O=this.i(B)&65535,ke=I.i(U)>>>16,Ce=I.i(U)&65535;D[2*B+2*U]+=O*Ce,N(D,2*B+2*U),D[2*B+2*U+1]+=H*Ce,N(D,2*B+2*U+1),D[2*B+2*U+1]+=O*ke,N(D,2*B+2*U+1),D[2*B+2*U+2]+=H*ke,N(D,2*B+2*U+2)}for(I=0;I<k;I++)D[I]=D[2*I+1]<<16|D[2*I];for(I=k;I<2*k;I++)D[I]=0;return new a(D,0)};function N(I,k){for(;(I[k]&65535)!=I[k];)I[k+1]+=I[k]>>>16,I[k]&=65535,k++}function V(I,k){this.g=I,this.h=k}function q(I,k){if(b(k))throw Error("division by zero");if(b(I))return new V(m,m);if(S(I))return k=q(w(I),k),new V(w(k.g),w(k.h));if(S(k))return k=q(I,w(k)),new V(w(k.g),k.h);if(I.g.length>30){if(S(I)||S(k))throw Error("slowDivide_ only works with positive integers.");for(var D=v,B=k;B.l(I)<=0;)D=F(D),B=F(B);var U=Z(D,1),H=Z(B,1);for(B=Z(B,2),D=Z(D,2);!b(B);){var O=H.add(B);O.l(I)<=0&&(U=U.add(D),H=O),B=Z(B,1),D=Z(D,1)}return k=x(I,U.j(k)),new V(U,k)}for(U=m;I.l(k)>=0;){for(D=Math.max(1,Math.floor(I.m()/k.m())),B=Math.ceil(Math.log(D)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),H=f(D),O=H.j(k);S(O)||O.l(I)>0;)D-=B,H=f(D),O=H.j(k);b(H)&&(H=v),U=U.add(H),I=x(I,O)}return new V(U,I)}n.B=function(I){return q(this,I).h},n.and=function(I){const k=Math.max(this.g.length,I.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)&I.i(B);return new a(D,this.h&I.h)},n.or=function(I){const k=Math.max(this.g.length,I.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)|I.i(B);return new a(D,this.h|I.h)},n.xor=function(I){const k=Math.max(this.g.length,I.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)^I.i(B);return new a(D,this.h^I.h)};function F(I){const k=I.g.length+1,D=[];for(let B=0;B<k;B++)D[B]=I.i(B)<<1|I.i(B-1)>>>31;return new a(D,I.h)}function Z(I,k){const D=k>>5;k%=32;const B=I.g.length-D,U=[];for(let H=0;H<B;H++)U[H]=k>0?I.i(H+D)>>>k|I.i(H+D+1)<<32-k:I.i(H+D);return new a(U,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,XD=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,Ko=a}).apply(typeof Rx<"u"?Rx:typeof self<"u"?self:typeof window<"u"?window:{});var Zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var JD,qh,ZD,xm,kE,eN,tN,nN;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zp=="object"&&Zp];for(var _=0;_<g.length;++_){var C=g[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(g,_){if(_)e:{var C=r;g=g.split(".");for(var M=0;M<g.length-1;M++){var K=g[M];if(!(K in C))break e;C=C[K]}g=g[g.length-1],M=C[g],_=_(M),_!=M&&_!=null&&e(C,g,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(_){var C=[],M;for(M in _)Object.prototype.hasOwnProperty.call(_,M)&&C.push([M,_[M]]);return C}});var s=s||{},a=this||self;function u(g){var _=typeof g;return _=="object"&&g!=null||_=="function"}function h(g,_,C){return g.call.apply(g.bind,arguments)}function f(g,_,C){return f=h,f.apply(null,arguments)}function p(g,_){var C=Array.prototype.slice.call(arguments,1);return function(){var M=C.slice();return M.push.apply(M,arguments),g.apply(this,M)}}function m(g,_){function C(){}C.prototype=_.prototype,g.Z=_.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(M,K,X){for(var ce=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ce[Oe-2]=arguments[Oe];return _.prototype[K].apply(M,ce)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function E(g){const _=g.length;if(_>0){const C=Array(_);for(let M=0;M<_;M++)C[M]=g[M];return C}return[]}function b(g,_){for(let M=1;M<arguments.length;M++){const K=arguments[M];var C=typeof K;if(C=C!="object"?C:K?Array.isArray(K)?"array":C:"null",C=="array"||C=="object"&&typeof K.length=="number"){C=g.length||0;const X=K.length||0;g.length=C+X;for(let ce=0;ce<X;ce++)g[C+ce]=K[ce]}else g.push(K)}}class S{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function w(g){a.setTimeout(()=>{throw g},0)}function x(){var g=I;let _=null;return g.g&&(_=g.g,g.g=g.g.next,g.g||(g.h=null),_.next=null),_}class N{constructor(){this.h=this.g=null}add(_,C){const M=V.get();M.set(_,C),this.h?this.h.next=M:this.g=M,this.h=M}}var V=new S(()=>new q,g=>g.reset());class q{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let F,Z=!1,I=new N,k=()=>{const g=Promise.resolve(void 0);F=()=>{g.then(D)}};function D(){for(var g;g=x();){try{g.h.call(g.g)}catch(C){w(C)}var _=V;_.j(g),_.h<100&&(_.h++,g.next=_.g,_.g=g)}Z=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(g,_){this.type=g,this.g=this.target=_,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,_=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};a.addEventListener("test",C,_),a.removeEventListener("test",C,_)}catch{}return g})();function O(g){return/^[\s\xa0]*$/.test(g)}function ke(g,_){U.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,_)}m(ke,U),ke.prototype.init=function(g,_){const C=this.type=g.type,M=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=_,_=g.relatedTarget,_||(C=="mouseover"?_=g.fromElement:C=="mouseout"&&(_=g.toElement)),this.relatedTarget=_,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ae(g,_,C,M,K){this.listener=g,this.proxy=null,this.src=_,this.type=C,this.capture=!!M,this.ha=K,this.key=++ee,this.da=this.fa=!1}function ge(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ve(g,_,C){for(const M in g)_.call(C,g[M],M,g)}function He(g,_){for(const C in g)_.call(void 0,g[C],C,g)}function j(g){const _={};for(const C in g)_[C]=g[C];return _}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(g,_){let C,M;for(let K=1;K<arguments.length;K++){M=arguments[K];for(C in M)g[C]=M[C];for(let X=0;X<se.length;X++)C=se[X],Object.prototype.hasOwnProperty.call(M,C)&&(g[C]=M[C])}}function me(g){this.src=g,this.g={},this.h=0}me.prototype.add=function(g,_,C,M,K){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const ce=Le(g,_,M,K);return ce>-1?(_=g[ce],C||(_.fa=!1)):(_=new ae(_,this.src,X,!!M,K),_.fa=C,g.push(_)),_};function Ie(g,_){const C=_.type;if(C in g.g){var M=g.g[C],K=Array.prototype.indexOf.call(M,_,void 0),X;(X=K>=0)&&Array.prototype.splice.call(M,K,1),X&&(ge(_),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Le(g,_,C,M){for(let K=0;K<g.length;++K){const X=g[K];if(!X.da&&X.listener==_&&X.capture==!!C&&X.ha==M)return K}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),nn={};function Et(g,_,C,M,K){if(Array.isArray(_)){for(let X=0;X<_.length;X++)Et(g,_[X],C,M,K);return null}return C=Rc(C),g&&g[Ce]?g.J(_,C,u(M)?!!M.capture:!1,K):_a(g,_,C,!1,M,K)}function _a(g,_,C,M,K,X){if(!_)throw Error("Invalid event type");const ce=u(K)?!!K.capture:!!K;let Oe=Sa(g);if(Oe||(g[Qe]=Oe=new me(g)),C=Oe.add(_,C,M,ce,X),C.proxy)return C;if(M=Bl(),C.proxy=M,M.src=g,M.listener=C,g.addEventListener)H||(K=ce),K===void 0&&(K=!1),g.addEventListener(_.toString(),M,K);else if(g.attachEvent)g.attachEvent(vi(_.toString()),M);else if(g.addListener&&g.removeListener)g.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Bl(){function g(C){return _.call(g.src,g.listener,C)}const _=Cc;return g}function Ul(g,_,C,M,K){if(Array.isArray(_))for(var X=0;X<_.length;X++)Ul(g,_[X],C,M,K);else M=u(M)?!!M.capture:!!M,C=Rc(C),g&&g[Ce]?(g=g.i,X=String(_).toString(),X in g.g&&(_=g.g[X],C=Le(_,C,M,K),C>-1&&(ge(_[C]),Array.prototype.splice.call(_,C,1),_.length==0&&(delete g.g[X],g.h--)))):g&&(g=Sa(g))&&(_=g.g[_.toString()],g=-1,_&&(g=Le(_,C,M,K)),(C=g>-1?_[g]:null)&&zl(C))}function zl(g){if(typeof g!="number"&&g&&!g.da){var _=g.src;if(_&&_[Ce])Ie(_.i,g);else{var C=g.type,M=g.proxy;_.removeEventListener?_.removeEventListener(C,M,g.capture):_.detachEvent?_.detachEvent(vi(C),M):_.addListener&&_.removeListener&&_.removeListener(M),(C=Sa(_))?(Ie(C,g),C.h==0&&(C.src=null,_[Qe]=null)):ge(g)}}}function vi(g){return g in nn?nn[g]:nn[g]="on"+g}function Cc(g,_){if(g.da)g=!0;else{_=new ke(_,this);const C=g.listener,M=g.ha||g.src;g.fa&&zl(g),g=C.call(M,_)}return g}function Sa(g){return g=g[Qe],g instanceof me?g:null}var xc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rc(g){return typeof g=="function"?g:(g[xc]||(g[xc]=function(_){return g.handleEvent(_)}),g[xc])}function jt(){B.call(this),this.i=new me(this),this.M=this,this.G=null}m(jt,B),jt.prototype[Ce]=!0,jt.prototype.removeEventListener=function(g,_,C,M){Ul(this,g,_,C,M)};function rn(g,_){var C,M=g.G;if(M)for(C=[];M;M=M.G)C.push(M);if(g=g.M,M=_.type||_,typeof _=="string")_=new U(_,g);else if(_ instanceof U)_.target=_.target||g;else{var K=_;_=new U(M,g),fe(_,K)}K=!0;let X,ce;if(C)for(ce=C.length-1;ce>=0;ce--)X=_.g=C[ce],K=Ks(X,M,!0,_)&&K;if(X=_.g=g,K=Ks(X,M,!0,_)&&K,K=Ks(X,M,!1,_)&&K,C)for(ce=0;ce<C.length;ce++)X=_.g=C[ce],K=Ks(X,M,!1,_)&&K}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var g=this.i;for(const _ in g.g){const C=g.g[_];for(let M=0;M<C.length;M++)ge(C[M]);delete g.g[_],g.h--}}this.G=null},jt.prototype.J=function(g,_,C,M){return this.i.add(String(g),_,!1,C,M)},jt.prototype.K=function(g,_,C,M){return this.i.add(String(g),_,!0,C,M)};function Ks(g,_,C,M){if(_=g.i.g[String(_)],!_)return!0;_=_.concat();let K=!0;for(let X=0;X<_.length;++X){const ce=_[X];if(ce&&!ce.da&&ce.capture==C){const Oe=ce.listener,Vt=ce.ha||ce.src;ce.fa&&Ie(g.i,ce),K=Oe.call(Vt,M)!==!1&&K}}return K&&!M.defaultPrevented}function sv(g,_){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:a.setTimeout(g,_||0)}function _d(g){g.g=sv(()=>{g.g=null,g.i&&(g.i=!1,_d(g))},g.l);const _=g.h;g.h=null,g.m.apply(null,_)}class Un extends B{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:_d(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(g){B.call(this),this.h=g,this.g={}}m(wa,B);var kc=[];function Ic(g){Ve(g.g,function(_,C){this.g.hasOwnProperty(C)&&zl(_)},g),g.g={}}wa.prototype.N=function(){wa.Z.N.call(this),Ic(this)},wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ws=a.JSON.stringify,ov=a.JSON.parse,Sd=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function wd(){}function Ad(){}var Gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yn(){U.call(this,"d")}m(yn,U);function Sr(){U.call(this,"c")}m(Sr,U);var Pt={},Cd=null;function jl(){return Cd=Cd||new jt}Pt.Ia="serverreachability";function xd(g){U.call(this,Pt.Ia,g)}m(xd,U);function Ti(g){const _=jl();rn(_,new xd(_))}Pt.STAT_EVENT="statevent";function Aa(g,_){U.call(this,Pt.STAT_EVENT,g),this.stat=_}m(Aa,U);function Ft(g){const _=jl();rn(_,new Aa(_,g))}Pt.Ja="timingevent";function Ei(g,_){U.call(this,Pt.Ja,g),this.size=_}m(Ei,U);function bi(g,_){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},_)}function Kr(){this.g=!0}Kr.prototype.ua=function(){this.g=!1};function av(g,_,C,M,K,X){g.info(function(){if(g.g)if(X){var ce="",Oe=X.split("&");for(let tt=0;tt<Oe.length;tt++){var Vt=Oe[tt].split("=");if(Vt.length>1){const bt=Vt[0];Vt=Vt[1];const xr=bt.split("_");ce=xr.length>=2&&xr[1]=="type"?ce+(bt+"="+Vt+"&"):ce+(bt+"=redacted&")}}}else ce=null;else ce=X;return"XMLHTTP REQ ("+M+") [attempt "+K+"]: "+_+`
`+C+`
`+ce})}function Rd(g,_,C,M,K,X,ce){g.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+K+"]: "+_+`
`+C+`
`+X+" "+ce})}function _i(g,_,C,M){g.info(function(){return"XMLHTTP TEXT ("+_+"): "+lv(g,C)+(M?" "+M:"")})}function Ca(g,_){g.info(function(){return"TIMEOUT: "+_})}Kr.prototype.info=function(){};function lv(g,_){if(!g.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var C=X[g];if(!(C.length<2)){var M=C[1];if(Array.isArray(M)&&!(M.length<1)){var K=M[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ce=1;ce<M.length;ce++)M[ce]=""}}}}return Ws(X)}catch{return _}}var xa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dc;function Ra(){}m(Ra,wd),Ra.prototype.g=function(){return new XMLHttpRequest},Dc=new Ra;function ss(g){return encodeURIComponent(String(g))}function kd(g){var _=1;g=g.split(":");const C=[];for(;_>0&&g.length;)C.push(g.shift()),_--;return g.length&&C.push(g.join(":")),C}function Wr(g,_,C,M){this.j=g,this.i=_,this.l=C,this.S=M||1,this.V=new wa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yr}function Yr(){this.i=null,this.g="",this.h=!1}var Ht={},un={};function Si(g,_,C){g.M=1,g.A=ka($t(_)),g.u=C,g.R=!0,Fl(g,null)}function Fl(g,_){g.F=Date.now(),wi(g),g.B=$t(g.A);var C=g.B,M=g.S;Array.isArray(M)||(M=[String(M)]),Gl(C.i,"t",M),g.C=0,C=g.j.L,g.h=new Yr,g.g=qd(g.j,C?_:null,!g.u),g.P>0&&(g.O=new Un(f(g.Y,g,g.g),g.P)),_=g.V,C=g.g,M=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(kc[0]=K.toString()),K=kc);for(let X=0;X<K.length;X++){const ce=Et(C,K[X],M||_.handleEvent,!1,_.h||_);if(!ce)break;_.g[ce.key]=ce}_=g.J?j(g.J):{},g.u?(g.v||(g.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,_)):(g.v="GET",g.g.ea(g.B,g.v,null,_)),Ti(),av(g.i,g.v,g.B,g.l,g.S,g.u)}Wr.prototype.ba=function(g){g=g.target;const _=this.O;_&&Jr(g)==3?_.j():this.Y(g)},Wr.prototype.Y=function(g){try{if(g==this.g)e:{const Oe=Jr(this.g),Vt=this.g.ya(),tt=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||vn(this.g)))){this.K||Oe!=4||Vt==7||(Vt==8||tt<=0?Ti(3):Ti(2)),Ai(this);var _=this.g.ca();this.X=_;var C=uv(this);if(this.o=_==200,Rd(this.i,this.v,this.B,this.l,this.S,Oe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var M,K=this.g;if((M=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(M)){var X=M;break t}}X=null}if(g=X)_i(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,g);else{this.o=!1,this.m=3,Ft(12),or(this),wr(this);break e}}if(this.R){g=!0;let bt;for(;!this.K&&this.C<C.length;)if(bt=Md(this,C),bt==un){Oe==4&&(this.m=4,Ft(14),g=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Ht){this.m=4,Ft(15),_i(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else _i(this.i,this.l,bt,null),Ci(this,bt);if(Id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||C.length!=0||this.h.h||(this.m=1,Ft(16),g=!1),this.o=this.o&&g,!g)_i(this.i,this.l,C,"[Invalid Chunked Response]"),or(this),wr(this);else if(C.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Kc(ce),ce.P=!0,Ft(11))}}else _i(this.i,this.l,C,null),Ci(this,C);Oe==4&&or(this),this.o&&!this.K&&(Oe==4?zd(this.j,this):(this.o=!1,wi(this)))}else ls(this.g),_==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),or(this),wr(this)}}}catch{}};function uv(g){if(!Id(g))return g.g.la();const _=vn(g.g);if(_==="")return"";let C="";const M=_.length,K=Jr(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return or(g),wr(g),"";g.h.i=new a.TextDecoder}for(let X=0;X<M;X++)g.h.h=!0,C+=g.h.i.decode(_[X],{stream:!(K&&X==M-1)});return _.length=0,g.h.g+=C,g.C=0,g.h.g}function Id(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Md(g,_){var C=g.C,M=_.indexOf(`
`,C);return M==-1?un:(C=Number(_.substring(C,M)),isNaN(C)?Ht:(M+=1,M+C>_.length?un:(_=_.slice(M,M+C),g.C=M+C,_)))}Wr.prototype.cancel=function(){this.K=!0,or(this)};function wi(g){g.T=Date.now()+g.H,Hl(g,g.H)}function Hl(g,_){if(g.D!=null)throw Error("WatchDog timer not null");g.D=bi(f(g.aa,g),_)}function Ai(g){g.D&&(a.clearTimeout(g.D),g.D=null)}Wr.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Ti(),Ft(17)),or(this),this.m=2,wr(this)):Hl(this,this.T-g)};function wr(g){g.j.I==0||g.K||zd(g.j,g)}function or(g){Ai(g);var _=g.O;_&&typeof _.dispose=="function"&&_.dispose(),g.O=null,Ic(g.V),g.g&&(_=g.g,g.g=null,_.abort(),_.dispose())}function Ci(g,_){try{var C=g.j;if(C.I!=0&&(C.g==g||Ri(C.h,g))){if(!g.L&&Ri(C.h,g)&&C.I==3){try{var M=C.Ba.g.parse(_)}catch{M=null}if(Array.isArray(M)&&M.length==3){var K=M;if(K[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Xl(C),no(C);else break e;Va(C),Ft(18)}}else C.xa=K[1],0<C.xa-C.K&&K[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=bi(f(C.Va,C),6e3));xi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Oi(C,11)}else if((g.L||C.g==g)&&Xl(C),!O(_))for(K=C.Ba.g.parse(_),_=0;_<K.length;_++){let tt=K[_];const bt=tt[0];if(!(bt<=C.K))if(C.K=bt,tt=tt[1],C.I==2)if(tt[0]=="c"){C.M=tt[1],C.ba=tt[2];const xr=tt[3];xr!=null&&(C.ka=xr,C.j.info("VER="+C.ka));const Pi=tt[4];Pi!=null&&(C.za=Pi,C.j.info("SVER="+C.za));const Zr=tt[5];Zr!=null&&typeof Zr=="number"&&Zr>0&&(M=1.5*Zr,C.O=M,C.j.info("backChannelRequestTimeoutMs_="+M)),M=C;const ei=g.g;if(ei){const La=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(La){var X=M.h;X.g||La.indexOf("spdy")==-1&&La.indexOf("quic")==-1&&La.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Pc(X,X.h),X.h=null))}if(M.G){const Jl=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Jl&&(M.wa=Jl,rt(M.J,M.G,Jl))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),M=C;var ce=g;if(M.na=Hd(M,M.L?M.ba:null,M.W),ce.L){Vc(M.h,ce);var Oe=ce,Vt=M.O;Vt&&(Oe.H=Vt),Oe.D&&(Ai(Oe),wi(Oe)),M.g=ce}else Bd(M);C.i.length>0&&Ni(C)}else tt[0]!="stop"&&tt[0]!="close"||Oi(C,7);else C.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Oi(C,7):$c(C):tt[0]!="noop"&&C.l&&C.l.qa(tt),C.A=0)}}Ti(4)}catch{}}var qt=class{constructor(g,_){this.g=g,this.map=_}};function Nc(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oc(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function xi(g){return g.h?1:g.g?g.g.size:0}function Ri(g,_){return g.h?g.h==_:g.g?g.g.has(_):!1}function Pc(g,_){g.g?g.g.add(_):g.h=_}function Vc(g,_){g.h&&g.h==_?g.h=null:g.g&&g.g.has(_)&&g.g.delete(_)}Nc.prototype.cancel=function(){if(this.i=Lc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Lc(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let _=g.i;for(const C of g.g.values())_=_.concat(C.G);return _}return E(g.i)}var Dd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ql(g,_){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const M=g[C].indexOf("=");let K,X=null;M>=0?(K=g[C].substring(0,M),X=g[C].substring(M+1)):K=g[C],_(K,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function ar(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;g instanceof ar?(this.l=g.l,cn(this,g.j),this.o=g.o,this.g=g.g,Ys(this,g.u),this.h=g.h,Bc(this,Vd(g.i)),this.m=g.m):g&&(_=String(g).match(Dd))?(this.l=!1,cn(this,_[1]||"",!0),this.o=ki(_[2]||""),this.g=ki(_[3]||"",!0),Ys(this,_[4]),this.h=ki(_[5]||"",!0),Bc(this,_[6]||"",!0),this.m=ki(_[7]||"")):(this.l=!1,this.i=new Xs(null,this.l))}ar.prototype.toString=function(){const g=[];var _=this.j;_&&g.push(Ia(_,$l,!0),":");var C=this.g;return(C||_=="file")&&(g.push("//"),(_=this.o)&&g.push(Ia(_,$l,!0),"@"),g.push(ss(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Ia(C,C.charAt(0)=="/"?Uc:Nd,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Ia(C,Od)),g.join("")},ar.prototype.resolve=function(g){const _=$t(this);let C=!!g.j;C?cn(_,g.j):C=!!g.o,C?_.o=g.o:C=!!g.g,C?_.g=g.g:C=g.u!=null;var M=g.h;if(C)Ys(_,g.u);else if(C=!!g.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var K=_.h.lastIndexOf("/");K!=-1&&(M=_.h.slice(0,K+1)+M)}if(K=M,K==".."||K==".")M="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){M=K.lastIndexOf("/",0)==0,K=K.split("/");const X=[];for(let ce=0;ce<K.length;){const Oe=K[ce++];Oe=="."?M&&ce==K.length&&X.push(""):Oe==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),M&&ce==K.length&&X.push("")):(X.push(Oe),M=!0)}M=X.join("/")}else M=K}return C?_.h=M:C=g.i.toString()!=="",C?Bc(_,Vd(g.i)):C=!!g.m,C&&(_.m=g.m),_};function $t(g){return new ar(g)}function cn(g,_,C){g.j=C?ki(_,!0):_,g.j&&(g.j=g.j.replace(/:$/,""))}function Ys(g,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);g.u=_}else g.u=null}function Bc(g,_,C){_ instanceof Xs?(g.i=_,Kl(g.i,g.l)):(C||(_=Ia(_,Qs)),g.i=new Xs(_,g.l))}function rt(g,_,C){g.i.set(_,C)}function ka(g){return rt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function ki(g,_){return g?_?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ia(g,_,C){return typeof g=="string"?(g=encodeURI(g).replace(_,Yn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Yn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var $l=/[#\/\?@]/g,Nd=/[#\?:]/g,Uc=/[#\?]/g,Qs=/[#\?@]/g,Od=/#/g;function Xs(g,_){this.h=this.g=null,this.i=g||null,this.j=!!_}function Qn(g){g.g||(g.g=new Map,g.h=0,g.i&&ql(g.i,function(_,C){g.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}n=Xs.prototype,n.add=function(g,_){Qn(this),this.i=null,g=Js(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(_),this.h+=1,this};function Pd(g,_){Qn(g),_=Js(g,_),g.g.has(_)&&(g.i=null,g.h-=g.g.get(_).length,g.g.delete(_))}function zc(g,_){return Qn(g),_=Js(g,_),g.g.has(_)}n.forEach=function(g,_){Qn(this),this.g.forEach(function(C,M){C.forEach(function(K){g.call(_,K,M,this)},this)},this)};function jc(g,_){Qn(g);let C=[];if(typeof _=="string")zc(g,_)&&(C=C.concat(g.g.get(Js(g,_))));else for(g=Array.from(g.g.values()),_=0;_<g.length;_++)C=C.concat(g[_]);return C}n.set=function(g,_){return Qn(this),this.i=null,g=Js(this,g),zc(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[_]),this.h+=1,this},n.get=function(g,_){return g?(g=jc(this,g),g.length>0?String(g[0]):_):_};function Gl(g,_,C){Pd(g,_),C.length>0&&(g.i=null,g.g.set(Js(g,_),E(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],_=Array.from(this.g.keys());for(let M=0;M<_.length;M++){var C=_[M];const K=ss(C);C=jc(this,C);for(let X=0;X<C.length;X++){let ce=K;C[X]!==""&&(ce+="="+ss(C[X])),g.push(ce)}}return this.i=g.join("&")};function Vd(g){const _=new Xs;return _.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),_}function Js(g,_){return _=String(_),g.j&&(_=_.toLowerCase()),_}function Kl(g,_){_&&!g.j&&(Qn(g),g.i=null,g.g.forEach(function(C,M){const K=M.toLowerCase();M!=K&&(Pd(this,M),Gl(this,K,C))},g)),g.j=_}function Qr(g,_){const C=new Kr;if(a.Image){const M=new Image;M.onload=p(Ar,C,"TestLoadImage: loaded",!0,_,M),M.onerror=p(Ar,C,"TestLoadImage: error",!1,_,M),M.onabort=p(Ar,C,"TestLoadImage: abort",!1,_,M),M.ontimeout=p(Ar,C,"TestLoadImage: timeout",!1,_,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=g}else _(!1)}function Fc(g,_){const C=new Kr,M=new AbortController,K=setTimeout(()=>{M.abort(),Ar(C,"TestPingServer: timeout",!1,_)},1e4);fetch(g,{signal:M.signal}).then(X=>{clearTimeout(K),X.ok?Ar(C,"TestPingServer: ok",!0,_):Ar(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(K),Ar(C,"TestPingServer: error",!1,_)})}function Ar(g,_,C,M,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),M(C)}catch{}}function Zs(){this.g=new Sd}function Ii(g){this.i=g.Sb||null,this.h=g.ab||!1}m(Ii,wd),Ii.prototype.g=function(){return new Ma(this.i,this.h)};function Ma(g,_){jt.call(this),this.H=g,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Ma,jt),n=Ma.prototype,n.open=function(g,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=_,this.readyState=1,Xr(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(_.body=g),(this.H||a).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wl(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wl(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var _=g.value?g.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!g.done}))&&(this.response=this.responseText+=_)}g.done?eo(this):Xr(this),this.readyState==3&&Wl(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,eo(this))},n.Na=function(g){this.g&&(this.response=g,eo(this))},n.ga=function(){this.g&&eo(this)};function eo(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Xr(g)}n.setRequestHeader=function(g,_){this.A.append(g,_)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=_.next();return g.join(`\r
`)};function Xr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Cr(g){let _="";return Ve(g,function(C,M){_+=M,_+=":",_+=C,_+=`\r
`}),_}function Da(g,_,C){e:{for(M in C){var M=!1;break e}M=!0}M||(C=Cr(C),typeof g=="string"?C!=null&&ss(C):rt(g,_,C))}function at(g){jt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(at,jt);var Mi=/^https?$/i,Hc=["POST","PUT"];n=at.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,_,C,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);_=_?_.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(_,String(g),!0),this.B=!1}catch(X){Na(this,X);return}if(g=C||"",C=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var K in M)C.set(K,M[K]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const X of M.keys())C.set(X,M.get(X));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(C.keys()).find(X=>X.toLowerCase()=="content-type"),K=a.FormData&&g instanceof a.FormData,!(Array.prototype.indexOf.call(Hc,_,void 0)>=0)||M||K||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of C)this.g.setRequestHeader(X,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){Na(this,X)}};function Na(g,_){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=_,g.o=5,qc(g),as(g)}function qc(g){g.A||(g.A=!0,rn(g,"complete"),rn(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,rn(this,"complete"),rn(this,"abort"),as(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Oa(this):this.Xa())},n.Xa=function(){Oa(this)};function Oa(g){if(g.h&&typeof s<"u"){if(g.v&&Jr(g)==4)setTimeout(g.Ca.bind(g),0);else if(rn(g,"readystatechange"),Jr(g)==4){g.h=!1;try{const X=g.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var M;if(M=X===0){let ce=String(g.D).match(Dd)[1]||null;!ce&&a.self&&a.self.location&&(ce=a.self.location.protocol.slice(0,-1)),M=!Mi.test(ce?ce.toLowerCase():"")}C=M}if(C)rn(g,"complete"),rn(g,"success");else{g.o=6;try{var K=Jr(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",qc(g)}}finally{as(g)}}}}function as(g,_){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,_||rn(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Jr(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var _=this.g.responseText;return g&&_.indexOf(g)==0&&(_=_.substring(g.length)),ov(_)}};function vn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(g){const _={};g=(g.g&&Jr(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<g.length;M++){if(O(g[M]))continue;var C=kd(g[M]);const K=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const X=_[K]||[];_[K]=X,X.push(C)}He(_,function(M){return M.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(g,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||_}function to(g){this.za=0,this.i=[],this.j=new Kr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,g),this.Za=Di("retryDelaySeedMs",1e4,g),this.Ta=Di("forwardChannelMaxRetries",2,g),this.va=Di("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Nc(g&&g.concurrentRequestLimit),this.Ba=new Zs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=to.prototype,n.ka=8,n.I=1,n.connect=function(g,_,C,M){Ft(0),this.W=g,this.H=_||{},C&&M!==void 0&&(this.H.OSID=C,this.H.OAID=M),this.F=this.X,this.J=Hd(this,null,this.W),Ni(this)};function $c(g){if(Yl(g),g.I==3){var _=g.V++,C=$t(g.J);if(rt(C,"SID",g.M),rt(C,"RID",_),rt(C,"TYPE","terminate"),Pa(g,C),_=new Wr(g,g.j,_),_.M=2,_.A=ka($t(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(_.A.toString(),"")}catch{}!C&&a.Image&&(new Image().src=_.A,C=!0),C||(_.g=qd(_.j,null),_.g.ea(_.A)),_.F=Date.now(),wi(_)}Fd(g)}function no(g){g.g&&(Kc(g),g.g.cancel(),g.g=null)}function Yl(g){no(g),g.v&&(a.clearTimeout(g.v),g.v=null),Xl(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&a.clearTimeout(g.m),g.m=null)}function Ni(g){if(!Oc(g.h)&&!g.m){g.m=!0;var _=g.Ea;F||k(),Z||(F(),Z=!0),I.add(_,g),g.D=0}}function Ql(g,_){return xi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=_.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=bi(f(g.Ea,g,_),jd(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new Wr(this,this.j,g);let X=this.o;if(this.U&&(X?(X=j(X),fe(X,this.U)):X=this.U),this.u!==null||this.R||(K.J=X,X=null),this.S)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var M=this.i[C];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(_+=M,_>4096){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=Ld(this,K,_),C=$t(this.J),rt(C,"RID",g),rt(C,"CVER",22),this.G&&rt(C,"X-HTTP-Session-Id",this.G),Pa(this,C),X&&(this.R?_="headers="+ss(Cr(X))+"&"+_:this.u&&Da(C,this.u,X)),Pc(this.h,K),this.Ra&&rt(C,"TYPE","init"),this.S?(rt(C,"$req",_),rt(C,"SID","null"),K.U=!0,Si(K,C,null)):Si(K,C,_),this.I=2}}else this.I==3&&(g?Gc(this,g):this.i.length==0||Oc(this.h)||Gc(this))};function Gc(g,_){var C;_?C=_.l:C=g.V++;const M=$t(g.J);rt(M,"SID",g.M),rt(M,"RID",C),rt(M,"AID",g.K),Pa(g,M),g.u&&g.o&&Da(M,g.u,g.o),C=new Wr(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),_&&(g.i=_.G.concat(g.i)),_=Ld(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Pc(g.h,C),Si(C,M,_)}function Pa(g,_){g.H&&Ve(g.H,function(C,M){rt(_,M,C)}),g.l&&Ve({},function(C,M){rt(_,M,C)})}function Ld(g,_,C){C=Math.min(g.i.length,C);const M=g.l?f(g.l.Ka,g.l,g):null;e:{var K=g.i;let Oe=-1;for(;;){const Vt=["count="+C];Oe==-1?C>0?(Oe=K[0].g,Vt.push("ofs="+Oe)):Oe=0:Vt.push("ofs="+Oe);let tt=!0;for(let bt=0;bt<C;bt++){var X=K[bt].g;const xr=K[bt].map;if(X-=Oe,X<0)Oe=Math.max(0,K[bt].g-100),tt=!1;else try{X="req"+X+"_"||"";try{var ce=xr instanceof Map?xr:Object.entries(xr);for(const[Pi,Zr]of ce){let ei=Zr;u(Zr)&&(ei=Ws(Zr)),Vt.push(X+Pi+"="+encodeURIComponent(ei))}}catch(Pi){throw Vt.push(X+"type="+encodeURIComponent("_badmap")),Pi}}catch{M&&M(xr)}}if(tt){ce=Vt.join("&");break e}}ce=void 0}return g=g.i.splice(0,C),_.G=g,ce}function Bd(g){if(!g.g&&!g.v){g.Y=1;var _=g.Da;F||k(),Z||(F(),Z=!0),I.add(_,g),g.A=0}}function Va(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=bi(f(g.Da,g),jd(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Ud(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=bi(f(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),no(this),Ud(this))};function Kc(g){g.B!=null&&(a.clearTimeout(g.B),g.B=null)}function Ud(g){g.g=new Wr(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var _=$t(g.na);rt(_,"RID","rpc"),rt(_,"SID",g.M),rt(_,"AID",g.K),rt(_,"CI",g.F?"0":"1"),!g.F&&g.ia&&rt(_,"TO",g.ia),rt(_,"TYPE","xmlhttp"),Pa(g,_),g.u&&g.o&&Da(_,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=ka($t(_)),C.u=null,C.R=!0,Fl(C,g)}n.Va=function(){this.C!=null&&(this.C=null,no(this),Va(this),Ft(19))};function Xl(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function zd(g,_){var C=null;if(g.g==_){Xl(g),Kc(g),g.g=null;var M=2}else if(Ri(g.h,_))C=_.G,Vc(g.h,_),M=1;else return;if(g.I!=0){if(_.o)if(M==1){C=_.u?_.u.length:0,_=Date.now()-_.F;var K=g.D;M=jl(),rn(M,new Ei(M,C)),Ni(g)}else Bd(g);else if(K=_.m,K==3||K==0&&_.X>0||!(M==1&&Ql(g,_)||M==2&&Va(g)))switch(C&&C.length>0&&(_=g.h,_.i=_.i.concat(C)),K){case 1:Oi(g,5);break;case 4:Oi(g,10);break;case 3:Oi(g,6);break;default:Oi(g,2)}}}function jd(g,_){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*_}function Oi(g,_){if(g.j.info("Error code "+_),_==2){var C=f(g.bb,g),M=g.Ua;const K=!M;M=new ar(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cn(M,"https"),ka(M),K?Qr(M.toString(),C):Fc(M.toString(),C)}else Ft(2);g.I=0,g.l&&g.l.pa(_),Fd(g),Yl(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Fd(g){if(g.I=0,g.ja=[],g.l){const _=Lc(g.h);(_.length!=0||g.i.length!=0)&&(b(g.ja,_),b(g.ja,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.oa()}}function Hd(g,_,C){var M=C instanceof ar?$t(C):new ar(C);if(M.g!="")_&&(M.g=_+"."+M.g),Ys(M,M.u);else{var K=a.location;M=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;const X=new ar(null);M&&cn(X,M),_&&(X.g=_),K&&Ys(X,K),C&&(X.h=C),M=X}return C=g.G,_=g.wa,C&&_&&rt(M,C,_),rt(M,"VER",g.ka),Pa(g,M),M}function qd(g,_,C){if(_&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=g.Aa&&!g.ma?new at(new Ii({ab:C})):new at(g.ma),_.Fa(g.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $d(){}n=$d.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ro(){}ro.prototype.g=function(g,_){return new zn(g,_)};function zn(g,_){jt.call(this),this.g=new to(_),this.l=g,this.h=_&&_.messageUrlParams||null,g=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(g?g["X-WebChannel-Content-Type"]=_.messageContentType:g={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(g?g["X-WebChannel-Client-Profile"]=_.sa:g={"X-WebChannel-Client-Profile":_.sa}),this.g.U=g,(g=_&&_.Qb)&&!O(g)&&(this.g.u=g),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.G=_,g=this.h,g!==null&&_ in g&&(g=this.h,_ in g&&delete g[_])),this.j=new us(this)}m(zn,jt),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){$c(this.g)},zn.prototype.o=function(g){var _=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=Ws(g),g=C);_.i.push(new qt(_.Ya++,g)),_.I==3&&Ni(_)},zn.prototype.N=function(){this.g.l=null,delete this.j,$c(this.g),delete this.g,zn.Z.N.call(this)};function Gd(g){yn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var _=g.__sm__;if(_){e:{for(const C in _){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,_=_!==null&&g in _?_[g]:void 0),this.data=_}else this.data=g}m(Gd,yn);function Kd(){Sr.call(this),this.status=1}m(Kd,Sr);function us(g){this.g=g}m(us,$d),us.prototype.ra=function(){rn(this.g,"a")},us.prototype.qa=function(g){rn(this.g,new Gd(g))},us.prototype.pa=function(g){rn(this.g,new Kd)},us.prototype.oa=function(){rn(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,nN=function(){return new ro},tN=function(){return jl()},eN=Pt,kE={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,xm=xa,Mc.COMPLETE="complete",ZD=Mc,Ad.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",jt.prototype.listen=jt.prototype.J,qh=Ad,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,JD=at}).apply(typeof Zp<"u"?Zp:typeof self<"u"?self:typeof window<"u"?window:{});class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");let gc="12.9.0";function zj(n){gc=n}const Sl=new t_("@firebase/firestore");function Iu(){return Sl.logLevel}function pe(n,...e){if(Sl.logLevel<=Ge.DEBUG){const t=e.map(p_);Sl.debug(`Firestore (${gc}): ${n}`,...t)}}function Fs(n,...e){if(Sl.logLevel<=Ge.ERROR){const t=e.map(p_);Sl.error(`Firestore (${gc}): ${n}`,...t)}}function wl(n,...e){if(Sl.logLevel<=Ge.WARN){const t=e.map(p_);Sl.warn(`Firestore (${gc}): ${n}`,...t)}}function p_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function we(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,rN(n,r,t)}function rN(n,e,t){let r=`FIRESTORE (${gc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Fs(r),new Error(r)}function Je(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||rN(e,i,r)}function De(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ki{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class iN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(On.UNAUTHENTICATED)))}shutdown(){}}class Fj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Hj{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let s=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ki,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const h=s;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ki)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new iN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class qj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class $j{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const r=s=>{s.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,pe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Kj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class m_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Kj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Ke(n,e){return n<e?-1:n>e?1:0}function IE(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return TT(i)===TT(s)?Ke(i,s):TT(i)?1:-1}return Ke(n.length,e.length)}const Wj=55296,Yj=57343;function TT(n){const e=n.charCodeAt(0);return e>=Wj&&e<=Yj}function ec(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const Ix="__name__";class qi{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return qi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=qi.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ke(e.length,t.length)}static compareSegments(e,t){const r=qi.isNumericId(e),i=qi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?qi.extractNumericId(e).compare(qi.extractNumericId(t)):IE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ko.fromString(e.substring(4,e.length-2))}}class ht extends qi{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const Qj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends qi{construct(e,t,r){return new Rn(e,t,r)}static isValidIdentifier(e){return Qj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ix}static keyField(){return new Rn([Ix])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(t)}static emptyPath(){return new Rn([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(ht.fromString(e))}static fromName(e){return new be(ht.fromString(e).popFirst(5))}static empty(){return new be(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ht(e.slice()))}}function sN(n,e,t){if(!t)throw new he(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Xj(n,e,t,r){if(e===!0&&r===!0)throw new he(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Mx(n){if(!be.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Dx(n){if(be.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ey(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Xi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ey(n);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ad(n,e){if(!oN(n))throw new he(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new he(ne.INVALID_ARGUMENT,t);return!0}const Nx=-62135596800,Ox=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ox);return new ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Nx)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ox}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ad(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Nx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Zt("string",ft._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new ft(0,0))}static max(){return new xe(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const xf=-1;function Jj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new ta(i,be.empty(),e)}function Zj(n){return new ta(n.readTime,n.key,xf)}class ta{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ta(xe.min(),be.empty(),xf)}static max(){return new ta(xe.max(),be.empty(),xf)}}function eF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}const tF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function yc(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==tF)throw n;pe("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,r)=>{t(e)}))}static reject(e){return new oe(((t,r)=>{r(e)}))}static waitFor(e){return new oe(((t,r)=>{let i=0,s=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++s,a&&s===i&&t()}),(h=>r(h)))})),a=!0,s===i&&t()}))}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next((i=>i?oe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new oe(((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let h=0;h<s;h++){const f=h;t(e[f]).next((p=>{a[f]=p,++u,u===s&&r(a)}),(p=>i(p)))}}))}static doWhile(e,t){return new oe(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}function rF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vc(n){return n.name==="IndexedDbTransactionError"}class by{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}by.ce=-1;const g_=-1;function ld(n){return n==null}function eg(n){return n===0&&1/n==-1/0}function iF(n){return typeof n=="number"&&Number.isInteger(n)&&!eg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const aN="";function sF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Px(e)),e=oF(n.get(t),e);return Px(e)}function oF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case aN:t+="";break;default:t+=s}}return t}function Px(n){return n+aN+""}function Vx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ct{constructor(e,t){this.comparator=e,this.root=t||An.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new em(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new em(this.root,e,this.comparator,!1)}getReverseIterator(){return new em(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new em(this.root,e,this.comparator,!0)}}class em{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??An.RED,this.left=i??An.EMPTY,this.right=s??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new An(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return An.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new An(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class an{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lx(this.data.getIterator())}getIteratorFrom(e){return new Lx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new an(this.comparator);return t.data=e,t}}class Lx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vr{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new vr([])}unionWith(e){let t=new an(Rn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class uN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class In{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uN("Invalid base64 string: "+s):s}})(e);return new In(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new In(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}In.EMPTY_BYTE_STRING=new In("");const aF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=aF.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(n.seconds),nanos:Ut(n.nanos)}}function Ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ra(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}const cN="server_timestamp",hN="__type__",fN="__previous_value__",dN="__local_write_time__";function y_(n){return(n?.mapValue?.fields||{})[hN]?.stringValue===cN}function _y(n){const e=n.mapValue.fields[fN];return y_(e)?_y(e):e}function Rf(n){const e=na(n.mapValue.fields[dN].timestampValue);return new ft(e.seconds,e.nanos)}class lF{constructor(e,t,r,i,s,a,u,h,f,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p,this.apiKey=m}}const tg="(default)";class kf{constructor(e,t){this.projectId=e,this.database=t||tg}static empty(){return new kf("","")}get isDefaultDatabase(){return this.database===tg}isEqual(e){return e instanceof kf&&e.projectId===this.projectId&&e.database===this.database}}function uF(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kf(n.options.projectId,e)}const pN="__type__",cF="__max__",tm={mapValue:{}},mN="__vector__",ng="value";function ia(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?y_(n)?4:fF(n)?9007199254740991:hF(n)?10:11:we(28295,{value:n})}function Ji(n,e){if(n===e)return!0;const t=ia(n);if(t!==ia(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rf(n).isEqual(Rf(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=na(i.timestampValue),u=na(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return ra(i.bytesValue).isEqual(ra(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ut(i.geoPointValue.latitude)===Ut(s.geoPointValue.latitude)&&Ut(i.geoPointValue.longitude)===Ut(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ut(i.integerValue)===Ut(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ut(i.doubleValue),u=Ut(s.doubleValue);return a===u?eg(a)===eg(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return ec(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(Vx(a)!==Vx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Ji(a[h],u[h])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function If(n,e){return(n.values||[]).find((t=>Ji(t,e)))!==void 0}function tc(n,e){if(n===e)return 0;const t=ia(n),r=ia(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=Ut(s.integerValue||s.doubleValue),h=Ut(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(n,e);case 3:return Bx(n.timestampValue,e.timestampValue);case 4:return Bx(Rf(n),Rf(e));case 5:return IE(n.stringValue,e.stringValue);case 6:return(function(s,a){const u=ra(s),h=ra(a);return u.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=Ke(u[f],h[f]);if(p!==0)return p}return Ke(u.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=Ke(Ut(s.latitude),Ut(a.latitude));return u!==0?u:Ke(Ut(s.longitude),Ut(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ux(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const u=s.fields||{},h=a.fields||{},f=u[ng]?.arrayValue,p=h[ng]?.arrayValue,m=Ke(f?.values?.length||0,p?.values?.length||0);return m!==0?m:Ux(f,p)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===tm.mapValue&&a===tm.mapValue)return 0;if(s===tm.mapValue)return 1;if(a===tm.mapValue)return-1;const u=s.fields||{},h=Object.keys(u),f=a.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let m=0;m<h.length&&m<p.length;++m){const v=IE(h[m],p[m]);if(v!==0)return v;const E=tc(u[h[m]],f[p[m]]);if(E!==0)return E}return Ke(h.length,p.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function Bx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=na(n),r=na(e),i=Ke(t.seconds,r.seconds);return i!==0?i:Ke(t.nanos,r.nanos)}function Ux(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=tc(t[i],r[i]);if(s)return s}return Ke(t.length,r.length)}function nc(n){return ME(n)}function ME(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=na(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ra(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=ME(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${ME(t.fields[a])}`;return i+"}"})(n.mapValue):we(61005,{value:n})}function Rm(n){switch(ia(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_y(n);return e?16+Rm(e):16;case 5:return 2*n.stringValue.length;case 6:return ra(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Rm(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ma(r.fields,((s,a)=>{i+=s.length+Rm(a)})),i})(n.mapValue);default:throw we(13486,{value:n})}}function zx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function DE(n){return!!n&&"integerValue"in n}function v_(n){return!!n&&"arrayValue"in n}function jx(n){return!!n&&"nullValue"in n}function Fx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function km(n){return!!n&&"mapValue"in n}function hF(n){return(n?.mapValue?.fields||{})[pN]?.stringValue===mN}function nf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ma(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=nf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nf(n.arrayValue.values[t]);return e}return{...n}}function fF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cF}class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!km(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nf(t)}setAll(e){let t=Rn.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=nf(a):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());km(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];km(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ma(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Fn(nf(this.value))}}function gN(n){const e=[];return ma(n.fields,((t,r)=>{const i=new Rn([t]);if(km(r)){const s=gN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new vr(e)}class dn{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new dn(e,0,xe.min(),xe.min(),xe.min(),Fn.empty(),0)}static newFoundDocument(e,t,r,i){return new dn(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new dn(e,2,t,xe.min(),xe.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,xe.min(),xe.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rg{constructor(e,t){this.position=e,this.inclusive=t}}function Hx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=be.comparator(be.fromName(a.referenceValue),t.key):r=tc(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}class Mf{constructor(e,t="asc"){this.field=e,this.dir=t}}function dF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yN{}class Jt extends yN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mF(e,t,r):t==="array-contains"?new vF(e,r):t==="in"?new TF(e,r):t==="not-in"?new EF(e,r):t==="array-contains-any"?new bF(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gF(e,r):new yF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tc(t,this.value)):t!==null&&ia(this.value)===ia(t)&&this.matchesComparison(tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends yN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yi(e,t)}matches(e){return vN(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vN(n){return n.op==="and"}function TN(n){return pF(n)&&vN(n)}function pF(n){for(const e of n.filters)if(e instanceof yi)return!1;return!0}function NE(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+nc(n.value);if(TN(n))return n.filters.map((e=>NE(e))).join(",");{const e=n.filters.map((t=>NE(t))).join(",");return`${n.op}(${e})`}}function EN(n,e){return n instanceof Jt?(function(r,i){return i instanceof Jt&&r.op===i.op&&r.field.isEqual(i.field)&&Ji(r.value,i.value)})(n,e):n instanceof yi?(function(r,i){return i instanceof yi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,u)=>s&&EN(a,i.filters[u])),!0):!1})(n,e):void we(19439)}function bN(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${nc(t.value)}`})(n):n instanceof yi?(function(t){return t.op.toString()+" {"+t.getFilters().map(bN).join(" ,")+"}"})(n):"Filter"}class mF extends Jt{constructor(e,t,r){super(e,t,r),this.key=be.fromName(r.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class gF extends Jt{constructor(e,t){super(e,"in",t),this.keys=_N("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yF extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=_N("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _N(n,e){return(e.arrayValue?.values||[]).map((t=>be.fromName(t.referenceValue)))}class vF extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return v_(t)&&If(t.arrayValue,this.value)}}class TF extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&If(this.value.arrayValue,t)}}class EF extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(If(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!If(this.value.arrayValue,t)}}class bF extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!v_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>If(this.value.arrayValue,r)))}}class _F{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function $x(n,e=null,t=[],r=[],i=null,s=null,a=null){return new _F(n,e,t,r,i,s,a)}function T_(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>NE(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>nc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>nc(r))).join(",")),e.Te=t}return e.Te}function E_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qx(n.startAt,e.startAt)&&qx(n.endAt,e.endAt)}function OE(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Tc{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function SF(n,e,t,r,i,s,a,u){return new Tc(n,e,t,r,i,s,a,u)}function b_(n){return new Tc(n)}function Gx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wF(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function SN(n){return n.collectionGroup!==null}function rf(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new an(Rn.comparator);return a.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Mf(s,r))})),t.has(Rn.keyField().canonicalString())||e.Ie.push(new Mf(Rn.keyField(),r))}return e.Ie}function Wi(n){const e=De(n);return e.Ee||(e.Ee=AF(e,rf(n))),e.Ee}function AF(n,e){if(n.limitType==="F")return $x(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Mf(i.field,s)}));const t=n.endAt?new rg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rg(n.startAt.position,n.startAt.inclusive):null;return $x(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function PE(n,e){const t=n.filters.concat([e]);return new Tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function CF(n,e){const t=n.explicitOrderBy.concat([e]);return new Tc(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function ig(n,e,t){return new Tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sy(n,e){return E_(Wi(n),Wi(e))&&n.limitType===e.limitType}function wN(n){return`${T_(Wi(n))}|lt:${n.limitType}`}function Mu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>bN(i))).join(", ")}]`),ld(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>nc(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>nc(i))).join(",")),`Target(${r})`})(Wi(n))}; limitType=${n.limitType})`}function wy(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of rf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,h){const f=Hx(a,u,h);return a.inclusive?f<=0:f<0})(r.startAt,rf(r),i)||r.endAt&&!(function(a,u,h){const f=Hx(a,u,h);return a.inclusive?f>=0:f>0})(r.endAt,rf(r),i))})(n,e)}function xF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AN(n){return(e,t)=>{let r=!1;for(const i of rf(n)){const s=RF(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function RF(n,e,t){const r=n.field.isKeyField()?be.comparator(e.key,t.key):(function(s,a,u){const h=a.data.field(s),f=u.data.field(s);return h!==null&&f!==null?tc(h,f):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:n.dir})}}class Ol{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return lN(this.inner)}size(){return this.innerSize}}const kF=new Ct(be.comparator);function Hs(){return kF}const CN=new Ct(be.comparator);function $h(...n){let e=CN;for(const t of n)e=e.insert(t.key,t);return e}function xN(n){let e=CN;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function sl(){return sf()}function RN(){return sf()}function sf(){return new Ol((n=>n.toString()),((n,e)=>n.isEqual(e)))}const IF=new Ct(be.comparator),MF=new an(be.comparator);function We(...n){let e=MF;for(const t of n)e=e.add(t);return e}const DF=new an(Ke);function NF(){return DF}function __(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eg(e)?"-0":e}}function kN(n){return{integerValue:""+n}}function OF(n,e){return iF(e)?kN(e):__(n,e)}class Ay{constructor(){this._=void 0}}function PF(n,e,t){return n instanceof Df?(function(i,s){const a={fields:{[hN]:{stringValue:cN},[dN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&y_(s)&&(s=_y(s)),s&&(a.fields[fN]=s),{mapValue:a}})(t,e):n instanceof Nf?MN(n,e):n instanceof Of?DN(n,e):(function(i,s){const a=IN(i,s),u=Kx(a)+Kx(i.Ae);return DE(a)&&DE(i.Ae)?kN(u):__(i.serializer,u)})(n,e)}function VF(n,e,t){return n instanceof Nf?MN(n,e):n instanceof Of?DN(n,e):t}function IN(n,e){return n instanceof sg?(function(r){return DE(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Df extends Ay{}class Nf extends Ay{constructor(e){super(),this.elements=e}}function MN(n,e){const t=NN(e);for(const r of n.elements)t.some((i=>Ji(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Of extends Ay{constructor(e){super(),this.elements=e}}function DN(n,e){let t=NN(e);for(const r of n.elements)t=t.filter((i=>!Ji(i,r)));return{arrayValue:{values:t}}}class sg extends Ay{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Kx(n){return Ut(n.integerValue||n.doubleValue)}function NN(n){return v_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class LF{constructor(e,t){this.field=e,this.transform=t}}function BF(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Nf&&i instanceof Nf||r instanceof Of&&i instanceof Of?ec(r.elements,i.elements,Ji):r instanceof sg&&i instanceof sg?Ji(r.Ae,i.Ae):r instanceof Df&&i instanceof Df})(n.transform,e.transform)}class UF{constructor(e,t){this.version=e,this.transformResults=t}}class Hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Im(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Cy{}function ON(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new S_(n.key,Hn.none()):new ud(n.key,n.data,Hn.none());{const t=n.data,r=Fn.empty();let i=new an(Rn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ga(n.key,r,new vr(i.toArray()),Hn.none())}}function zF(n,e,t){n instanceof ud?(function(i,s,a){const u=i.value.clone(),h=Yx(i.fieldTransforms,s,a.transformResults);u.setAll(h),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof ga?(function(i,s,a){if(!Im(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=Yx(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(PN(i)),h.setAll(u),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function of(n,e,t,r){return n instanceof ud?(function(s,a,u,h){if(!Im(s.precondition,a))return u;const f=s.value.clone(),p=Qx(s.fieldTransforms,h,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof ga?(function(s,a,u,h){if(!Im(s.precondition,a))return u;const f=Qx(s.fieldTransforms,h,a),p=a.data;return p.setAll(PN(s)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(n,e,t,r):(function(s,a,u){return Im(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function jF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=IN(r.transform,i||null);s!=null&&(t===null&&(t=Fn.empty()),t.set(r.field,s))}return t||null}function Wx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ec(r,i,((s,a)=>BF(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ud extends Cy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ga extends Cy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function PN(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Yx(n,e,t){const r=new Map;Je(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,VF(a,u,t[i]))}return r}function Qx(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,PF(s,a,e))}return r}class S_ extends Cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VN extends Cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zF(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=of(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=of(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RN();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const h=ON(a,u);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(xe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,((t,r)=>Wx(t,r)))&&ec(this.baseMutations,e.baseMutations,((t,r)=>Wx(t,r)))}}class w_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return IF})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new w_(e,t,r,i)}}class HF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qF{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qt,Xe;function LN(n){switch(n){case ne.OK:return we(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function BN(n){if(n===void 0)return Fs("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Qt.OK:return ne.OK;case Qt.CANCELLED:return ne.CANCELLED;case Qt.UNKNOWN:return ne.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return ne.INTERNAL;case Qt.UNAVAILABLE:return ne.UNAVAILABLE;case Qt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Qt.NOT_FOUND:return ne.NOT_FOUND;case Qt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Qt.ABORTED:return ne.ABORTED;case Qt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Qt.DATA_LOSS:return ne.DATA_LOSS;default:return we(39323,{code:n})}}(Xe=Qt||(Qt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function $F(){return new TextEncoder}const GF=new Ko([4294967295,4294967295],0);function Xx(n){const e=$F().encode(n),t=new XD;return t.update(e),new Uint8Array(t.digest())}function Jx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ko([t,r],0),new Ko([i,s],0)]}class A_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gh(`Invalid padding: ${t}`);if(r<0)throw new Gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ko.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ko.fromNumber(r)));return i.compare(GF)===1&&(i=new Ko([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Xx(e),[r,i]=Jx(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new A_(s,i,t);return r.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=Xx(e),[r,i]=Jx(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.be(a)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xy{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xy(xe.min(),i,new Ct(Ke),Hs(),We())}}class cd{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cd(r,t,We(),We(),We())}}class Mm{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}}class UN{constructor(e,t){this.targetId=e,this.Ce=t}}class zN{constructor(e,t,r=In.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Zx{constructor(){this.ve=0,this.Fe=eR(),this.Me=In.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),r=We();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:s})}})),new cd(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=eR()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class KF{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hs(),this.He=nm(),this.Je=nm(),this.Ze=new Ct(Ke)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(OE(s))if(r===0){const a=new be(s.path);this.et(t,a,dn.newNoDocument(a,xe.min()))}else Je(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=ra(r).toUint8Array()}catch(h){if(h instanceof uN)return wl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new A_(a,i,s)}catch(h){return wl(h instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&OE(u.target)){const h=new be(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,dn.newNoDocument(h,e))}s.Be&&(t.set(a,s.ke()),s.Ke())}}));let r=We();this.Je.forEach(((s,a)=>{let u=!0;a.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new xy(e,t,this.Ze,this.je,r);return this.je=Hs(),this.He=nm(),this.Je=nm(),this.Ze=new Ct(Ke),i}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Zx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new an(Ke),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new an(Ke),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nm(){return new Ct(be.comparator)}function eR(){return new Ct(be.comparator)}const WF={asc:"ASCENDING",desc:"DESCENDING"},YF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QF={and:"AND",or:"OR"};class XF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function VE(n,e){return n.useProto3Json||ld(e)?e:{value:e}}function og(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JF(n,e){return og(n,e.toTimestamp())}function Tr(n){return Je(!!n,49232),xe.fromTimestamp((function(t){const r=na(t);return new ft(r.seconds,r.nanos)})(n))}function C_(n,e){return LE(n,e).canonicalString()}function LE(n,e){const t=(function(i){return new ht(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function FN(n){const e=ht.fromString(n);return Je(WN(e),10190,{key:e.toString()}),e}function ag(n,e){return C_(n.databaseId,e.path)}function af(n,e){const t=FN(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(qN(t))}function HN(n,e){return C_(n.databaseId,e)}function ZF(n){const e=FN(n);return e.length===4?ht.emptyPath():qN(e)}function BE(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qN(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tR(n,e,t){return{name:ag(n,e),fields:t.value.mapValue.fields}}function e9(n,e){return"found"in e?(function(r,i){Je(!!i.found,43571),i.found.name,i.found.updateTime;const s=af(r,i.found.name),a=Tr(i.found.updateTime),u=i.found.createTime?Tr(i.found.createTime):xe.min(),h=new Fn({mapValue:{fields:i.found.fields}});return dn.newFoundDocument(s,a,u,h)})(n,e):"missing"in e?(function(r,i){Je(!!i.missing,3894),Je(!!i.readTime,22933);const s=af(r,i.missing),a=Tr(i.readTime);return dn.newNoDocument(s,a)})(n,e):we(7234,{result:e})}function t9(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(f,p){return f.useProto3Json?(Je(p===void 0||typeof p=="string",58123),In.fromBase64String(p||"")):(Je(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),In.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(f){const p=f.code===void 0?ne.UNKNOWN:BN(f.code);return new he(p,f.message||"")})(a);t=new zN(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=af(n,r.document.name),s=Tr(r.document.updateTime),a=r.document.createTime?Tr(r.document.createTime):xe.min(),u=new Fn({mapValue:{fields:r.document.fields}}),h=dn.newFoundDocument(i,s,a,u),f=r.targetIds||[],p=r.removedTargetIds||[];t=new Mm(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=af(n,r.document),s=r.readTime?Tr(r.readTime):xe.min(),a=dn.newNoDocument(i,s),u=r.removedTargetIds||[];t=new Mm([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=af(n,r.document),s=r.removedTargetIds||[];t=new Mm([],s,i,null)}else{if(!("filter"in e))return we(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new qF(i,s),u=r.targetId;t=new UN(u,a)}}return t}function $N(n,e){let t;if(e instanceof ud)t={update:tR(n,e.key,e.value)};else if(e instanceof S_)t={delete:ag(n,e.key)};else if(e instanceof ga)t={update:tR(n,e.key,e.data),updateMask:c9(e.fieldMask)};else{if(!(e instanceof VN))return we(16599,{dt:e.type});t={verify:ag(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const u=a.transform;if(u instanceof Df)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Nf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Of)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof sg)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:JF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we(27497)})(n,e.precondition)),t}function n9(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Tr(i.updateTime):Tr(s);return a.isEqual(xe.min())&&(a=Tr(s)),new UF(a,i.transformResults||[])})(t,e)))):[]}function r9(n,e){return{documents:[HN(n,e.path)]}}function i9(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HN(n,i);const s=(function(f){if(f.length!==0)return KN(yi.create(f,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(f){if(f.length!==0)return f.map((p=>(function(v){return{field:Du(v.field),direction:a9(v.dir)}})(p)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=VE(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function s9(n){let e=ZF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Je(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(m){const v=GN(m);return v instanceof yi&&TN(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(m){return m.map((v=>(function(b){return new Mf(Nu(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(m){let v;return v=typeof m=="object"?m.value:m,ld(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(m){const v=!!m.before,E=m.values||[];return new rg(E,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(m){const v=!m.before,E=m.values||[];return new rg(E,v)})(t.endAt)),SF(e,i,a,s,u,"F",h,f)}function o9(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Nu(t.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nu(t.unaryFilter.field);return Jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nu(t.unaryFilter.field);return Jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Nu(t.unaryFilter.field);return Jt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(Nu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yi.create(t.compositeFilter.filters.map((r=>GN(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function a9(n){return WF[n]}function l9(n){return YF[n]}function u9(n){return QF[n]}function Du(n){return{fieldPath:n.canonicalString()}}function Nu(n){return Rn.fromServerFormat(n.fieldPath)}function KN(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(Fx(t.value))return{unaryFilter:{field:Du(t.field),op:"IS_NAN"}};if(jx(t.value))return{unaryFilter:{field:Du(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fx(t.value))return{unaryFilter:{field:Du(t.field),op:"IS_NOT_NAN"}};if(jx(t.value))return{unaryFilter:{field:Du(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(t.field),op:l9(t.op),value:t.value}}})(n):n instanceof yi?(function(t){const r=t.getFilters().map((i=>KN(i)));return r.length===1?r[0]:{compositeFilter:{op:u9(t.op),filters:r}}})(n):we(54877,{filter:n})}function c9(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function YN(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class zo{constructor(e,t,r,i,s=xe.min(),a=xe.min(),u=In.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class h9{constructor(e){this.yt=e}}function f9(n){const e=s9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ig(e,e.limit,"L"):e}class d9{constructor(){this.Sn=new p9}addToCollectionParentIndex(e,t){return this.Sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ta.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class p9{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new an(ht.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new an(ht.comparator)).toArray()}}const nR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QN=41943040;class nr{static withCacheSize(e){return new nr(e,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(QN,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);class rc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new rc(0)}static ar(){return new rc(-1)}}const rR="LruGarbageCollector",m9=1048576;function iR([n,e],[t,r]){const i=Ke(n,t);return i===0?Ke(e,r):i}class g9{constructor(e){this.Pr=e,this.buffer=new an(iR),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class y9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(rR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vc(t)?pe(rR,"Ignoring IndexedDB error during garbage collection: ",t):await yc(t)}await this.Ar(3e5)}))}}class v9{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(by.ce);const r=new g9(t);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(nR)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nR):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,s,a,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(r=m,u=Date.now(),this.removeTargets(e,r,t)))).next((m=>(s=m,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(f=Date.now(),Iu()<=Ge.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(h-u)+`ms
	Removed ${m} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m}))))}}function T9(n,e){return new v9(n,e)}class E9{constructor(){this.changes=new Ol((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class b9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _9{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&of(r.mutation,i,vr.empty(),ft.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,We()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=We()){const i=sl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=$h();return s.forEach(((u,h)=>{a=a.insert(u,h.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=sl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,We())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let s=Hs();const a=sf(),u=(function(){return sf()})();return t.forEach(((h,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof ga)?s=s.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),of(p.mutation,f,p.mutation.getFieldMask(),ft.now())):a.set(f.key,vr.empty())})),this.recalculateAndSaveOverlays(e,s).next((h=>(h.forEach(((f,p)=>a.set(f,p))),t.forEach(((f,p)=>u.set(f,new b9(p,a.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=sf();let i=new Ct(((a,u)=>a-u)),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let p=r.get(h)||vr.empty();p=u.applyToLocalView(f,p),r.set(h,p);const m=(i.get(u.batchId)||We()).add(h);i=i.insert(u.batchId,m)}))})).next((()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,m=RN();p.forEach((v=>{if(!s.has(v)){const E=ON(t.get(v),r.get(v));E!==null&&m.set(v,E),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,f,m))}return oe.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return wF(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(sl());let u=xf,h=s;return a.next((f=>oe.forEach(f,((p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),s.get(p)?oe.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{h=h.insert(p,v)}))))).next((()=>this.populateOverlays(e,f,s))).next((()=>this.computeViews(e,h,f,We()))).next((p=>({batchId:u,changes:xN(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((r=>{let i=$h();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=$h();return this.indexManager.getCollectionParents(e,s).next((u=>oe.forEach(u,(h=>{const f=(function(m,v){return new Tc(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((p=>{p.forEach(((m,v)=>{a=a.insert(m,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((h,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,dn.newInvalidDocument(p)))}));let u=$h();return a.forEach(((h,f)=>{const p=s.get(h);p!==void 0&&of(p.mutation,f,vr.empty(),ft.now()),wy(t,f)&&(u=u.insert(h,f))})),u}))}}class S9{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return oe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Tr(i.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:f9(i.bundledQuery),readTime:Tr(i.readTime)}})(t)),oe.resolve()}}class w9{constructor(){this.overlays=new Ct(be.comparator),this.Lr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=sl();return oe.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.bt(e,t,s)})),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Lr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=sl(),s=t.length+1,a=new be(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ct(((f,p)=>f-p));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=s.get(f.largestBatchId);p===null&&(p=sl(),s=s.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=sl(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=i)););return oe.resolve(u)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new HF(t,r));let s=this.Lr.get(t);s===void 0&&(s=We(),this.Lr.set(t,s)),this.Lr.set(t,s.add(r.key))}}class A9{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}class x_{constructor(){this.kr=new an(fn.Kr),this.qr=new an(fn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new fn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new fn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new be(new ht([])),r=new fn(t,e),i=new fn(t,e+1),s=[];return this.qr.forEachInRange([r,i],(a=>{this.Wr(a),s.push(a.key)})),s}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new be(new ht([])),r=new fn(t,e),i=new fn(t,e+1);let s=We();return this.qr.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new fn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return be.comparator(e.key,t.key)||Ke(e.Hr,t.Hr)}static Ur(e,t){return Ke(e.Hr,t.Hr)||be.comparator(e.key,t.key)}}class C9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new an(fn.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new FF(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.Jr=this.Jr.add(new fn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(a)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?g_:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fn(t,0),i=new fn(t,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],(a=>{const u=this.Zr(a.Hr);s.push(u)})),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new an(Ke);return t.forEach((i=>{const s=new fn(i,0),a=new fn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,a],(u=>{r=r.add(u.Hr)}))})),oe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const a=new fn(new be(s),0);let u=new an(Ke);return this.Jr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Hr)),!0)}),a),oe.resolve(this.Yr(u))}Yr(e){const t=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Je(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return oe.forEach(t.mutations,(i=>{const s=new fn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new fn(t,0),i=this.Jr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class x9{constructor(e){this.ti=e,this.docs=(function(){return new Ct(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Hs();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dn.newInvalidDocument(i))})),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Hs();const a=t.path,u=new be(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||eF(Zj(p),r)<=0||(i.has(p.key)||wy(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){we(9500)}ni(e,t){return oe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new R9(this)}getSize(e){return oe.resolve(this.size)}}class R9 extends E9{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),oe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class k9{constructor(e){this.persistence=e,this.ri=new Ol((t=>T_(t)),E_),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.ii=0,this.si=new x_,this.targetCount=0,this.oi=rc._r()}forEachTarget(e,t){return this.ri.forEach(((r,i)=>t(i))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),oe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new rc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.lr(t),oe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ri.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ri.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),oe.waitFor(s).next((()=>i))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.si.containsKey(t))}}class XN{constructor(e,t){this._i={},this.overlays={},this.ai=new by(0),this.ui=!1,this.ui=!0,this.ci=new A9,this.referenceDelegate=e(this),this.li=new k9(this),this.indexManager=new d9,this.remoteDocumentCache=(function(i){return new x9(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new h9(t),this.Pi=new S9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new C9(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const i=new I9(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((s=>this.referenceDelegate.Ii(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ei(e,t){return oe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class I9 extends nF{constructor(e){super(),this.currentSequenceNumber=e}}class R_{constructor(e){this.persistence=e,this.Ri=new x_,this.Ai=null}static Vi(e){return new R_(e)}get di(){if(this.Ai)return this.Ai;throw we(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.di.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(r=>{const i=be.fromPath(r);return this.mi(e,i).next((s=>{s||t.removeEntry(i,xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class lg{constructor(e,t){this.persistence=e,this.fi=new Ol((r=>sF(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=T9(this,t)}static Vi(e,t){return new lg(e,t)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return oe.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((s=>s?oe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,(a=>this.wr(e,a,t).next((u=>{u||(r++,s.removeEntry(a,xe.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rm(e.data.value)),t}wr(e,t,r){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class k_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=We(),i=We();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new k_(e,t.fromCache,r,i)}}class M9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class D9{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return oz()?8:rF(Vn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.gs(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ps(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new M9;return this.ys(e,t,a).next((u=>{if(s.result=u,this.As)return this.ws(e,t,a,u.size)}))})).next((()=>s.result))}ws(e,t,r,i){return r.documentReadCount<this.Vs?(Iu()<=Ge.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Mu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(Iu()<=Ge.DEBUG&&pe("QueryEngine","Query:",Mu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Iu()<=Ge.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Mu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(t))):oe.resolve())}gs(e,t){if(Gx(t))return oe.resolve(null);let r=Wi(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=ig(t,null,"F"),r=Wi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=We(...s);return this.fs.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.bs(t,u);return this.Ss(t,f,a,h.readTime)?this.gs(e,ig(t,null,"F")):this.Ds(e,f,t,h)}))))})))))}ps(e,t,r,i){return Gx(t)||i.isEqual(xe.min())?oe.resolve(null):this.fs.getDocuments(e,r).next((s=>{const a=this.bs(t,s);return this.Ss(t,a,r,i)?oe.resolve(null):(Iu()<=Ge.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mu(t)),this.Ds(e,a,t,Jj(i,xf)).next((u=>u)))}))}bs(e,t){let r=new an(AN(e));return t.forEach(((i,s)=>{wy(e,s)&&(r=r.add(s))})),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,t,r){return Iu()<=Ge.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Mu(t)),this.fs.getDocumentsMatchingQuery(e,t,ta.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const I_="LocalStore",N9=3e8;class O9{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Ct(Ke),this.Fs=new Ol((s=>T_(s)),E_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function P9(n,e,t,r){return new O9(n,e,t,r)}async function JN(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],u=[];let h=We();for(const f of i){a.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of s){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ns:f,removedBatchIds:a,addedBatchIds:u})))}))}))}function V9(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,p){const m=f.batch,v=m.keys();let E=oe.resolve();return v.forEach((b=>{E=E.next((()=>p.getEntry(h,b))).next((S=>{const w=f.docVersions.get(b);Je(w!==null,48541),S.version.compareTo(w)<0&&(m.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),p.addEntry(S)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(h,m)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=We();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function ZN(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function L9(n,e){const t=De(n),r=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const u=[];e.targetChanges.forEach(((p,m)=>{const v=i.get(m);if(!v)return;u.push(t.li.removeMatchingKeys(s,p.removedDocuments,m).next((()=>t.li.addMatchingKeys(s,p.addedDocuments,m))));let E=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(In.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(m,E),(function(S,w,x){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=N9?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(v,E,p)&&u.push(t.li.updateTargetData(s,E))}));let h=Hs(),f=We();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))})),u.push(B9(s,a,e.documentUpdates).next((p=>{h=p.Bs,f=p.Ls}))),!r.isEqual(xe.min())){const p=t.li.getLastRemoteSnapshotVersion(s).next((m=>t.li.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(p)}return oe.waitFor(u).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,h,f))).next((()=>h))})).then((s=>(t.vs=i,s)))}function B9(n,e,t){let r=We(),i=We();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Hs();return t.forEach(((u,h)=>{const f=s.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(xe.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):pe(I_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{Bs:a,Ls:i}}))}function U9(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=g_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function z9(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.li.getTargetData(r,e).next((s=>s?(i=s,oe.resolve(i)):t.li.allocateTargetId(r).next((a=>(i=new zo(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function UE(n,e,t){const r=De(n),i=r.vs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!vc(a))throw a;pe(I_,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function sR(n,e,t){const r=De(n);let i=xe.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(h,f,p){const m=De(h),v=m.Fs.get(p);return v!==void 0?oe.resolve(m.vs.get(v)):m.li.getTargetData(f,p)})(r,a,Wi(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,u.targetId).next((h=>{s=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:xe.min(),t?s:We()))).next((u=>(j9(r,xF(e),u),{documents:u,ks:s})))))}function j9(n,e,t){let r=n.Ms.get(e)||xe.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Ms.set(e,r)}class oR{constructor(){this.activeTargetIds=NF()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F9{constructor(){this.vo=new oR,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new oR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class H9{Mo(e){}shutdown(){}}const aR="ConnectivityMonitor";class lR{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(aR,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(aR,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let rm=null;function zE(){return rm===null?rm=(function(){return 268435456+Math.round(2147483648*Math.random())})():rm++,"0x"+rm.toString(16)}const ET="RestConnection",q9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class $9{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===tg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){const a=zE(),u=this.Qo(e,t.toUriEncodedString());pe(ET,`Sending RPC '${e}' ${a}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,s);const{host:f}=new URL(u),p=Dl(f);return this.zo(e,u,h,r,p).then((m=>(pe(ET,`Received RPC '${e}' ${a}: `,m),m)),(m=>{throw wl(ET,`RPC '${e}' ${a} failed with error: `,m,"url: ",u,"request:",r),m}))}jo(e,t,r,i,s,a){return this.Wo(e,t,r,i,s)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}Qo(e,t){const r=q9[e];let i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class G9{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Dn="WebChannelConnection",Nh=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Wu extends $9{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wu.c_){const e=tN();Nh(e,eN.STAT_EVENT,(t=>{t.stat===kE.PROXY?pe(Dn,"STAT_EVENT: detected buffering proxy"):t.stat===kE.NOPROXY&&pe(Dn,"STAT_EVENT: detected no buffering proxy")})),Wu.c_=!0}}zo(e,t,r,i,s){const a=zE();return new Promise(((u,h)=>{const f=new JD;f.setWithCredentials(!0),f.listenOnce(ZD.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case xm.NO_ERROR:const m=f.getResponseJson();pe(Dn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),u(m);break;case xm.TIMEOUT:pe(Dn,`RPC '${e}' ${a} timed out`),h(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case xm.HTTP_ERROR:const v=f.getStatus();if(pe(Dn,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E?.error;if(b&&b.status&&b.message){const S=(function(x){const N=x.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(N)>=0?N:ne.UNKNOWN})(b.status);h(new he(S,b.message))}else h(new he(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(ne.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{pe(Dn,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(i);pe(Dn,`RPC '${e}' ${a} sending request:`,i),f.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=zE(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=s.join("");pe(Dn,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=a.createWebChannel(f,u);this.I_(p);let m=!1,v=!1;const E=new G9({Ho:b=>{v?pe(Dn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(pe(Dn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),pe(Dn,`RPC '${e}' stream ${i} sending:`,b),p.send(b))},Jo:()=>p.close()});return Nh(p,qh.EventType.OPEN,(()=>{v||(pe(Dn,`RPC '${e}' stream ${i} transport opened.`),E.i_())})),Nh(p,qh.EventType.CLOSE,(()=>{v||(v=!0,pe(Dn,`RPC '${e}' stream ${i} transport closed`),E.o_(),this.E_(p))})),Nh(p,qh.EventType.ERROR,(b=>{v||(v=!0,wl(Dn,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),E.o_(new he(ne.UNAVAILABLE,"The operation could not be completed")))})),Nh(p,qh.EventType.MESSAGE,(b=>{if(!v){const S=b.data[0];Je(!!S,16349);const w=S,x=w?.error||w[0]?.error;if(x){pe(Dn,`RPC '${e}' stream ${i} received error:`,x);const N=x.status;let V=(function(Z){const I=Qt[Z];if(I!==void 0)return BN(I)})(N),q=x.message;N==="NOT_FOUND"&&q.includes("database")&&q.includes("does not exist")&&q.includes(this.databaseId.database)&&wl(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),V===void 0&&(V=ne.INTERNAL,q="Unknown error status: "+N+" with message "+x.message),v=!0,E.o_(new he(V,q)),p.close()}else pe(Dn,`RPC '${e}' stream ${i} received:`,S),E.__(S)}})),Wu.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return nN()}}function K9(n){return new Wu(n)}function bT(){return typeof document<"u"?document:null}function Ry(n){return new XF(n,!0)}Wu.c_=!1;class M_{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const uR="PersistentStream";class eO{constructor(e,t,r,i,s,a,u,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Fs(t.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new he(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(uR,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(uR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class W9 extends eO{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=t9(this.serializer,e),r=(function(s){if(!("targetChange"in s))return xe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?Tr(a.readTime):xe.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=BE(this.serializer),t.addTarget=(function(s,a){let u;const h=a.target;if(u=OE(h)?{documents:r9(s,h)}:{query:i9(s,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=jN(s,a.resumeToken);const f=VE(s,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(xe.min())>0){u.readTime=og(s,a.snapshotVersion.toTimestamp());const f=VE(s,a.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=o9(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=BE(this.serializer),t.removeTarget=e,this.K_(t)}}class Y9 extends eO{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=n9(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=BE(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>$N(this.serializer,r)))};this.K_(t)}}class Q9{}class X9 extends Q9{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Wo(e,LE(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(ne.UNKNOWN,s.toString())}))}jo(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.jo(e,LE(t,r),i,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(ne.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function J9(n,e,t,r){return new X9(n,e,t,r)}class Z9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fs(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Al="RemoteStore";class eH{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo((a=>{r.enqueueAndForget((async()=>{Pl(this)&&(pe(Al,"Restarting streams for network reachability change."),await(async function(h){const f=De(h);f.Ea.add(4),await hd(f),f.Va.set("Unknown"),f.Ea.delete(4),await ky(f)})(this))}))})),this.Va=new Z9(r,i)}}async function ky(n){if(Pl(n))for(const e of n.Ra)await e(!0)}async function hd(n){for(const e of n.Ra)await e(!1)}function tO(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),P_(t)?O_(t):Ec(t).O_()&&N_(t,e))}function D_(n,e){const t=De(n),r=Ec(t);t.Ia.delete(e),r.O_()&&nO(t,e),t.Ia.size===0&&(r.O_()?r.L_():Pl(t)&&t.Va.set("Unknown"))}function N_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ec(n).Z_(e)}function nO(n,e){n.da.$e(e),Ec(n).X_(e)}function O_(n){n.da=new KF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ec(n).start(),n.Va.ua()}function P_(n){return Pl(n)&&!Ec(n).x_()&&n.Ia.size>0}function Pl(n){return De(n).Ea.size===0}function rO(n){n.da=void 0}async function tH(n){n.Va.set("Online")}async function nH(n){n.Ia.forEach(((e,t)=>{N_(n,e)}))}async function rH(n,e){rO(n),P_(n)?(n.Va.ha(e),O_(n)):n.Va.set("Unknown")}async function iH(n,e,t){if(n.Va.set("Online"),e instanceof zN&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.da.removeTarget(u))})(n,e)}catch(r){pe(Al,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ug(n,r)}else if(e instanceof Mm?n.da.Xe(e):e instanceof UN?n.da.st(e):n.da.tt(e),!t.isEqual(xe.min()))try{const r=await ZN(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const u=s.da.Tt(a);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.Ia.get(f);p&&s.Ia.set(f,p.withResumeToken(h.resumeToken,a))}})),u.targetMismatches.forEach(((h,f)=>{const p=s.Ia.get(h);if(!p)return;s.Ia.set(h,p.withResumeToken(In.EMPTY_BYTE_STRING,p.snapshotVersion)),nO(s,h);const m=new zo(p.target,h,f,p.sequenceNumber);N_(s,m)})),s.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){pe(Al,"Failed to raise snapshot:",r),await ug(n,r)}}async function ug(n,e,t){if(!vc(e))throw e;n.Ea.add(1),await hd(n),n.Va.set("Offline"),t||(t=()=>ZN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Al,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ky(n)}))}function iO(n,e){return e().catch((t=>ug(n,t,e)))}async function Iy(n){const e=De(n),t=sa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:g_;for(;sH(e);)try{const i=await U9(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,oH(e,i)}catch(i){await ug(e,i)}sO(e)&&oO(e)}function sH(n){return Pl(n)&&n.Ta.length<10}function oH(n,e){n.Ta.push(e);const t=sa(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function sO(n){return Pl(n)&&!sa(n).x_()&&n.Ta.length>0}function oO(n){sa(n).start()}async function aH(n){sa(n).ra()}async function lH(n){const e=sa(n);for(const t of n.Ta)e.ea(t.mutations)}async function uH(n,e,t){const r=n.Ta.shift(),i=w_.from(r,e,t);await iO(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Iy(n)}async function cH(n,e){e&&sa(n).Y_&&await(async function(r,i){if((function(a){return LN(a)&&a!==ne.ABORTED})(i.code)){const s=r.Ta.shift();sa(r).B_(),await iO(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Iy(r)}})(n,e),sO(n)&&oO(n)}async function cR(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),pe(Al,"RemoteStore received new credentials");const r=Pl(t);t.Ea.add(3),await hd(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ky(t)}async function hH(n,e){const t=De(n);e?(t.Ea.delete(2),await ky(t)):e||(t.Ea.add(2),await hd(t),t.Va.set("Unknown"))}function Ec(n){return n.ma||(n.ma=(function(t,r,i){const s=De(t);return s.sa(),new W9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:tH.bind(null,n),Yo:nH.bind(null,n),t_:rH.bind(null,n),J_:iH.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),P_(n)?O_(n):n.Va.set("Unknown")):(await n.ma.stop(),rO(n))}))),n.ma}function sa(n){return n.fa||(n.fa=(function(t,r,i){const s=De(t);return s.sa(),new Y9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:aH.bind(null,n),t_:cH.bind(null,n),ta:lH.bind(null,n),na:uH.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Iy(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Al,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class V_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new V_(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function L_(n,e){if(Fs("AsyncQueue",`${e}: ${n}`),vc(n))return new he(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class Yu{static emptySet(e){return new Yu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||be.comparator(t.key,r.key):(t,r)=>be.comparator(t.key,r.key),this.keyedMap=$h(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Yu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class hR{constructor(){this.ga=new Ct(be.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ic{constructor(e,t,r,i,s,a,u,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new ic(e,t,Yu.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class fH{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class dH{constructor(){this.queries=fR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=De(t),s=i.queries;i.queries=fR(),s.forEach(((a,u)=>{for(const h of u.ba)h.onError(r)}))})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function fR(){return new Ol((n=>wN(n)),Sy)}async function aO(n,e){const t=De(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new fH,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=L_(a,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.ba.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&B_(t)}async function lO(n,e){const t=De(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.ba.indexOf(e);a>=0&&(s.ba.splice(a,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function pH(n,e){const t=De(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.ba)u.Fa(i)&&(r=!0);a.wa=i}}r&&B_(t)}function mH(n,e,t){const r=De(n),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(t);r.queries.delete(e)}function B_(n){n.Ca.forEach((e=>{e.next()}))}var jE,dR;(dR=jE||(jE={})).Ma="default",dR.Cache="cache";class uO{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jE.Cache}}class cO{constructor(e){this.key=e}}class hO{constructor(e){this.key=e}}class gH{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.eu=AN(e),this.tu=new Yu(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new hR,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,m)=>{const v=i.get(p),E=wy(this.query,m)?m:null,b=!!v&&this.mutatedKeys.has(v.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let w=!1;v&&E?v.data.isEqual(E.data)?b!==S&&(r.track({type:3,doc:E}),w=!0):this.su(v,E)||(r.track({type:2,doc:E}),w=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(u=!0)):!v&&E?(r.track({type:0,doc:E}),w=!0):v&&!E&&(r.track({type:1,doc:v}),w=!0,(h||f)&&(u=!0)),w&&(E?(a=a.add(E),s=S?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Ss:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((p,m)=>(function(E,b){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Vt:w})}};return S(E)-S(b)})(p.type,m.type)||this.eu(p.doc,m.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,f=h!==this.Xa;return this.Xa=h,a.length!==0||f?{snapshot:new ic(this.query,e.tu,s,a,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hR,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new hO(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new cO(r))})),t}cu(e){this.Za=e.ks,this.Ya=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const U_="SyncEngine";class yH{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vH{constructor(e){this.key=e,this.hu=!1}}class TH{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ol((u=>wN(u)),Sy),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ct(be.comparator),this.Au=new Map,this.Vu=new x_,this.du={},this.mu=new Map,this.fu=rc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EH(n,e,t=!0){const r=yO(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await fO(r,e,t,!0),i}async function bH(n,e){const t=yO(n);await fO(t,e,!0,!1)}async function fO(n,e,t,r){const i=await z9(n.localStore,Wi(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await _H(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&tO(n.remoteStore,i),u}async function _H(n,e,t,r,i){n.pu=(m,v,E)=>(async function(S,w,x,N){let V=w.view.ru(x);V.Ss&&(V=await sR(S.localStore,w.query,!1).then((({documents:I})=>w.view.ru(I,V))));const q=N&&N.targetChanges.get(w.targetId),F=N&&N.targetMismatches.get(w.targetId)!=null,Z=w.view.applyChanges(V,S.isPrimaryClient,q,F);return mR(S,w.targetId,Z.au),Z.snapshot})(n,m,v,E);const s=await sR(n.localStore,e,!0),a=new gH(e,s.ks),u=a.ru(s.documents),h=cd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(u,n.isPrimaryClient,h);mR(n,t,f.au);const p=new yH(e,t,a);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function SH(n,e,t){const r=De(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Sy(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await UE(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&D_(r.remoteStore,i.targetId),FE(r,i.targetId)})).catch(yc)):(FE(r,i.targetId),await UE(r.localStore,i.targetId,!0))}async function wH(n,e){const t=De(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),D_(t.remoteStore,r.targetId))}async function AH(n,e,t){const r=DH(n);try{const i=await(function(a,u){const h=De(a),f=ft.now(),p=u.reduce(((E,b)=>E.add(b.key)),We());let m,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=Hs(),S=We();return h.xs.getEntries(E,p).next((w=>{b=w,b.forEach(((x,N)=>{N.isValidDocument()||(S=S.add(x))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,b))).next((w=>{m=w;const x=[];for(const N of u){const V=jF(N,m.get(N.key).overlayedDocument);V!=null&&x.push(new ga(N.key,V,gN(V.value.mapValue),Hn.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,x,u)})).next((w=>{v=w;const x=w.applyToLocalDocumentSet(m,S);return h.documentOverlayCache.saveOverlays(E,w.batchId,x)}))})).then((()=>({batchId:v.batchId,changes:xN(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,h){let f=a.du[a.currentUser.toKey()];f||(f=new Ct(Ke)),f=f.insert(u,h),a.du[a.currentUser.toKey()]=f})(r,i.batchId,t),await fd(r,i.changes),await Iy(r.remoteStore)}catch(i){const s=L_(i,"Failed to persist write");t.reject(s)}}async function dO(n,e){const t=De(n);try{const r=await L9(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Je(a.hu,14607):i.removedDocuments.size>0&&(Je(a.hu,42227),a.hu=!1))})),await fd(t,r,e)}catch(r){await yc(r)}}function pR(n,e,t){const r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){const h=De(a);h.onlineState=u;let f=!1;h.queries.forEach(((p,m)=>{for(const v of m.ba)v.va(u)&&(f=!0)})),f&&B_(h)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CH(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Ct(be.comparator);a=a.insert(s,dn.newNoDocument(s,xe.min()));const u=We().add(s),h=new xy(xe.min(),new Map,new Ct(Ke),a,u);await dO(r,h),r.Ru=r.Ru.remove(s),r.Au.delete(e),z_(r)}else await UE(r.localStore,e,!1).then((()=>FE(r,e,t))).catch(yc)}async function xH(n,e){const t=De(n),r=e.batch.batchId;try{const i=await V9(t.localStore,e);mO(t,r,null),pO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await fd(t,i)}catch(i){await yc(i)}}async function RH(n,e,t){const r=De(n);try{const i=await(function(a,u){const h=De(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next((m=>(Je(m!==null,37113),p=m.keys(),h.mutationQueue.removeMutationBatch(f,m)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);mO(r,e,t),pO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await fd(r,i)}catch(i){await yc(i)}}function pO(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function mO(n,e,t){const r=De(n);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function FE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||gO(n,r)}))}function gO(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(D_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),z_(n))}function mR(n,e,t){for(const r of t)r instanceof cO?(n.Vu.addReference(r.key,e),kH(n,r)):r instanceof hO?(pe(U_,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||gO(n,r.key)):we(19791,{wu:r})}function kH(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(pe(U_,"New document in limbo: "+t),n.Eu.add(r),z_(n))}function z_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(ht.fromString(e)),r=n.fu.next();n.Au.set(r,new vH(t)),n.Ru=n.Ru.insert(t,r),tO(n.remoteStore,new zo(Wi(b_(t.path)),r,"TargetPurposeLimboResolution",by.ce))}}async function fd(n,e,t){const r=De(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{a.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(f){i.push(f);const p=k_.Es(h.targetId,f);s.push(p)}})))})),await Promise.all(a),r.Pu.J_(i),await(async function(h,f){const p=De(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>oe.forEach(f,(v=>oe.forEach(v.Ts,(E=>p.persistence.referenceDelegate.addReference(m,v.targetId,E))).next((()=>oe.forEach(v.Is,(E=>p.persistence.referenceDelegate.removeReference(m,v.targetId,E)))))))))}catch(m){if(!vc(m))throw m;pe(I_,"Failed to update sequence numbers: "+m)}for(const m of f){const v=m.targetId;if(!m.fromCache){const E=p.vs.get(v),b=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(b);p.vs=p.vs.insert(v,S)}}})(r.localStore,s))}async function IH(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){pe(U_,"User change. New user:",e.toKey());const r=await JN(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((h=>{h.reject(new he(ne.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fd(t,r.Ns)}}function MH(n,e){const t=De(n),r=t.Au.get(e);if(r&&r.hu)return We().add(r.key);{let i=We();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}function yO(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CH.bind(null,e),e.Pu.J_=pH.bind(null,e.eventManager),e.Pu.yu=mH.bind(null,e.eventManager),e}function DH(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RH.bind(null,e),e}class cg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ry(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return P9(this.persistence,new D9,e.initialUser,this.serializer)}Cu(e){return new XN(R_.Vi,this.serializer)}Du(e){return new F9}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cg.provider={build:()=>new cg};class NH extends cg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof lg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new y9(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new XN((r=>lg.Vi(r,t)),this.serializer)}}class HE{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IH.bind(null,this.syncEngine),await hH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dH})()}createDatastore(e){const t=Ry(e.databaseInfo.databaseId),r=K9(e.databaseInfo);return J9(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,u){return new eH(r,i,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>pR(this.syncEngine,t,0)),(function(){return lR.v()?new lR:new H9})())}createSyncEngine(e,t){return(function(i,s,a,u,h,f,p){const m=new TH(i,s,a,u,h,f);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=De(t);pe(Al,"RemoteStore shutting down."),r.Ea.add(5),await hd(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}HE.provider={build:()=>new HE};class vO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}let OH=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,s){const a=De(i),u={documents:s.map((m=>ag(a.serializer,m)))},h=await a.jo("BatchGetDocuments",a.serializer.databaseId,ht.emptyPath(),u,s.length),f=new Map;h.forEach((m=>{const v=e9(a.serializer,m);f.set(v.key.toString(),v)}));const p=[];return s.forEach((m=>{const v=f.get(m.toString());Je(!!v,55234,{key:m}),p.push(v)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new S_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=be.fromPath(r);this.mutations.push(new VN(i,this.precondition(i)))})),await(async function(r,i){const s=De(r),a={writes:i.map((u=>$N(s.serializer,u)))};await s.Wo("Commit",s.serializer.databaseId,ht.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw we(50498,{Gu:e.constructor.name});t=xe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new he(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xe.min())?Hn.exists(!1):Hn.updateTime(t):Hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xe.min()))throw new he(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hn.updateTime(t)}return Hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class PH{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new M_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new OH(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Zu(i)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!ld(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!LN(t)}return!1}}const oa="FirestoreClient";class VH{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=On.UNAUTHENTICATED,this.clientId=m_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{pe(oa,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(pe(oa,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=L_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function _T(n,e){n.asyncQueue.verifyOperationInProgress(),pe(oa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await JN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function gR(n,e){n.asyncQueue.verifyOperationInProgress();const t=await LH(n);pe(oa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>cR(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>cR(e.remoteStore,i))),n._onlineComponents=e}async function LH(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(oa,"Using user provided OfflineComponentProvider");try{await _T(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;wl("Error using user provided cache. Falling back to memory cache: "+t),await _T(n,new cg)}}else pe(oa,"Using default OfflineComponentProvider"),await _T(n,new NH(void 0));return n._offlineComponents}async function j_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(oa,"Using user provided OnlineComponentProvider"),await gR(n,n._uninitializedComponentsProvider._online)):(pe(oa,"Using default OnlineComponentProvider"),await gR(n,new HE))),n._onlineComponents}function BH(n){return j_(n).then((e=>e.syncEngine))}function UH(n){return j_(n).then((e=>e.datastore))}async function TO(n){const e=await j_(n),t=e.eventManager;return t.onListen=EH.bind(null,e.syncEngine),t.onUnlisten=SH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wH.bind(null,e.syncEngine),t}function zH(n,e,t={}){const r=new Ki;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,h,f){const p=new vO({next:v=>{p.Nu(),a.enqueueAndForget((()=>lO(s,m)));const E=v.docs.has(u);!E&&v.fromCache?f.reject(new he(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&h&&h.source==="server"?f.reject(new he(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),m=new uO(b_(u.path),p,{includeMetadataChanges:!0,Ka:!0});return aO(s,m)})(await TO(n),n.asyncQueue,e,t,r))),r.promise}function jH(n,e,t={}){const r=new Ki;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,h,f){const p=new vO({next:v=>{p.Nu(),a.enqueueAndForget((()=>lO(s,m))),v.fromCache&&h.source==="server"?f.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),m=new uO(u,p,{includeMetadataChanges:!0,Ka:!0});return aO(s,m)})(await TO(n),n.asyncQueue,e,t,r))),r.promise}function FH(n,e){const t=new Ki;return n.asyncQueue.enqueueAndForget((async()=>AH(await BH(n),e,t))),t.promise}function HH(n,e,t){const r=new Ki;return n.asyncQueue.enqueueAndForget((async()=>{const i=await UH(n);new PH(n.asyncQueue,i,t,e,r).ju()})),r.promise}function EO(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const qH="ComponentProvider",yR=new Map;function $H(n,e,t,r,i){return new lF(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,EO(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const bO="firestore.googleapis.com",vR=!0;class TR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bO,this.ssl=vR}else this.host=e.host,this.ssl=e.ssl??vR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m9)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EO(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class My{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new jj;switch(r.type){case"firstParty":return new $j(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=yR.get(t);r&&(pe(qH,"Removing Datastore"),yR.delete(t),r.terminate())})(this),Promise.resolve()}}function GH(n,e,t,r={}){n=Xi(n,My);const i=Dl(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(Zb(`https://${u}`),e_("Firestore",!0)),s.host!==bO&&s.host!==u&&wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...s,host:u,ssl:i,emulatorOptions:r};if(!Tl(h,a)&&(n._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=On.MOCK_USER;else{f=fD(r.mockUserToken,n._app?.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new he(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new On(m)}n._authCredentials=new Fj(new iN(f,p))}}class ya{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class Nt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ad(t,Nt._jsonSchema))return new Nt(e,r||null,new be(ht.fromString(t.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Zt("string",Nt._jsonSchemaVersion),referencePath:Zt("string")};class Wo extends ya{constructor(e,t,r){super(e,t,b_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new be(e))}withConverter(e){return new Wo(this.firestore,e,this._path)}}function _O(n,e,...t){if(n=zt(n),sN("collection","path",e),n instanceof My){const r=ht.fromString(e,...t);return Dx(r),new Wo(n,null,r)}{if(!(n instanceof Nt||n instanceof Wo))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return Dx(r),new Wo(n.firestore,null,r)}}function Vs(n,e,...t){if(n=zt(n),arguments.length===1&&(e=m_.newId()),sN("doc","path",e),n instanceof My){const r=ht.fromString(e,...t);return Mx(r),new Nt(n,null,new be(r))}{if(!(n instanceof Nt||n instanceof Wo))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return Mx(r),new Nt(n.firestore,n instanceof Wo?n.converter:null,new be(r))}}const ER="AsyncQueue";class bR{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M_(this,"async_queue_retry"),this._c=()=>{const r=bT();r&&pe(ER,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=bT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=bT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ki;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!vc(e))throw e;pe(ER,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Fs("INTERNAL UNHANDLED ERROR: ",_R(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=V_.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&we(47125,{Pc:_R(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function _R(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class bc extends My{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bR,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bR(e),this._firestoreClient=void 0,await e}}}function KH(n,e){const t=typeof n=="object"?n:r_(),r=typeof n=="string"?n:tg,i=gy(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=uD("firestore");s&&GH(i,...s)}return i}function Dy(n){if(n._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WH(n),n._firestoreClient}function WH(n){const e=n._freezeSettings(),t=$H(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new VH(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}class gr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gr(In.fromBase64String(e))}catch(t){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gr(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ad(e,gr._jsonSchema))return gr.fromBase64String(e.bytes)}}gr._jsonSchemaVersion="firestore/bytes/1.0",gr._jsonSchema={type:Zt("string",gr._jsonSchemaVersion),bytes:Zt("string")};class Ny{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oy{constructor(e){this._methodName=e}}class Yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(ad(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Zt("string",Yi._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};class fi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ad(e,fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fi(e.vectorValues);throw new he(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:Zt("string",fi._jsonSchemaVersion),vectorValues:Zt("object")};const YH=/^__.*__$/;class QH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ga(e,this.data,this.fieldMask,t,this.fieldTransforms):new ud(e,this.data,t,this.fieldTransforms)}}class SO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ga(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{dataSource:n})}}class F_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new F_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return hg(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wO(this.dataSource)&&YH.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class XH{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ry(e)}createContext(e,t,r,i=!1){return new F_({dataSource:e,methodName:t,targetDoc:r,path:Rn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Py(n){const e=n._freezeSettings(),t=Ry(n._databaseId);return new XH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AO(n,e,t,r,i,s={}){const a=n.createContext(s.merge||s.mergeFields?2:0,e,t,i);q_("Data must be an object, but it was:",a,r);const u=RO(r,a);let h,f;if(s.merge)h=new vr(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const v=Cl(e,m,t);if(!a.contains(v))throw new he(ne.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);MO(p,v)||p.push(v)}h=new vr(p),f=a.fieldTransforms.filter((m=>h.covers(m.field)))}else h=null,f=a.fieldTransforms;return new QH(new Fn(u),h,f)}class Vy extends Oy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vy}}class H_ extends Oy{_toFieldTransform(e){return new LF(e.path,new Df)}isEqual(e){return e instanceof H_}}function CO(n,e,t,r){const i=n.createContext(1,e,t);q_("Data must be an object, but it was:",i,r);const s=[],a=Fn.empty();ma(r,((h,f)=>{const p=IO(e,h,t);f=zt(f);const m=i.childContextForFieldPath(p);if(f instanceof Vy)s.push(p);else{const v=dd(f,m);v!=null&&(s.push(p),a.set(p,v))}}));const u=new vr(s);return new SO(a,u,i.fieldTransforms)}function xO(n,e,t,r,i,s){const a=n.createContext(1,e,t),u=[Cl(e,r,t)],h=[i];if(s.length%2!=0)throw new he(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)u.push(Cl(e,s[v])),h.push(s[v+1]);const f=[],p=Fn.empty();for(let v=u.length-1;v>=0;--v)if(!MO(f,u[v])){const E=u[v];let b=h[v];b=zt(b);const S=a.childContextForFieldPath(E);if(b instanceof Vy)f.push(E);else{const w=dd(b,S);w!=null&&(f.push(E),p.set(E,w))}}const m=new vr(f);return new SO(p,m,a.fieldTransforms)}function JH(n,e,t,r=!1){return dd(t,n.createContext(r?4:3,e))}function dd(n,e){if(kO(n=zt(n)))return q_("Unsupported field value:",e,n),RO(n,e);if(n instanceof Oy)return(function(r,i){if(!wO(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const u of r){let h=dd(u,i.childContextForArray(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ft.fromDate(r);return{timestampValue:og(i.serializer,s)}}if(r instanceof ft){const s=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:og(i.serializer,s)}}if(r instanceof Yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gr)return{bytesValue:jN(i.serializer,r._byteString)};if(r instanceof Nt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:C_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fi)return(function(a,u){const h=a instanceof fi?a.toArray():a;return{mapValue:{fields:{[pN]:{stringValue:mN},[ng]:{arrayValue:{values:h.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return __(u.serializer,p)}))}}}}}})(r,i);if(YN(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Ey(r)}`)})(n,e)}function RO(n,e){const t={};return lN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(n,((r,i)=>{const s=dd(i,e.childContextForField(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function kO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Yi||n instanceof gr||n instanceof Nt||n instanceof Oy||n instanceof fi||YN(n))}function q_(n,e,t){if(!kO(t)||!oN(t)){const r=Ey(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Cl(n,e,t){if((e=zt(e))instanceof Ny)return e._internalPath;if(typeof e=="string")return IO(n,e);throw hg("Field path arguments must be of type string or ",n,!1,void 0,t)}const ZH=new RegExp("[~\\*/\\[\\]]");function IO(n,e,t){if(e.search(ZH)>=0)throw hg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ny(...e.split("."))._internalPath}catch{throw hg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hg(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new he(ne.INVALID_ARGUMENT,u+n+h)}function MO(n,e){return n.some((t=>t.isEqual(e)))}class DO{convertValue(e,t="none"){switch(ia(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ma(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[ng].arrayValue?.values?.map((r=>Ut(r.doubleValue)));return new fi(t)}convertGeoPoint(e){return new Yi(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_y(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rf(e));default:return null}}convertTimestamp(e){const t=na(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);Je(WN(r),9688,{name:e});const i=new kf(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(t)||Fs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class $_ extends DO{constructor(e){super(),this.firestore=e}convertBytes(e){return new gr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}function NO(){return new H_("serverTimestamp")}const SR="@firebase/firestore",wR="4.11.0";class fg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Cl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eq extends fg{data(){return super.data()}}function tq(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G_{}class K_ extends G_{}function nq(n,e,...t){let r=[];e instanceof G_&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((h=>h instanceof W_)).length,u=s.filter((h=>h instanceof Ly)).length;if(a>1||a>0&&u>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Ly extends K_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ly(e,t,r)}_apply(e){const t=this._parse(e);return OO(e._query,t),new ya(e.firestore,e.converter,PE(e._query,t))}_parse(e){const t=Py(e.firestore);return(function(s,a,u,h,f,p,m){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){CR(m,p);const b=[];for(const S of m)b.push(AR(h,s,S));v={arrayValue:{values:b}}}else v=AR(h,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||CR(m,p),v=JH(u,a,m,p==="in"||p==="not-in");return Jt.create(f,p,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rq(n,e,t){const r=e,i=Cl("where",n);return Ly._create(i,r,t)}class W_ extends G_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new W_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const u=s.getFlattenedFilters();for(const h of u)OO(a,h),a=PE(a,h)})(e._query,t),new ya(e.firestore,e.converter,PE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Y_ extends K_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Y_(e,t)}_apply(e){const t=(function(i,s,a){if(i.startAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mf(s,a)})(e._query,this._field,this._direction);return new ya(e.firestore,e.converter,CF(e._query,t))}}function iq(n,e="asc"){const t=e,r=Cl("orderBy",n);return Y_._create(r,t)}class Q_ extends K_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Q_(e,t,r)}_apply(e){return new ya(e.firestore,e.converter,ig(e._query,this._limit,this._limitType))}}function sq(n){return Q_._create("limit",n,"F")}function AR(n,e,t){if(typeof(t=zt(t))=="string"){if(t==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SN(e)&&t.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ht.fromString(t));if(!be.isDocumentKey(r))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zx(n,new be(r))}if(t instanceof Nt)return zx(n,t._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ey(t)}.`)}function CR(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OO(n,e){const t=(function(i,s){for(const a of i)for(const u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function PO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class oq extends DO{constructor(e){super(),this.firestore=e}convertBytes(e){return new gr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}class Bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yo extends fg{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Dm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yo._jsonSchema={type:Zt("string",Yo._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class Dm extends Yo{data(e={}){return super.data(e)}}class Qu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Dm(this._firestore,this._userDataWriter,r.key,r,new Bu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{const h=new Dm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Bu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const h=new Dm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Bu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:aq(u.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=m_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}Qu._jsonSchemaVersion="firestore/querySnapshot/1.0",Qu._jsonSchema={type:Zt("string",Qu._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};const lq={maxAttempts:5};function Kh(n,e){if((n=zt(n)).firestore!==e)throw new he(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class uq{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Py(e)}get(e){const t=Kh(e,this._firestore),r=new oq(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return we(24041);const s=i[0];if(s.isFoundDocument())return new fg(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new fg(this._firestore,r,t._key,null,t.converter);throw we(18433,{doc:s})}))}set(e,t,r){const i=Kh(e,this._firestore),s=PO(i.converter,t,r),a=AO(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this}update(e,t,r,...i){const s=Kh(e,this._firestore);let a;return a=typeof(t=zt(t))=="string"||t instanceof Ny?xO(this._dataReader,"Transaction.update",s._key,t,r,i):CO(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this}delete(e){const t=Kh(e,this._firestore);return this._transaction.delete(t._key),this}}let cq=class extends uq{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kh(e,this._firestore),r=new $_(this._firestore);return super.get(e).then((i=>new Yo(this._firestore,r,t._key,i._document,new Bu(!1,!1),t.converter)))}};function hq(n,e,t){n=Xi(n,bc);const r={...lq,...t};(function(a){if(a.maxAttempts<1)throw new he(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=Dy(n);return HH(i,(s=>e(new cq(n,s))),r)}function By(n){n=Xi(n,Nt);const e=Xi(n.firestore,bc),t=Dy(e);return zH(t,n._key).then((r=>pq(e,n,r)))}function fq(n){n=Xi(n,ya);const e=Xi(n.firestore,bc),t=Dy(e),r=new $_(e);return tq(n._query),jH(t,n._query).then((i=>new Qu(e,r,n,i)))}function VO(n,e,t){n=Xi(n,Nt);const r=Xi(n.firestore,bc),i=PO(n.converter,e,t),s=Py(r);return LO(r,[AO(s,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Hn.none())])}function dq(n,e,t,...r){n=Xi(n,Nt);const i=Xi(n.firestore,bc),s=Py(i);let a;return a=typeof(e=zt(e))=="string"||e instanceof Ny?xO(s,"updateDoc",n._key,e,t,r):CO(s,"updateDoc",n._key,e),LO(i,[a.toMutation(n._key,Hn.exists(!0))])}function LO(n,e){const t=Dy(n);return FH(t,e)}function pq(n,e,t){const r=t.docs.get(e._key),i=new $_(n);return new Yo(n,i,e._key,r,new Bu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){zj(Nl),El(new ea("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new bc(new Hj(r.getProvider("auth-internal")),new Gj(a,r.getProvider("app-check-internal")),uF(a,i),a);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),$i(SR,wR,e),$i(SR,wR,"esm2020")})();var mq="firebase",gq="12.9.0";$i(mq,gq,"app");const BO="firebasestorage.googleapis.com",yq="storageBucket",vq=120*1e3,Tq=600*1e3;class is extends rs{constructor(e,t,r=0){super(ST(e),`Firebase Storage: ${t} (${ST(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,is.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ST(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zi||(Zi={}));function ST(n){return"storage/"+n}function Eq(){const n="An unknown error occurred, please check the error payload for server response.";return new is(Zi.UNKNOWN,n)}function bq(){return new is(Zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _q(){return new is(Zi.CANCELED,"User canceled the upload/download.")}function Sq(n){return new is(Zi.INVALID_URL,"Invalid URL '"+n+"'.")}function wq(n){return new is(Zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function xR(n){return new is(Zi.INVALID_ARGUMENT,n)}function UO(){return new is(Zi.APP_DELETED,"The Firebase app was deleted.")}function Aq(n){return new is(Zi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class li{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=li.makeFromUrl(e,t)}catch{return new li(e,"")}if(r.path==="")return r;throw wq(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),h={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const p="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",E=new RegExp(`^https?://${m}/${p}/b/${i}/o${v}`,"i"),b={bucket:1,path:3},S=t===BO?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",x=new RegExp(`^https?://${S}/${i}/${w}`,"i"),V=[{regex:u,indices:h,postModify:s},{regex:E,indices:b,postModify:f},{regex:x,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<V.length;q++){const F=V[q],Z=F.regex.exec(e);if(Z){const I=Z[F.indices.bucket];let k=Z[F.indices.path];k||(k=""),r=new li(I,k),F.postModify(r);break}}if(r==null)throw Sq(e);return r}}class Cq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function xq(n,e,t){let r=1,i=null,s=null,a=!1,u=0;function h(){return u===2}let f=!1;function p(...w){f||(f=!0,e.apply(null,w))}function m(w){i=setTimeout(()=>{i=null,n(E,h())},w)}function v(){s&&clearTimeout(s)}function E(w,...x){if(f){v();return}if(w){v(),p.call(null,w,...x);return}if(h()||a){v(),p.call(null,w,...x);return}r<64&&(r*=2);let V;u===1?(u=2,V=0):V=(r+Math.random())*1e3,m(V)}let b=!1;function S(w){b||(b=!0,v(),!f&&(i!==null?(w||(u=2),clearTimeout(i),m(0)):w||(u=1)))}return m(0),s=setTimeout(()=>{a=!0,S(!0)},t),S}function Rq(n){n(!1)}function kq(n){return n!==void 0}function RR(n,e,t,r){if(r<e)throw xR(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw xR(`Invalid value for '${n}'. Expected ${t} or less.`)}function Iq(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var dg;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(dg||(dg={}));function Mq(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class Dq{constructor(e,t,r,i,s,a,u,h,f,p,m,v=!0,E=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=m,this.retry=v,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,S)=>{this.resolve_=b,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new im(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===dg.NO_ERROR,h=s.getStatus();if(!u||Mq(h,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===dg.ABORT;r(!1,new im(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new im(f,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());kq(h)?s(h):s()}catch(h){a(h)}else if(u!==null){const h=Eq();h.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,h)):a(h)}else if(i.canceled){const h=this.appDelete_?UO():_q();a(h)}else{const h=bq();a(h)}};this.canceled_?t(!1,new im(!1,null,!0)):this.backoffId_=xq(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Rq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class im{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Nq(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Oq(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Pq(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Vq(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Lq(n,e,t,r,i,s,a=!0,u=!1){const h=Iq(n.urlParams),f=n.url+h,p=Object.assign({},n.headers);return Pq(p,e),Nq(p,t),Oq(p,s),Vq(p,r),new Dq(f,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,u)}function Bq(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Uq(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class pg{constructor(e,t){this._service=e,t instanceof li?this._location=t:this._location=li.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pg(e,t)}get root(){const e=new li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Uq(this._location.path)}get storage(){return this._service}get parent(){const e=Bq(this._location.path);if(e===null)return null;const t=new li(this._location.bucket,e);return new pg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Aq(e)}}function kR(n,e){const t=e?.[yq];return t==null?null:li.makeFromBucketSpec(t,n)}function zq(n,e,t,r={}){n.host=`${e}:${t}`;const i=Dl(e);i&&(Zb(`https://${n.host}/b`),e_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:fD(s,n.app.options.projectId))}class jq{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=BO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vq,this._maxUploadRetryTime=Tq,this._requests=new Set,i!=null?this._bucket=li.makeFromBucketSpec(i,this._host):this._bucket=kR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=li.makeFromBucketSpec(this._url,e):this._bucket=kR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pg(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Cq(UO());{const a=Lq(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const IR="@firebase/storage",MR="0.14.0";const zO="storage";function Fq(n=r_(),e){n=zt(n);const r=gy(n,zO).getImmediate({identifier:e}),i=uD("storage");return i&&Hq(r,...i),r}function Hq(n,e,t,r={}){zq(n,e,t,r)}function qq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new jq(t,r,i,e,Nl)}function $q(){El(new ea(zO,qq,"PUBLIC").setMultipleInstances(!0)),$i(IR,MR,""),$i(IR,MR,"esm2020")}$q();const Gq={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},X_=mD(Gq),Oh=Bj(X_),ui=KH(X_);Fq(X_);const jO=P.createContext(null),Kq=new Is;async function DR(n){const e=Vs(ui,"users",n.uid);(await By(e)).exists()||await VO(e,{name:n.displayName||"",email:n.email||"",streak:0,longestStreak:0,theme:"pastel-pink",darkMode:!1,pinHash:null,lastEntryDate:null,createdAt:NO()})}function Wq({children:n}){const[e,t]=P.useState(null),[r,i]=P.useState(!0);P.useEffect(()=>C5(Oh,async E=>{E?(await DR(E),t(E)):t(null),i(!1)}),[]);const m={user:e,loading:r,signInWithGoogle:async()=>{const v=await K5(Oh,Kq);await DR(v.user)},signInWithEmail:async(v,E)=>{await S5(Oh,v,E)},signUp:async(v,E,b)=>{const S=await _5(Oh,v,E),w=Vs(ui,"users",S.user.uid);await VO(w,{name:b||"",email:S.user.email||"",streak:0,longestStreak:0,theme:"pastel-pink",darkMode:!1,pinHash:null,lastEntryDate:null,createdAt:NO()})},signOut:async()=>{await x5(Oh)},verifyPin:async v=>{if(!e)return!1;const E=Vs(ui,"users",e.uid),b=await By(E);if(!b.exists())return!1;const S=b.data();return S.pinHash?S.pinHash===btoa(v):!1},setPin:async v=>{if(!e)return;const E=Vs(ui,"users",e.uid);await dq(E,{pinHash:btoa(v)})}};return $.jsx(jO.Provider,{value:m,children:n})}function Uy(){const n=P.useContext(jO);if(n===null)throw new Error("useAuth must be used within an AuthProvider");return n}const Yq=[{to:"/dashboard",label:"Dashboard",icon:""},{to:"/editor",label:"New Entry",icon:""},{to:"/calendar",label:"Calendar",icon:""}];function Qq(){return $.jsxs("div",{className:"min-h-screen flex bg-[var(--color-background)]",children:[$.jsxs("aside",{className:"w-56 bg-[var(--color-surface)] border-r border-pink-100 flex flex-col shadow-sm",children:[$.jsx("div",{className:"p-5 border-b border-pink-100",children:$.jsx("h1",{className:"font-['Pacifico'] text-2xl text-pink-300",children:"DearMe "})}),$.jsx("nav",{className:"flex-1 p-3 flex flex-col gap-1",children:Yq.map(({to:n,label:e,icon:t})=>$.jsxs(rD,{to:n,className:({isActive:r})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-['Poppins'] text-sm transition-colors ${r?"bg-pink-100 text-pink-600 font-medium":"text-[var(--color-text)] hover:bg-pink-50"}`,children:[$.jsx("span",{className:"text-lg",children:t}),e]},n))}),$.jsx("div",{className:"p-3 border-t border-pink-100",children:$.jsxs("button",{className:"flex items-center gap-3 w-full px-4 py-3 rounded-xl font-['Poppins'] text-sm text-[var(--color-text)] hover:bg-red-50 hover:text-red-400 transition-colors cursor-pointer",children:[$.jsx("span",{className:"text-lg",children:""}),"Sign Out"]})})]}),$.jsx("main",{className:"flex-1 overflow-y-auto",children:$.jsx(ZM,{})})]})}function Xq(){const{user:n,loading:e}=Uy();return e?$.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--color-background)]",children:$.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-3",children:[$.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-200"}),$.jsx("p",{className:"font-['Poppins'] text-sm text-pink-300",children:"Loading..."})]})}):n?$.jsx(ZM,{}):$.jsx(JM,{to:"/login",replace:!0})}const J_=P.createContext({});function Z_(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const FO=typeof window<"u",HO=FO?P.useLayoutEffect:P.useEffect,zy=P.createContext(null);function eS(n,e){n.indexOf(e)===-1&&n.push(e)}function mg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const es=(n,e,t)=>t>e?e:t<n?n:t;let tS=()=>{};const qs={},qO=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function $O(n){return typeof n=="object"&&n!==null}const GO=n=>/^0[^.\s]+$/u.test(n);function KO(n){let e;return()=>(e===void 0&&(e=n()),e)}const jr=n=>n,Jq=(n,e)=>t=>e(n(t)),pd=(...n)=>n.reduce(Jq),Pf=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class nS{constructor(){this.subscriptions=[]}add(e){return eS(this.subscriptions,e),()=>mg(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const di=n=>n*1e3,zr=n=>n/1e3;function WO(n,e){return e?n*(1e3/e):0}const YO=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Zq=1e-7,e8=12;function t8(n,e,t,r,i){let s,a,u=0;do a=e+(t-e)/2,s=YO(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>Zq&&++u<e8);return a}function md(n,e,t,r){if(n===e&&t===r)return jr;const i=s=>t8(s,0,1,n,t);return s=>s===0||s===1?s:YO(i(s),e,r)}const QO=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,XO=n=>e=>1-n(1-e),JO=md(.33,1.53,.69,.99),rS=XO(JO),ZO=QO(rS),e2=n=>(n*=2)<1?.5*rS(n):.5*(2-Math.pow(2,-10*(n-1))),iS=n=>1-Math.sin(Math.acos(n)),t2=XO(iS),n2=QO(iS),n8=md(.42,0,1,1),r8=md(0,0,.58,1),r2=md(.42,0,.58,1),i8=n=>Array.isArray(n)&&typeof n[0]!="number",i2=n=>Array.isArray(n)&&typeof n[0]=="number",s8={linear:jr,easeIn:n8,easeInOut:r2,easeOut:r8,circIn:iS,circInOut:n2,circOut:t2,backIn:rS,backInOut:ZO,backOut:JO,anticipate:e2},o8=n=>typeof n=="string",NR=n=>{if(i2(n)){tS(n.length===4);const[e,t,r,i]=n;return md(e,t,r,i)}else if(o8(n))return s8[n];return n},sm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function a8(n,e){let t=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){a.has(p)&&(f.schedule(p),n()),p(u)}const f={schedule:(p,m=!1,v=!1)=>{const b=v&&i?t:r;return m&&a.add(p),b.has(p)||b.add(p),p},cancel:p=>{r.delete(p),a.delete(p)},process:p=>{if(u=p,i){s=!0;return}i=!0,[t,r]=[r,t],t.forEach(h),t.clear(),i=!1,s&&(s=!1,f.process(p))}};return f}const l8=40;function s2(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=sm.reduce((V,q)=>(V[q]=a8(s),V),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:p,update:m,preRender:v,render:E,postRender:b}=a,S=()=>{const V=qs.useManualTiming?i.timestamp:performance.now();t=!1,qs.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(V-i.timestamp,l8),1)),i.timestamp=V,i.isProcessing=!0,u.process(i),h.process(i),f.process(i),p.process(i),m.process(i),v.process(i),E.process(i),b.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(S))},w=()=>{t=!0,r=!0,i.isProcessing||n(S)};return{schedule:sm.reduce((V,q)=>{const F=a[q];return V[q]=(Z,I=!1,k=!1)=>(t||w(),F.schedule(Z,I,k)),V},{}),cancel:V=>{for(let q=0;q<sm.length;q++)a[sm[q]].cancel(V)},state:i,steps:a}}const{schedule:gt,cancel:aa,state:wn,steps:wT}=s2(typeof requestAnimationFrame<"u"?requestAnimationFrame:jr,!0);let Nm;function u8(){Nm=void 0}const qn={now:()=>(Nm===void 0&&qn.set(wn.isProcessing||qs.useManualTiming?wn.timestamp:performance.now()),Nm),set:n=>{Nm=n,queueMicrotask(u8)}},o2=n=>e=>typeof e=="string"&&e.startsWith(n),a2=o2("--"),c8=o2("var(--"),sS=n=>c8(n)?h8.test(n.split("/*")[0].trim()):!1,h8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function OR(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const _c={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Vf={..._c,transform:n=>es(0,1,n)},om={..._c,default:1},lf=n=>Math.round(n*1e5)/1e5,oS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function f8(n){return n==null}const d8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,aS=(n,e)=>t=>!!(typeof t=="string"&&d8.test(t)&&t.startsWith(n)||e&&!f8(t)&&Object.prototype.hasOwnProperty.call(t,e)),l2=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,u]=r.match(oS);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},p8=n=>es(0,255,n),AT={..._c,transform:n=>Math.round(p8(n))},ol={test:aS("rgb","red"),parse:l2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+AT.transform(n)+", "+AT.transform(e)+", "+AT.transform(t)+", "+lf(Vf.transform(r))+")"};function m8(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const qE={test:aS("#"),parse:m8,transform:ol.transform},gd=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Io=gd("deg"),Qi=gd("%"),ve=gd("px"),g8=gd("vh"),y8=gd("vw"),PR={...Qi,parse:n=>Qi.parse(n)/100,transform:n=>Qi.transform(n*100)},Uu={test:aS("hsl","hue"),parse:l2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Qi.transform(lf(e))+", "+Qi.transform(lf(t))+", "+lf(Vf.transform(r))+")"},Xt={test:n=>ol.test(n)||qE.test(n)||Uu.test(n),parse:n=>ol.test(n)?ol.parse(n):Uu.test(n)?Uu.parse(n):qE.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ol.transform(n):Uu.transform(n),getAnimatableNone:n=>{const e=Xt.parse(n);return e.alpha=0,Xt.transform(e)}},v8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function T8(n){return isNaN(n)&&typeof n=="string"&&(n.match(oS)?.length||0)+(n.match(v8)?.length||0)>0}const u2="number",c2="color",E8="var",b8="var(",VR="${}",_8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lf(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const u=e.replace(_8,h=>(Xt.test(h)?(r.color.push(s),i.push(c2),t.push(Xt.parse(h))):h.startsWith(b8)?(r.var.push(s),i.push(E8),t.push(h)):(r.number.push(s),i.push(u2),t.push(parseFloat(h))),++s,VR)).split(VR);return{values:t,split:u,indexes:r,types:i}}function h2(n){return Lf(n).values}function f2(n){const{split:e,types:t}=Lf(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const u=t[a];u===u2?s+=lf(i[a]):u===c2?s+=Xt.transform(i[a]):s+=i[a]}return s}}const S8=n=>typeof n=="number"?0:Xt.test(n)?Xt.getAnimatableNone(n):n;function w8(n){const e=h2(n);return f2(n)(e.map(S8))}const pi={test:T8,parse:h2,createTransformer:f2,getAnimatableNone:w8};function CT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function A8({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,h=2*t-u;i=CT(h,u,n+1/3),s=CT(h,u,n),a=CT(h,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function gg(n,e){return t=>t>0?e:n}const At=(n,e,t)=>n+(e-n)*t,xT=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},C8=[qE,ol,Uu],x8=n=>C8.find(e=>e.test(n));function LR(n){const e=x8(n);if(!e)return!1;let t=e.parse(n);return e===Uu&&(t=A8(t)),t}const BR=(n,e)=>{const t=LR(n),r=LR(e);if(!t||!r)return gg(n,e);const i={...t};return s=>(i.red=xT(t.red,r.red,s),i.green=xT(t.green,r.green,s),i.blue=xT(t.blue,r.blue,s),i.alpha=At(t.alpha,r.alpha,s),ol.transform(i))},$E=new Set(["none","hidden"]);function R8(n,e){return $E.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function k8(n,e){return t=>At(n,e,t)}function lS(n){return typeof n=="number"?k8:typeof n=="string"?sS(n)?gg:Xt.test(n)?BR:D8:Array.isArray(n)?d2:typeof n=="object"?Xt.test(n)?BR:I8:gg}function d2(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>lS(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function I8(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=lS(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function M8(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=n.indexes[s][r[s]],u=n.values[a]??0;t[i]=u,r[s]++}return t}const D8=(n,e)=>{const t=pi.createTransformer(e),r=Lf(n),i=Lf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?$E.has(n)&&!i.values.length||$E.has(e)&&!r.values.length?R8(n,e):pd(d2(M8(r,i),i.values),t):gg(n,e)};function p2(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?At(n,e,t):lS(n)(n,e)}const N8=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>gt.update(e,t),stop:()=>aa(e),now:()=>wn.isProcessing?wn.timestamp:qn.now()}},m2=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},yg=2e4;function uS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<yg;)e+=t,r=n.next(e);return e>=yg?1/0:e}function O8(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(uS(r),yg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:zr(i)}}const P8=5;function g2(n,e,t){const r=Math.max(e-P8,0);return WO(t-n(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},RT=.001;function V8({duration:n=Mt.duration,bounce:e=Mt.bounce,velocity:t=Mt.velocity,mass:r=Mt.mass}){let i,s,a=1-e;a=es(Mt.minDamping,Mt.maxDamping,a),n=es(Mt.minDuration,Mt.maxDuration,zr(n)),a<1?(i=f=>{const p=f*a,m=p*n,v=p-t,E=GE(f,a),b=Math.exp(-m);return RT-v/E*b},s=f=>{const m=f*a*n,v=m*t+t,E=Math.pow(a,2)*Math.pow(f,2)*n,b=Math.exp(-m),S=GE(Math.pow(f,2),a);return(-i(f)+RT>0?-1:1)*((v-E)*b)/S}):(i=f=>{const p=Math.exp(-f*n),m=(f-t)*n+1;return-RT+p*m},s=f=>{const p=Math.exp(-f*n),m=(t-f)*(n*n);return p*m});const u=5/n,h=B8(i,s,u);if(n=di(n),isNaN(h))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:n};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:a*2*Math.sqrt(r*f),duration:n}}}const L8=12;function B8(n,e,t){let r=t;for(let i=1;i<L8;i++)r=r-n(r)/e(r);return r}function GE(n,e){return n*Math.sqrt(1-e*e)}const U8=["duration","bounce"],z8=["stiffness","damping","mass"];function UR(n,e){return e.some(t=>n[t]!==void 0)}function j8(n){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...n};if(!UR(n,z8)&&UR(n,U8))if(e.velocity=0,n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*es(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Mt.mass,stiffness:i,damping:s}}else{const t=V8({...n,velocity:0});e={...e,...t,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function vg(n=Mt.visualDuration,e=Mt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],u={done:!1,value:s},{stiffness:h,damping:f,mass:p,duration:m,velocity:v,isResolvedFromDuration:E}=j8({...t,velocity:-zr(t.velocity||0)}),b=v||0,S=f/(2*Math.sqrt(h*p)),w=a-s,x=zr(Math.sqrt(h/p)),N=Math.abs(w)<5;r||(r=N?Mt.restSpeed.granular:Mt.restSpeed.default),i||(i=N?Mt.restDelta.granular:Mt.restDelta.default);let V;if(S<1){const F=GE(x,S);V=Z=>{const I=Math.exp(-S*x*Z);return a-I*((b+S*x*w)/F*Math.sin(F*Z)+w*Math.cos(F*Z))}}else if(S===1)V=F=>a-Math.exp(-x*F)*(w+(b+x*w)*F);else{const F=x*Math.sqrt(S*S-1);V=Z=>{const I=Math.exp(-S*x*Z),k=Math.min(F*Z,300);return a-I*((b+S*x*w)*Math.sinh(k)+F*w*Math.cosh(k))/F}}const q={calculatedDuration:E&&m||null,next:F=>{const Z=V(F);if(E)u.done=F>=m;else{let I=F===0?b:0;S<1&&(I=F===0?di(b):g2(V,F,Z));const k=Math.abs(I)<=r,D=Math.abs(a-Z)<=i;u.done=k&&D}return u.value=u.done?a:Z,u},toString:()=>{const F=Math.min(uS(q),yg),Z=m2(I=>q.next(F*I).value,F,30);return F+"ms "+Z},toTransition:()=>{}};return q}vg.applyToOptions=n=>{const e=O8(n,100,vg);return n.ease=e.ease,n.duration=di(e.duration),n.type="keyframes",n};function KE({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:p}){const m=n[0],v={done:!1,value:m},E=k=>u!==void 0&&k<u||h!==void 0&&k>h,b=k=>u===void 0?h:h===void 0||Math.abs(u-k)<Math.abs(h-k)?u:h;let S=t*e;const w=m+S,x=a===void 0?w:a(w);x!==w&&(S=x-m);const N=k=>-S*Math.exp(-k/r),V=k=>x+N(k),q=k=>{const D=N(k),B=V(k);v.done=Math.abs(D)<=f,v.value=v.done?x:B};let F,Z;const I=k=>{E(v.value)&&(F=k,Z=vg({keyframes:[v.value,b(v.value)],velocity:g2(V,k,v.value),damping:i,stiffness:s,restDelta:f,restSpeed:p}))};return I(0),{calculatedDuration:null,next:k=>{let D=!1;return!Z&&F===void 0&&(D=!0,q(k),I(k)),F!==void 0&&k>=F?Z.next(k-F):(!D&&q(k),v)}}}function F8(n,e,t){const r=[],i=t||qs.mix||p2,s=n.length-1;for(let a=0;a<s;a++){let u=i(n[a],n[a+1]);if(e){const h=Array.isArray(e)?e[a]||jr:e;u=pd(h,u)}r.push(u)}return r}function H8(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(tS(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=F8(e,r,i),h=u.length,f=p=>{if(a&&p<n[0])return e[0];let m=0;if(h>1)for(;m<n.length-2&&!(p<n[m+1]);m++);const v=Pf(n[m],n[m+1],p);return u[m](v)};return t?p=>f(es(n[0],n[s-1],p)):f}function q8(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Pf(0,e,r);n.push(At(t,1,i))}}function $8(n){const e=[0];return q8(e,n.length-1),e}function G8(n,e){return n.map(t=>t*e)}function K8(n,e){return n.map(()=>e||r2).splice(0,n.length-1)}function uf({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=i8(r)?r.map(NR):NR(r),s={done:!1,value:e[0]},a=G8(t&&t.length===e.length?t:$8(e),n),u=H8(a,e,{ease:Array.isArray(i)?i:K8(e,i)});return{calculatedDuration:n,next:h=>(s.value=u(h),s.done=h>=n,s)}}const W8=n=>n!==null;function cS(n,{repeat:e,repeatType:t="loop"},r,i=1){const s=n.filter(W8),u=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!u||r===void 0?s[u]:r}const Y8={decay:KE,inertia:KE,tween:uf,keyframes:uf,spring:vg};function y2(n){typeof n.type=="string"&&(n.type=Y8[n.type])}class hS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Q8=n=>n/100;class fS extends hS{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==qn.now()&&this.tick(qn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;y2(e);const{type:t=uf,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:u}=e;const h=t||uf;h!==uf&&typeof u[0]!="number"&&(this.mixKeyframes=pd(Q8,p2(u[0],u[1])),u=[0,100]);const f=h({...e,keyframes:u});s==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...u].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=uS(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:m,repeatType:v,repeatDelay:E,type:b,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const x=this.currentTime-f*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?x<0:x>i;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let V=this.currentTime,q=r;if(m){const k=Math.min(this.currentTime,i)/u;let D=Math.floor(k),B=k%1;!B&&k>=1&&(B=1),B===1&&D--,D=Math.min(D,m+1),D%2&&(v==="reverse"?(B=1-B,E&&(B-=E/u)):v==="mirror"&&(q=a)),V=es(0,1,B)*u}const F=N?{done:!1,value:p[0]}:q.next(V);s&&(F.value=s(F.value));let{done:Z}=F;!N&&h!==null&&(Z=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return I&&b!==KE&&(F.value=cS(p,this.options,w,this.speed)),S&&S(F.value),I&&this.finish(),F}then(e,t){return this.finished.then(e,t)}get duration(){return zr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zr(e)}get time(){return zr(this.currentTime)}set time(e){e=di(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(qn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=zr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=N8,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(qn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function X8(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const al=n=>n*180/Math.PI,WE=n=>{const e=al(Math.atan2(n[1],n[0]));return YE(e)},J8={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:WE,rotateZ:WE,skewX:n=>al(Math.atan(n[1])),skewY:n=>al(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},YE=n=>(n=n%360,n<0&&(n+=360),n),zR=WE,jR=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),FR=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Z8={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:jR,scaleY:FR,scale:n=>(jR(n)+FR(n))/2,rotateX:n=>YE(al(Math.atan2(n[6],n[5]))),rotateY:n=>YE(al(Math.atan2(-n[2],n[0]))),rotateZ:zR,rotate:zR,skewX:n=>al(Math.atan(n[4])),skewY:n=>al(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function QE(n){return n.includes("scale")?1:0}function XE(n,e){if(!n||n==="none")return QE(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=Z8,i=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=J8,i=u}if(!i)return QE(e);const s=r[e],a=i[1].split(",").map(t7);return typeof s=="function"?s(a):a[s]}const e7=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return XE(t,e)};function t7(n){return parseFloat(n.trim())}const Sc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wc=new Set(Sc),HR=n=>n===_c||n===ve,n7=new Set(["x","y","z"]),r7=Sc.filter(n=>!n7.has(n));function i7(n){const e=[];return r7.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const jo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>XE(e,"x"),y:(n,{transform:e})=>XE(e,"y")};jo.translateX=jo.x;jo.translateY=jo.y;const fl=new Set;let JE=!1,ZE=!1,eb=!1;function v2(){if(ZE){const n=Array.from(fl).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=i7(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{r.getValue(s)?.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ZE=!1,JE=!1,fl.forEach(n=>n.complete(eb)),fl.clear()}function T2(){fl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ZE=!0)})}function s7(){eb=!0,T2(),v2(),eb=!1}class dS{constructor(e,t,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(fl.add(this),JE||(JE=!0,gt.read(T2),gt.resolveKeyframes(v2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&t){const u=r.readValue(t,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}X8(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),fl.delete(this)}cancel(){this.state==="scheduled"&&(fl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const o7=n=>n.startsWith("--");function a7(n,e,t){o7(e)?n.style.setProperty(e,t):n.style[e]=t}const l7={};function E2(n,e){const t=KO(n);return()=>l7[e]??t()}const u7=E2(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),b2=E2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wh=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,qR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wh([0,.65,.55,1]),circOut:Wh([.55,0,1,.45]),backIn:Wh([.31,.01,.66,-.59]),backOut:Wh([.33,1.53,.69,.99])};function _2(n,e){if(n)return typeof n=="function"?b2()?m2(n,e):"ease-out":i2(n)?Wh(n):Array.isArray(n)?n.map(t=>_2(t,e)||qR.easeOut):qR[n]}function c7(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:u="easeOut",times:h}={},f=void 0){const p={[e]:t};h&&(p.offset=h);const m=_2(u,i);Array.isArray(m)&&(p.easing=m);const v={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(p,v)}function S2(n){return typeof n=="function"&&"applyToOptions"in n}function h7({type:n,...e}){return S2(n)&&b2()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class w2 extends hS{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:u,onComplete:h}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,tS(typeof e.type!="string");const f=h7(e);this.animation=c7(t,r,i,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const p=cS(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):a7(t,r,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return zr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zr(e)}get time(){return zr(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=di(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&u7()?(this.animation.timeline=e,jr):t(this)}}const A2={anticipate:e2,backInOut:ZO,circInOut:n2};function f7(n){return n in A2}function d7(n){typeof n.ease=="string"&&f7(n.ease)&&(n.ease=A2[n.ease])}const kT=10;class p7 extends w2{constructor(e){d7(e),y2(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new fS({...a,autoplay:!1}),h=Math.max(kT,qn.now()-this.startTime),f=es(0,kT,h-kT);t.setWithVelocity(u.sample(Math.max(0,h-f)).value,u.sample(h).value,f),u.stop()}}const $R=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(pi.test(n)||n==="0")&&!n.startsWith("url("));function m7(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function g7(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=$R(i,e),u=$R(s,e);return!a||!u?!1:m7(n)||(t==="spring"||S2(t))&&r}function tb(n){n.duration=0,n.type="keyframes"}const y7=new Set(["opacity","clipPath","filter","transform"]),v7=KO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function T7(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return v7()&&t&&y7.has(t)&&(t!=="transform"||!f)&&!h&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const E7=40;class b7 extends hS{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:u,name:h,motionValue:f,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=qn.now();const v={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,name:h,motionValue:f,element:p,...m},E=p?.KeyframeResolver||dS;this.keyframeResolver=new E(u,(b,S,w)=>this.onKeyframesResolved(b,S,v,!w),h,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:u,delay:h,isHandoff:f,onUpdate:p}=r;this.resolvedAt=qn.now(),g7(e,s,a,u)||((qs.instantAnimations||!h)&&p?.(cS(e,r,t)),e[0]=e[e.length-1],tb(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>E7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},E=!f&&T7(v),b=v.motionValue?.owner?.current,S=E?new p7({...v,element:b}):new fS(v);S.finished.then(()=>{this.notifyFinished()}).catch(jr),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),s7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function C2(n,e,t,r=0,i=1){const s=Array.from(n).sort((f,p)=>f.sortNodePosition(p)).indexOf(e),a=n.size,u=(a-1)*r;return typeof t=="function"?t(s,a):i===1?s*r:u-s*r}const _7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function S7(n){const e=_7.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function x2(n,e,t=1){const[r,i]=S7(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return qO(a)?parseFloat(a):a}return sS(i)?x2(i,e,t+1):i}const w7={type:"spring",stiffness:500,damping:25,restSpeed:10},A7=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),C7={type:"keyframes",duration:.8},x7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},R7=(n,{keyframes:e})=>e.length>2?C7:wc.has(n)?n.startsWith("scale")?A7(e[1]):w7:x7,k7=n=>n!==null;function I7(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(k7),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}function R2(n,e){if(n?.inherit&&e){const{inherit:t,...r}=n;return{...e,...r}}return n}function pS(n,e){const t=n?.[e]??n?.default??n;return t!==n?R2(t,n):t}function M7({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const mS=(n,e,t,r={},i,s)=>a=>{const u=pS(r,n)||{},h=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-di(h);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:s?void 0:i};M7(u)||Object.assign(p,R7(n,p)),p.duration&&(p.duration=di(p.duration)),p.repeatDelay&&(p.repeatDelay=di(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(tb(p),p.delay===0&&(m=!0)),(qs.instantAnimations||qs.skipAnimations||i?.shouldSkipAnimations)&&(m=!0,tb(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,m&&!s&&e.get()!==void 0){const v=I7(p.keyframes,u);if(v!==void 0){gt.update(()=>{p.onUpdate(v),p.onComplete()});return}}return u.isSync?new fS(p):new b7(p)};function GR(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function gS(n,e,t,r){if(typeof e=="function"){const[i,s]=GR(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=GR(r);e=e(t!==void 0?t:n.custom,i,s)}return e}function Xu(n,e,t){const r=n.getProps();return gS(r,e,t!==void 0?t:r.custom,n)}const k2=new Set(["width","height","top","left","right","bottom",...Sc]),KR=30,D7=n=>!isNaN(parseFloat(n));class N7{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=qn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=qn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=D7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new nS);const r=this.events[e].add(t);return e==="change"?()=>{r(),gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>KR)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,KR);return WO(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sc(n,e){return new N7(n,e)}const nb=n=>Array.isArray(n);function O7(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,sc(t))}function P7(n){return nb(n)?n[n.length-1]||0:n}function V7(n,e){const t=Xu(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const u=P7(s[a]);O7(n,a,u)}}const Pn=n=>!!(n&&n.getVelocity);function L7(n){return!!(Pn(n)&&n.add)}function rb(n,e){const t=n.getValue("willChange");if(L7(t))return t.add(e);if(!t&&qs.WillChange){const r=new qs.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function yS(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const B7="framerAppearId",I2="data-"+yS(B7);function M2(n){return n.props[I2]}function U7({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function D2(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s,transitionEnd:a,...u}=e;const h=n.getDefaultTransition();s=s?R2(s,h):h;const f=s?.reduceMotion;r&&(s=r);const p=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const v in u){const E=n.getValue(v,n.latestValues[v]??null),b=u[v];if(b===void 0||m&&U7(m,v))continue;const S={delay:t,...pS(s||{},v)},w=E.get();if(w!==void 0&&!E.isAnimating&&!Array.isArray(b)&&b===w&&!S.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const q=M2(n);if(q){const F=window.MotionHandoffAnimation(q,v,gt);F!==null&&(S.startTime=F,x=!0)}}rb(n,v);const N=f??n.shouldReduceMotion;E.start(mS(v,E,b,N&&k2.has(v)?{type:!1}:S,n,x));const V=E.animation;V&&p.push(V)}if(a){const v=()=>gt.update(()=>{a&&V7(n,a)});p.length?Promise.all(p).then(v):v()}return p}function ib(n,e,t={}){const r=Xu(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(D2(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=i;return z7(n,e,h,f,p,m,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[h,f]=u==="beforeChildren"?[s,a]:[a,s];return h().then(()=>f())}else return Promise.all([s(),a(t.delay)])}function z7(n,e,t=0,r=0,i=0,s=1,a){const u=[];for(const h of n.variantChildren)h.notify("AnimationStart",e),u.push(ib(h,e,{...a,delay:t+(typeof r=="function"?0:r)+C2(n.variantChildren,h,r,i,s)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(u)}function j7(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>ib(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=ib(n,e,t);else{const i=typeof e=="function"?Xu(n,e,t.custom):e;r=Promise.all(D2(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const F7={test:n=>n==="auto",parse:n=>n},N2=n=>e=>e.test(n),O2=[_c,ve,Qi,Io,y8,g8,F7],WR=n=>O2.find(N2(n));function H7(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||GO(n):!0}const q7=new Set(["brightness","contrast","saturate","opacity"]);function $7(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(oS)||[];if(!r)return n;const i=t.replace(r,"");let s=q7.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const G7=/\b([a-z-]*)\(.*?\)/gu,sb={...pi,getAnimatableNone:n=>{const e=n.match(G7);return e?e.map($7).join(" "):n}},ob={...pi,getAnimatableNone:n=>{const e=pi.parse(n);return pi.createTransformer(n)(e.map(r=>typeof r=="number"?0:typeof r=="object"?{...r,alpha:1}:r))}},YR={..._c,transform:Math.round},K7={rotate:Io,rotateX:Io,rotateY:Io,rotateZ:Io,scale:om,scaleX:om,scaleY:om,scaleZ:om,skew:Io,skewX:Io,skewY:Io,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:Vf,originX:PR,originY:PR,originZ:ve},vS={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,top:ve,right:ve,bottom:ve,left:ve,inset:ve,insetBlock:ve,insetBlockStart:ve,insetBlockEnd:ve,insetInline:ve,insetInlineStart:ve,insetInlineEnd:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,paddingBlock:ve,paddingBlockStart:ve,paddingBlockEnd:ve,paddingInline:ve,paddingInlineStart:ve,paddingInlineEnd:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,marginBlock:ve,marginBlockStart:ve,marginBlockEnd:ve,marginInline:ve,marginInlineStart:ve,marginInlineEnd:ve,fontSize:ve,backgroundPositionX:ve,backgroundPositionY:ve,...K7,zIndex:YR,fillOpacity:Vf,strokeOpacity:Vf,numOctaves:YR},W7={...vS,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:sb,WebkitFilter:sb,mask:ob,WebkitMask:ob},P2=n=>W7[n],Y7=new Set([sb,ob]);function V2(n,e){let t=P2(n);return Y7.has(t)||(t=pi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Q7=new Set(["auto","none","0"]);function X7(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Q7.has(s)&&Lf(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=V2(t,i)}class J7 extends dS{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let m=e[p];if(typeof m=="string"&&(m=m.trim(),sS(m))){const v=x2(m,t.current);v!==void 0&&(e[p]=v),p===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!k2.has(r)||e.length!==2)return;const[i,s]=e,a=WR(i),u=WR(s),h=OR(i),f=OR(s);if(h!==f&&jo[r]){this.needsMeasurement=!0;return}if(a!==u)if(HR(a)&&HR(u))for(let p=0;p<e.length;p++){const m=e[p];typeof m=="string"&&(e[p]=parseFloat(m))}else jo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||H7(e[i]))&&r.push(i);r.length&&X7(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=jo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const Z7=new Set(["opacity","clipPath","filter","transform"]);function L2(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n).filter(r=>r!=null)}const B2=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function ab(n){return $O(n)&&"offsetHeight"in n}const{schedule:TS}=s2(queueMicrotask,!1),si={x:!1,y:!1};function U2(){return si.x||si.y}function e$(n){return n==="x"||n==="y"?si[n]?null:(si[n]=!0,()=>{si[n]=!1}):si.x||si.y?null:(si.x=si.y=!0,()=>{si.x=si.y=!1})}function z2(n,e){const t=L2(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function t$(n){return!(n.pointerType==="touch"||U2())}function n$(n,e,t={}){const[r,i,s]=z2(n,t);return r.forEach(a=>{let u=!1,h=!1,f;const p=()=>{a.removeEventListener("pointerleave",b)},m=w=>{f&&(f(w),f=void 0),p()},v=w=>{u=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),h&&(h=!1,m(w))},E=()=>{u=!0,window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",v,i)},b=w=>{if(w.pointerType!=="touch"){if(u){h=!0;return}m(w)}},S=w=>{if(!t$(w))return;h=!1;const x=e(a,w);typeof x=="function"&&(f=x,a.addEventListener("pointerleave",b,i))};a.addEventListener("pointerenter",S,i),a.addEventListener("pointerdown",E,i)}),s}const j2=(n,e)=>e?n===e?!0:j2(n,e.parentElement):!1,ES=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,r$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function i$(n){return r$.has(n.tagName)||n.isContentEditable===!0}const s$=new Set(["INPUT","SELECT","TEXTAREA"]);function o$(n){return s$.has(n.tagName)||n.isContentEditable===!0}const Om=new WeakSet;function QR(n){return e=>{e.key==="Enter"&&n(e)}}function IT(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const a$=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=QR(()=>{if(Om.has(t))return;IT(t,"down");const i=QR(()=>{IT(t,"up")}),s=()=>IT(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function XR(n){return ES(n)&&!U2()}const JR=new WeakSet;function l$(n,e,t={}){const[r,i,s]=z2(n,t),a=u=>{const h=u.currentTarget;if(!XR(u)||JR.has(u))return;Om.add(h),t.stopPropagation&&JR.add(u);const f=e(h,u),p=(E,b)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),Om.has(h)&&Om.delete(h),XR(E)&&typeof f=="function"&&f(E,{success:b})},m=E=>{p(E,h===window||h===document||t.useGlobalTarget||j2(h,E.target))},v=E=>{p(E,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",v,i)};return r.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",a,i),ab(u)&&(u.addEventListener("focus",f=>a$(f,i)),!i$(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),s}function bS(n){return $O(n)&&"ownerSVGElement"in n}const Pm=new WeakMap;let Vm;const F2=(n,e,t)=>(r,i)=>i&&i[0]?i[0][n+"Size"]:bS(r)&&"getBBox"in r?r.getBBox()[e]:r[t],u$=F2("inline","width","offsetWidth"),c$=F2("block","height","offsetHeight");function h$({target:n,borderBoxSize:e}){Pm.get(n)?.forEach(t=>{t(n,{get width(){return u$(n,e)},get height(){return c$(n,e)}})})}function f$(n){n.forEach(h$)}function d$(){typeof ResizeObserver>"u"||(Vm=new ResizeObserver(f$))}function p$(n,e){Vm||d$();const t=L2(n);return t.forEach(r=>{let i=Pm.get(r);i||(i=new Set,Pm.set(r,i)),i.add(e),Vm?.observe(r)}),()=>{t.forEach(r=>{const i=Pm.get(r);i?.delete(e),i?.size||Vm?.unobserve(r)})}}const Lm=new Set;let zu;function m$(){zu=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};Lm.forEach(e=>e(n))},window.addEventListener("resize",zu)}function g$(n){return Lm.add(n),zu||m$(),()=>{Lm.delete(n),!Lm.size&&typeof zu=="function"&&(window.removeEventListener("resize",zu),zu=void 0)}}function ZR(n,e){return typeof n=="function"?g$(n):p$(n,e)}function y$(n){return bS(n)&&n.tagName==="svg"}const v$=[...O2,Xt,pi],T$=n=>v$.find(N2(n)),ek=()=>({translate:0,scale:1,origin:0,originPoint:0}),ju=()=>({x:ek(),y:ek()}),tk=()=>({min:0,max:0}),on=()=>({x:tk(),y:tk()}),E$=new WeakMap;function jy(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Bf(n){return typeof n=="string"||Array.isArray(n)}const _S=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SS=["initial",..._S];function Fy(n){return jy(n.animate)||SS.some(e=>Bf(n[e]))}function H2(n){return!!(Fy(n)||n.variants)}function b$(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Pn(i))n.addValue(r,i);else if(Pn(s))n.addValue(r,sc(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,sc(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const lb={current:null},q2={current:!1},_$=typeof window<"u";function S$(){if(q2.current=!0,!!_$)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>lb.current=n.matches;n.addEventListener("change",e),e()}else lb.current=!1}const nk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Tg={};function $2(n){Tg=n}function w$(){return Tg}class A${scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,skipAnimations:s,blockInitialAnimation:a,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=dS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=qn.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,gt.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=s,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=Fy(t),this.isVariantNode=H2(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const E in v){const b=v[E];f[E]!==void 0&&Pn(b)&&b.set(f[E])}}mount(e){if(this.hasBeenMounted)for(const t in this.initialValues)this.values.get(t)?.jump(this.initialValues[t]),this.latestValues[t]=this.initialValues[t];this.current=e,E$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(q2.current||S$(),this.shouldReduceMotion=lb.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),aa(this.notifyUpdate),aa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&Z7.has(e)&&this.current instanceof HTMLElement){const{factory:a,keyframes:u,times:h,ease:f,duration:p}=t.accelerate,m=new w2({element:this.current,name:e,keyframes:u,times:h,ease:f,duration:di(p)}),v=a(m);this.valueSubscriptions.set(e,()=>{v(),m.cancel()});return}const r=wc.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Tg){const t=Tg[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):on()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<nk.length;r++){const i=nk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=b$(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=sc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(qO(r)||GO(r))?r=parseFloat(r):!T$(r)&&pi.test(t)&&(r=V2(e,t)),this.setBaseTarget(e,Pn(r)?r.get():r)),Pn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const s=gS(this.props,t,this.presenceContext?.custom);s&&(r=s[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Pn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new nS),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){TS.render(this.render)}}class G2 extends A${constructor(){super(...arguments),this.KeyframeResolver=J7}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class va{constructor(e){this.isMounted=!1,this.node=e}update(){}}function K2({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function C$({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function x$(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function MT(n){return n===void 0||n===1}function ub({scale:n,scaleX:e,scaleY:t}){return!MT(n)||!MT(e)||!MT(t)}function nl(n){return ub(n)||W2(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function W2(n){return rk(n.x)||rk(n.y)}function rk(n){return n&&n!=="0%"}function Eg(n,e,t){const r=n-t,i=e*r;return t+i}function ik(n,e,t,r,i){return i!==void 0&&(n=Eg(n,i,r)),Eg(n,t,r)+e}function cb(n,e=0,t=1,r,i){n.min=ik(n.min,e,t,r,i),n.max=ik(n.max,e,t,r,i)}function Y2(n,{x:e,y:t}){cb(n.x,e.translate,e.scale,e.originPoint),cb(n.y,t.translate,t.scale,t.originPoint)}const sk=.999999999999,ok=1.0000000000001;function R$(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=t[u],a=s.projectionDelta;const{visualElement:h}=s.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Hu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Y2(n,a)),r&&nl(s.latestValues)&&Hu(n,s.latestValues))}e.x<ok&&e.x>sk&&(e.x=1),e.y<ok&&e.y>sk&&(e.y=1)}function Fu(n,e){n.min=n.min+e,n.max=n.max+e}function ak(n,e,t,r,i=.5){const s=At(n.min,n.max,i);cb(n,e,t,s,r)}function Hu(n,e){ak(n.x,e.x,e.scaleX,e.scale,e.originX),ak(n.y,e.y,e.scaleY,e.scale,e.originY)}function Q2(n,e){return K2(x$(n.getBoundingClientRect(),e))}function k$(n,e,t){const r=Q2(n,t),{scroll:i}=e;return i&&(Fu(r.x,i.offset.x),Fu(r.y,i.offset.y)),r}const I$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M$=Sc.length;function D$(n,e,t){let r="",i=!0;for(let s=0;s<M$;s++){const a=Sc[s],u=n[a];if(u===void 0)continue;let h=!0;if(typeof u=="number")h=u===(a.startsWith("scale")?1:0);else{const f=parseFloat(u);h=a.startsWith("scale")?f===1:f===0}if(!h||t){const f=B2(u,vS[a]);if(!h){i=!1;const p=I$[a]||a;r+=`${p}(${f}) `}t&&(e[a]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function wS(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,u=!1;for(const h in e){const f=e[h];if(wc.has(h)){a=!0;continue}else if(a2(h)){i[h]=f;continue}else{const p=B2(f,vS[h]);h.startsWith("origin")?(u=!0,s[h]=p):r[h]=p}}if(e.transform||(a||t?r.transform=D$(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=s;r.transformOrigin=`${h} ${f} ${p}`}}function X2(n,{style:e,vars:t},r,i){const s=n.style;let a;for(a in e)s[a]=e[a];i?.applyProjectionStyles(s,r);for(a in t)s.setProperty(a,t[a])}function lk(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ph={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ve.test(n))n=parseFloat(n);else return n;const t=lk(n,e.target.x),r=lk(n,e.target.y);return`${t}% ${r}%`}},N$={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=pi.parse(n);if(i.length>5)return r;const s=pi.createTransformer(n),a=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,h=t.y.scale*e.y;i[0+a]/=u,i[1+a]/=h;const f=At(u,h,.5);return typeof i[2+a]=="number"&&(i[2+a]/=f),typeof i[3+a]=="number"&&(i[3+a]/=f),s(i)}},hb={borderRadius:{...Ph,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ph,borderTopRightRadius:Ph,borderBottomLeftRadius:Ph,borderBottomRightRadius:Ph,boxShadow:N$};function J2(n,{layout:e,layoutId:t}){return wc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!hb[n]||n==="opacity")}function AS(n,e,t){const r=n.style,i=e?.style,s={};if(!r)return s;for(const a in r)(Pn(r[a])||i&&Pn(i[a])||J2(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}function O$(n){return window.getComputedStyle(n)}class P$ extends G2{constructor(){super(...arguments),this.type="html",this.renderInstance=X2}readValueFromInstance(e,t){if(wc.has(t))return this.projection?.isProjecting?QE(t):e7(e,t);{const r=O$(e),i=(a2(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Q2(e,t)}build(e,t,r){wS(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return AS(e,t,r)}}const V$={offset:"stroke-dashoffset",array:"stroke-dasharray"},L$={offset:"strokeDashoffset",array:"strokeDasharray"};function B$(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?V$:L$;n[s.offset]=`${-r}`,n[s.array]=`${e} ${t}`}const U$=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Z2(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...u},h,f,p){if(wS(n,u,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v}=n;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete m.transformBox);for(const E of U$)m[E]!==void 0&&(v[E]=m[E],delete m[E]);e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),i!==void 0&&B$(m,i,s,a,!1)}const eP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),tP=n=>typeof n=="string"&&n.toLowerCase()==="svg";function z$(n,e,t,r){X2(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(eP.has(i)?i:yS(i),e.attrs[i])}function nP(n,e,t){const r=AS(n,e,t);for(const i in n)if(Pn(n[i])||Pn(e[i])){const s=Sc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}class j$ extends G2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=on}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(wc.has(t)){const r=P2(t);return r&&r.default||0}return t=eP.has(t)?t:yS(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return nP(e,t,r)}build(e,t,r){Z2(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){z$(e,t,r,i)}mount(e){this.isSVGTag=tP(e.tagName),super.mount(e)}}const F$=SS.length;function rP(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?rP(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<F$;t++){const r=SS[t],i=n.props[r];(Bf(i)||i===!1)&&(e[r]=i)}return e}function iP(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const H$=[..._S].reverse(),q$=_S.length;function $$(n){return e=>Promise.all(e.map(({animation:t,options:r})=>j7(n,t,r)))}function G$(n){let e=$$(n),t=uk(),r=!0;const i=h=>(f,p)=>{const m=Xu(n,p,h==="exit"?n.presenceContext?.custom:void 0);if(m){const{transition:v,transitionEnd:E,...b}=m;f={...f,...b,...E}}return f};function s(h){e=h(n)}function a(h){const{props:f}=n,p=rP(n.parent)||{},m=[],v=new Set;let E={},b=1/0;for(let w=0;w<q$;w++){const x=H$[w],N=t[x],V=f[x]!==void 0?f[x]:p[x],q=Bf(V),F=x===h?N.isActive:null;F===!1&&(b=w);let Z=V===p[x]&&V!==f[x]&&q;if(Z&&r&&n.manuallyAnimateOnMount&&(Z=!1),N.protectedKeys={...E},!N.isActive&&F===null||!V&&!N.prevProp||jy(V)||typeof V=="boolean")continue;if(x==="exit"&&N.isActive&&F!==!0){N.prevResolvedValues&&(E={...E,...N.prevResolvedValues});continue}const I=K$(N.prevProp,V);let k=I||x===h&&N.isActive&&!Z&&q||w>b&&q,D=!1;const B=Array.isArray(V)?V:[V];let U=B.reduce(i(x),{});F===!1&&(U={});const{prevResolvedValues:H={}}=N,O={...H,...U},ke=ae=>{k=!0,v.has(ae)&&(D=!0,v.delete(ae)),N.needsAnimating[ae]=!0;const ge=n.getValue(ae);ge&&(ge.liveStyle=!1)};for(const ae in O){const ge=U[ae],Ve=H[ae];if(E.hasOwnProperty(ae))continue;let He=!1;nb(ge)&&nb(Ve)?He=!iP(ge,Ve):He=ge!==Ve,He?ge!=null?ke(ae):v.add(ae):ge!==void 0&&v.has(ae)?ke(ae):N.protectedKeys[ae]=!0}N.prevProp=V,N.prevResolvedValues=U,N.isActive&&(E={...E,...U}),r&&n.blockInitialAnimation&&(k=!1);const Ce=Z&&I;k&&(!Ce||D)&&m.push(...B.map(ae=>{const ge={type:x};if(typeof ae=="string"&&r&&!Ce&&n.manuallyAnimateOnMount&&n.parent){const{parent:Ve}=n,He=Xu(Ve,ae);if(Ve.enteringChildren&&He){const{delayChildren:j}=He.transition||{};ge.delay=C2(Ve.enteringChildren,n,j)}}return{animation:ae,options:ge}}))}if(v.size){const w={};if(typeof f.initial!="boolean"){const x=Xu(n,Array.isArray(f.initial)?f.initial[0]:f.initial);x&&x.transition&&(w.transition=x.transition)}v.forEach(x=>{const N=n.getBaseTarget(x),V=n.getValue(x);V&&(V.liveStyle=!0),w[x]=N??null}),m.push({animation:w})}let S=!!m.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(m):Promise.resolve()}function u(h,f){if(t[h].isActive===f)return Promise.resolve();n.variantChildren?.forEach(m=>m.animationState?.setActive(h,f)),t[h].isActive=f;const p=a(h);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>t,reset:()=>{t=uk()}}}function K$(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!iP(e,n):!1}function Za(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uk(){return{animate:Za(!0),whileInView:Za(),whileHover:Za(),whileTap:Za(),whileDrag:Za(),whileFocus:Za(),exit:Za()}}function ck(n,e){n.min=e.min,n.max=e.max}function ii(n,e){ck(n.x,e.x),ck(n.y,e.y)}function hk(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const sP=1e-4,W$=1-sP,Y$=1+sP,oP=.01,Q$=0-oP,X$=0+oP;function $n(n){return n.max-n.min}function J$(n,e,t){return Math.abs(n-e)<=t}function fk(n,e,t,r=.5){n.origin=r,n.originPoint=At(e.min,e.max,n.origin),n.scale=$n(t)/$n(e),n.translate=At(t.min,t.max,n.origin)-n.originPoint,(n.scale>=W$&&n.scale<=Y$||isNaN(n.scale))&&(n.scale=1),(n.translate>=Q$&&n.translate<=X$||isNaN(n.translate))&&(n.translate=0)}function cf(n,e,t,r){fk(n.x,e.x,t.x,r?r.originX:void 0),fk(n.y,e.y,t.y,r?r.originY:void 0)}function dk(n,e,t){n.min=t.min+e.min,n.max=n.min+$n(e)}function Z$(n,e,t){dk(n.x,e.x,t.x),dk(n.y,e.y,t.y)}function pk(n,e,t){n.min=e.min-t.min,n.max=n.min+$n(e)}function bg(n,e,t){pk(n.x,e.x,t.x),pk(n.y,e.y,t.y)}function mk(n,e,t,r,i){return n-=e,n=Eg(n,1/t,r),i!==void 0&&(n=Eg(n,1/i,r)),n}function eG(n,e=0,t=1,r=.5,i,s=n,a=n){if(Qi.test(e)&&(e=parseFloat(e),e=At(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=At(s.min,s.max,r);n===s&&(u-=e),n.min=mk(n.min,e,t,u,i),n.max=mk(n.max,e,t,u,i)}function gk(n,e,[t,r,i],s,a){eG(n,e[t],e[r],e[i],e.scale,s,a)}const tG=["x","scaleX","originX"],nG=["y","scaleY","originY"];function yk(n,e,t,r){gk(n.x,e,tG,t?t.x:void 0,r?r.x:void 0),gk(n.y,e,nG,t?t.y:void 0,r?r.y:void 0)}function vk(n){return n.translate===0&&n.scale===1}function aP(n){return vk(n.x)&&vk(n.y)}function Tk(n,e){return n.min===e.min&&n.max===e.max}function rG(n,e){return Tk(n.x,e.x)&&Tk(n.y,e.y)}function Ek(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function lP(n,e){return Ek(n.x,e.x)&&Ek(n.y,e.y)}function bk(n){return $n(n.x)/$n(n.y)}function _k(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function zi(n){return[n("x"),n("y")]}function iG(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:p,rotateX:m,rotateY:v,skewX:E,skewY:b}=t;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `),E&&(r+=`skewX(${E}deg) `),b&&(r+=`skewY(${b}deg) `)}const u=n.x.scale*e.x,h=n.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const uP=["TopLeft","TopRight","BottomLeft","BottomRight"],sG=uP.length,Sk=n=>typeof n=="string"?parseFloat(n):n,wk=n=>typeof n=="number"||ve.test(n);function oG(n,e,t,r,i,s){i?(n.opacity=At(0,t.opacity??1,aG(r)),n.opacityExit=At(e.opacity??1,0,lG(r))):s&&(n.opacity=At(e.opacity??1,t.opacity??1,r));for(let a=0;a<sG;a++){const u=`border${uP[a]}Radius`;let h=Ak(e,u),f=Ak(t,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||wk(h)===wk(f)?(n[u]=Math.max(At(Sk(h),Sk(f),r),0),(Qi.test(f)||Qi.test(h))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=At(e.rotate||0,t.rotate||0,r))}function Ak(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const aG=cP(0,.5,t2),lG=cP(.5,.95,jr);function cP(n,e,t){return r=>r<n?0:r>e?1:t(Pf(n,e,r))}function uG(n,e,t){const r=Pn(n)?n:sc(n);return r.start(mS("",r,e,t)),r.animation}function Uf(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const cG=(n,e)=>n.depth-e.depth;class hG{constructor(){this.children=[],this.isDirty=!1}add(e){eS(this.children,e),this.isDirty=!0}remove(e){mg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cG),this.isDirty=!1,this.children.forEach(e)}}function fG(n,e){const t=qn.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(aa(r),n(s-e))};return gt.setup(r,!0),()=>aa(r)}function Bm(n){return Pn(n)?n.get():n}class dG{constructor(){this.members=[]}add(e){eS(this.members,e);for(let t=this.members.length-1;t>=0;t--){const r=this.members[t];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&mg(this.members,r)}e.scheduleRender()}remove(e){if(mg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i],a=s.instance;if(s.isPresent!==!1&&(!a||a.isConnected!==!1)){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,s=e.options.layoutDependency;if(!(i!==void 0&&s!==void 0&&i===s)){const h=r.instance;h&&h.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:u}=e.options;u===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Um={hasAnimatedSinceResize:!0,hasEverUpdated:!1},DT=["","X","Y","Z"],pG=1e3;let mG=0;function NT(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function hP(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=M2(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",gt,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&hP(r)}function fP({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e?.()){this.id=mG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vG),this.nodes.forEach(_G),this.nodes.forEach(SG),this.nodes.forEach(TG)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new hG)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new nS),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=bS(a)&&!y$(a),this.instance=a;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),n){let p,m=0;const v=()=>this.root.updateBlockedByResize=!1;gt.read(()=>{m=window.innerWidth}),n(a,()=>{const E=window.innerWidth;E!==m&&(m=E,this.root.updateBlockedByResize=!0,p&&p(),p=fG(v,250),Um.hasAnimatedSinceResize&&(Um.hasAnimatedSinceResize=!1,this.nodes.forEach(Rk)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||RG,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=f.getProps(),x=!this.targetLayout||!lP(this.targetLayout,E),N=!m&&v;if(this.options.layoutRoot||this.resumeFrom||N||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...pS(b,"layout"),onPlay:S,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(p,N)}else m||Rk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wG),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ck);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(bG),this.nodes.forEach(gG),this.nodes.forEach(yG)):this.nodes.forEach(xk),this.clearAllSnapshots();const u=qn.now();wn.delta=es(0,1e3/60,u-wn.timestamp),wn.timestamp=u,wn.isProcessing=!0,wT.update.process(wn),wT.preRender.process(wn),wT.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,TS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(EG),this.sharedNodes.forEach(AG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$n(this.snapshot.measuredBox.x)&&!$n(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=on(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!aP(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&this.instance&&(u||nl(this.latestValues)||p)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),kG(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return on();const u=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(IG))){const{scroll:f}=this.root;f&&(Fu(u.x,f.offset.x),Fu(u.y,f.offset.y))}return u}removeElementScroll(a){const u=on();if(ii(u,a),this.scroll?.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&ii(u,a),Fu(u.x,p.offset.x),Fu(u.y,p.offset.y))}return u}applyTransform(a,u=!1){const h=on();ii(h,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Hu(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),nl(p.latestValues)&&Hu(h,p.latestValues)}return nl(this.latestValues)&&Hu(h,this.latestValues),h}removeTransform(a){const u=on();ii(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!nl(f.latestValues))continue;ub(f.latestValues)&&f.updateSnapshot();const p=on(),m=f.measurePageBox();ii(p,m),yk(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return nl(this.latestValues)&&yk(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!this.layout||!(p||m))return;this.resolvedRelativeTargetAt=wn.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=on(),this.targetWithTransforms=on()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Z$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ii(this.target,this.layout.layoutBox),Y2(this.target,this.targetDelta)):ii(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||ub(this.parent.latestValues)||W2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,u,h){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=on(),this.relativeTargetOrigin=on(),bg(this.relativeTargetOrigin,u,h),ii(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const a=this.getLead(),u=!!this.resumingFrom||this!==a;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;ii(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;R$(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=on());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hk(this.prevProjectionDelta.x,this.projectionDelta.x),hk(this.prevProjectionDelta.y,this.projectionDelta.y)),cf(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!_k(this.projectionDelta.x,this.prevProjectionDelta.x)||!_k(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ju(),this.projectionDelta=ju(),this.projectionDeltaWithTransform=ju()}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},m=ju();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=on(),E=h?h.source:void 0,b=this.layout?this.layout.source:void 0,S=E!==b,w=this.getStack(),x=!w||w.members.length<=1,N=!!(S&&!x&&this.options.crossfade===!0&&!this.path.some(xG));this.animationProgress=0;let V;this.mixTargetDelta=q=>{const F=q/1e3;kk(m.x,a.x,F),kk(m.y,a.y,F),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bg(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CG(this.relativeTarget,this.relativeTargetOrigin,v,F),V&&rG(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=on()),ii(V,this.relativeTarget)),S&&(this.animationValues=p,oG(p,f,this.latestValues,F,N,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gt.update(()=>{Um.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=sc(0)),this.motionValue.jump(0,!1),this.currentAnimation=uG(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&dP(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||on();const m=$n(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+m;const v=$n(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}ii(u,h),Hu(u,p),cf(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new dG),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&NT("z",a,f,this.animationValues);for(let p=0;p<DT.length;p++)NT(`rotate${DT[p]}`,a,f,this.animationValues),NT(`skew${DT[p]}`,a,f,this.animationValues);a.render();for(const p in f)a.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);a.scheduleRender()}applyProjectionStyles(a,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Bm(u?.pointerEvents)||"",a.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Bm(u?.pointerEvents)||""),this.hasProjected&&!nl(this.latestValues)&&(a.transform=h?h({},""):"none",this.hasProjected=!1);return}a.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=iG(this.projectionDeltaWithTransform,this.treeScale,p);h&&(m=h(p,m)),a.transform=m;const{x:v,y:E}=this.projectionDelta;a.transformOrigin=`${v.origin*100}% ${E.origin*100}% 0`,f.animationValues?a.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:a.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in hb){if(p[b]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:x}=hb[b],N=m==="none"?p[b]:S(p[b],f);if(w){const V=w.length;for(let q=0;q<V;q++)a[w[q]]=N}else x?this.options.visualElement.renderState.vars[b]=N:a[b]=N}this.options.layoutId&&(a.pointerEvents=f===this?Bm(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(Ck),this.root.sharedNodes.clear()}}}function gG(n){n.updateLayout()}function yG(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,s=e.source!==n.layout.source;i==="size"?zi(p=>{const m=s?e.measuredBox[p]:e.layoutBox[p],v=$n(m);m.min=t[p].min,m.max=m.min+v}):dP(i,e.layoutBox,t)&&zi(p=>{const m=s?e.measuredBox[p]:e.layoutBox[p],v=$n(t[p]);m.max=m.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+v)});const a=ju();cf(a,t,e.layoutBox);const u=ju();s?cf(u,n.applyTransform(r,!0),e.measuredBox):cf(u,t,e.layoutBox);const h=!aP(a);let f=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:v}=p;if(m&&v){const E=on();bg(E,e.layoutBox,m.layoutBox);const b=on();bg(b,t,v.layoutBox),lP(E,b)||(f=!0),p.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=E,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:a,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function vG(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function TG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function EG(n){n.clearSnapshot()}function Ck(n){n.clearMeasurements()}function xk(n){n.isLayoutDirty=!1}function bG(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Rk(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function _G(n){n.resolveTargetDelta()}function SG(n){n.calcProjection()}function wG(n){n.resetSkewAndRotation()}function AG(n){n.removeLeadSnapshot()}function kk(n,e,t){n.translate=At(e.translate,0,t),n.scale=At(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Ik(n,e,t,r){n.min=At(e.min,t.min,r),n.max=At(e.max,t.max,r)}function CG(n,e,t,r){Ik(n.x,e.x,t.x,r),Ik(n.y,e.y,t.y,r)}function xG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const RG={duration:.45,ease:[.4,0,.1,1]},Mk=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Dk=Mk("applewebkit/")&&!Mk("chrome/")?Math.round:jr;function Nk(n){n.min=Dk(n.min),n.max=Dk(n.max)}function kG(n){Nk(n.x),Nk(n.y)}function dP(n,e,t){return n==="position"||n==="preserve-aspect"&&!J$(bk(e),bk(t),.2)}function IG(n){return n!==n.root&&n.scroll?.wasRoot}const MG=fP({attachResizeListener:(n,e)=>Uf(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),OT={current:void 0},pP=fP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!OT.current){const n=new MG({});n.mount(window),n.setOptions({layoutScroll:!0}),OT.current=n}return OT.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),CS=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Ok(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function DG(...n){return e=>{let t=!1;const r=n.map(i=>{const s=Ok(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Ok(n[i],null)}}}}function NG(...n){return P.useCallback(DG(...n),n)}class OG extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=t.offsetParent,i=ab(r)&&r.offsetWidth||0,s=ab(r)&&r.offsetHeight||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left,a.bottom=s-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function PG({children:n,isPresent:e,anchorX:t,anchorY:r,root:i,pop:s}){const a=P.useId(),u=P.useRef(null),h=P.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=P.useContext(CS),p=n.props?.ref??n?.ref,m=NG(u,p);return P.useInsertionEffect(()=>{const{width:v,height:E,top:b,left:S,right:w,bottom:x}=h.current;if(e||s===!1||!u.current||!v||!E)return;const N=t==="left"?`left: ${S}`:`right: ${w}`,V=r==="bottom"?`bottom: ${x}`:`top: ${b}`;u.current.dataset.motionPopId=a;const q=document.createElement("style");f&&(q.nonce=f);const F=i??document.head;return F.appendChild(q),q.sheet&&q.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${E}px !important;
            ${N}px !important;
            ${V}px !important;
          }
        `),()=>{F.contains(q)&&F.removeChild(q)}},[e]),$.jsx(OG,{isPresent:e,childRef:u,sizeRef:h,pop:s,children:s===!1?n:P.cloneElement(n,{ref:m})})}const VG=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:u,anchorY:h,root:f})=>{const p=Z_(LG),m=P.useId();let v=!0,E=P.useMemo(()=>(v=!1,{id:m,initial:e,isPresent:t,custom:i,onExitComplete:b=>{p.set(b,!0);for(const S of p.values())if(!S)return;r&&r()},register:b=>(p.set(b,!1),()=>p.delete(b))}),[t,p,r]);return s&&v&&(E={...E}),P.useMemo(()=>{p.forEach((b,S)=>p.set(S,!1))},[t]),P.useEffect(()=>{!t&&!p.size&&r&&r()},[t]),n=$.jsx(PG,{pop:a==="popLayout",isPresent:t,anchorX:u,anchorY:h,root:f,children:n}),$.jsx(zy.Provider,{value:E,children:n})};function LG(){return new Map}function mP(n=!0){const e=P.useContext(zy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=P.useId();P.useEffect(()=>{if(n)return i(s)},[n]);const a=P.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const am=n=>n.key||"";function Pk(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const Vk=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:u="left",anchorY:h="top",root:f})=>{const[p,m]=mP(a),v=P.useMemo(()=>Pk(n),[n]),E=a&&!p?[]:v.map(am),b=P.useRef(!0),S=P.useRef(v),w=Z_(()=>new Map),x=P.useRef(new Set),[N,V]=P.useState(v),[q,F]=P.useState(v);HO(()=>{b.current=!1,S.current=v;for(let k=0;k<q.length;k++){const D=am(q[k]);E.includes(D)?(w.delete(D),x.current.delete(D)):w.get(D)!==!0&&w.set(D,!1)}},[q,E.length,E.join("-")]);const Z=[];if(v!==N){let k=[...v];for(let D=0;D<q.length;D++){const B=q[D],U=am(B);E.includes(U)||(k.splice(D,0,B),Z.push(B))}return s==="wait"&&Z.length&&(k=Z),F(Pk(k)),V(v),null}const{forceRender:I}=P.useContext(J_);return $.jsx($.Fragment,{children:q.map(k=>{const D=am(k),B=a&&!p?!1:v===q||E.includes(D),U=()=>{if(x.current.has(D))return;if(x.current.add(D),w.has(D))w.set(D,!0);else return;let H=!0;w.forEach(O=>{O||(H=!1)}),H&&(I?.(),F(S.current),a&&m?.(),r&&r())};return $.jsx(VG,{isPresent:B,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:f,onExitComplete:B?void 0:U,anchorX:u,anchorY:h,children:k},D)})})},gP=P.createContext({strict:!1}),Lk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Bk=!1;function BG(){if(Bk)return;const n={};for(const e in Lk)n[e]={isEnabled:t=>Lk[e].some(r=>!!t[r])};$2(n),Bk=!0}function yP(){return BG(),w$()}function UG(n){const e=yP();for(const t in n)e[t]={...e[t],...n[t]};$2(e)}const zG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function _g(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||zG.has(n)}let vP=n=>!_g(n);function jG(n){typeof n=="function"&&(vP=e=>e.startsWith("on")?!_g(e):n(e))}try{jG(require("@emotion/is-prop-valid").default)}catch{}function FG(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(vP(i)||t===!0&&_g(i)||!e&&!_g(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Hy=P.createContext({});function HG(n,e){if(Fy(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Bf(t)?t:void 0,animate:Bf(r)?r:void 0}}return n.inherit!==!1?e:{}}function qG(n){const{initial:e,animate:t}=HG(n,P.useContext(Hy));return P.useMemo(()=>({initial:e,animate:t}),[Uk(e),Uk(t)])}function Uk(n){return Array.isArray(n)?n.join(" "):n}const xS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TP(n,e,t){for(const r in e)!Pn(e[r])&&!J2(r,t)&&(n[r]=e[r])}function $G({transformTemplate:n},e){return P.useMemo(()=>{const t=xS();return wS(t,e,n),Object.assign({},t.vars,t.style)},[e])}function GG(n,e){const t=n.style||{},r={};return TP(r,t,n),Object.assign(r,$G(n,e)),r}function KG(n,e){const t={},r=GG(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const EP=()=>({...xS(),attrs:{}});function WG(n,e,t,r){const i=P.useMemo(()=>{const s=EP();return Z2(s,e,tP(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};TP(s,n.style,n),i.style={...s,...i.style}}return i}const YG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function RS(n){return typeof n!="string"||n.includes("-")?!1:!!(YG.indexOf(n)>-1||/[A-Z]/u.test(n))}function QG(n,e,t,{latestValues:r},i,s=!1,a){const h=(a??RS(n)?WG:KG)(e,r,i,n),f=FG(e,typeof n=="string",s),p=n!==P.Fragment?{...f,...h,ref:t}:{},{children:m}=e,v=P.useMemo(()=>Pn(m)?m.get():m,[m]);return P.createElement(n,{...p,children:v})}function XG({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:JG(t,r,i,n),renderState:e()}}function JG(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=Bm(s[v]);let{initial:a,animate:u}=n;const h=Fy(n),f=H2(n);e&&f&&!h&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let p=t?t.initial===!1:!1;p=p||a===!1;const m=p?u:a;if(m&&typeof m!="boolean"&&!jy(m)){const v=Array.isArray(m)?m:[m];for(let E=0;E<v.length;E++){const b=gS(n,v[E]);if(b){const{transitionEnd:S,transition:w,...x}=b;for(const N in x){let V=x[N];if(Array.isArray(V)){const q=p?V.length-1:0;V=V[q]}V!==null&&(i[N]=V)}for(const N in S)i[N]=S[N]}}}return i}const bP=n=>(e,t)=>{const r=P.useContext(Hy),i=P.useContext(zy),s=()=>XG(n,e,r,i);return t?s():Z_(s)},ZG=bP({scrapeMotionValuesFromProps:AS,createRenderState:xS}),eK=bP({scrapeMotionValuesFromProps:nP,createRenderState:EP}),tK=Symbol.for("motionComponentSymbol");function nK(n,e,t){const r=P.useRef(t);P.useInsertionEffect(()=>{r.current=t});const i=P.useRef(null);return P.useCallback(s=>{s&&n.onMount?.(s),e&&(s?e.mount(s):e.unmount());const a=r.current;if(typeof a=="function")if(s){const u=a(s);typeof u=="function"&&(i.current=u)}else i.current?(i.current(),i.current=null):a(s);else a&&(a.current=s)},[e])}const _P=P.createContext({});function Ou(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function rK(n,e,t,r,i,s){const{visualElement:a}=P.useContext(Hy),u=P.useContext(gP),h=P.useContext(zy),f=P.useContext(CS),p=f.reducedMotion,m=f.skipAnimations,v=P.useRef(null),E=P.useRef(!1);r=r||u.renderer,!v.current&&r&&(v.current=r(n,{visualState:e,parent:a,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p,skipAnimations:m,isSVG:s}),E.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const b=v.current,S=P.useContext(_P);b&&!b.projection&&i&&(b.type==="html"||b.type==="svg")&&iK(v.current,t,i,S);const w=P.useRef(!1);P.useInsertionEffect(()=>{b&&w.current&&b.update(t,h)});const x=t[I2],N=P.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return HO(()=>{E.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),N.current&&b.animationState&&b.animationState.animateChanges())}),P.useEffect(()=>{b&&(!N.current&&b.animationState&&b.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),N.current=!1),b.enteringChildren=void 0)}),b}function iK(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:SP(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||u&&Ou(u),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:h,layoutRoot:f})}function SP(n){if(n)return n.options.allowProjection!==!1?n.projection:SP(n.parent)}function PT(n,{forwardMotionProps:e=!1,type:t}={},r,i){r&&UG(r);const s=t?t==="svg":RS(n),a=s?eK:ZG;function u(f,p){let m;const v={...P.useContext(CS),...f,layoutId:sK(f)},{isStatic:E}=v,b=qG(f),S=a(f,E);if(!E&&FO){oK();const w=aK(v);m=w.MeasureLayout,b.visualElement=rK(n,S,v,i,w.ProjectionNode,s)}return $.jsxs(Hy.Provider,{value:b,children:[m&&b.visualElement?$.jsx(m,{visualElement:b.visualElement,...v}):null,QG(n,f,nK(S,b.visualElement,p),S,E,e,s)]})}u.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const h=P.forwardRef(u);return h[tK]=n,h}function sK({layoutId:n}){const e=P.useContext(J_).id;return e&&n!==void 0?e+"-"+n:n}function oK(n,e){P.useContext(gP).strict}function aK(n){const e=yP(),{drag:t,layout:r}=e;if(!t&&!r)return{};const i={...t,...r};return{MeasureLayout:t?.isEnabled(n)||r?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function lK(n,e){if(typeof Proxy>"u")return PT;const t=new Map,r=(s,a)=>PT(s,a,n,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(t.has(a)||t.set(a,PT(a,void 0,n,e)),t.get(a))})}const uK=(n,e)=>e.isSVG??RS(n)?new j$(e):new P$(e,{allowProjection:n!==P.Fragment});class cK extends va{constructor(e){super(e),e.animationState||(e.animationState=G$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let hK=0;class fK extends va{constructor(){super(...arguments),this.id=hK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const dK={animation:{Feature:cK},exit:{Feature:fK}};function yd(n){return{point:{x:n.pageX,y:n.pageY}}}const pK=n=>e=>ES(e)&&n(e,yd(e));function hf(n,e,t,r){return Uf(n,e,pK(t),r)}const wP=({current:n})=>n?n.ownerDocument.defaultView:null,zk=(n,e)=>Math.abs(n-e);function mK(n,e){const t=zk(n.x,e.x),r=zk(n.y,e.y);return Math.sqrt(t**2+r**2)}const jk=new Set(["auto","scroll"]);class AP{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=LT(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,S=mK(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!S)return;const{point:w}=E,{timestamp:x}=wn;this.history.push({...w,timestamp:x});const{onStart:N,onMove:V}=this.handlers;b||(N&&N(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,E)},this.handlePointerMove=(E,b)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=VT(b,this.transformPagePoint),gt.update(this.updatePoint,!0)},this.handlePointerUp=(E,b)=>{this.end();const{onEnd:S,onSessionEnd:w,resumeAnimation:x}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=LT(E.type==="pointercancel"?this.lastMoveEventInfo:VT(b,this.transformPagePoint),this.history);this.startEvent&&S&&S(E,N),w&&w(E,N)},!ES(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const h=yd(e),f=VT(h,this.transformPagePoint),{point:p}=f,{timestamp:m}=wn;this.history=[{...p,timestamp:m}];const{onSessionStart:v}=t;v&&v(e,LT(f,this.history)),this.removeListeners=pd(hf(this.contextWindow,"pointermove",this.handlePointerMove),hf(this.contextWindow,"pointerup",this.handlePointerUp),hf(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(jk.has(r.overflowX)||jk.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-t.x,y:i.y-t.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),gt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),aa(this.updatePoint)}}function VT(n,e){return e?{point:e(n.point)}:n}function Fk(n,e){return{x:n.x-e.x,y:n.y-e.y}}function LT({point:n},e){return{point:n,delta:Fk(n,CP(e)),offset:Fk(n,gK(e)),velocity:yK(e,.1)}}function gK(n){return n[0]}function CP(n){return n[n.length-1]}function yK(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=CP(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>di(e)));)t--;if(!r)return{x:0,y:0};r===n[0]&&n.length>2&&i.timestamp-r.timestamp>di(e)*2&&(r=n[1]);const s=zr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function vK(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?At(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?At(t,n,r.max):Math.min(n,t)),n}function Hk(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function TK(n,{top:e,left:t,bottom:r,right:i}){return{x:Hk(n.x,t,i),y:Hk(n.y,e,r)}}function qk(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function EK(n,e){return{x:qk(n.x,e.x),y:qk(n.y,e.y)}}function bK(n,e){let t=.5;const r=$n(n),i=$n(e);return i>r?t=Pf(e.min,e.max-r,n.min):r>i&&(t=Pf(n.min,n.max-i,e.min)),es(0,1,t)}function _K(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const fb=.35;function SK(n=fb){return n===!1?n=0:n===!0&&(n=fb),{x:$k(n,"left","right"),y:$k(n,"top","bottom")}}function $k(n,e,t){return{min:Gk(n,e),max:Gk(n,t)}}function Gk(n,e){return typeof n=="number"?n:n[e]||0}const wK=new WeakMap;class AK{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=on(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=m=>{t&&this.snapToCursor(yd(m).point),this.stopAnimation()},a=(m,v)=>{const{drag:E,dragPropagation:b,onDragStart:S}=this.getProps();if(E&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=e$(E),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zi(x=>{let N=this.getAxisMotionValue(x).get()||0;if(Qi.test(N)){const{projection:V}=this.visualElement;if(V&&V.layout){const q=V.layout.layoutBox[x];q&&(N=$n(q)*(parseFloat(N)/100))}}this.originPoint[x]=N}),S&&gt.update(()=>S(m,v),!1,!0),rb(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},u=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:E,dragDirectionLock:b,onDirectionLock:S,onDrag:w}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:x}=v;if(b&&this.currentDirection===null){this.currentDirection=xK(x),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,x),this.updateAxis("y",v.point,x),this.visualElement.render(),w&&gt.update(()=>w(m,v),!1,!0)},h=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>{const{dragSnapToOrigin:m}=this.getProps();(m||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new AP(e,{onSessionStart:s,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:wP(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:u}=this.getProps();u&&gt.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!lm(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=vK(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Ou(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=TK(r.layoutBox,e):this.constraints=!1,this.elastic=SK(t),i!==this.constraints&&!Ou(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&zi(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=_K(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ou(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=k$(r,i.root,this.visualElement.getTransformPagePoint());let a=EK(i.layout.layoutBox,s);if(t){const u=t(C$(a));this.hasMutatedConstraints=!!u,u&&(a=K2(u))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=zi(p=>{if(!lm(p,t,this.currentDirection))return;let m=h&&h[p]||{};a&&(m={min:0,max:0});const v=i?200:1e6,E=i?40:1e7,b={type:"inertia",velocity:r?e[p]:0,bounceStiffness:v,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(p,b)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return rb(this.visualElement,e),r.start(mS(e,r,0,t,this.visualElement,!1))}stopAnimation(){zi(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zi(t=>{const{drag:r}=this.getProps();if(!lm(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[t],h=s.get()||0;s.set(e[t]-At(a,u,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ou(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zi(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const h=u.get();i[a]=bK({min:h,max:h},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),zi(a=>{if(!lm(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(At(h,f,i[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;wK.set(this.visualElement,this);const e=this.visualElement.current,t=hf(e,"pointerdown",f=>{const{drag:p,dragListener:m=!0}=this.getProps(),v=f.target,E=v!==e&&o$(v);p&&m&&!E&&this.start(f)});let r;const i=()=>{const{dragConstraints:f}=this.getProps();Ou(f)&&f.current&&(this.constraints=this.resolveRefConstraints(),r||(r=CK(e,f.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,a=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),gt.read(i);const u=Uf(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(zi(m=>{const v=this.getAxisMotionValue(m);v&&(this.originPoint[m]+=f[m].translate,v.set(v.get()+f[m].translate))}),this.visualElement.render())}));return()=>{u(),t(),a(),h&&h(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=fb,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function Kk(n){let e=!0;return()=>{if(e){e=!1;return}n()}}function CK(n,e,t){const r=ZR(n,Kk(t)),i=ZR(e,Kk(t));return()=>{r(),i()}}function lm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function xK(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class RK extends va{constructor(e){super(e),this.removeGroupControls=jr,this.removeListeners=jr,this.controls=new AK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const BT=n=>(e,t)=>{n&&gt.update(()=>n(e,t),!1,!0)};class kK extends va{constructor(){super(...arguments),this.removePointerDownListener=jr}onPointerDown(e){this.session=new AP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:BT(e),onStart:BT(t),onMove:BT(r),onEnd:(s,a)=>{delete this.session,i&&gt.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=hf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let UT=!1;class IK extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),UT&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Um.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,e.layoutDependency!==t&&a.setOptions({...a.options,layoutDependency:t}),UT=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||gt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),TS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;UT=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xP(n){const[e,t]=mP(),r=P.useContext(J_);return $.jsx(IK,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(_P),isPresent:e,safeToRemove:t})}const MK={pan:{Feature:kK},drag:{Feature:RK,ProjectionNode:pP,MeasureLayout:xP}};function Wk(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&gt.postRender(()=>s(e,yd(e)))}class DK extends va{mount(){const{current:e}=this.node;e&&(this.unmount=n$(e,(t,r)=>(Wk(this.node,r,"Start"),i=>Wk(this.node,i,"End"))))}unmount(){}}class NK extends va{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pd(Uf(this.node.current,"focus",()=>this.onFocus()),Uf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yk(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&gt.postRender(()=>s(e,yd(e)))}class OK extends va{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:r}=this.node.props;this.unmount=l$(e,(i,s)=>(Yk(this.node,s,"Start"),(a,{success:u})=>Yk(this.node,a,u?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:r?.tap===!1})}unmount(){}}const db=new WeakMap,zT=new WeakMap,PK=n=>{const e=db.get(n.target);e&&e(n)},VK=n=>{n.forEach(PK)};function LK({root:n,...e}){const t=n||document;zT.has(t)||zT.set(t,{});const r=zT.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(VK,{root:n,...e})),r[i]}function BK(n,e,t){const r=LK(e);return db.set(n,t),r.observe(n),()=>{db.delete(n),r.unobserve(n)}}const UK={some:0,all:1};class zK extends va{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UK[i]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),v=f?p:m;v&&v(h)};return BK(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(jK(e,t))&&this.startObserver()}unmount(){}}function jK({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const FK={inView:{Feature:zK},tap:{Feature:OK},focus:{Feature:NK},hover:{Feature:DK}},HK={layout:{ProjectionNode:pP,MeasureLayout:xP}},qK={...dK,...FK,...MK,...HK},mr=lK(qK,uK);function $K(){const{user:n,loading:e,signInWithGoogle:t,signInWithEmail:r,signUp:i}=Uy(),s=Zf(),[a,u]=P.useState(!1),[h,f]=P.useState(""),[p,m]=P.useState(""),[v,E]=P.useState(""),[b,S]=P.useState(""),[w,x]=P.useState(!1);P.useEffect(()=>{!e&&n&&s("/dashboard",{replace:!0})},[n,e,s]);const N=async()=>{S(""),x(!0);try{await t(),s("/dashboard",{replace:!0})}catch(q){S(q.message||"Google sign-in failed. Please try again.")}finally{x(!1)}},V=async q=>{q.preventDefault(),S(""),x(!0);try{a?await i(p,v,h):await r(p,v),s("/dashboard",{replace:!0})}catch(F){S(F.message||"Authentication failed. Please try again.")}finally{x(!1)}};return e?$.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-100 via-pink-50 to-rose-100",children:$.jsx("div",{className:"animate-pulse font-['Pacifico'] text-3xl text-pink-400",children:"DearMe "})}):$.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-100 via-pink-50 to-rose-100 px-4",children:$.jsxs(mr.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full max-w-md bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl shadow-pink-200/40 p-8",children:[$.jsx("h1",{className:"font-['Pacifico'] text-4xl text-pink-400 text-center mb-2",children:"DearMe "}),$.jsx("p",{className:"font-['Poppins'] text-sm text-pink-300 text-center mb-8",children:"Your safe, beautiful diary"}),b&&$.jsx(mr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 rounded-xl bg-red-50 border border-red-200 text-red-600 text-sm font-['Poppins'] text-center",children:b}),$.jsxs("button",{type:"button",onClick:N,disabled:w,className:"w-full flex items-center justify-center gap-3 py-3 px-4 rounded-xl border border-pink-200 bg-white hover:bg-pink-50 transition-colors font-['Poppins'] text-sm text-gray-700 mb-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[$.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[$.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),$.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),$.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),$.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]}),$.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[$.jsx("div",{className:"flex-1 h-px bg-pink-200"}),$.jsx("span",{className:"font-['Poppins'] text-xs text-pink-300",children:"or"}),$.jsx("div",{className:"flex-1 h-px bg-pink-200"})]}),$.jsxs("form",{onSubmit:V,className:"space-y-4",children:[a&&$.jsx(mr.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:$.jsx("input",{type:"text",placeholder:"Your name",value:h,onChange:q=>f(q.target.value),className:"w-full px-4 py-3 rounded-xl border border-pink-200 bg-white/70 font-['Poppins'] text-sm text-gray-700 placeholder-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-transparent transition-all"})}),$.jsx("input",{type:"email",placeholder:"Email",value:p,onChange:q=>m(q.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-pink-200 bg-white/70 font-['Poppins'] text-sm text-gray-700 placeholder-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-transparent transition-all"}),$.jsx("input",{type:"password",placeholder:"Password",value:v,onChange:q=>E(q.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-pink-200 bg-white/70 font-['Poppins'] text-sm text-gray-700 placeholder-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-transparent transition-all"}),$.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 rounded-xl bg-pink-400 hover:bg-pink-500 text-white font-['Poppins'] text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Please wait...":a?"Create Account":"Sign In"})]}),$.jsxs("p",{className:"mt-6 text-center font-['Poppins'] text-sm text-gray-500",children:[a?"Already have an account?":"Don't have an account?"," ",$.jsx("button",{type:"button",onClick:()=>{u(!a),S("")},className:"text-pink-400 hover:text-pink-500 font-medium transition-colors",children:a?"Sign In":"Sign Up"})]})]})})}const Qk=["#FFE4E1","#E8F5E9","#FFF3E0","#E3F2FD","#F3E5F5","#FFF9C4","#E0F7FA","#FCE4EC"];function GK(n,e){if(!n||n.length===0)return null;let t=n;n.length>1&&e&&(t=n.filter(s=>s.id!==e));const r=Math.floor(Math.random()*t.length),i=Math.floor(Math.random()*Qk.length);return{...t[r],backgroundColor:Qk[i]}}const KK=[{id:"q1",text:"You survived today. That's enough ",author:"Unknown",category:"self-care"},{id:"q2",text:"Healing is not linear ",author:"Unknown",category:"self-care"},{id:"q3",text:"Little steps count.",author:"Unknown",category:"motivation"},{id:"q4",text:"Be gentle with yourself. You're doing the best you can ",author:"Unknown",category:"self-care"},{id:"q5",text:"You are allowed to take up space in this world ",author:"Unknown",category:"motivation"},{id:"q6",text:"Rest is productive too ",author:"Unknown",category:"productivity"},{id:"q7",text:"Your feelings are valid, always ",author:"Unknown",category:"self-care"},{id:"q8",text:"You don't have to be perfect to be worthy of love ",author:"Unknown",category:"love"},{id:"q9",text:"Progress, not perfection ",author:"Unknown",category:"motivation"},{id:"q10",text:"The sun will rise and we will try again ",author:"Unknown",category:"general"},{id:"q11",text:"You are enough, just as you are ",author:"Unknown",category:"self-care"},{id:"q12",text:"One day at a time, one breath at a time ",author:"Unknown",category:"general"},{id:"q13",text:"Your story isn't over yet ",author:"Unknown",category:"motivation"},{id:"q14",text:"It's okay to not have all the answers right now ",author:"Unknown",category:"general"},{id:"q15",text:"You are someone's reason to smile ",author:"Unknown",category:"love"},{id:"q16",text:"Small progress is still progress ",author:"Unknown",category:"productivity"},{id:"q17",text:"Let yourself bloom at your own pace ",author:"Unknown",category:"self-care"},{id:"q18",text:"You carry so much love in your heart. Give some to yourself ",author:"Unknown",category:"love"},{id:"q19",text:"Done is better than perfect ",author:"Unknown",category:"productivity"},{id:"q20",text:"Breathe. You're going to be okay ",author:"Unknown",category:"general"},{id:"q21",text:"Every day is a fresh start ",author:"Unknown",category:"motivation"},{id:"q22",text:"You deserve the love you keep giving to others ",author:"Unknown",category:"love"},{id:"q23",text:"Celebrate the tiny victories today ",author:"Unknown",category:"productivity"},{id:"q24",text:"Soft days are still good days ",author:"Unknown",category:"general"}],pb=["happy","sad","productive","romantic","anxious","calm","neutral"],RP={happy:"",sad:"",productive:"",romantic:"",anxious:"",calm:"",neutral:""},Xk=10,Jk=200,WK={happy:{bg:"bg-yellow-100",border:"border-yellow-400",hover:"hover:bg-yellow-50"},sad:{bg:"bg-blue-100",border:"border-blue-400",hover:"hover:bg-blue-50"},productive:{bg:"bg-green-100",border:"border-green-400",hover:"hover:bg-green-50"},romantic:{bg:"bg-pink-100",border:"border-pink-400",hover:"hover:bg-pink-50"},anxious:{bg:"bg-orange-100",border:"border-orange-400",hover:"hover:bg-orange-50"},calm:{bg:"bg-teal-100",border:"border-teal-400",hover:"hover:bg-teal-50"},neutral:{bg:"bg-gray-100",border:"border-gray-400",hover:"hover:bg-gray-50"}};function kP({value:n,onChange:e}){return $.jsx("div",{className:"flex flex-wrap gap-3",role:"group","aria-label":"Select your mood",children:pb.map(t=>{const r=n===t,i=WK[t];return $.jsxs("button",{type:"button",onClick:()=>e(t),"aria-label":`${t} mood`,"aria-pressed":r,className:`flex flex-col items-center gap-1 px-4 py-3 rounded-2xl border-2 transition-all cursor-pointer font-['Poppins'] text-sm capitalize ${r?`${i.bg} ${i.border} shadow-md scale-105`:`bg-white border-transparent ${i.hover} hover:shadow-sm`}`,children:[$.jsx("span",{className:"text-2xl",role:"img","aria-hidden":"true",children:RP[t]}),$.jsx("span",{className:r?"font-medium":"text-gray-500",children:t})]},t)})})}function YK(){const n=new Date().getHours();return n<12?{text:"Good Morning",emoji:""}:n<18?{text:"Good Afternoon",emoji:""}:{text:"Good Evening",emoji:""}}function QK(n){return n?(n.toDate?n.toDate():new Date(n)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function XK(n){if(!n)return"";if(typeof n=="string")return n.slice(0,100);try{const e=[],t=i=>{i.text&&e.push(i.text),i.content&&i.content.forEach(t)};t(n);const r=e.join(" ");return r.length>100?r.slice(0,100)+"":r}catch{return""}}function Vh({className:n=""}){return $.jsx("div",{className:`animate-pulse rounded-2xl bg-pink-100/50 ${n}`,children:$.jsxs("div",{className:"p-5 space-y-3",children:[$.jsx("div",{className:"h-4 bg-pink-200/60 rounded w-3/4"}),$.jsx("div",{className:"h-3 bg-pink-200/40 rounded w-full"}),$.jsx("div",{className:"h-3 bg-pink-200/40 rounded w-1/2"})]})})}const JK={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Lh={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.45,ease:"easeOut"}}};function ZK(){const{user:n}=Uy(),e=Zf(),[t,r]=P.useState(null),[i,s]=P.useState([]),[a,u]=P.useState(!0),[h,f]=P.useState(null),p=P.useMemo(()=>YK(),[]),m=P.useMemo(()=>GK(KK),[]);P.useEffect(()=>{if(!n)return;let E=!1;async function b(){try{const S=await By(Vs(ui,"users",n.uid));!E&&S.exists()&&r(S.data());const w=nq(_O(ui,"entries"),rq("userId","==",n.uid),iq("date","desc"),sq(5)),x=await fq(w);E||s(x.docs.map(N=>({id:N.id,...N.data()})))}catch(S){console.error("Dashboard fetch error:",S)}finally{E||u(!1)}}return b(),()=>{E=!0}},[n]);const v=t?.name||n?.displayName||"Friend";return a?$.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[$.jsx("div",{className:"animate-pulse h-10 bg-pink-200/40 rounded w-2/3"}),$.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[$.jsx(Vh,{className:"h-28"}),$.jsx(Vh,{className:"h-28"})]}),$.jsx(Vh,{className:"h-32"}),$.jsx(Vh,{className:"h-24"}),$.jsx(Vh,{className:"h-24"})]}):$.jsxs(mr.div,{className:"max-w-3xl mx-auto px-4 py-8 space-y-8",variants:JK,initial:"hidden",animate:"visible",children:[$.jsxs(mr.h1,{variants:Lh,className:"font-['Pacifico'] text-3xl sm:text-4xl text-[var(--color-text,#4A2040)]",children:[p.text,", ",v," ",p.emoji]}),$.jsxs(mr.div,{variants:Lh,className:"flex flex-wrap items-center gap-4",children:[$.jsxs("div",{className:"flex items-center gap-2 bg-white/80 backdrop-blur rounded-2xl px-5 py-3 shadow-sm border border-pink-100",children:[$.jsx("span",{className:"text-2xl",children:""}),$.jsxs("span",{className:"font-['Poppins'] text-lg font-semibold text-[var(--color-text,#4A2040)]",children:[t?.streak??0," day streak"]})]}),$.jsx("button",{onClick:()=>e("/editor"),className:"ml-auto bg-gradient-to-r from-pink-400 to-rose-400 hover:from-pink-500 hover:to-rose-500 text-white font-['Poppins'] font-medium px-6 py-3 rounded-2xl shadow-md hover:shadow-lg transition-all cursor-pointer",children:" Write Today's Entry"})]}),m&&$.jsxs(mr.div,{variants:Lh,className:"rounded-2xl p-6 shadow-sm",style:{backgroundColor:m.backgroundColor},children:[$.jsxs("p",{className:"font-['Caveat'] text-xl sm:text-2xl text-gray-800 leading-relaxed",children:['"',m.text,'"']}),$.jsxs("p",{className:"font-['Poppins'] text-sm text-gray-600 mt-2",children:[" ",m.author]})]}),$.jsxs(mr.div,{variants:Lh,className:"bg-white/80 backdrop-blur rounded-2xl p-5 shadow-sm border border-pink-100",children:[$.jsx("h2",{className:"font-['Caveat'] text-xl text-[var(--color-text,#4A2040)] mb-3",children:"How are you feeling right now?"}),$.jsx(kP,{value:h,onChange:f})]}),$.jsxs(mr.section,{variants:Lh,children:[$.jsx("h2",{className:"font-['Caveat'] text-2xl text-[var(--color-text,#4A2040)] mb-4",children:"Recent Entries "}),i.length===0?$.jsx("p",{className:"font-['Poppins'] text-gray-400 text-sm",children:"No entries yet. Start writing your first diary entry!"}):$.jsx("div",{className:"space-y-3",children:i.map(E=>$.jsx(Jb,{to:`/editor/${E.id}`,className:"block bg-white/80 backdrop-blur rounded-2xl p-4 shadow-sm border border-pink-100 hover:shadow-md hover:scale-[1.01] transition-all",children:$.jsxs("div",{className:"flex items-start justify-between gap-3",children:[$.jsxs("div",{className:"min-w-0 flex-1",children:[$.jsx("h3",{className:"font-['Poppins'] font-medium text-[var(--color-text,#4A2040)] truncate",children:E.title||"Untitled"}),$.jsx("p",{className:"font-['Poppins'] text-sm text-gray-500 mt-1 line-clamp-2",children:XK(E.content)}),$.jsx("span",{className:"font-['Poppins'] text-xs text-gray-400 mt-2 inline-block",children:QK(E.date)})]}),E.mood&&$.jsx("span",{className:"text-2xl flex-shrink-0",title:E.mood,children:RP[E.mood]||""})]})},E.id))})]})]})}var jT={exports:{}},FT={};var Zk;function eW(){if(Zk)return FT;Zk=1;var n=Xf();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function u(m,v){var E=v(),b=r({inst:{value:E,getSnapshot:v}}),S=b[0].inst,w=b[1];return s(function(){S.value=E,S.getSnapshot=v,h(S)&&w({inst:S})},[m,E,v]),i(function(){return h(S)&&w({inst:S}),m(function(){h(S)&&w({inst:S})})},[m]),a(E),E}function h(m){var v=m.getSnapshot;m=m.value;try{var E=v();return!t(m,E)}catch{return!0}}function f(m,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return FT.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,FT}var eI;function IP(){return eI||(eI=1,jT.exports=eW()),jT.exports}var MP=IP();function Sn(n){this.content=n}Sn.prototype={constructor:Sn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new Sn(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Sn(t)},addToStart:function(n,e){return new Sn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Sn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new Sn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Sn.from(n),n.size?new Sn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Sn.from(n),n.size?new Sn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Sn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Sn.from=function(n){if(n instanceof Sn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Sn(e)};function DP(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=DP(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function NP(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),u=e.child(--s),h=a.nodeSize;if(a==u){t-=h,r-=h;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let f=0,p=Math.min(a.text.length,u.text.length);for(;f<p&&a.text[a.text.length-f-1]==u.text[u.text.length-f-1];)f++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let f=NP(a.content,u.content,t-1,r-1);if(f)return f}t-=h,r-=h}}class le{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,u=0;u<t;a++){let h=this.content[a],f=u+h.nodeSize;if(f>e&&r(h,i+u,s||null,a)!==!1&&h.content.size){let p=u+1;h.nodesBetween(Math.max(0,e-p),Math.min(h.content.size,t-p),r,i+p)}u=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(u,h)=>{let f=u.isText?u.text.slice(Math.max(e,h)-h,t-h):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&f||u.isTextblock)&&r&&(a?a=!1:s+=r),s+=f},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new le(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let u=this.content[s],h=a+u.nodeSize;h>e&&((a<e||h>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=h}return new le(r,i)}cutByIndex(e,t){return e==t?le.empty:e==0&&t==this.content.length?this:new le(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new le(i,s)}addToStart(e){return new le([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new le(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return DP(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return NP(this,e,t,r)}findIndex(e){if(e==0)return um(0,e);if(e==this.size)return um(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let i=this.child(t),s=r+i.nodeSize;if(s>=e)return s==e?um(t+1,s):um(t,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return le.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new le(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return le.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new le(t||e,r)}static from(e){if(!e)return le.empty;if(e instanceof le)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new le([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}le.empty=new le([],0);const HT={index:0,offset:0};function um(n,e){return HT.index=n,HT.offset=e,HT}function Sg(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Sg(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Sg(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let pt=class mb{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Sg(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return mb.none;if(e instanceof mb)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};pt.none=[];class wg extends Error{}class de{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=PP(this.content,e+this.openStart,t);return r&&new de(r,this.openStart,this.openEnd)}removeBetween(e,t){return new de(OP(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return de.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new de(le.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new de(e,r,i)}}de.empty=new de(le.empty,0,0);function OP(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||s.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(OP(s.content,e-i-1,t-i-1)))}function PP(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=PP(a.content,e-s-1,t,a);return u&&n.replaceChild(i,a.copy(u))}function tW(n,e,t){if(t.openStart>n.depth)throw new wg("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new wg("Inconsistent open depths");return VP(n,e,t,0)}function VP(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=VP(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return pl(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=nW(t,n);return pl(s,BP(n,a,u,e,r))}else return pl(s,Ag(n,e,r))}function LP(n,e){if(!e.type.compatibleContent(n.type))throw new wg("Cannot join "+e.type.name+" onto "+n.type.name)}function gb(n,e,t){let r=n.node(t);return LP(r,e.node(t)),r}function dl(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function ff(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(dl(n.nodeAfter,r),s++));for(let u=s;u<a;u++)dl(i.child(u),r);e&&e.depth==t&&e.textOffset&&dl(e.nodeBefore,r)}function pl(n,e){return n.type.checkContent(e),n.copy(e)}function BP(n,e,t,r,i){let s=n.depth>i&&gb(n,e,i+1),a=r.depth>i&&gb(t,r,i+1),u=[];return ff(null,n,i,u),s&&a&&e.index(i)==t.index(i)?(LP(s,a),dl(pl(s,BP(n,e,t,r,i+1)),u)):(s&&dl(pl(s,Ag(n,e,i+1)),u),ff(e,t,i,u),a&&dl(pl(a,Ag(t,r,i+1)),u)),ff(r,null,i,u),new le(u)}function Ag(n,e,t){let r=[];if(ff(null,n,t,r),n.depth>t){let i=gb(n,e,t+1);dl(pl(i,Ag(n,e,t+1)),r)}return ff(e,null,t,r),new le(r)}function nW(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(le.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class zf{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return pt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Cg(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:u,offset:h}=a.content.findIndex(s),f=s-h;if(r.push(a,u,i+h),!f||(a=a.child(u),a.isText))break;s=f-1,i+=h+1}return new zf(t,r,s)}static resolveCached(e,t){let r=tI.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else tI.set(e,r=new rW);let i=r.elts[r.i]=zf.resolve(e,t);return r.i=(r.i+1)%iW,i}}class rW{constructor(){this.elts=[],this.i=0}}const iW=12,tI=new WeakMap;class Cg{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const sW=Object.create(null);class mi{constructor(e,t,r,i=pt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||le.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Sg(this.attrs,t||e.defaultAttrs||sW)&&pt.sameSet(this.marks,r||pt.none)}copy(e=null){return e==this.content?this:new mi(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new mi(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return de.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),f=i.node(a).content.cut(i.pos-u,s.pos-u);return new de(f,i.depth-a,s.depth-a)}replace(e,t,r){return tW(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return zf.resolveCached(this,e)}resolveNoCache(e){return zf.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),UP(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=le.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let h=i;h<s;h++)if(!this.type.allowsMarks(r.child(h).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=pt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!pt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=le.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}mi.prototype.text=void 0;class xg extends mi{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):UP(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new xg(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new xg(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function UP(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class xl{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new oW(e,t);if(r.next==null)return xl.empty;let i=zP(r);r.next&&r.err("Unexpected trailing text");let s=dW(fW(i));return pW(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,u){let h=a.matchFragment(e,r);if(h&&(!t||h.validEnd))return le.from(u.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:p,next:m}=a.next[f];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let v=s(m,u.concat(p));if(v)return v}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:u,next:h}=s.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||h.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}xl.empty=new xl(!0);class oW{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function zP(n){let e=[];do e.push(aW(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function aW(n){let e=[];do e.push(lW(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function lW(n){let e=hW(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=uW(n,e);else break;return e}function nI(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function uW(n,e){let t=nI(n),r=t;return n.eat(",")&&(n.next!="}"?r=nI(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function cW(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function hW(n){if(n.eat("(")){let e=zP(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=cW(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function fW(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,h){let f={term:h,to:u};return e[a].push(f),f}function i(a,u){a.forEach(h=>h.to=u)}function s(a,u){if(a.type=="choice")return a.exprs.reduce((h,f)=>h.concat(s(f,u)),[]);if(a.type=="seq")for(let h=0;;h++){let f=s(a.exprs[h],u);if(h==a.exprs.length-1)return f;i(f,u=t())}else if(a.type=="star"){let h=t();return r(u,h),i(s(a.expr,h),h),[r(h)]}else if(a.type=="plus"){let h=t();return i(s(a.expr,u),h),i(s(a.expr,h),h),[r(h)]}else{if(a.type=="opt")return[r(u)].concat(s(a.expr,u));if(a.type=="range"){let h=u;for(let f=0;f<a.min;f++){let p=t();i(s(a.expr,h),p),h=p}if(a.max==-1)i(s(a.expr,h),h);else for(let f=a.min;f<a.max;f++){let p=t();r(h,p),i(s(a.expr,h),p),h=p}return[r(h)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function jP(n,e){return e-n}function rI(n,e){let t=[];return r(e),t.sort(jP);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:u,to:h}=s[a];!u&&t.indexOf(h)==-1&&r(h)}}}function dW(n){let e=Object.create(null);return t(rI(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:h})=>{if(!u)return;let f;for(let p=0;p<i.length;p++)i[p][0]==u&&(f=i[p][1]);rI(n,h).forEach(p=>{f||i.push([u,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let s=e[r.join(",")]=new xl(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(jP);s.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return s}}function pW(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:h,next:f}=i.next[u];a.push(h.name),s&&!(h.isText||h.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function FP(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function HP(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function qP(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function $P(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new gW(n,r,e[r]);return t}let iI=class GP{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=$P(e,r.attrs),this.defaultAttrs=FP(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==xl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:HP(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new mi(this,this.computeAttrs(e),le.from(t),pt.setFrom(r))}createChecked(e=null,t,r){return t=le.from(t),this.checkContent(t),new mi(this,this.computeAttrs(e),t,pt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=le.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(le.empty,!0);return s?new mi(this,e,t.append(s),pt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){qP(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:pt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new GP(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function mW(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class gW{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?mW(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class qy{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=$P(e,i.attrs),this.excluded=null;let s=FP(this.attrs);this.instance=s?new pt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new pt(this,HP(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new qy(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){qP(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class KP{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Sn.from(e.nodes),t.marks=Sn.from(e.marks||{}),this.nodes=iI.compile(this.spec.nodes,this),this.marks=qy.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=xl.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?sI(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:sI(this,a.split(" "))}this.nodeFromJSON=i=>mi.fromJSON(this,i),this.markFromJSON=i=>pt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof iI){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new xg(r,r.defaultAttrs,e,pt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function sI(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let u in n.marks){let h=n.marks[u];(i=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=h)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function yW(n){return n.tag!=null}function vW(n){return n.style!=null}class Qo{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(yW(i))this.tags.push(i);else if(vW(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new aI(this,t,!1);return r.addAll(e,pt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new aI(this,t,!0);return r.addAll(e,pt.none,t.from,t.to),de.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(bW(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let h=a.getAttrs(t);if(h===!1)continue;a.attrs=h||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=lI(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=lI(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Qo(e,Qo.schemaRules(e)))}}const WP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},TW={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},YP={ol:!0,ul:!0},jf=1,yb=2,df=4;function oI(n,e,t){return e!=null?(e?jf:0)|(e==="full"?yb:0):n&&n.whitespace=="pre"?jf|yb:t&~df}class cm{constructor(e,t,r,i,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=pt.none,this.match=s||(a&df?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(le.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&jf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=le.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(le.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!WP.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class aI{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,a=oI(null,t.preserveWhitespace,0)|(r?df:0);i?s=new cm(i.type,i.attrs,pt.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new cm(null,null,pt.none,!0,null,a):s=new cm(e.schema.topNodeType,null,pt.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&yb?"full":this.localPreserveWS||(i.options&jf)>0,{schema:a}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let h=0;h<u.length;h++)h&&this.insertNode(a.linebreakReplacement.create(),t,!0),u[h]&&this.insertNode(a.text(u[h]),t,!/\S/.test(u[h]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=i.content[i.content.length-1],h=e.previousSibling;(!u||h&&h.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;YP.hasOwnProperty(a)&&this.parser.normalizeLists&&EW(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(h?h.ignore:TW.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let f,p=this.needsBlock;if(WP.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=h&&h.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),f&&this.sync(s),this.needsBlock=p}else{let f=this.readStyles(e,t);f&&this.addElementByRule(e,h,f,h.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let u=void 0;;){let h=this.parser.matchStyle(s,a,this,u);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(f=>!h.clearMark(f)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)u=h;else break}}return t}addElementByRule(e,t,r,i){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let h=this.enter(a,t.attrs||null,r,t.preserveWhitespace);h&&(s=!0,r=h)}else{let h=this.parser.schema.marks[t.mark];r=r.concat(h.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,r,!1));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,r),this.findAround(e,h,!1)}s&&this.sync(u)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];a!=u;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let a=this.open,u=0;a>=0;a--){let h=this.nodes[a],f=h.findWrapping(e);if(f&&(!i||i.length>f.length+u)&&(i=f,s=h,!f.length))break;if(h.solid){if(r)break;u+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)t=this.enterInner(i[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=pt.none;for(let u of i.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):uI(u.type,e.type))&&(a=u.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=oI(e,s,a.options);a.options&df&&a.content.length==0&&(u|=df);let h=pt.none;return r=r.filter(f=>(a.type?a.type.allowsMarkType(f.type):uI(f.type,e))?(h=f.addToSet(h),!1):!0),this.nodes.push(new cm(e,t,h,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=jf)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(u,h)=>{for(;u>=0;u--){let f=t[u];if(f==""){if(u==t.length-1||u==0)continue;for(;h>=s;h--)if(a(u-1,h))return!0;return!1}else{let p=h>0||h==0&&i?this.nodes[h].type:r&&h>=s?r.node(h-s).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;h--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function EW(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&YP.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function bW(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function lI(n){let e={};for(let t in n)e[t]=n[t];return e}function uI(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=u=>{s.push(u);for(let h=0;h<u.edgeCount;h++){let{type:f,next:p}=u.edge(h);if(f==e||s.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class Vl{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=qT(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let u=0,h=0;for(;u<s.length&&h<a.marks.length;){let f=a.marks[h];if(!this.marks[f.type.name]){h++;continue}if(!f.eq(s[u][0])||f.type.spec.spanning===!1)break;u++,h++}for(;u<s.length;)i=s.pop()[1];for(;h<a.marks.length;){let f=a.marks[h++],p=this.serializeMark(f,a.isInline,t);p&&(s.push([f,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=zm(qT(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&zm(qT(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return zm(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Vl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=cI(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return cI(e.marks)}}function cI(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function qT(n){return n.document||window.document}const hI=new WeakMap;function _W(n){let e=hI.get(n);return e===void 0&&hI.set(n,e=SW(n)),e}function SW(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function zm(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=_W(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let u,h=t?n.createElementNS(t,i):n.createElement(i),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let m in f)if(f[m]!=null){let v=m.indexOf(" ");v>0?h.setAttributeNS(m.slice(0,v),m.slice(v+1),f[m]):m=="style"&&h.style?h.style.cssText=f[m]:h.setAttribute(m,f[m])}}for(let m=p;m<e.length;m++){let v=e[m];if(v===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:E,contentDOM:b}=zm(n,v,t,r);if(h.appendChild(E),b){if(u)throw new RangeError("Multiple content holes");u=b}}}return{dom:h,contentDOM:u}}const QP=65535,XP=Math.pow(2,16);function wW(n,e){return n+e*XP}function fI(n){return n&QP}function AW(n){return(n-(n&QP))/XP}const JP=1,ZP=2,jm=4,eV=8;class vb{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&eV)>0}get deletedBefore(){return(this.delInfo&(JP|jm))>0}get deletedAfter(){return(this.delInfo&(ZP|jm))>0}get deletedAcross(){return(this.delInfo&jm)>0}}class yr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&yr.empty)return yr.empty}recover(e){let t=0,r=fI(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+AW(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let h=this.ranges[u]-(this.inverted?i:0);if(h>e)break;let f=this.ranges[u+s],p=this.ranges[u+a],m=h+f;if(e<=m){let v=f?e==h?-1:e==m?1:t:t,E=h+i+(v<0?0:p);if(r)return E;let b=e==(t<0?h:m)?null:wW(u/3,e-h),S=e==h?ZP:e==m?JP:jm;return(t<0?e!=h:e!=m)&&(S|=eV),new vb(E,S,b)}i+=p-f}return r?e+i:new vb(e+i,0,null)}touches(e,t){let r=0,i=fI(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let h=this.ranges[u]-(this.inverted?r:0);if(h>e)break;let f=this.ranges[u+s],p=h+f;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+a]-f}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?s:0),h=a+(this.inverted?0:s),f=this.ranges[i+t],p=this.ranges[i+r];e(u,u+f,h,h+p),s+=p-f}}invert(){return new yr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?yr.empty:new yr(e<0?[0,-e,0]:[0,0,e])}}yr.empty=new yr([]);class Ff{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Ff(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Ff;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],u=a.mapResult(e,t);if(u.recover!=null){let h=this.getMirror(s);if(h!=null&&h>s&&h<this.to){s=h,e=this._maps[h].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new vb(e,i,null)}}const $T=Object.create(null);class Bn{getMap(){return yr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=$T[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in $T)throw new RangeError("Duplicate use of step JSON ID "+e);return $T[e]=t,t.prototype.jsonID=e,t}}class en{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new en(e,null)}static fail(e){return new en(null,e)}static fromReplace(e,t,r,i){try{return en.ok(e.replace(t,r,i))}catch(s){if(s instanceof wg)return en.fail(s.message);throw s}}}function kS(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(kS(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return le.fromArray(r)}class Fo extends Bn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new de(kS(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return en.fromReplace(e,this.from,this.to,s)}invert(){return new ci(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Fo(t.pos,r.pos,this.mark)}merge(e){return e instanceof Fo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Fo(t.from,t.to,e.markFromJSON(t.mark))}}Bn.jsonID("addMark",Fo);class ci extends Bn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new de(kS(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return en.fromReplace(e,this.from,this.to,r)}invert(){return new Fo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ci(t.pos,r.pos,this.mark)}merge(e){return e instanceof ci&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ci(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ci(t.from,t.to,e.markFromJSON(t.mark))}}Bn.jsonID("removeMark",ci);class Ho extends Bn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return en.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return en.fromReplace(e,this.pos,this.pos+1,new de(le.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Ho(this.pos,t.marks[i]);return new Ho(this.pos,this.mark)}}return new Rl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ho(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ho(t.pos,e.markFromJSON(t.mark))}}Bn.jsonID("addNodeMark",Ho);class Rl extends Bn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return en.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return en.fromReplace(e,this.pos,this.pos+1,new de(le.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ho(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Rl(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Rl(t.pos,e.markFromJSON(t.mark))}}Bn.jsonID("removeNodeMark",Rl);class pn extends Bn{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Tb(e,this.from,this.to)?en.fail("Structure replace would overwrite content"):en.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new yr([this.from,this.to-this.from,this.slice.size])}invert(e){return new pn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new pn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof pn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?de.empty:new de(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new pn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?de.empty:new de(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new pn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new pn(t.from,t.to,de.fromJSON(e,t.slice),!!t.structure)}}Bn.jsonID("replace",pn);class mn extends Bn{constructor(e,t,r,i,s,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=u}apply(e){if(this.structure&&(Tb(e,this.from,this.gapFrom)||Tb(e,this.gapTo,this.to)))return en.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return en.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?en.fromReplace(e,this.from,this.to,r):en.fail("Content does not fit in gap")}getMap(){return new yr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new mn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new mn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new mn(t.from,t.to,t.gapFrom,t.gapTo,de.fromJSON(e,t.slice),t.insert,!!t.structure)}}Bn.jsonID("replaceAround",mn);function Tb(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function CW(n,e,t,r){let i=[],s=[],a,u;n.doc.nodesBetween(e,t,(h,f,p)=>{if(!h.isInline)return;let m=h.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let v=Math.max(f,e),E=Math.min(f+h.nodeSize,t),b=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(b)||(a&&a.to==v&&a.mark.eq(m[S])?a.to=E:i.push(a=new ci(v,E,m[S])));u&&u.to==v?u.to=E:s.push(u=new Fo(v,E,r))}}),i.forEach(h=>n.step(h)),s.forEach(h=>n.step(h))}function xW(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;s++;let h=null;if(r instanceof qy){let f=a.marks,p;for(;p=r.isInSet(f);)(h||(h=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(a.marks)&&(h=[r]):h=a.marks;if(h&&h.length){let f=Math.min(u+a.nodeSize,t);for(let p=0;p<h.length;p++){let m=h[p],v;for(let E=0;E<i.length;E++){let b=i[E];b.step==s-1&&m.eq(i[E].style)&&(v=b)}v?(v.to=f,v.step=s):i.push({style:m,from:Math.max(u,e),to:f,step:s})}}}),i.forEach(a=>n.step(new ci(a.from,a.to,a.style)))}function IS(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],u=e+1;for(let h=0;h<s.childCount;h++){let f=s.child(h),p=u+f.nodeSize,m=r.matchType(f.type);if(!m)a.push(new pn(u,p,de.empty));else{r=m;for(let v=0;v<f.marks.length;v++)t.allowsMarkType(f.marks[v].type)||n.step(new ci(u,p,f.marks[v]));if(i&&f.isText&&t.whitespace!="pre"){let v,E=/\r?\n|\r/g,b;for(;v=E.exec(f.text);)b||(b=new de(le.from(t.schema.text(" ",t.allowedMarks(f.marks))),0,0)),a.push(new pn(u+v.index,u+v.index+v[0].length,b))}}u=p}if(!r.validEnd){let h=r.fillBefore(le.empty,!0);n.replace(u,u,new de(h,0,0))}for(let h=a.length-1;h>=0;h--)n.step(a[h])}function RW(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Ac(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,i=0,s=0;;--r){let a=n.$from.node(r),u=n.$from.index(r)+i,h=n.$to.indexAfter(r)-s;if(r<n.depth&&a.canReplace(u,h,t))return r;if(r==0||a.type.spec.isolating||!RW(a,u,h))break;u&&(i=1),h<a.childCount&&(s=1)}return null}function kW(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),u=i.after(s+1),h=a,f=u,p=le.empty,m=0;for(let b=s,S=!1;b>t;b--)S||r.index(b)>0?(S=!0,p=le.from(r.node(b).copy(p)),m++):h--;let v=le.empty,E=0;for(let b=s,S=!1;b>t;b--)S||i.after(b+1)<i.end(b)?(S=!0,v=le.from(i.node(b).copy(v)),E++):f++;n.step(new mn(h,f,a,u,new de(p.append(v),m,E),p.size-m,!0))}function MS(n,e,t=null,r=n){let i=IW(n,e),s=i&&MW(r,e);return s?i.map(dI).concat({type:e,attrs:t}).concat(s.map(dI)):null}function dI(n){return{type:n,attrs:null}}function IW(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function MW(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let h=(a.length?a[a.length-1]:e).contentMatch;for(let f=r;h&&f<i;f++)h=h.matchType(t.child(f).type);return!h||!h.validEnd?null:a}function DW(n,e,t){let r=le.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=le.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new mn(i,s,i,s,new de(r,0,0),t.length,!0))}function NW(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let h=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,h)&&OW(n.doc,n.mapping.slice(s).map(u),r)){let f=null;if(r.schema.linebreakReplacement){let E=r.whitespace=="pre",b=!!r.contentMatch.matchType(r.schema.linebreakReplacement);E&&!b?f=!1:!E&&b&&(f=!0)}f===!1&&nV(n,a,u,s),IS(n,n.mapping.slice(s).map(u,1),r,void 0,f===null);let p=n.mapping.slice(s),m=p.map(u,1),v=p.map(u+a.nodeSize,1);return n.step(new mn(m,v,m+1,v-1,new de(le.from(r.create(h,null,a.marks)),0,0),1,!0)),f===!0&&tV(n,a,u,s),!1}})}function tV(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(i.text);){let h=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function nV(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function OW(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function PW(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new mn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new de(le.from(a),0,0),1,!0))}function Ls(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,p=t-2;f>s;f--,p--){let m=i.node(f),v=i.index(f);if(m.type.spec.isolating)return!1;let E=m.content.cutByIndex(v,m.childCount),b=r&&r[p+1];b&&(E=E.replaceChild(0,b.type.create(b.attrs)));let S=r&&r[p]||m;if(!m.canReplace(v+1,m.childCount)||!S.type.validContent(E))return!1}let u=i.indexAfter(s),h=r&&r[0];return i.node(s).canReplaceWith(u,u,h?h.type:i.node(s+1).type)}function VW(n,e,t=1,r){let i=n.doc.resolve(e),s=le.empty,a=le.empty;for(let u=i.depth,h=i.depth-t,f=t-1;u>h;u--,f--){s=le.from(i.node(u).copy(s));let p=r&&r[f];a=le.from(p?p.type.create(p.attrs,a):i.node(u).copy(a))}n.step(new pn(e,e,new de(s.append(a),t,t),!0))}function Ta(n,e){let t=n.resolve(e),r=t.index();return rV(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function LW(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function rV(n,e){return!!(n&&e&&!n.isLeaf&&LW(n,e))}function $y(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,a,u=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):t>0?(s=r.node(i+1),u++,a=r.node(i).maybeChild(u)):(s=r.node(i).maybeChild(u-1),a=r.node(i+1)),s&&!s.isTextblock&&rV(s,a)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function BW(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",m=!!a.contentMatch.matchType(i);p&&!m?r=!1:!p&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);nV(n,p.node(),p.before(),u)}a.inlineContent&&IS(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let h=n.mapping.slice(u),f=h.map(e-t);if(n.step(new pn(f,h.map(e+t,-1),de.empty,!0)),r===!0){let p=n.doc.resolve(f);tV(n,p.node(),p.before(),n.steps.length)}return n}function UW(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function iV(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,h=r.index(a)+(u>0?1:0),f=r.node(a),p=!1;if(s==1)p=f.canReplace(h,h,i);else{let m=f.contentMatchAt(h).findWrapping(i.firstChild.type);p=m&&f.canReplaceWith(h,h,m[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function Gy(n,e,t=e,r=de.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return sV(i,s,r)?new pn(e,t,r):new zW(i,s,r).fit()}function sV(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class zW{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=le.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=le.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,u=i.depth;for(;a&&u&&s.childCount==1;)s=s.firstChild.content,a--,u--;let h=new de(s,a,u);return e>-1?new mn(r.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||r.pos!=this.$to.pos?new pn(r.pos,i.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=GT(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:h,match:f}=this.frontier[u],p,m=null;if(t==1&&(a?f.matchType(a.type)||(m=f.fillBefore(le.from(a),!1)):s&&h.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:m};if(t==2&&a&&(p=f.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=GT(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new de(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=GT(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new de(Yh(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new de(Yh(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let a=this.unplaced,u=r?r.content:a.content,h=a.openStart-e,f=0,p=[],{match:m,type:v}=this.frontier[t];if(i){for(let S=0;S<i.childCount;S++)p.push(i.child(S));m=m.matchFragment(i)}let E=u.size+e-(a.content.size-a.openEnd);for(;f<u.childCount;){let S=u.child(f),w=m.matchType(S.type);if(!w)break;f++,(f>1||h==0||S.content.size)&&(m=w,p.push(oV(S.mark(v.allowedMarks(S.marks)),f==1?h:0,f==u.childCount?E:-1)))}let b=f==u.childCount;b||(E=-1),this.placed=Qh(this.placed,t,le.from(p)),this.frontier[t].match=m,b&&E<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=u;S<E;S++){let x=w.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),w=x.content}this.unplaced=b?e==0?de.empty:new de(Yh(a.content,e-1,1),e-1,E<0?a.openEnd:e-1):new de(Yh(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!KT(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=KT(e,t,i,r,s);if(a){for(let u=t-1;u>=0;u--){let{match:h,type:f}=this.frontier[u],p=KT(e,u,f,h,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Qh(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Qh(this.placed,this.depth,le.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(le.empty,!0);t.childCount&&(this.placed=Qh(this.placed,this.frontier.length,t))}}function Yh(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Yh(n.firstChild.content,e-1,t)))}function Qh(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Qh(n.lastChild.content,e-1,t)))}function GT(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function oV(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,oV(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(le.empty,!0)))),n.copy(r)}function KT(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,a);return u&&!jW(t,s.content,a)?u:null}function jW(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function FW(n){return n.spec.defining||n.spec.definingForContent}function HW(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(sV(i,s,r))return n.step(new pn(e,t,r));let a=lV(i,s);a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let v=i.depth,E=i.pos-1;v>0;v--,E--){let b=i.node(v).type.spec;if(b.defining||b.definingAsContext||b.isolating)break;a.indexOf(v)>-1?u=v:i.before(v)==E&&a.splice(1,0,-v)}let h=a.indexOf(u),f=[],p=r.openStart;for(let v=r.content,E=0;;E++){let b=v.firstChild;if(f.push(b),E==r.openStart)break;v=b.content}for(let v=p-1;v>=0;v--){let E=f[v],b=FW(E.type);if(b&&!E.sameMarkup(i.node(Math.abs(u)-1)))p=v;else if(b||!E.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let E=(v+p+1)%(r.openStart+1),b=f[E];if(b)for(let S=0;S<a.length;S++){let w=a[(S+h)%a.length],x=!0;w<0&&(x=!1,w=-w);let N=i.node(w-1),V=i.index(w-1);if(N.canReplaceWith(V,V,b.type,b.marks))return n.replace(i.before(w),x?s.after(w):t,new de(aV(r.content,0,r.openStart,E),E,r.openEnd))}}let m=n.steps.length;for(let v=a.length-1;v>=0&&(n.replace(e,t,r),!(n.steps.length>m));v--){let E=a[v];E<0||(e=i.before(E),t=s.after(E))}}function aV(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(aV(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(le.empty,!0))}return n}function qW(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=UW(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new de(le.from(r),0,0))}function $W(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=lV(r,i);for(let a=0;a<s.length;a++){let u=s[a],h=a==s.length-1;if(h&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(h||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function lV(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class Ju extends Bn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return en.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return en.fromReplace(e,this.pos,this.pos+1,new de(le.from(i),0,t.isLeaf?0:1))}getMap(){return yr.empty}invert(e){return new Ju(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ju(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ju(t.pos,t.attr,t.value)}}Bn.jsonID("attr",Ju);class Hf extends Bn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return en.ok(r)}getMap(){return yr.empty}invert(e){return new Hf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Hf(t.attr,t.value)}}Bn.jsonID("docAttr",Hf);let oc=class extends Error{};oc=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};oc.prototype=Object.create(Error.prototype);oc.prototype.constructor=oc;oc.prototype.name="TransformError";class uV{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ff}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new oc(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),t=i.map(t,-1)),i.forEach((s,a,u,h)=>{e=Math.min(e,u),t=Math.max(t,h)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=de.empty){let i=Gy(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new de(le.from(r),0,0))}delete(e,t){return this.replace(e,t,de.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return HW(this,e,t,r),this}replaceRangeWith(e,t,r){return qW(this,e,t,r),this}deleteRange(e,t){return $W(this,e,t),this}lift(e,t){return kW(this,e,t),this}join(e,t=1){return BW(this,e,t),this}wrap(e,t){return DW(this,e,t),this}setBlockType(e,t=e,r,i=null){return NW(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return PW(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Ju(e,t,r)),this}setDocAttribute(e,t){return this.step(new Hf(e,t)),this}addNodeMark(e,t){return this.step(new Ho(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof pt)t.isInSet(r.marks)&&this.step(new Rl(e,t));else{let i=r.marks,s,a=[];for(;s=t.isInSet(i);)a.push(new Rl(e,s)),i=s.removeFromSet(i);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return VW(this,e,t,r),this}addMark(e,t,r){return CW(this,e,t,r),this}removeMark(e,t,r){return xW(this,e,t,r),this}clearIncompatible(e,t,r){return IS(this,e,t,r),this}}const WT=Object.create(null);class ze{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new GW(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=de.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:h,$to:f}=a[u],p=e.mapping.slice(s);e.replaceRange(p.map(h.pos),p.map(f.pos),u?de.empty:t),u==0&&gI(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:u}=i[s],h=e.mapping.slice(r),f=h.map(a.pos),p=h.map(u.pos);s?e.deleteRange(f,p):(e.replaceRangeWith(f,p,t),gI(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Me(e):Pu(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?Pu(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):Pu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Er(e.node(0))}static atStart(e){return Pu(e,e,0,0,1)||new Er(e)}static atEnd(e){return Pu(e,e,e.content.size,e.childCount,-1)||new Er(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=WT[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in WT)throw new RangeError("Duplicate use of selection JSON ID "+e);return WT[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Me.between(this.$anchor,this.$head).getBookmark()}}ze.prototype.visible=!0;class GW{constructor(e,t){this.$from=e,this.$to=t}}let pI=!1;function mI(n){!pI&&!n.parent.inlineContent&&(pI=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Me extends ze{constructor(e,t=e){mI(e),mI(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ze.near(r);let i=e.resolve(t.map(this.anchor));return new Me(i.parent.inlineContent?i:r,r)}replace(e,t=de.empty){if(super.replace(e,t),t==de.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Me&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ky(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Me(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=ze.findFrom(t,r,!0)||ze.findFrom(t,-r,!0);if(s)t=s.$head;else return ze.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(ze.findFrom(e,-r,!0)||ze.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Me(e,t)}}ze.jsonID("text",Me);class Ky{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Ky(e.map(this.anchor),e.map(this.head))}resolve(e){return Me.between(e.resolve(this.anchor),e.resolve(this.head))}}class Se extends ze{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?ze.near(s):new Se(s)}content(){return new de(le.from(this.node),0,0)}eq(e){return e instanceof Se&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new DS(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Se(e.resolve(t.anchor))}static create(e,t){return new Se(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Se.prototype.visible=!1;ze.jsonID("node",Se);class DS{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Ky(r,r):new DS(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Se.isSelectable(r)?new Se(t):ze.near(t)}}class Er extends ze{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=de.empty){if(t==de.empty){e.delete(0,e.doc.content.size);let r=ze.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Er(e)}map(e){return new Er(e)}eq(e){return e instanceof Er}getBookmark(){return KW}}ze.jsonID("all",Er);const KW={map(){return this},resolve(n){return new Er(n)}};function Pu(n,e,t,r,i,s=!1){if(e.inlineContent)return Me.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!s&&Se.isSelectable(u))return Se.create(n,t-(i<0?u.nodeSize:0))}else{let h=Pu(n,u,t+i,i<0?u.childCount:0,i,s);if(h)return h}t+=u.nodeSize*i}return null}function gI(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof pn||i instanceof mn))return;let s=n.mapping.maps[r],a;s.forEach((u,h,f,p)=>{a==null&&(a=p)}),n.setSelection(ze.near(n.doc.resolve(a),t))}const yI=1,hm=2,vI=4;class WW extends uV{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|yI)&~hm,this.storedMarks=null,this}get selectionSet(){return(this.updated&yI)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=hm,this}ensureMarks(e){return pt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&hm)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~hm,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||pt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(ze.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=vI,this}get scrolledIntoView(){return(this.updated&vI)>0}}function TI(n,e){return!e||!n?n:n.bind(e)}class Xh{constructor(e,t,r){this.name=e,this.init=TI(t.init,r),this.apply=TI(t.apply,r)}}const YW=[new Xh("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Xh("selection",{init(n,e){return n.selection||ze.atStart(e.doc)},apply(n){return n.selection}}),new Xh("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Xh("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class YT{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=YW.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Xh(r.key,r.spec.state,r))})}}class qu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let h=i?i[a].n:0,f=i?i[a].state:this,p=h<t.length&&u.spec.appendTransaction.call(u,h?t.slice(h):t,f,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new qu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new WW(this)}static create(e){let t=new YT(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new qu(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new YT(this.schema,e.plugins),r=t.fields,i=new qu(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new YT(e.schema,e.plugins),s=new qu(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=mi.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=ze.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let h=r[u],f=h.spec.state;if(h.key==a.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){s[a.name]=f.fromJSON.call(h,e,t[u],s);return}}s[a.name]=a.init(e,s)}}),s}}function cV(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=cV(i,e,{})),t[r]=i}return t}class xt{constructor(e){this.spec=e,this.props={},e.props&&cV(e.props,this,this.props),this.key=e.key?e.key.key:hV("plugin")}getState(e){return e[this.key]}}const QT=Object.create(null);function hV(n){return n in QT?n+"$"+ ++QT[n]:(QT[n]=0,n+"$")}class ln{constructor(e="key"){this.key=hV(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const NS=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function fV(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const dV=(n,e,t)=>{let r=fV(n,t);if(!r)return!1;let i=OS(r);if(!i){let a=r.blockRange(),u=a&&Ac(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(_V(n,i,e,-1))return!0;if(r.parent.content.size==0&&(ac(s,"end")||Se.isSelectable(s)))for(let a=r.depth;;a--){let u=Gy(n.doc,r.before(a),r.after(a),de.empty);if(u&&u.slice.size<u.to-u.from){if(e){let h=n.tr.step(u);h.setSelection(ac(s,"end")?ze.findFrom(h.doc.resolve(h.mapping.map(i.pos,-1)),-1):Se.create(h.doc,i.pos-s.nodeSize)),e(h.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},QW=(n,e,t)=>{let r=fV(n,t);if(!r)return!1;let i=OS(r);return i?pV(n,i,e):!1},XW=(n,e,t)=>{let r=gV(n,t);if(!r)return!1;let i=PS(r);return i?pV(n,i,e):!1};function pV(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=e.nodeAfter,u=a,h=e.pos+1;for(;!u.isTextblock;h++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let f=Gy(n.doc,s,h,de.empty);if(!f||f.from!=s||f instanceof pn&&f.slice.size>=h-s)return!1;if(t){let p=n.tr.step(f);p.setSelection(Me.create(p.doc,s)),t(p.scrollIntoView())}return!0}function ac(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const mV=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=OS(r)}let a=s&&s.nodeBefore;return!a||!Se.isSelectable(a)?!1:(e&&e(n.tr.setSelection(Se.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function OS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function gV(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const yV=(n,e,t)=>{let r=gV(n,t);if(!r)return!1;let i=PS(r);if(!i)return!1;let s=i.nodeAfter;if(_V(n,i,e,1))return!0;if(r.parent.content.size==0&&(ac(s,"start")||Se.isSelectable(s))){let a=Gy(n.doc,r.before(),r.after(),de.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(ac(s,"start")?ze.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):Se.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},vV=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=PS(r)}let a=s&&s.nodeAfter;return!a||!Se.isSelectable(a)?!1:(e&&e(n.tr.setSelection(Se.create(n.doc,s.pos)).scrollIntoView()),!0)};function PS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const JW=(n,e)=>{let t=n.selection,r=t instanceof Se,i;if(r){if(t.node.isTextblock||!Ta(n.doc,t.from))return!1;i=t.from}else if(i=$y(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(Se.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},ZW=(n,e)=>{let t=n.selection,r;if(t instanceof Se){if(t.node.isTextblock||!Ta(n.doc,t.to))return!1;r=t.to}else if(r=$y(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},eY=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Ac(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},TV=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function VS(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const tY=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=VS(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let u=t.after(),h=n.tr.replaceWith(u,u,a.createAndFill());h.setSelection(ze.near(h.doc.resolve(u),1)),e(h.scrollIntoView())}return!0},EV=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Er||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=VS(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,s.createAndFill());u.setSelection(Me.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},bV=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Ls(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Ac(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function nY(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Se&&e.selection.node.isBlock)return!r.parentOffset||!Ls(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,u,h=!1,f=!1;for(let E=r.depth;;E--)if(r.node(E).isBlock){h=r.end(E)==r.pos+(r.depth-E),f=r.start(E)==r.pos-(r.depth-E),u=VS(r.node(E-1).contentMatchAt(r.indexAfter(E-1))),s.unshift(h&&u?{type:u}:null),a=E;break}else{if(E==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof Me||e.selection instanceof Er)&&p.deleteSelection();let m=p.mapping.map(r.pos),v=Ls(p.doc,m,s.length,s);if(v||(s[0]=u?{type:u}:null,v=Ls(p.doc,m,s.length,s)),!v)return!1;if(p.split(m,s.length,s),!h&&f&&r.node(a).type!=u){let E=p.mapping.map(r.before(a)),b=p.doc.resolve(E);u&&r.node(a-1).canReplaceWith(b.index(),b.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(a)),u)}return t&&t(p.scrollIntoView()),!0}}const rY=nY(),iY=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(Se.create(n.doc,i))),!0)};function sY(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ta(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function _V(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,a,u,h=i.type.spec.isolating||s.type.spec.isolating;if(!h&&sY(n,e,t))return!0;let f=!h&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(u=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&u.matchType(a[0]||s.type).validEnd){if(t){let E=e.pos+s.nodeSize,b=le.empty;for(let x=a.length-1;x>=0;x--)b=le.from(a[x].create(null,b));b=le.from(i.copy(b));let S=n.tr.step(new mn(e.pos-1,E,e.pos,E,new de(b,1,0),a.length,!0)),w=S.doc.resolve(E+2*a.length);w.nodeAfter&&w.nodeAfter.type==i.type&&Ta(S.doc,w.pos)&&S.join(w.pos),t(S.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&h?null:ze.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),v=m&&Ac(m);if(v!=null&&v>=e.depth)return t&&t(n.tr.lift(m,v).scrollIntoView()),!0;if(f&&ac(s,"start",!0)&&ac(i,"end")){let E=i,b=[];for(;b.push(E),!E.isTextblock;)E=E.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(E.canReplace(E.childCount,E.childCount,S.content)){if(t){let x=le.empty;for(let V=b.length-1;V>=0;V--)x=le.from(b[V].copy(x));let N=n.tr.step(new mn(e.pos-b.length,e.pos+s.nodeSize,e.pos+w,e.pos+s.nodeSize-w,new de(x,b.length,0),0,!0));t(N.scrollIntoView())}return!0}}return!1}function SV(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Me.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const oY=SV(-1),aY=SV(1);function lY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),u=a&&MS(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function EI(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[s];t.doc.nodesBetween(a,u,(h,f)=>{if(i)return!1;if(!(!h.isTextblock||h.hasMarkup(n,e)))if(h.type==n)i=!0;else{let p=t.doc.resolve(f),m=p.index();i=p.parent.canReplaceWith(m,m+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:h}}=t.selection.ranges[a];s.setBlockType(u,h,n,e)}r(s.scrollIntoView())}return!0}}function LS(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}LS(NS,dV,mV);LS(NS,yV,vV);LS(TV,EV,bV,rY);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function uY(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s);if(!a)return!1;let u=r?t.tr:null;return cY(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function cY(n,e,t,r=null){let i=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=a.resolve(e.start-2);s=new Cg(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new Cg(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=MS(s,t,r,e);return u?(n&&hY(n,e,u,i,t),!0):!1}function hY(n,e,t,r,i){let s=le.empty;for(let p=t.length-1;p>=0;p--)s=le.from(t[p].type.create(t[p].attrs,s));n.step(new mn(e.start-(r?2:0),e.end,e.start,e.end,new de(s,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==i&&(a=p+1);let u=t.length-a,h=e.start+t.length-(r?2:0),f=e.parent;for(let p=e.startIndex,m=e.endIndex,v=!0;p<m;p++,v=!1)!v&&Ls(n.doc,h,u)&&(n.split(h,u),h+=2*u),h+=f.child(p).nodeSize;return n}function fY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?dY(e,t,n,s):pY(e,t,s):!0:!1}}function dY(n,e,t,r){let i=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new mn(s-1,a,s,a,new de(le.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Cg(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const u=Ac(r);if(u==null)return!1;i.lift(r,u);let h=i.doc.resolve(i.mapping.map(s,-1)-1);return Ta(i.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&i.join(h.pos),e(i.scrollIntoView()),!0}function pY(n,e,t){let r=n.tr,i=t.parent;for(let E=t.end,b=t.endIndex-1,S=t.startIndex;b>S;b--)E-=i.child(b).nodeSize,r.delete(E-1,E+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,h=t.endIndex==i.childCount,f=s.node(-1),p=s.index(-1);if(!f.canReplace(p+(u?0:1),p+1,a.content.append(h?le.empty:le.from(i))))return!1;let m=s.pos,v=m+a.nodeSize;return r.step(new mn(m-(u?1:0),v+(h?1:0),m+1,v-1,new de((u?le.empty:le.from(i.copy(le.empty))).append(h?le.empty:le.from(i.copy(le.empty))),u?0:1,h?0:1),u?0:1)),e(r.scrollIntoView()),!0}function mY(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let u=s.parent,h=u.child(a-1);if(h.type!=n)return!1;if(t){let f=h.lastChild&&h.lastChild.type==u.type,p=le.from(f?n.create():null),m=new de(le.from(n.create(null,le.from(u.type.create(null,p)))),f?3:1,0),v=s.start,E=s.end;t(e.tr.step(new mn(v-(f?3:1),E,v,E,m,1,!0)).scrollIntoView())}return!0}}const Cn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},lc=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Eb=null;const ks=function(n,e,t){let r=Eb||(Eb=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},gY=function(){Eb=null},kl=function(n,e,t,r){return t&&(bI(n,e,t,r,-1)||bI(n,e,t,r,1))},yY=/^(img|br|input|textarea|hr)$/i;function bI(n,e,t,r,i){for(var s;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Ur(n))){let a=n.parentNode;if(!a||a.nodeType!=1||vd(n)||yY.test(n.nodeName)||n.contentEditable=="false")return!1;e=Cn(n)+(i<0?0:1),n=a}else if(n.nodeType==1){let a=n.childNodes[e+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else n=a,e=i<0?Ur(n):0}else return!1}}function Ur(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function vY(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Ur(n)}else if(n.parentNode&&!vd(n))e=Cn(n),n=n.parentNode;else return null}}function TY(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!vd(n))e=Cn(n)+1,n=n.parentNode;else return null}}function EY(n,e,t){for(let r=e==0,i=e==Ur(n);r||i;){if(n==t)return!0;let s=Cn(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==Ur(n)}}function vd(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Wy=function(n){return n.focusNode&&kl(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function rl(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function bY(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function _Y(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Ur(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Ur(r.startContainer),r.startOffset)}}}const ts=typeof navigator<"u"?navigator:null,_I=typeof document<"u"?document:null,Ea=ts&&ts.userAgent||"",bb=/Edge\/(\d+)/.exec(Ea),wV=/MSIE \d/.exec(Ea),_b=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ea),sr=!!(wV||_b||bb),Xo=wV?document.documentMode:_b?+_b[1]:bb?+bb[1]:0,Fr=!sr&&/gecko\/(\d+)/i.test(Ea);Fr&&+(/Firefox\/(\d+)/.exec(Ea)||[0,0])[1];const Sb=!sr&&/Chrome\/(\d+)/.exec(Ea),kn=!!Sb,AV=Sb?+Sb[1]:0,Ln=!sr&&!!ts&&/Apple Computer/.test(ts.vendor),uc=Ln&&(/Mobile\/\w+/.test(Ea)||!!ts&&ts.maxTouchPoints>2),Br=uc||(ts?/Mac/.test(ts.platform):!1),CV=ts?/Win/.test(ts.platform):!1,Ns=/Android \d/.test(Ea),Td=!!_I&&"webkitFontSmoothing"in _I.documentElement.style,SY=Td?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function wY(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function As(n,e){return typeof n=="number"?n:n[e]}function AY(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function SI(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=lc(a);continue}let u=a,h=u==s.body,f=h?wY(s):AY(u),p=0,m=0;if(e.top<f.top+As(r,"top")?m=-(f.top-e.top+As(i,"top")):e.bottom>f.bottom-As(r,"bottom")&&(m=e.bottom-e.top>f.bottom-f.top?e.top+As(i,"top")-f.top:e.bottom-f.bottom+As(i,"bottom")),e.left<f.left+As(r,"left")?p=-(f.left-e.left+As(i,"left")):e.right>f.right-As(r,"right")&&(p=e.right-f.right+As(i,"right")),p||m)if(h)s.defaultView.scrollBy(p,m);else{let E=u.scrollLeft,b=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let S=u.scrollLeft-E,w=u.scrollTop-b;e={left:e.left-S,top:e.top-w,right:e.right-S,bottom:e.bottom-w}}let v=h?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(v))break;a=v=="absolute"?a.offsetParent:lc(a)}}function CY(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(s,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let h=u.getBoundingClientRect();if(h.top>=t-20){r=u,i=h.top;break}}return{refDOM:r,refTop:i,stack:xV(n.dom)}}function xV(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=lc(r));return e}function xY({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;RV(t,r==0?0:r-e)}function RV(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ru=null;function RY(n){if(n.setActive)return n.setActive();if(Ru)return n.focus(Ru);let e=xV(n);n.focus(Ru==null?{get preventScroll(){return Ru={preventScroll:!0},!0}}:void 0),Ru||(Ru=!1,RV(e,0))}function kV(n,e){let t,r=2e8,i,s=0,a=e.top,u=e.top,h,f;for(let p=n.firstChild,m=0;p;p=p.nextSibling,m++){let v;if(p.nodeType==1)v=p.getClientRects();else if(p.nodeType==3)v=ks(p).getClientRects();else continue;for(let E=0;E<v.length;E++){let b=v[E];if(b.top<=a&&b.bottom>=u){a=Math.max(b.bottom,a),u=Math.min(b.top,u);let S=b.left>e.left?b.left-e.left:b.right<e.left?e.left-b.right:0;if(S<r){t=p,r=S,i=S&&t.nodeType==3?{left:b.right<e.left?b.right:b.left,top:e.top}:e,p.nodeType==1&&S&&(s=m+(e.left>=(b.left+b.right)/2?1:0));continue}}else b.top>e.top&&!h&&b.left<=e.left&&b.right>=e.left&&(h=p,f={left:Math.max(b.left,Math.min(b.right,e.left)),top:b.top});!t&&(e.left>=b.right&&e.top>=b.top||e.left>=b.left&&e.top>=b.bottom)&&(s=m+1)}}return!t&&h&&(t=h,i=f,r=0),t&&t.nodeType==3?kY(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:kV(t,i)}function kY(n,e){let t=n.nodeValue.length,r=document.createRange(),i;for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let a=Mo(r,1);if(a.top!=a.bottom&&BS(e,a)){i={node:n,offset:s+(e.left>=(a.left+a.right)/2?1:0)};break}}return r.detach(),i||{node:n,offset:0}}function BS(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function IY(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function MY(n,e,t){let{node:r,offset:i}=kV(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function DY(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let u=n.docView.nearestDesc(s,!0),h;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((h=u.dom.getBoundingClientRect()).width||h.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!a&&h.left>r.left||h.top>r.top?i=u.posBefore:(!a&&h.right<r.left||h.bottom<r.top)&&(i=u.posAfter),a=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(h.top+h.bottom)/2:r.left<(h.left+h.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function IV(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let u=a.getClientRects();for(let h=0;h<u.length;h++){let f=u[h];if(BS(e,f))return IV(a,e,f)}}if((s=(s+1)%r)==i)break}return n}function NY(n,e){let t=n.dom.ownerDocument,r,i=0,s=_Y(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let f=n.dom.getBoundingClientRect();if(!BS(e,f)||(a=IV(n.dom,e,f),!a))return null}if(Ln)for(let f=a;r&&f;f=lc(f))f.draggable&&(r=void 0);if(a=IY(a,e),r){if(Fr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let f;Td&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=DY(n,r,i,e))}u==null&&(u=MY(n,a,e));let h=n.docView.nearestDesc(a,!0);return{pos:u,inside:h?h.posAtStart-h.border:-1}}function wI(n){return n.top<n.bottom||n.left<n.right}function Mo(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(wI(r))return r}return Array.prototype.find.call(t,wI)||n.getBoundingClientRect()}const OY=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function MV(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=Td||Fr;if(r.nodeType==3)if(a&&(OY.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let h=Mo(ks(r,i,i),t);if(Fr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=Mo(ks(r,i-1,i-1),-1);if(f.top==h.top){let p=Mo(ks(r,i,i+1),-1);if(p.top!=h.top)return Bh(p,p.left<f.left)}}return h}else{let h=i,f=i,p=t<0?1:-1;return t<0&&!i?(f++,p=-1):t>=0&&i==r.nodeValue.length?(h--,p=1):t<0?h--:f++,Bh(Mo(ks(r,h,f),p),p<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==Ur(r))){let h=r.childNodes[i-1];if(h.nodeType==1)return XT(h.getBoundingClientRect(),!1)}if(s==null&&i<Ur(r)){let h=r.childNodes[i];if(h.nodeType==1)return XT(h.getBoundingClientRect(),!0)}return XT(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==Ur(r))){let h=r.childNodes[i-1],f=h.nodeType==3?ks(h,Ur(h)-(a?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(f)return Bh(Mo(f,1),!1)}if(s==null&&i<Ur(r)){let h=r.childNodes[i];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let f=h?h.nodeType==3?ks(h,0,a?0:1):h.nodeType==1?h:null:null;if(f)return Bh(Mo(f,-1),!0)}return Bh(Mo(r.nodeType==3?ks(r):r,-t),t>=0)}function Bh(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function XT(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function DV(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function PY(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return DV(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let a=MV(n,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=ks(u,0,u.nodeValue.length).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const VY=/[\u0590-\u08ac]/;function LY(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,u=n.domSelection();return u?!VY.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?s:a:DV(n,e,()=>{let{focusNode:h,focusOffset:f,anchorNode:p,anchorOffset:m}=n.domSelectionRange(),v=u.caretBidiLevel;u.modify("move",t,"character");let E=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:b,focusOffset:S}=n.domSelectionRange(),w=b&&!E.contains(b.nodeType==1?b:b.parentNode)||h==b&&f==S;try{u.collapse(p,m),h&&(h!=p||f!=m)&&u.extend&&u.extend(h,f)}catch{}return v!=null&&(u.caretBidiLevel=v),w}):r.pos==r.start()||r.pos==r.end()}let AI=null,CI=null,xI=!1;function BY(n,e,t){return AI==e&&CI==t?xI:(AI=e,CI=t,xI=t=="up"||t=="down"?PY(n,e,t):LY(n,e,t))}const Hr=0,RI=1,ll=2,ns=3;class Ed{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Hr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Cn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let u=i.children[a];if(u.size){i=u;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],u=s+a.size;if(u>e||a instanceof OV){i=e-s;break}s=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof NV&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Cn(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Cn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,u=0;;u++){let h=this.children[u],f=a+h.size;if(i==-1&&e<=f){let p=a+h.border;if(e>=p&&t<=f-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,p);e=a;for(let m=u;m>0;m--){let v=this.children[m-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){i=Cn(v.dom)+1;break}e-=v.size}i==-1&&(i=0)}if(i>-1&&(f>t||u==this.children.length-1)){t=f;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){s=Cn(m.dom);break}t+=m.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=f}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let E=0,b=0;E<this.children.length;E++){let S=this.children[E],w=b+S.size;if(s>b&&a<w)return S.setSelection(e-b-S.border,t-b-S.border,r,i);b=w}let u=this.domFromPos(e,e?-1:1),h=t==e?u:this.domFromPos(t,t?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Fr||Ln)&&e==t){let{node:E,offset:b}=u;if(E.nodeType==3){if(m=!!(b&&E.nodeValue[b-1]==`
`),m&&b==E.nodeValue.length)for(let S=E,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(u=h={node:w.parentNode,offset:Cn(w)+1});break}let x=S.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let S=E.childNodes[b-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Fr&&p.focusNode&&p.focusNode!=h.node&&p.focusNode.nodeType==1){let E=p.focusNode.childNodes[p.focusOffset];E&&E.contentEditable=="false"&&(i=!0)}if(!(i||m&&Ln)&&kl(u.node,u.offset,p.anchorNode,p.anchorOffset)&&kl(h.node,h.offset,p.focusNode,p.focusOffset))return;let v=!1;if((f.extend||e==t)&&!(m&&Fr)){f.collapse(u.node,u.offset);try{e!=t&&f.extend(h.node,h.offset),v=!0}catch{}}if(!v){if(e>t){let b=u;u=h,h=b}let E=document.createRange();E.setEnd(h.node,h.offset),E.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(E)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+s.border,h=a-s.border;if(e>=u&&t<=h){this.dirty=e==r||t==a?ll:RI,e==u&&t==h&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ns:s.markDirty(e-u,t-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ll:ns}r=a}this.dirty=ll}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?ll:RI;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class NV extends Ed{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==Hr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class UY extends Ed{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Il extends Ed{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=Vl.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Il(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&ns||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ns&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Hr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Hr}}slice(e,t,r){let i=Il.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=Ab(s,t,a,r)),e>0&&(s=Ab(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Jo extends Ed{constructor(e,t,r,i,s,a,u,h,f){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,s,a){let u=s.nodeViews[t.type.name],h,f=u&&u(t,s,()=>{if(!h)return a;if(h.parent)return h.parent.posBeforeChild(h)},r,i),p=f&&f.dom,m=f&&f.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Vl.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!m&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let v=p;return p=LV(p,r,t),f?h=new zY(e,t,r,i,p,m||null,v,f,s,a+1):t.isText?new Yy(e,t,r,i,p,v,s):new Jo(e,t,r,i,p,m||null,v,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>le.empty)}return e}matchesNode(e,t,r){return this.dirty==Hr&&e.eq(this.node)&&Rg(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,u=s&&s.pos<0,h=new FY(this,a&&a.node,e);$Y(this.node,this.innerDeco,(f,p,m)=>{f.spec.marks?h.syncToMarks(f.spec.marks,r,e,p):f.type.side>=0&&!m&&h.syncToMarks(p==this.node.childCount?pt.none:this.node.child(p).marks,r,e,p),h.placeWidget(f,e,i)},(f,p,m,v)=>{h.syncToMarks(f.marks,r,e,v);let E;h.findNodeMatch(f,p,m,v)||u&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(E=h.findIndexWithChild(s.node))>-1&&h.updateNodeAt(f,p,m,E,e)||h.updateNextNode(f,p,m,e,v,i)||h.addNode(f,p,m,e,i),i+=f.nodeSize}),h.syncToMarks([],r,e,0),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==ll)&&(a&&this.protectLocalComposition(e,a),PV(this.contentDOM,this.children,e),uc&&GY(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Me)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,u=KY(this.node.content,a,r-t,i-t);return u<0?null:{node:s,pos:u,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new UY(this,s,t,i);e.input.compositionNodes.push(a),this.children=Ab(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==ns||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Hr}updateOuterDeco(e){if(Rg(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=VV(this.dom,this.nodeDOM,wb(this.outerDeco,this.node,t),wb(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function kI(n,e,t,r,i){LV(r,e,n);let s=new Jo(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Yy extends Jo{constructor(e,t,r,i,s,a,u){super(e,t,r,i,s,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==ns||this.dirty!=Hr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Hr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Hr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new Yy(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ns)}get domAtom(){return!1}isText(e){return this.node.text==e}}class OV extends Ed{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Hr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class zY extends Jo{constructor(e,t,r,i,s,a,u,h,f,p){super(e,t,r,i,s,a,u,f,p),this.spec=h}update(e,t,r,i){if(this.dirty==ns)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function PV(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=II(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof Il){let h=r?r.previousSibling:n.lastChild;PV(a.contentDOM,a.children,t),r=h?h.nextSibling:n.firstChild}}for(;r;)r=II(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const pf=function(n){n&&(this.nodeName=n)};pf.prototype=Object.create(null);const ul=[new pf];function wb(n,e,t){if(n.length==0)return ul;let r=t?ul[0]:new pf,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new pf(a.nodeName));for(let u in a){let h=a[u];h!=null&&(t&&i.length==1&&i.push(r=new pf(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+h:u=="style"?r.style=(r.style?r.style+";":"")+h:u!="nodeName"&&(r[u]=h))}}}return i}function VV(n,e,t,r){if(t==ul&&r==ul)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],u=t[s];if(s){let h;u&&u.nodeName==a.nodeName&&i!=n&&(h=i.parentNode)&&h.nodeName.toLowerCase()==a.nodeName||(h=document.createElement(a.nodeName),h.pmIsDeco=!0,h.appendChild(i),u=ul[0]),i=h}jY(i,u||ul[0],a)}return i}function jY(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function LV(n,e,t){return VV(n,n,ul,wb(e,t,n.nodeType!=1))}function Rg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function II(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class FY{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=HY(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r,i){let s=0,a=this.stack.length>>1,u=Math.min(a,e.length);for(;s<u&&(s==a-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<a;)this.destroyRest(),this.top.dirty=Hr,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let h=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let p=this.index;p<f;p++){let m=this.top.children[p];if(m.matchesMark(e[a])&&!this.isLocked(m.dom)){h=p;break}}if(h>-1)h>this.index&&(this.changed=!0,this.destroyBetween(this.index,h)),this.top=this.top.children[this.index];else{let p=Il.create(this.top,e[a],t,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let u=this.index,h=Math.min(this.top.children.length,u+5);u<h;u++){let f=this.top.children[u];if(f.matchesNode(e,t,r)&&!this.preMatch.matched.has(f)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==ns&&a.dom==a.contentDOM&&(a.dirty=ll),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let u=this.index;u<this.top.children.length;u++){let h=this.top.children[u];if(h instanceof Jo){let f=this.preMatch.matched.get(h);if(f!=null&&f!=s)return!1;let p=h.dom,m,v=this.isLocked(p)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=ns&&Rg(t,h.outerDeco));if(!v&&h.update(e,t,r,i))return this.destroyBetween(this.index,u),h.dom!=p&&(this.changed=!0),this.index++,!0;if(!v&&(m=this.recreateWrapper(h,e,t,r,i,a)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=ll,m.updateChildren(i,a+1),m.dirty=Hr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Rg(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=Jo.create(this.top,t,r,i,s,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let h of u.children)h.parent=u}return e.destroy(),u}addNode(e,t,r,i,s){let a=Jo.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new NV(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Il;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Yy)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ln||kn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new OV(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function HY(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let f=t.children[r-1];if(f instanceof Il)t=f,r=f.children.length;else{u=f,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let h=u.node;if(h){if(h!=n.child(i-1))break;--i,s.set(u,i),a.push(u)}}return{index:i,matched:s,matches:a.reverse()}}function qY(n,e){return n.type.side-e.type.side}function $Y(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let f=0;f<n.childCount;f++){let p=n.child(f);r(p,i,e.forChild(s,p),f),s+=p.nodeSize}return}let a=0,u=[],h=null;for(let f=0;;){let p,m;for(;a<i.length&&i[a].to==s;){let w=i[a++];w.widget&&(p?(m||(m=[p])).push(w):p=w)}if(p)if(m){m.sort(qY);for(let w=0;w<m.length;w++)t(m[w],f,!!h)}else t(p,f,!!h);let v,E;if(h)E=-1,v=h,h=null;else if(f<n.childCount)E=f,v=n.child(f++);else break;for(let w=0;w<u.length;w++)u[w].to<=s&&u.splice(w--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)u.push(i[a++]);let b=s+v.nodeSize;if(v.isText){let w=b;a<i.length&&i[a].from<w&&(w=i[a].from);for(let x=0;x<u.length;x++)u[x].to<w&&(w=u[x].to);w<b&&(h=v.cut(w-s),v=v.cut(0,w-s),b=w,E=-1)}else for(;a<i.length&&i[a].to<b;)a++;let S=v.isInline&&!v.isLeaf?u.filter(w=>!w.inline):u.slice();r(v,S,e.forChild(s,v),E),s=b}}function GY(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function KY(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),u=s;if(s+=a.nodeSize,!a.isText)continue;let h=a.text;for(;i<n.childCount;){let f=n.child(i++);if(s+=f.nodeSize,!f.isText)break;h+=f.text}if(s>=t){if(s>=r&&h.slice(r-e.length-u,r-u)==e)return r-e.length;let f=u<r?h.lastIndexOf(e,r-u-1):-1;if(f>=0&&f+e.length+u>=t)return u+f;if(t==r&&h.length>=r+e.length-u&&h.slice(r-u,r-u+e.length)==e)return r}}return-1}function Ab(n,e,t,r,i){let s=[];for(let a=0,u=0;a<n.length;a++){let h=n[a],f=u,p=u+=h.size;f>=t||p<=e?s.push(h):(f<e&&s.push(h.slice(0,e-f,r)),i&&(s.push(i),i=void 0),p>t&&s.push(h.slice(t-f,h.size,r)))}return s}function US(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),h,f;if(Wy(t)){for(h=a;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&Se.isSelectable(m)&&i.parent&&!(m.isInline&&EY(t.focusNode,t.focusOffset,i.dom))){let v=i.posBefore;f=new Se(a==v?u:r.resolve(v))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=a,v=a;for(let E=0;E<t.rangeCount;E++){let b=t.getRangeAt(E);m=Math.min(m,n.docView.posFromDOM(b.startContainer,b.startOffset,1)),v=Math.max(v,n.docView.posFromDOM(b.endContainer,b.endOffset,-1))}if(m<0)return null;[h,a]=v==n.state.selection.anchor?[v,m]:[m,v],u=r.resolve(a)}else h=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let p=r.resolve(h);if(!f){let m=e=="pointer"||n.state.selection.head<u.pos&&!s?1:-1;f=zS(n,p,u,m)}return f}function BV(n){return n.editable?n.hasFocus():zV(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Bs(n,e=!1){let t=n.state.selection;if(UV(n,t),!!BV(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&kn){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&kl(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)YY(n);else{let{anchor:r,head:i}=t,s,a;MI&&!(t instanceof Me)&&(t.$from.parent.inlineContent||(s=DI(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=DI(n,t.to))),n.docView.setSelection(r,i,n,e),MI&&(s&&NI(s),a&&NI(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&WY(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const MI=Ln||kn&&AV<63;function DI(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(Ln&&i&&i.contentEditable=="false")return JT(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return JT(i);if(s)return JT(s)}}function JT(n){return n.contentEditable="true",Ln&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function NI(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function WY(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!BV(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function YY(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,Cn(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&sr&&Xo<=11&&(t.disabled=!0,t.disabled=!1)}function UV(n,e){if(e instanceof Se){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(OI(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else OI(n)}function OI(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function zS(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Me.between(e,t,r)}function PI(n){return n.editable&&!n.hasFocus()?!1:zV(n)}function zV(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function QY(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return kl(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Cb(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ze.findFrom(s,e)}function Do(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function VI(n,e,t){let r=n.state.selection;if(r instanceof Me)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Do(n,new Me(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Cb(n.state,e);return i&&i instanceof Se?Do(n,i):!1}else if(!(Br&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let u=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?Se.isSelectable(s)?Do(n,new Se(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):Td?Do(n,new Me(n.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Se&&r.node.isInline)return Do(n,new Me(e>0?r.$to:r.$from));{let i=Cb(n.state,e);return i?Do(n,i):!1}}}function kg(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function mf(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function ku(n,e){return e<0?XY(n):JY(n)}function XY(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(Fr&&t.nodeType==1&&r<kg(t)&&mf(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(mf(u,-1))i=t,s=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(jV(t))break;{let u=t.previousSibling;for(;u&&mf(u,-1);)i=t.parentNode,s=Cn(u),u=u.previousSibling;if(u)t=u,r=kg(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?xb(n,t,r):i&&xb(n,i,s)}function JY(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=kg(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(mf(u,1))s=t,a=++r;else break}else{if(jV(t))break;{let u=t.nextSibling;for(;u&&mf(u,1);)s=u.parentNode,a=Cn(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=kg(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&xb(n,s,a)}function jV(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function ZY(n,e){for(;n&&e==n.childNodes.length&&!vd(n);)e=Cn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function eQ(n,e){for(;n&&!e&&!vd(n);)e=Cn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function xb(n,e,t){if(e.nodeType!=3){let s,a;(a=ZY(e,t))?(e=a,t=0):(s=eQ(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Wy(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Bs(n)},50)}function LI(n,e){let t=n.state.doc.resolve(e);if(!(kn||CV)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function BI(n,e,t){let r=n.state.selection;if(r instanceof Me&&!r.empty||t.indexOf("s")>-1||Br&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=Cb(n.state,e);if(a&&a instanceof Se)return Do(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,u=r instanceof Er?ze.near(a,e):ze.findFrom(a,e);return u?Do(n,u):!1}return!1}function UI(n,e){if(!(n.state.selection instanceof Me))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function zI(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function tQ(n){if(!Ln||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;zI(n,r,"true"),setTimeout(()=>zI(n,r,"false"),20)}return!1}function nQ(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function rQ(n,e){let t=e.keyCode,r=nQ(e);if(t==8||Br&&t==72&&r=="c")return UI(n,-1)||ku(n,-1);if(t==46&&!e.shiftKey||Br&&t==68&&r=="c")return UI(n,1)||ku(n,1);if(t==13||t==27)return!0;if(t==37||Br&&t==66&&r=="c"){let i=t==37?LI(n,n.state.selection.from)=="ltr"?-1:1:-1;return VI(n,i,r)||ku(n,i)}else if(t==39||Br&&t==70&&r=="c"){let i=t==39?LI(n,n.state.selection.from)=="ltr"?1:-1:1;return VI(n,i,r)||ku(n,i)}else{if(t==38||Br&&t==80&&r=="c")return BI(n,-1,r)||ku(n,-1);if(t==40||Br&&t==78&&r=="c")return tQ(n)||BI(n,1,r)||ku(n,1);if(r==(Br?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function jS(n,e){n.someProp("transformCopied",E=>{e=E(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let E=r.firstChild;t.push(E.type.name,E.attrs!=E.type.defaultAttrs?E.attrs:null),r=E.content}let a=n.someProp("clipboardSerializer")||Vl.fromSchema(n.state.schema),u=KV(),h=u.createElement("div");h.appendChild(a.serializeFragment(r,{document:u}));let f=h.firstChild,p,m=0;for(;f&&f.nodeType==1&&(p=GV[f.nodeName.toLowerCase()]);){for(let E=p.length-1;E>=0;E--){let b=u.createElement(p[E]);for(;h.firstChild;)b.appendChild(h.firstChild);h.appendChild(b),m++}f=h.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${m?` -${m}`:""} ${JSON.stringify(t)}`);let v=n.someProp("clipboardTextSerializer",E=>E(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:v,slice:e}}function FV(n,e,t,r,i){let s=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let h=!!e&&(r||s||!t);if(h){if(n.someProp("transformPastedText",v=>{e=v(e,s||r,n)}),s)return u=new de(le.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",v=>{u=v(u,n,!0)}),u;let m=n.someProp("clipboardTextParser",v=>v(e,i,r,n));if(m)u=m;else{let v=i.marks(),{schema:E}=n.state,b=Vl.fromSchema(E);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=a.appendChild(document.createElement("p"));S&&w.appendChild(b.serializeNode(E.text(S,v)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),a=aQ(t),Td&&lQ(a);let f=a&&a.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let v=a.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;a=v}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Qo.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(h||p),context:i,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!iQ.test(v.parentNode.nodeName)?{ignore:!0}:null}})),p)u=uQ(jI(u,+p[1],+p[2]),p[4]);else if(u=de.maxOpen(sQ(u.content,i),!0),u.openStart||u.openEnd){let m=0,v=0;for(let E=u.content.firstChild;m<u.openStart&&!E.type.spec.isolating;m++,E=E.firstChild);for(let E=u.content.lastChild;v<u.openEnd&&!E.type.spec.isolating;v++,E=E.lastChild);u=jI(u,m,v)}return n.someProp("transformPasted",m=>{u=m(u,n,h)}),u}const iQ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function sQ(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(u=>{if(!a)return;let h=i.findWrapping(u.type),f;if(!h)return a=null;if(f=a.length&&s.length&&qV(h,s,u,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=$V(a[a.length-1],s.length));let p=HV(u,h);a.push(p),i=i.matchType(p.type),s=h}}),a)return le.from(a)}return n}function HV(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,le.from(n));return n}function qV(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=qV(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(le.from(HV(t,n,i+1))))}}function $V(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,$V(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(le.empty,!0);return n.copy(t.append(r))}function Rb(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(s=0),i<r-1&&(u=Rb(u,e,t,r,i+1,s)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,s<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(le.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function jI(n,e,t){return e<n.openStart&&(n=new de(Rb(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new de(Rb(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const GV={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let FI=null;function KV(){return FI||(FI=document.implementation.createHTMLDocument("title"))}let ZT=null;function oQ(n){let e=window.trustedTypes;return e?(ZT||(ZT=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),ZT.createHTML(n)):n}function aQ(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=KV().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&GV[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=oQ(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function lQ(n){let e=n.querySelectorAll(kn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function uQ(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let h=t.nodes[r[u]];if(!h||h.hasRequiredAttrs())break;i=le.from(h.create(r[u+1],i)),s++,a++}return new de(i,s,a)}const Kn={},Wn={},cQ={touchstart:!0,touchmove:!0};class hQ{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function fQ(n){for(let e in Kn){let t=Kn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{pQ(n,r)&&!FS(n,r)&&(n.editable||!(r.type in Wn))&&t(n,r)},cQ[e]?{passive:!0}:void 0)}Ln&&n.dom.addEventListener("input",()=>null),kb(n)}function qo(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function dQ(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function kb(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>FS(n,r))})}function FS(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function pQ(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function mQ(n,e){!FS(n,e)&&Kn[e.type]&&(n.editable||!(e.type in Wn))&&Kn[e.type](n,e)}Wn.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!YV(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Ns&&kn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),uc&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,rl(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||rQ(n,t)?t.preventDefault():qo(n,"key")};Wn.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Wn.keypress=(n,e)=>{let t=e;if(YV(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Br&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Me)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",a=>a(n,r.$from.pos,r.$to.pos,i,s))&&n.dispatch(s()),t.preventDefault()}};function Qy(n){return{left:n.clientX,top:n.clientY}}function gQ(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function HS(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,u=>a>s.depth?u(n,t,s.nodeAfter,s.before(a),i,!0):u(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function Zu(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function yQ(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Se.isSelectable(r)?(Zu(n,new Se(t)),!0):!1}function vQ(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Se&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let u=a>s.depth?s.nodeAfter:s.node(a);if(Se.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(Zu(n,Se.create(n.state.doc,i)),!0):!1}function TQ(n,e,t,r,i){return HS(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?vQ(n,t):yQ(n,t))}function EQ(n,e,t,r){return HS(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function bQ(n,e,t,r){return HS(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||_Q(n,t,r)}function _Q(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Zu(n,Me.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(a.inlineContent)Zu(n,Me.create(r,u+1,u+1+a.content.size));else if(Se.isSelectable(a))Zu(n,Se.create(r,u));else continue;return!0}}function qS(n){return Ig(n)}const WV=Br?"metaKey":"ctrlKey";Kn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=qS(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&gQ(t,n.input.lastClick)&&!t[WV]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s,button:t.button};let a=n.posAtCoords(Qy(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new SQ(n,a,t,!!r)):(s=="doubleClick"?EQ:bQ)(n,a.pos,a.inside,t)?t.preventDefault():qo(n,"pointer"))};class SQ{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[WV],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);s=p.parent,a=p.depth?p.before():0}const u=i?null:r.target,h=u?e.docView.nearestDesc(u,!0):null;this.target=h&&h.nodeDOM.nodeType==1?h.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof Se&&f.from<=a&&f.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Fr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),qo(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Bs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Qy(e))),this.updateAllowDefault(e),this.allowDefault||!t?qo(this.view,"pointer"):TQ(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ln&&this.mightDrag&&!this.mightDrag.node.isAtom||kn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Zu(this.view,ze.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):qo(this.view,"pointer")}move(e){this.updateAllowDefault(e),qo(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Kn.touchstart=n=>{n.input.lastTouch=Date.now(),qS(n),qo(n,"pointer")};Kn.touchmove=n=>{n.input.lastTouch=Date.now(),qo(n,"pointer")};Kn.contextmenu=n=>qS(n);function YV(n,e){return n.composing?!0:Ln&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const wQ=Ns?5e3:-1;Wn.compositionstart=Wn.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Me&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||kn&&CV&&AQ(n)))n.markCursor=n.state.storedMarks||t.marks(),Ig(n,!0),n.markCursor=null;else if(Ig(n,!e.selection.empty),Fr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}QV(n,wQ)};function AQ(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let r=e.childNodes[t];return r.nodeType==1&&r.contentEditable=="false"}Wn.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,QV(n,20))};function QV(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ig(n),e))}function XV(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=xQ());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function CQ(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=vY(e.focusNode,e.focusOffset),r=TY(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function xQ(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ig(n,e=!1){if(!(Ns&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),XV(n),e||n.docView&&n.docView.dirty){let t=US(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function RQ(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const qf=sr&&Xo<15||uc&&SY<604;Kn.copy=Wn.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=qf?null:t.clipboardData,a=r.content(),{dom:u,text:h}=jS(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",h)):RQ(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function kQ(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function IQ(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?$f(n,r.value,null,i,e):$f(n,r.textContent,r.innerHTML,i,e)},50)}function $f(n,e,t,r,i){let s=FV(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",h=>h(n,i,s||de.empty)))return!0;if(!s)return!1;let a=kQ(s),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function JV(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Wn.paste=(n,e)=>{let t=e;if(n.composing&&!Ns)return;let r=qf?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&$f(n,JV(r),r.getData("text/html"),i,t)?t.preventDefault():IQ(n,t)};class ZV{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const MQ=Br?"altKey":"ctrlKey";function eL(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[MQ]}Kn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(Qy(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Se?i.to-1:i.to))){if(r&&r.mightDrag)a=Se.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(a=Se.create(n.state.doc,m.posBefore))}}let u=(a||n.state.selection).content(),{dom:h,text:f,slice:p}=jS(n,u);(!t.dataTransfer.files.length||!kn||AV>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(qf?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",qf||t.dataTransfer.setData("text/plain",f),n.dragging=new ZV(p,eL(n,t),a)};Kn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Wn.dragover=Wn.dragenter=(n,e)=>e.preventDefault();Wn.drop=(n,e)=>{try{DQ(n,e,n.dragging)}finally{n.dragging=null}};function DQ(n,e,t){if(!e.dataTransfer)return;let r=n.posAtCoords(Qy(e));if(!r)return;let i=n.state.doc.resolve(r.pos),s=t&&t.slice;s?n.someProp("transformPasted",E=>{s=E(s,n,!1)}):s=FV(n,JV(e.dataTransfer),qf?null:e.dataTransfer.getData("text/html"),!1,i);let a=!!(t&&eL(n,e));if(n.someProp("handleDrop",E=>E(n,e,s||de.empty,a))){e.preventDefault();return}if(!s)return;e.preventDefault();let u=s?iV(n.state.doc,i.pos,s):i.pos;u==null&&(u=i.pos);let h=n.state.tr;if(a){let{node:E}=t;E?E.replace(h):h.deleteSelection()}let f=h.mapping.map(u),p=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,m=h.doc;if(p?h.replaceRangeWith(f,f,s.content.firstChild):h.replaceRange(f,f,s),h.doc.eq(m))return;let v=h.doc.resolve(f);if(p&&Se.isSelectable(s.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(s.content.firstChild))h.setSelection(new Se(v));else{let E=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((b,S,w,x)=>E=x),h.setSelection(zS(n,v,h.doc.resolve(E)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))}Kn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Bs(n)},20))};Kn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Kn.beforeinput=(n,e)=>{if(kn&&Ns&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,rl(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Wn)Kn[n]=Wn[n];function Gf(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Mg{constructor(e,t){this.toDOM=e,this.spec=t||ml,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Gn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Mg&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Gf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Zo{constructor(e,t){this.attrs=e,this.spec=t||ml}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Gn(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Zo&&Gf(this.attrs,e.attrs)&&Gf(this.spec,e.spec)}static is(e){return e.type instanceof Zo}destroy(){}}class $S{constructor(e,t){this.attrs=e,this.spec=t||ml}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Gn(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof $S&&Gf(this.attrs,e.attrs)&&Gf(this.spec,e.spec)}destroy(){}}class Gn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Gn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Gn(e,e,new Mg(t,r))}static inline(e,t,r,i){return new Gn(e,t,new Zo(r,i))}static node(e,t,r,i){return new Gn(e,t,new $S(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Zo}get widget(){return this.type instanceof Mg}}const Vu=[],ml={};class wt{constructor(e,t){this.local=e.length?e:Vu,this.children=t.length?t:Vu}static create(e,t){return t.length?Dg(t,e,0,ml):Nn}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,s)}}map(e,t,r){return this==Nn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||ml)}mapInner(e,t,r,i,s){let a;for(let u=0;u<this.local.length;u++){let h=this.local[u].map(e,r,i);h&&h.type.valid(t,h)?(a||(a=[])).push(h):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?NQ(this.children,a||[],e,t,r,i,s):a?new wt(a.sort(gl),Vu):Nn}add(e,t){return t.length?this==Nn?wt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((u,h)=>{let f=h+r,p;if(p=nL(t,u,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<h;)s+=3;i[s]==h?i[s+2]=i[s+2].addInner(u,p,f+1):i.splice(s,0,h,h+u.nodeSize,Dg(p,u,f+1,ml)),s+=3}});let a=tL(s?rL(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new wt(a.length?this.local.concat(a).sort(gl):this.local,i||this.children)}remove(e){return e.length==0||this==Nn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,u=r[s]+t,h=r[s+1]+t;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<h&&(e[p]=null,(a||(a=[])).push(m));if(!a)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(a,u+1);f!=Nn?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new wt(i,r):Nn}forChild(e,t){if(this==Nn)return this;if(t.isLeaf)return wt.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,a=s+t.content.size;for(let u=0;u<this.local.length;u++){let h=this.local[u];if(h.from<a&&h.to>s&&h.type instanceof Zo){let f=Math.max(s,h.from)-s,p=Math.min(a,h.to)-s;f<p&&(i||(i=[])).push(h.copy(f,p))}}if(i){let u=new wt(i.sort(gl),Vu);return r?new Bo([u,r]):u}return r||Nn}eq(e){if(this==e)return!0;if(!(e instanceof wt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return GS(this.localsInner(e))}localsInner(e){if(this==Nn)return Vu;if(e.inlineContent||!this.local.some(Zo.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Zo||t.push(this.local[r]);return t}forEachSet(e){e(this)}}wt.empty=new wt([],[]);wt.removeOverlap=GS;const Nn=wt.empty;class Bo{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,ml));return Bo.from(r)}forChild(e,t){if(t.isLeaf)return wt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Nn&&(s instanceof Bo?r=r.concat(s.members):r.push(s))}return Bo.from(r)}eq(e){if(!(e instanceof Bo)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?GS(r?t:t.sort(gl)):Vu}static from(e){switch(e.length){case 0:return Nn;case 1:return e[0];default:return new Bo(e.every(t=>t instanceof wt)?e:e.reduce((t,r)=>t.concat(r instanceof wt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function NQ(n,e,t,r,i,s,a){let u=n.slice();for(let f=0,p=s;f<t.maps.length;f++){let m=0;t.maps[f].forEach((v,E,b,S)=>{let w=S-b-(E-v);for(let x=0;x<u.length;x+=3){let N=u[x+1];if(N<0||v>N+p-m)continue;let V=u[x]+p-m;E>=V?u[x+1]=v<=V?-2:-1:v>=p&&w&&(u[x]+=w,u[x+1]+=w)}m+=w}),p=t.maps[f].map(p,-1)}let h=!1;for(let f=0;f<u.length;f+=3)if(u[f+1]<0){if(u[f+1]==-2){h=!0,u[f+1]=-1;continue}let p=t.map(n[f]+s),m=p-i;if(m<0||m>=r.content.size){h=!0;continue}let v=t.map(n[f+1]+s,-1),E=v-i,{index:b,offset:S}=r.content.findIndex(m),w=r.maybeChild(b);if(w&&S==m&&S+w.nodeSize==E){let x=u[f+2].mapInner(t,w,p+1,n[f]+s+1,a);x!=Nn?(u[f]=m,u[f+1]=E,u[f+2]=x):(u[f+1]=-2,h=!0)}else h=!0}if(h){let f=OQ(u,n,e,t,i,s,a),p=Dg(f,r,0,a);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,v=0;m<p.children.length;m+=3){let E=p.children[m];for(;v<u.length&&u[v]<E;)v+=3;u.splice(v,0,p.children[m],p.children[m+1],p.children[m+2])}}return new wt(e.sort(gl),u)}function tL(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Gn(i.from+e,i.to+e,i.type))}return t}function OQ(n,e,t,r,i,s,a){function u(h,f){for(let p=0;p<h.local.length;p++){let m=h.local[p].map(r,i,f);m?t.push(m):a.onRemove&&a.onRemove(h.local[p].spec)}for(let p=0;p<h.children.length;p+=3)u(h.children[p+2],h.children[p]+f+1)}for(let h=0;h<n.length;h+=3)n[h+1]==-1&&u(n[h+2],e[h]+s+1);return t}function nL(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function rL(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Dg(n,e,t,r){let i=[],s=!1;e.forEach((u,h)=>{let f=nL(n,u,h+t);if(f){s=!0;let p=Dg(f,u,t+h+1,r);p!=Nn&&i.push(h,h+u.nodeSize,p)}});let a=tL(s?rL(n):n,-t).sort(gl);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new wt(a,i):Nn}function gl(n,e){return n.from-e.from||n.to-e.to}function GS(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),HI(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),HI(e,i,r.copy(s.from,r.to)));break}}}return e}function HI(n,e,t){for(;e<n.length&&gl(t,n[e])>0;)e++;n.splice(e,0,t)}function eE(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Nn&&e.push(r)}),n.cursorWrapper&&e.push(wt.create(n.state.doc,[n.cursorWrapper.deco])),Bo.from(e)}const PQ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},VQ=sr&&Xo<=11;class LQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class BQ{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new LQ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);sr&&Xo<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Ln&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),VQ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,PQ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(PI(this.view)){if(this.suppressingSelectionUpdates)return Bs(this.view);if(sr&&Xo<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&kl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=lc(s))t.add(s);for(let s=e.anchorNode;s;s=lc(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&PI(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,u=!1,h=[];if(e.editable)for(let p=0;p<t.length;p++){let m=this.registerMutation(t[p],h);m&&(s=s<0?m.from:Math.min(m.from,s),a=a<0?m.to:Math.max(m.to,a),m.typeOver&&(u=!0))}if(h.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of h)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}else if(Fr&&h.length){let p=h.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,v]=p;m.parentNode&&m.parentNode.parentNode==v.parentNode?v.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let v of p){let E=v.parentNode;E&&E.nodeName=="LI"&&(!m||jQ(e,m)!=E)&&v.remove()}}}let f=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Wy(r)&&(f=US(e))&&f.eq(ze.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Bs(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),UQ(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,FQ(e,h)),this.handleDOMChange(s,a,u,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Bs(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];t.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(sr&&Xo<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:v}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(s=v)}let a=i&&i.parentNode==e.target?Cn(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),h=s&&s.parentNode==e.target?Cn(s):e.target.childNodes.length,f=r.localPosFromDOM(e.target,h,1);return{from:u,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let qI=new WeakMap,$I=!1;function UQ(n){if(!qI.has(n)&&(qI.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Fr,$I)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$I=!0}}function GI(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return kl(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function zQ(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return GI(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?GI(n,t):null}function jQ(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function FQ(n,e){var t;let{focusNode:r,focusOffset:i}=n.domSelectionRange();for(let s of e)if(((t=s.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let a=s.nextSibling;for(;a&&a.nodeName!="TD"&&a.nodeName!="TH";)a=a.nextSibling;if(a){let u=a;for(;;){let h=u.firstChild;if(!h||h.nodeType!=1||h.contentEditable=="false"||/^(BR|IMG)$/.test(h.nodeName))break;u=h}u.insertBefore(s,u.firstChild),r==s&&n.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function HQ(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:u}=n.docView.parseRange(e,t),h=n.domSelectionRange(),f,p=h.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:h.anchorOffset}],Wy(h)||f.push({node:h.focusNode,offset:h.focusOffset})),kn&&n.input.lastKeyCode===8)for(let w=s;w>i;w--){let x=r.childNodes[w-1],N=x.pmViewDesc;if(x.nodeName=="BR"&&!N){s=w;break}if(!N||N.size)break}let m=n.state.doc,v=n.someProp("domParser")||Qo.fromSchema(n.state.schema),E=m.resolve(a),b=null,S=v.parse(r,{topNode:E.parent,topMatch:E.parent.contentMatchAt(E.index()),topOpen:!0,from:i,to:s,preserveWhitespace:E.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:qQ,context:E});if(f&&f[0].pos!=null){let w=f[0].pos,x=f[1]&&f[1].pos;x==null&&(x=w),b={anchor:w+a,head:x+a}}return{doc:S,sel:b,from:a,to:u}}function qQ(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ln&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ln&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const $Q=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function GQ(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let I=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,k=US(n,I);if(k&&!n.state.selection.eq(k)){if(kn&&Ns&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",B=>B(n,rl(13,"Enter"))))return;let D=n.state.tr.setSelection(k);I=="pointer"?D.setMeta("pointer",!0):I=="key"&&D.scrollIntoView(),s&&D.setMeta("composition",s),n.dispatch(D)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let h=n.state.selection,f=HQ(n,e,t),p=n.state.doc,m=p.slice(f.from,f.to),v,E;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(v=n.state.selection.to,E="end"):(v=n.state.selection.from,E="start"),n.input.lastKeyCode=null;let b=YQ(m.content,f.doc.content,f.from,v,E);if(b&&n.input.domChangeCount++,(uc&&n.input.lastIOSEnter>Date.now()-225||Ns)&&i.some(I=>I.nodeType==1&&!$Q.test(I.nodeName))&&(!b||b.endA>=b.endB)&&n.someProp("handleKeyDown",I=>I(n,rl(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!b)if(r&&h instanceof Me&&!h.empty&&h.$head.sameParent(h.$anchor)&&!n.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))b={start:h.from,endA:h.to,endB:h.to};else{if(f.sel){let I=KI(n,n.state.doc,f.sel);if(I&&!I.eq(n.state.selection)){let k=n.state.tr.setSelection(I);s&&k.setMeta("composition",s),n.dispatch(k)}}return}n.state.selection.from<n.state.selection.to&&b.start==b.endB&&n.state.selection instanceof Me&&(b.start>n.state.selection.from&&b.start<=n.state.selection.from+2&&n.state.selection.from>=f.from?b.start=n.state.selection.from:b.endA<n.state.selection.to&&b.endA>=n.state.selection.to-2&&n.state.selection.to<=f.to&&(b.endB+=n.state.selection.to-b.endA,b.endA=n.state.selection.to)),sr&&Xo<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>f.from&&f.doc.textBetween(b.start-f.from-1,b.start-f.from+1)==" "&&(b.start--,b.endA--,b.endB--);let S=f.doc.resolveNoCache(b.start-f.from),w=f.doc.resolveNoCache(b.endB-f.from),x=p.resolve(b.start),N=S.sameParent(w)&&S.parent.inlineContent&&x.end()>=b.endA;if((uc&&n.input.lastIOSEnter>Date.now()-225&&(!N||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!N&&S.pos<f.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&S.pos<w.pos&&!/\S/.test(f.doc.textBetween(S.pos,w.pos,"","")))&&n.someProp("handleKeyDown",I=>I(n,rl(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>b.start&&WQ(p,b.start,b.endA,S,w)&&n.someProp("handleKeyDown",I=>I(n,rl(8,"Backspace")))){Ns&&kn&&n.domObserver.suppressSelectionUpdates();return}kn&&b.endB==b.start&&(n.input.lastChromeDelete=Date.now()),Ns&&!N&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==b.endA&&(b.endB-=2,w=f.doc.resolveNoCache(b.endB-f.from),setTimeout(()=>{n.someProp("handleKeyDown",function(I){return I(n,rl(13,"Enter"))})},20));let V=b.start,q=b.endA,F=I=>{let k=I||n.state.tr.replace(V,q,f.doc.slice(b.start-f.from,b.endB-f.from));if(f.sel){let D=KI(n,k.doc,f.sel);D&&!(kn&&n.composing&&D.empty&&(b.start!=b.endB||n.input.lastChromeDelete<Date.now()-100)&&(D.head==V||D.head==k.mapping.map(q)-1)||sr&&D.empty&&D.head==V)&&k.setSelection(D)}return s&&k.setMeta("composition",s),k.scrollIntoView()},Z;if(N)if(S.pos==w.pos){sr&&Xo<=11&&S.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Bs(n),20));let I=F(n.state.tr.delete(V,q)),k=p.resolve(b.start).marksAcross(p.resolve(b.endA));k&&I.ensureMarks(k),n.dispatch(I)}else if(b.endA==b.endB&&(Z=KQ(S.parent.content.cut(S.parentOffset,w.parentOffset),x.parent.content.cut(x.parentOffset,b.endA-x.start())))){let I=F(n.state.tr);Z.type=="add"?I.addMark(V,q,Z.mark):I.removeMark(V,q,Z.mark),n.dispatch(I)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let I=S.parent.textBetween(S.parentOffset,w.parentOffset),k=()=>F(n.state.tr.insertText(I,V,q));n.someProp("handleTextInput",D=>D(n,V,q,I,k))||n.dispatch(k())}else n.dispatch(F());else n.dispatch(F())}function KI(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:zS(n,e.resolve(t.anchor),e.resolve(t.head))}function KQ(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,u,h;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)s=t[p].removeFromSet(s);if(i.length==1&&s.length==0)u=i[0],a="add",h=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&s.length==1)u=s[0],a="remove",h=p=>p.mark(u.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(h(e.child(p)));if(le.from(f).eq(n))return{mark:u,type:a}}function WQ(n,e,t,r,i){if(t-e<=i.pos-r.pos||tE(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&t==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(tE(s,!0,!0));return!a.parent.isTextblock||a.pos>t||tE(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function tE(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function YQ(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let h=Math.max(0,s-Math.min(a,u));r-=a+h-s}if(a<s&&n.size<e.size){let h=r<=s&&r>=a?s-r:0;s-=h,s&&s<e.size&&WI(e.textBetween(s-1,s+1))&&(s+=h?1:-1),u=s+(u-a),a=s}else if(u<s){let h=r<=s&&r>=u?s-r:0;s-=h,s&&s<n.size&&WI(n.textBetween(s-1,s+1))&&(s+=h?1:-1),a=s+(a-u),u=s}return{start:s,endA:a,endB:u}}function WI(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class iL{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new hQ,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(ZI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=XI(this),QI(this),this.nodeViews=JI(this),this.docView=kI(this.state.doc,YI(this),eE(this),this.dom,this),this.domObserver=new BQ(this,(r,i,s,a)=>GQ(this,r,i,s,a)),this.domObserver.start(),fQ(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&kb(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ZI),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(XV(this),a=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let E=JI(this);XQ(E,this.nodeViews)&&(this.nodeViews=E,s=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&kb(this),this.editable=XI(this),QI(this);let h=eE(this),f=YI(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=s||!this.docView.matchesNode(e.doc,f,h);(m||!e.selection.eq(i.selection))&&(a=!0);let v=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&CY(this);if(a){this.domObserver.stop();let E=m&&(sr||kn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&QQ(i.selection,e.selection);if(m){let b=kn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=CQ(this)),(s||!this.docView.update(e.doc,f,h,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=kI(e.doc,f,h,this.dom,this)),b&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(E=!0)}E||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&QY(this))?Bs(this,E):(UV(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():v&&xY(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Se){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&SI(this,t.getBoundingClientRect(),e)}else SI(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new ZV(e.slice,e.move,i<0?void 0:Se.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let u=s[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(sr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&RY(this.dom),Bs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return NY(this,e)}coordsAtPos(e,t=1){return MV(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return BY(this,t||this.state,e)}pasteHTML(e,t){return $f(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return $f(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return jS(this,e)}destroy(){this.docView&&(dQ(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],eE(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,gY())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return mQ(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ln&&this.root.nodeType===11&&bY(this.dom.ownerDocument)==this.dom&&zQ(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}iL.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function YI(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Gn.node(0,n.state.doc.content.size,e)]}function QI(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Gn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function XI(n){return!n.someProp("editable",e=>e(n.state)===!1)}function QQ(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function JI(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function XQ(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function ZI(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var la={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ng={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},JQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),ZQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var xn=0;xn<10;xn++)la[48+xn]=la[96+xn]=String(xn);for(var xn=1;xn<=24;xn++)la[xn+111]="F"+xn;for(var xn=65;xn<=90;xn++)la[xn]=String.fromCharCode(xn+32),Ng[xn]=String.fromCharCode(xn);for(var nE in la)Ng.hasOwnProperty(nE)||(Ng[nE]=la[nE]);function eX(n){var e=JQ&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||ZQ&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ng:la)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const tX=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),nX=typeof navigator<"u"&&/Win/.test(navigator.platform);function rX(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u++){let h=e[u];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))tX?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function iX(n){let e=Object.create(null);for(let t in n)e[rX(t)]=n[t];return e}function rE(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function sX(n){return new xt({props:{handleKeyDown:sL(n)}})}function sL(n){let e=iX(n);return function(t,r){let i=eX(r),s,a=e[rE(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[rE(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(nX&&r.ctrlKey&&r.altKey)&&(s=la[r.keyCode])&&s!=i){let u=e[rE(s,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}var oX=Object.defineProperty,KS=(n,e)=>{for(var t in e)oX(n,t,{get:e[t],enumerable:!0})};function Xy(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}var Jy=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:i}=t,s=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...f)=>{const p=u(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:s}=r,a=[],u=!!n,h=n||i.tr,f=()=>(!u&&e&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(h),a.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(t).map(([m,v])=>[m,(...b)=>{const S=this.buildProps(h,e),w=v(...b)(S);return a.push(w),p}])),run:f};return p}createCan(n){const{rawCommands:e,state:t}=this,r=!1,i=n||t.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([u,h])=>[u,(...f)=>h(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:s}=r,a={tr:n,editor:r,view:s,state:Xy({state:i,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([u,h])=>[u,(...f)=>h(...f)(a)]))}};return a}},oL={};KS(oL,{blur:()=>aX,clearContent:()=>lX,clearNodes:()=>uX,command:()=>cX,createParagraphNear:()=>hX,cut:()=>fX,deleteCurrentNode:()=>dX,deleteNode:()=>pX,deleteRange:()=>mX,deleteSelection:()=>gX,enter:()=>yX,exitCode:()=>vX,extendMarkRange:()=>TX,first:()=>EX,focus:()=>_X,forEach:()=>SX,insertContent:()=>wX,insertContentAt:()=>xX,joinBackward:()=>IX,joinDown:()=>kX,joinForward:()=>MX,joinItemBackward:()=>DX,joinItemForward:()=>NX,joinTextblockBackward:()=>OX,joinTextblockForward:()=>PX,joinUp:()=>RX,keyboardShortcut:()=>LX,lift:()=>BX,liftEmptyBlock:()=>UX,liftListItem:()=>zX,newlineInCode:()=>jX,resetAttributes:()=>FX,scrollIntoView:()=>HX,selectAll:()=>qX,selectNodeBackward:()=>$X,selectNodeForward:()=>GX,selectParentNode:()=>KX,selectTextblockEnd:()=>WX,selectTextblockStart:()=>YX,setContent:()=>QX,setMark:()=>gJ,setMeta:()=>yJ,setNode:()=>vJ,setNodeSelection:()=>TJ,setTextDirection:()=>EJ,setTextSelection:()=>bJ,sinkListItem:()=>_J,splitBlock:()=>SJ,splitListItem:()=>wJ,toggleList:()=>AJ,toggleMark:()=>CJ,toggleNode:()=>xJ,toggleWrap:()=>RJ,undoInputRule:()=>kJ,unsetAllMarks:()=>IJ,unsetMark:()=>MJ,unsetTextDirection:()=>DJ,updateAttributes:()=>NJ,wrapIn:()=>OJ,wrapInList:()=>PJ});var aX=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),lX=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),uX=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:a})=>{n.doc.nodesBetween(s.pos,a.pos,(u,h)=>{if(u.type.isText)return;const{doc:f,mapping:p}=e,m=f.resolve(p.map(h)),v=f.resolve(p.map(h+u.nodeSize)),E=m.blockRange(v);if(!E)return;const b=Ac(E);if(u.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(E.start,S)}(b||b===0)&&e.lift(E,b)})}),!0},cX=n=>e=>n(e),hX=()=>({state:n,dispatch:e})=>EV(n,e),fX=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new Me(r.doc.resolve(Math.max(a-1,0)))),!0},dX=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const u=i.before(s),h=i.after(s);n.delete(u,h).scrollIntoView()}return!0}return!1};function tn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var pX=n=>({tr:e,state:t,dispatch:r})=>{const i=tn(n,t.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const h=s.before(a),f=s.after(a);e.delete(h,f).scrollIntoView()}return!0}return!1},mX=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},gX=()=>({state:n,dispatch:e})=>NS(n,e),yX=()=>({commands:n})=>n.keyboardShortcut("Enter"),vX=()=>({state:n,dispatch:e})=>tY(n,e);function WS(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Og(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:WS(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function aL(n,e,t={}){return n.find(r=>r.type===e&&Og(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function eM(n,e,t={}){return!!aL(n,e,t)}function YS(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])==null?void 0:r.attrs),!aL([...i.node.marks],e,t)))return;let a=i.index,u=n.start()+i.offset,h=a+1,f=u+i.node.nodeSize;for(;a>0&&eM([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;h<n.parent.childCount&&eM([...n.parent.child(h).marks],e,t);)f+=n.parent.child(h).nodeSize,h+=1;return{from:u,to:f}}function $s(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var TX=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=$s(n,r.schema),{doc:a,selection:u}=t,{$from:h,from:f,to:p}=u;if(i){const m=YS(h,s,e);if(m&&m.from<=f&&m.to>=p){const v=Me.create(a,m.from,m.to);t.setSelection(v)}}return!0},EX=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function lL(n){return n instanceof Me}function cl(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function uL(n,e=null){if(!e)return null;const t=ze.atStart(n),r=ze.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?Me.create(n,cl(0,i,s),cl(n.content.size,i,s)):Me.create(n,cl(e,i,s),cl(e,i,s))}function tM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Pg(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function bX(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var _X=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(Pg()||tM())&&r.dom.focus(),bX()&&!Pg()&&!tM()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};try{if(r.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(s&&n===null&&!lL(t.state.selection))return a(),!0;const u=uL(i.doc,n)||t.state.selection,h=t.state.selection.eq(u);return s&&(h||i.setSelection(u),h&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},SX=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),wX=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),cL=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&cL(r)}return n};function fm(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return cL(t)}function Kf(n,e,t){if(n instanceof mi||n instanceof le)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return le.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),Kf("",e,t)}if(i){if(t.errorOnInvalidContent){let a=!1,u="";const h=new KP({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(a=!0,u=typeof f=="string"?f:f.outerHTML,null)}]}})});if(t.slice?Qo.fromSchema(h).parseSlice(fm(n),t.parseOptions):Qo.fromSchema(h).parse(fm(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=Qo.fromSchema(e);return t.slice?s.parseSlice(fm(n),t.parseOptions).content:s.parse(fm(n),t.parseOptions)}return Kf("",e,t)}function AX(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof pn||i instanceof mn))return;const s=n.mapping.maps[r];let a=0;s.forEach((u,h,f,p)=>{a===0&&(a=p)}),n.setSelection(ze.near(n.doc.resolve(a),t))}var CX=n=>!("type"in n),xX=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const h=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Kf(e,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(w){h(w)}try{u=Kf(e,s.schema,{parseOptions:f,errorOnInvalidContent:(a=t.errorOnInvalidContent)!=null?a:s.options.enableContentCheck})}catch(w){return h(w),!1}let{from:p,to:m}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},v=!0,E=!0;if((CX(u)?u:[u]).forEach(w=>{w.check(),v=v?w.isText&&w.marks.length===0:!1,E=E?w.isBlock:!1}),p===m&&E){const{parent:w}=r.doc.resolve(p);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(p-=1,m+=1)}let S;if(v){if(Array.isArray(e))S=e.map(w=>w.text||"").join("");else if(e instanceof le){let w="";e.forEach(x=>{x.text&&(w+=x.text)}),S=w}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else{S=u;const w=r.doc.resolve(p),x=w.node(),N=w.parentOffset===0,V=x.isText||x.isTextblock,q=x.content.size>0;N&&V&&q&&(p=Math.max(0,p-1)),r.replaceWith(p,m,S)}t.updateSelection&&AX(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},RX=()=>({state:n,dispatch:e})=>JW(n,e),kX=()=>({state:n,dispatch:e})=>ZW(n,e),IX=()=>({state:n,dispatch:e})=>dV(n,e),MX=()=>({state:n,dispatch:e})=>yV(n,e),DX=()=>({state:n,dispatch:e,tr:t})=>{try{const r=$y(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},NX=()=>({state:n,dispatch:e,tr:t})=>{try{const r=$y(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},OX=()=>({state:n,dispatch:e})=>QW(n,e),PX=()=>({state:n,dispatch:e})=>XW(n,e);function hL(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function VX(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u+=1){const h=e[u];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))Pg()||hL()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${h}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}var LX=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=VX(n).split(/-(?!$)/),a=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),h=e.captureTransaction(()=>{t.someProp("handleKeyDown",f=>f(t,u))});return h?.steps.forEach(f=>{const p=f.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function ua(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,a=e?tn(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(m,v)=>{if(m.isText)return;const E=Math.max(r,v),b=Math.min(i,v+m.nodeSize);u.push({node:m,from:E,to:b})});const h=i-r,f=u.filter(m=>a?a.name===m.node.type.name:!0).filter(m=>Og(m.node.attrs,t,{strict:!1}));return s?!!f.length:f.reduce((m,v)=>m+v.to-v.from,0)>=h}var BX=(n,e={})=>({state:t,dispatch:r})=>{const i=tn(n,t.schema);return ua(t,i,e)?eY(t,r):!1},UX=()=>({state:n,dispatch:e})=>bV(n,e),zX=n=>({state:e,dispatch:t})=>{const r=tn(n,e.schema);return fY(r)(e,t)},jX=()=>({state:n,dispatch:e})=>TV(n,e);function Zy(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function nM(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}var FX=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=Zy(typeof n=="string"?n:n.name,r.schema);if(!u)return!1;u==="node"&&(s=tn(n,r.schema)),u==="mark"&&(a=$s(n,r.schema));let h=!1;return t.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(p,m)=>{s&&s===p.type&&(h=!0,i&&t.setNodeMarkup(m,void 0,nM(p.attrs,e))),a&&p.marks.length&&p.marks.forEach(v=>{a===v.type&&(h=!0,i&&t.addMark(m,m+p.nodeSize,a.create(nM(v.attrs,e))))})})}),h},HX=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),qX=()=>({tr:n,dispatch:e})=>{if(e){const t=new Er(n.doc);n.setSelection(t)}return!0},$X=()=>({state:n,dispatch:e})=>mV(n,e),GX=()=>({state:n,dispatch:e})=>vV(n,e),KX=()=>({state:n,dispatch:e})=>iY(n,e),WX=()=>({state:n,dispatch:e})=>aY(n,e),YX=()=>({state:n,dispatch:e})=>oY(n,e);function Ib(n,e,t={},r={}){return Kf(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}var QX=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:a,commands:u})=>{const{doc:h}=s;if(r.preserveWhitespace!=="full"){const f=Ib(n,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return a&&s.replaceWith(0,h.content.size,f).setMeta("preventUpdate",!t),!0}return a&&s.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:h.content.size},n,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function fL(n,e){const t=$s(e,n.schema),{from:r,to:i,empty:s}=n.selection,a=[];s?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,h=>{a.push(...h.marks)});const u=a.find(h=>h.type.name===t.name);return u?{...u.attrs}:{}}function dL(n,e){const t=new uV(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function XX(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function JX(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function ZX(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function ev(n){return e=>ZX(e.$from,n)}function Ee(n,e,t){return n.config[e]===void 0&&n.parent?Ee(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ee(n.parent,e,t):null}):n.config[e]}function QS(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=Ee(e,"addExtensions",t);return r?[e,...QS(r())]:e}).flat(10)}function XS(n,e){const t=Vl.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function pL(n){return typeof n=="function"}function ot(n,e=void 0,...t){return pL(n)?e?n.bind(e)(...t):n(...t):n}function eJ(n={}){return Object.keys(n).length===0&&n.constructor===Object}function cc(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function mL(n){const e=[],{nodeExtensions:t,markExtensions:r}=cc(n),i=[...t,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},a=t.filter(f=>f.name!=="text").map(f=>f.name),u=r.map(f=>f.name),h=[...a,...u];return n.forEach(f=>{const p={name:f.name,options:f.options,storage:f.storage,extensions:i},m=Ee(f,"addGlobalAttributes",p);if(!m)return;m().forEach(E=>{let b;Array.isArray(E.types)?b=E.types:E.types==="*"?b=h:E.types==="nodes"?b=a:E.types==="marks"?b=u:b=[],b.forEach(S=>{Object.entries(E.attributes).forEach(([w,x])=>{e.push({type:S,name:w,attribute:{...s,...x}})})})})}),i.forEach(f=>{const p={name:f.name,options:f.options,storage:f.storage},m=Ee(f,"addAttributes",p);if(!m)return;const v=m();Object.entries(v).forEach(([E,b])=>{const S={...s,...b};typeof S?.default=="function"&&(S.default=S.default()),S?.isRequired&&S?.default===void 0&&delete S.default,e.push({type:f.name,name:E,attribute:S})})}),e}function Ot(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const u=s?String(s).split(" "):[],h=r[i]?r[i].split(" "):[],f=u.filter(p=>!h.includes(p));r[i]=[...h,...f].join(" ")}else if(i==="style"){const u=s?s.split(";").map(p=>p.trim()).filter(Boolean):[],h=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;h.forEach(p=>{const[m,v]=p.split(":").map(E=>E.trim());f.set(m,v)}),u.forEach(p=>{const[m,v]=p.split(":").map(E=>E.trim());f.set(m,v)}),r[i]=Array.from(f.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[i]=s}),r},{})}function Wf(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Ot(t,r),{})}function tJ(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function rM(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):tJ(t.getAttribute(a.name));return u==null?s:{...s,[a.name]:u}},{});return{...r,...i}}}}function iM(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&eJ(t)?!1:t!=null))}function sM(n){var e,t;const r={};return!((e=n?.attribute)!=null&&e.isRequired)&&"default"in(n?.attribute||{})&&(r.default=n.attribute.default),((t=n?.attribute)==null?void 0:t.validate)!==void 0&&(r.validate=n.attribute.validate),[n.name,r]}function nJ(n,e){var t;const r=mL(n),{nodeExtensions:i,markExtensions:s}=cc(n),a=(t=i.find(f=>Ee(f,"topNode")))==null?void 0:t.name,u=Object.fromEntries(i.map(f=>{const p=r.filter(x=>x.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},v=n.reduce((x,N)=>{const V=Ee(N,"extendNodeSchema",m);return{...x,...V?V(f):{}}},{}),E=iM({...v,content:ot(Ee(f,"content",m)),marks:ot(Ee(f,"marks",m)),group:ot(Ee(f,"group",m)),inline:ot(Ee(f,"inline",m)),atom:ot(Ee(f,"atom",m)),selectable:ot(Ee(f,"selectable",m)),draggable:ot(Ee(f,"draggable",m)),code:ot(Ee(f,"code",m)),whitespace:ot(Ee(f,"whitespace",m)),linebreakReplacement:ot(Ee(f,"linebreakReplacement",m)),defining:ot(Ee(f,"defining",m)),isolating:ot(Ee(f,"isolating",m)),attrs:Object.fromEntries(p.map(sM))}),b=ot(Ee(f,"parseHTML",m));b&&(E.parseDOM=b.map(x=>rM(x,p)));const S=Ee(f,"renderHTML",m);S&&(E.toDOM=x=>S({node:x,HTMLAttributes:Wf(x,p)}));const w=Ee(f,"renderText",m);return w&&(E.toText=w),[f.name,E]})),h=Object.fromEntries(s.map(f=>{const p=r.filter(w=>w.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},v=n.reduce((w,x)=>{const N=Ee(x,"extendMarkSchema",m);return{...w,...N?N(f):{}}},{}),E=iM({...v,inclusive:ot(Ee(f,"inclusive",m)),excludes:ot(Ee(f,"excludes",m)),group:ot(Ee(f,"group",m)),spanning:ot(Ee(f,"spanning",m)),code:ot(Ee(f,"code",m)),attrs:Object.fromEntries(p.map(sM))}),b=ot(Ee(f,"parseHTML",m));b&&(E.parseDOM=b.map(w=>rM(w,p)));const S=Ee(f,"renderHTML",m);return S&&(E.toDOM=w=>S({mark:w,HTMLAttributes:Wf(w,p)})),[f.name,E]}));return new KP({topNode:a,nodes:u,marks:h})}function rJ(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function gf(n){return n.sort((t,r)=>{const i=Ee(t,"priority")||100,s=Ee(r,"priority")||100;return i>s?-1:i<s?1:0})}function gL(n){const e=gf(QS(n)),t=rJ(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function yL(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,i,(h,f,p,m)=>{var v;h.isBlock&&f>r&&(u+=s);const E=a?.[h.type.name];if(E)return p&&(u+=E({node:h,pos:f,parent:p,index:m,range:e})),!1;h.isText&&(u+=(v=h?.text)==null?void 0:v.slice(Math.max(r,f)-f,i-f))}),u}function iJ(n,e){const t={from:0,to:n.content.size};return yL(n,t,e)}function vL(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function sJ(n,e){const t=tn(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,u=>{s.push(u)});const a=s.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function TL(n,e){const t=Zy(typeof e=="string"?e:e.name,n.schema);return t==="node"?sJ(n,e):t==="mark"?fL(n,e):{}}function oJ(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function aJ(n){const e=oJ(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,a)=>a!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function EL(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((u,h)=>{a.push({from:u,to:h})});else{const{from:u,to:h}=t[s];if(u===void 0||h===void 0)return;a.push({from:u,to:h})}a.forEach(({from:u,to:h})=>{const f=e.slice(s).map(u,-1),p=e.slice(s).map(h),m=e.invert().map(f,-1),v=e.invert().map(p);r.push({oldRange:{from:m,to:v},newRange:{from:f,to:p}})})}),aJ(r)}function JS(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),a=YS(s,i.type);a&&r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}var lJ=(n,e,t,r=20)=>{const i=n.doc.resolve(t);let s=r,a=null;for(;s>0&&a===null;){const u=i.node(s);u?.type.name===e?a=u:s-=1}return[a,s]};function Uh(n,e){return e.nodes[n]||e.marks[n]||null}function Fm(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var uJ=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,a,u)=>{var h,f;const p=((f=(h=i.type.spec).toText)==null?void 0:f.call(h,{node:i,pos:s,parent:a,index:u}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-s))}),t};function Mb(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?$s(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>s?s.name===m.type.name:!0).find(m=>Og(m.attrs,t,{strict:!1}));let a=0;const u=[];if(i.forEach(({$from:m,$to:v})=>{const E=m.pos,b=v.pos;n.doc.nodesBetween(E,b,(S,w)=>{if(s&&S.inlineContent&&!S.type.allowsMarkType(s))return!1;if(!S.isText&&!S.marks.length)return;const x=Math.max(E,w),N=Math.min(b,w+S.nodeSize),V=N-x;a+=V,u.push(...S.marks.map(q=>({mark:q,from:x,to:N})))})}),a===0)return!1;const h=u.filter(m=>s?s.name===m.mark.type.name:!0).filter(m=>Og(m.mark.attrs,t,{strict:!1})).reduce((m,v)=>m+v.to-v.from,0),f=u.filter(m=>s?m.mark.type!==s&&m.mark.type.excludes(s):!0).reduce((m,v)=>m+v.to-v.from,0);return(h>0?h+f:h)>=a}function cJ(n,e,t={}){if(!e)return ua(n,null,t)||Mb(n,null,t);const r=Zy(e,n.schema);return r==="node"?ua(n,e,t):r==="mark"?Mb(n,e,t):!1}var hJ=(n,e)=>{const{$from:t,$to:r,$anchor:i}=n.selection;if(e){const s=ev(u=>u.type.name===e)(n.selection);if(!s)return!1;const a=n.doc.resolve(s.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},fJ=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function oM(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function aM(n,e){const{nodeExtensions:t}=cc(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ot(Ee(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function tv(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(tv(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function bL(n){return n instanceof Se}var _L=class SL{constructor(e){this.position=e}static fromJSON(e){return new SL(e.position)}toJSON(){return{position:this.position}}};function dJ(n,e){const t=e.mapping.mapResult(n.position);return{position:new _L(t.pos),mapResult:t}}function pJ(n){return new _L(n)}function mJ(n,e,t){var r;const{selection:i}=e;let s=null;if(lL(i)&&(s=i.$cursor),s){const u=(r=n.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(t)&&(!!t.isInSet(u)||!u.some(f=>f.type.excludes(t)))}const{ranges:a}=i;return a.some(({$from:u,$to:h})=>{let f=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,h.pos,(p,m,v)=>{if(f)return!1;if(p.isInline){const E=!v||v.type.allowsMarkType(t),b=!!t.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(t));f=E&&b}return!f}),f})}var gJ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:a,ranges:u}=s,h=$s(n,r.schema);if(i)if(a){const f=fL(r,h);t.addStoredMark(h.create({...f,...e}))}else u.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;r.doc.nodesBetween(p,m,(v,E)=>{const b=Math.max(E,p),S=Math.min(E+v.nodeSize,m);v.marks.find(x=>x.type===h)?v.marks.forEach(x=>{h===x.type&&t.addMark(b,S,h.create({...x.attrs,...e}))}):t.addMark(b,S,h.create(e))})});return mJ(r,t,h)},yJ=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),vJ=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=tn(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:u})=>EI(s,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>EI(s,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},TJ=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=cl(n,0,r.content.size),s=Se.create(r,i);e.setSelection(s)}return!0},EJ=(n,e)=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=r;let a,u;return typeof e=="number"?(a=e,u=e):e&&"from"in e&&"to"in e?(a=e.from,u=e.to):(a=s.from,u=s.to),i&&t.doc.nodesBetween(a,u,(h,f)=>{h.isText||t.setNodeMarkup(f,void 0,{...h.attrs,dir:n})}),!0},bJ=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,a=Me.atStart(r).from,u=Me.atEnd(r).to,h=cl(i,a,u),f=cl(s,a,u),p=Me.create(r,h,f);e.setSelection(p)}return!0},_J=n=>({state:e,dispatch:t})=>{const r=tn(n,e.schema);return mY(r)(e,t)};function lM(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e?.includes(i.type.name));n.tr.ensureMarks(r)}}var SJ=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:a}=e,{$from:u,$to:h}=s,f=i.extensionManager.attributes,p=Fm(f,u.node().type.name,u.node().attrs);if(s instanceof Se&&s.node.isBlock)return!u.parentOffset||!Ls(a,u.pos)?!1:(r&&(n&&lM(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=h.parentOffset===h.parent.content.size,v=u.depth===0?void 0:XX(u.node(-1).contentMatchAt(u.indexAfter(-1)));let E=m&&v?[{type:v,attrs:p}]:void 0,b=Ls(e.doc,e.mapping.map(u.pos),1,E);if(!E&&!b&&Ls(e.doc,e.mapping.map(u.pos),1,v?[{type:v}]:void 0)&&(b=!0,E=v?[{type:v,attrs:p}]:void 0),r){if(b&&(s instanceof Me&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,E),v&&!m&&!u.parentOffset&&u.parent.type!==v)){const S=e.mapping.map(u.before()),w=e.doc.resolve(S);u.node(-1).canReplaceWith(w.index(),w.index()+1,v)&&e.setNodeMarkup(e.mapping.map(u.before()),v)}n&&lM(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return b},wJ=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var a;const u=tn(n,r.schema),{$from:h,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||h.depth<2||!h.sameParent(f))return!1;const m=h.node(-1);if(m.type!==u)return!1;const v=s.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==u||h.index(-2)!==h.node(-2).childCount-1)return!1;if(i){let x=le.empty;const N=h.index(-1)?1:h.index(-2)?2:3;for(let k=h.depth-N;k>=h.depth-3;k-=1)x=le.from(h.node(k).copy(x));const V=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,q={...Fm(v,h.node().type.name,h.node().attrs),...e},F=((a=u.contentMatch.defaultType)==null?void 0:a.createAndFill(q))||void 0;x=x.append(le.from(u.createAndFill(null,F)||void 0));const Z=h.before(h.depth-(N-1));t.replace(Z,h.after(-V),new de(x,4-N,0));let I=-1;t.doc.nodesBetween(Z,t.doc.content.size,(k,D)=>{if(I>-1)return!1;k.isTextblock&&k.content.size===0&&(I=D+1)}),I>-1&&t.setSelection(Me.near(t.doc.resolve(I))),t.scrollIntoView()}return!0}const E=f.pos===h.end()?m.contentMatchAt(0).defaultType:null,b={...Fm(v,m.type.name,m.attrs),...e},S={...Fm(v,h.node().type.name,h.node().attrs),...e};t.delete(h.pos,f.pos);const w=E?[{type:u,attrs:b},{type:E,attrs:S}]:[{type:u,attrs:b}];if(!Ls(t.doc,h.pos,2))return!1;if(i){const{selection:x,storedMarks:N}=r,{splittableMarks:V}=s.extensionManager,q=N||x.$to.parentOffset&&x.$from.marks();if(t.split(h.pos,2,w).scrollIntoView(),!q||!i)return!0;const F=q.filter(Z=>V.includes(Z.type.name));t.ensureMarks(F)}return!0},iE=(n,e)=>{const t=ev(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===i?.type&&Ta(n.doc,t.pos)&&n.join(t.pos),!0},sE=(n,e)=>{const t=ev(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===i?.type&&Ta(n.doc,r)&&n.join(r),!0},AJ=(n,e,t,r={})=>({editor:i,tr:s,state:a,dispatch:u,chain:h,commands:f,can:p})=>{const{extensions:m,splittableMarks:v}=i.extensionManager,E=tn(n,a.schema),b=tn(e,a.schema),{selection:S,storedMarks:w}=a,{$from:x,$to:N}=S,V=x.blockRange(N),q=w||S.$to.parentOffset&&S.$from.marks();if(!V)return!1;const F=ev(Z=>aM(Z.type.name,m))(S);if(V.depth>=1&&F&&V.depth-F.depth<=1){if(F.node.type===E)return f.liftListItem(b);if(aM(F.node.type.name,m)&&E.validContent(F.node.content)&&u)return h().command(()=>(s.setNodeMarkup(F.pos,E),!0)).command(()=>iE(s,E)).command(()=>sE(s,E)).run()}return!t||!q||!u?h().command(()=>p().wrapInList(E,r)?!0:f.clearNodes()).wrapInList(E,r).command(()=>iE(s,E)).command(()=>sE(s,E)).run():h().command(()=>{const Z=p().wrapInList(E,r),I=q.filter(k=>v.includes(k.type.name));return s.ensureMarks(I),Z?!0:f.clearNodes()}).wrapInList(E,r).command(()=>iE(s,E)).command(()=>sE(s,E)).run()},CJ=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,a=$s(n,r.schema);return Mb(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,e)},xJ=(n,e,t={})=>({state:r,commands:i})=>{const s=tn(n,r.schema),a=tn(e,r.schema),u=ua(r,s,t);let h;return r.selection.$anchor.sameParent(r.selection.$head)&&(h=r.selection.$anchor.parent.attrs),u?i.setNode(a,h):i.setNode(s,{...h,...t})},RJ=(n,e={})=>({state:t,commands:r})=>{const i=tn(n,t.schema);return ua(t,i,e)?r.lift(i):r.wrapIn(i,e)},kJ=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const a=n.tr,u=s.transform;for(let h=u.steps.length-1;h>=0;h-=1)a.step(u.steps[h].invert(u.docs[h]));if(s.text){const h=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,h))}else a.delete(s.from,s.to)}return!0}}return!1},IJ=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},MJ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,h=$s(n,r.schema),{$from:f,empty:p,ranges:m}=u;if(!i)return!0;if(p&&a){let{from:v,to:E}=u;const b=(s=f.marks().find(w=>w.type===h))==null?void 0:s.attrs,S=YS(f,h,b);S&&(v=S.from,E=S.to),t.removeMark(v,E,h)}else m.forEach(v=>{t.removeMark(v.$from.pos,v.$to.pos,h)});return t.removeStoredMark(h),!0},DJ=n=>({tr:e,state:t,dispatch:r})=>{const{selection:i}=t;let s,a;return typeof n=="number"?(s=n,a=n):n&&"from"in n&&"to"in n?(s=n.from,a=n.to):(s=i.from,a=i.to),r&&e.doc.nodesBetween(s,a,(u,h)=>{if(u.isText)return;const f={...u.attrs};delete f.dir,e.setNodeMarkup(h,void 0,f)}),!0},NJ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=Zy(typeof n=="string"?n:n.name,r.schema);if(!u)return!1;u==="node"&&(s=tn(n,r.schema)),u==="mark"&&(a=$s(n,r.schema));let h=!1;return t.selection.ranges.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;let v,E,b,S;t.selection.empty?r.doc.nodesBetween(p,m,(w,x)=>{s&&s===w.type&&(h=!0,b=Math.max(x,p),S=Math.min(x+w.nodeSize,m),v=x,E=w)}):r.doc.nodesBetween(p,m,(w,x)=>{x<p&&s&&s===w.type&&(h=!0,b=Math.max(x,p),S=Math.min(x+w.nodeSize,m),v=x,E=w),x>=p&&x<=m&&(s&&s===w.type&&(h=!0,i&&t.setNodeMarkup(x,void 0,{...w.attrs,...e})),a&&w.marks.length&&w.marks.forEach(N=>{if(a===N.type&&(h=!0,i)){const V=Math.max(x,p),q=Math.min(x+w.nodeSize,m);t.addMark(V,q,a.create({...N.attrs,...e}))}}))}),E&&(v!==void 0&&i&&t.setNodeMarkup(v,void 0,{...E.attrs,...e}),a&&E.marks.length&&E.marks.forEach(w=>{a===w.type&&i&&t.addMark(b,S,a.create({...w.attrs,...e}))}))}),h},OJ=(n,e={})=>({state:t,dispatch:r})=>{const i=tn(n,t.schema);return lY(i,e)(t,r)},PJ=(n,e={})=>({state:t,dispatch:r})=>{const i=tn(n,t.schema);return uY(i,e)(t,r)},VJ=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(r=>r.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(r=>r!==e):delete this.callbacks[n]),this}once(n,e){const t=(...r)=>{this.off(n,t),e.apply(this,r)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},nv=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},LJ=(n,e)=>{if(WS(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function dm(n){var e;const{editor:t,from:r,to:i,text:s,rules:a,plugin:u}=n,{view:h}=t;if(h.composing)return!1;const f=h.state.doc.resolve(r);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let p=!1;const m=uJ(f)+s;return a.forEach(v=>{if(p)return;const E=LJ(m,v.find);if(!E)return;const b=h.state.tr,S=Xy({state:h.state,transaction:b}),w={from:r-(E[0].length-s.length),to:i},{commands:x,chain:N,can:V}=new Jy({editor:t,state:S});v.handler({state:S,range:w,match:E,commands:x,chain:N,can:V})===null||!b.steps.length||(v.undoable&&b.setMeta(u,{transform:b,from:r,to:i,text:s}),h.dispatch(b),p=!0)}),p}function BJ(n){const{editor:e,rules:t}=n,r=new xt({state:{init(){return null},apply(i,s,a){const u=i.getMeta(r);if(u)return u;const h=i.getMeta("applyInputRules");return h&&setTimeout(()=>{let{text:p}=h;typeof p=="string"?p=p:p=XS(le.from(p),a.schema);const{from:m}=h,v=m+p.length;dm({editor:e,from:m,to:v,text:p,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,u){return dm({editor:e,from:s,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&dm({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?dm({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function UJ(n){return Object.prototype.toString.call(n).slice(8,-1)}function pm(n){return UJ(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function wL(n,e){const t={...n};return pm(n)&&pm(e)&&Object.keys(e).forEach(r=>{pm(e[r])&&pm(n[r])?t[r]=wL(n[r],e[r]):t[r]=e[r]}),t}var ZS=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...ot(Ee(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ot(Ee(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>wL(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},Gs=class AL extends ZS{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new AL(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(f=>f?.type.name===t.name))return!1;const h=a.find(f=>f?.type.name===t.name);return h&&r.removeStoredMark(h),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function zJ(n){return typeof n=="number"}var jJ=class{constructor(n){this.find=n.find,this.handler=n.handler}},FJ=(n,e,t)=>{if(WS(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function HJ(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:a,dropEvent:u}=n,{commands:h,chain:f,can:p}=new Jy({editor:e,state:t}),m=[];return t.doc.nodesBetween(r,i,(E,b)=>{var S,w,x,N,V;if((w=(S=E.type)==null?void 0:S.spec)!=null&&w.code||!(E.isText||E.isTextblock||E.isInline))return;const q=(V=(N=(x=E.content)==null?void 0:x.size)!=null?N:E.nodeSize)!=null?V:0,F=Math.max(r,b),Z=Math.min(i,b+q);if(F>=Z)return;const I=E.isText?E.text||"":E.textBetween(F-b,Z-b,void 0,"");FJ(I,s.find,a).forEach(D=>{if(D.index===void 0)return;const B=F+D.index+1,U=B+D[0].length,H={from:t.tr.mapping.map(B),to:t.tr.mapping.map(U)},O=s.handler({state:t,range:H,match:D,commands:h,chain:f,can:p,pasteEvent:a,dropEvent:u});m.push(O)})}),m.every(E=>E!==null)}var mm=null,qJ=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function $J(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const h=({state:p,from:m,to:v,rule:E,pasteEvt:b})=>{const S=p.tr,w=Xy({state:p,transaction:S});if(!(!HJ({editor:e,state:w,from:Math.max(m-1,0),to:v.b-1,rule:E,pasteEvent:b,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return t.map(p=>new xt({view(m){const v=b=>{var S;r=(S=m.dom.parentElement)!=null&&S.contains(b.target)?m.dom.parentElement:null,r&&(mm=e)},E=()=>{mm&&(mm=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",E),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",E)}}},props:{handleDOMEvents:{drop:(m,v)=>{if(s=r===m.dom.parentElement,u=v,!s){const E=mm;E?.isEditable&&setTimeout(()=>{const b=E.state.selection;b&&E.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(m,v)=>{var E;const b=(E=v.clipboardData)==null?void 0:E.getData("text/html");return a=v,i=!!b?.includes("data-pm-slice"),!1}}},appendTransaction:(m,v,E)=>{const b=m[0],S=b.getMeta("uiEvent")==="paste"&&!i,w=b.getMeta("uiEvent")==="drop"&&!s,x=b.getMeta("applyPasteRules"),N=!!x;if(!S&&!w&&!N)return;if(N){let{text:F}=x;typeof F=="string"?F=F:F=XS(le.from(F),E.schema);const{from:Z}=x,I=Z+F.length,k=qJ(F);return h({rule:p,state:E,from:Z,to:{b:I},pasteEvt:k})}const V=v.doc.content.findDiffStart(E.doc.content),q=v.doc.content.findDiffEnd(E.doc.content);if(!(!zJ(V)||!q||V===q.b))return h({rule:p,state:E,from:V,to:q,pasteEvt:a})}}))}var rv=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=gL(n),this.schema=nJ(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Uh(e.name,this.schema)},r=Ee(e,"addCommands",t);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this;return gf([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:n,type:Uh(r.name,this.schema)},s=[],a=Ee(r,"addKeyboardShortcuts",i);let u={};if(r.type==="mark"&&Ee(r,"exitable",i)&&(u.ArrowRight=()=>Gs.handleExit({editor:n,mark:r})),a){const v=Object.fromEntries(Object.entries(a()).map(([E,b])=>[E,()=>b({editor:n})]));u={...u,...v}}const h=sX(u);s.push(h);const f=Ee(r,"addInputRules",i);if(oM(r,n.options.enableInputRules)&&f){const v=f();if(v&&v.length){const E=BJ({editor:n,rules:v}),b=Array.isArray(E)?E:[E];s.push(...b)}}const p=Ee(r,"addPasteRules",i);if(oM(r,n.options.enablePasteRules)&&p){const v=p();if(v&&v.length){const E=$J({editor:n,rules:v});s.push(...E)}}const m=Ee(r,"addProseMirrorPlugins",i);if(m){const v=m();s.push(...v)}return s})}get attributes(){return mL(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=cc(this.extensions);return Object.fromEntries(e.filter(t=>!!Ee(t,"addNodeView")).map(t=>{const r=this.attributes.filter(h=>h.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:tn(t.name,this.schema)},s=Ee(t,"addNodeView",i);if(!s)return[];const a=s();if(!a)return[];const u=(h,f,p,m,v)=>{const E=Wf(h,r);return a({node:h,view:f,getPos:p,decorations:m,innerDecorations:v,editor:n,extension:t,HTMLAttributes:E})};return[t.name,u]}))}dispatchTransaction(n){const{editor:e}=this;return gf([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Uh(i.name,this.schema)},a=Ee(i,"dispatchTransaction",s);return a?u=>{a.call(s,{transaction:u,next:r})}:r},n)}transformPastedHTML(n){const{editor:e}=this;return gf([...this.extensions]).reduce((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Uh(i.name,this.schema)},a=Ee(i,"transformPastedHTML",s);return a?(u,h)=>{const f=r(u,h);return a.call(s,f)}:r},n||(r=>r))}get markViews(){const{editor:n}=this,{markExtensions:e}=cc(this.extensions);return Object.fromEntries(e.filter(t=>!!Ee(t,"addMarkView")).map(t=>{const r=this.attributes.filter(u=>u.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:$s(t.name,this.schema)},s=Ee(t,"addMarkView",i);if(!s)return[];const a=(u,h,f)=>{const p=Wf(u,r);return s()({mark:u,view:h,inline:f,editor:n,extension:t,HTMLAttributes:p,updateAttributes:m=>{sZ(u,n,m)}})};return[t.name,a]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Uh(e.name,this.schema)};e.type==="mark"&&((t=ot(Ee(e,"keepOnSplit",r)))==null||t)&&this.splittableMarks.push(e.name);const i=Ee(e,"onBeforeCreate",r),s=Ee(e,"onCreate",r),a=Ee(e,"onUpdate",r),u=Ee(e,"onSelectionUpdate",r),h=Ee(e,"onTransaction",r),f=Ee(e,"onFocus",r),p=Ee(e,"onBlur",r),m=Ee(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),u&&this.editor.on("selectionUpdate",u),h&&this.editor.on("transaction",h),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};rv.resolve=gL;rv.sort=gf;rv.flatten=QS;var GJ={};KS(GJ,{ClipboardTextSerializer:()=>xL,Commands:()=>RL,Delete:()=>kL,Drop:()=>IL,Editable:()=>ML,FocusEvents:()=>NL,Keymap:()=>OL,Paste:()=>PL,Tabindex:()=>VL,TextDirection:()=>LL,focusEventsPluginKey:()=>DL});var mt=class CL extends ZS{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new CL(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},xL=mt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new xt({key:new ln("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,a=Math.min(...s.map(p=>p.$from.pos)),u=Math.max(...s.map(p=>p.$to.pos)),h=vL(t);return yL(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:h})}}})]}}),RL=mt.create({name:"commands",addCommands(){return{...oL}}}),kL=mt.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,i;const s=()=>{var a,u,h,f;if((f=(h=(u=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:u.filterTransaction)==null?void 0:h.call(u,n))!=null?f:n.getMeta("y-sync$"))return;const p=dL(n.before,[n,...e]);EL(p).forEach(E=>{p.mapping.mapResult(E.oldRange.from).deletedAfter&&p.mapping.mapResult(E.oldRange.to).deletedBefore&&p.before.nodesBetween(E.oldRange.from,E.oldRange.to,(b,S)=>{const w=S+b.nodeSize-2,x=E.oldRange.from<=S&&w<=E.oldRange.to;this.editor.emit("delete",{type:"node",node:b,from:S,to:w,newFrom:p.mapping.map(S),newTo:p.mapping.map(w),deletedRange:E.oldRange,newRange:E.newRange,partial:!x,editor:this.editor,transaction:n,combinedTransform:p})})});const v=p.mapping;p.steps.forEach((E,b)=>{var S,w;if(E instanceof ci){const x=v.slice(b).map(E.from,-1),N=v.slice(b).map(E.to),V=v.invert().map(x,-1),q=v.invert().map(N),F=(S=p.doc.nodeAt(x-1))==null?void 0:S.marks.some(I=>I.eq(E.mark)),Z=(w=p.doc.nodeAt(N))==null?void 0:w.marks.some(I=>I.eq(E.mark));this.editor.emit("delete",{type:"mark",mark:E.mark,from:E.from,to:E.to,deletedRange:{from:V,to:q},newRange:{from:x,to:N},partial:!!(Z||F),editor:this.editor,transaction:n,combinedTransform:p})}})};(i=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),IL=mt.create({name:"drop",addProseMirrorPlugins(){return[new xt({key:new ln("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),ML=mt.create({name:"editable",addProseMirrorPlugins(){return[new xt({key:new ln("editable"),props:{editable:()=>this.editor.options.editable}})]}}),DL=new ln("focusEvents"),NL=mt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new xt({key:DL,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),OL=mt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:h,doc:f}=u,{empty:p,$anchor:m}=h,{pos:v,parent:E}=m,b=m.parent.isTextblock&&v>0?u.doc.resolve(v-1):m,S=b.parent.type.spec.isolating,w=m.pos-m.parentOffset,x=S&&b.parent.childCount===1?w===m.pos:ze.atStart(f).from===v;return!p||!E.type.isTextblock||E.textContent.length||!x||x&&m.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Pg()||hL()?s:i},addProseMirrorPlugins(){return[new xt({key:new ln("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(S=>S.getMeta("composition")))return;const r=n.some(S=>S.docChanged)&&!e.doc.eq(t.doc),i=n.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:u}=e.selection,h=ze.atStart(e.doc).from,f=ze.atEnd(e.doc).to;if(s||!(a===h&&u===f)||!tv(t.doc))return;const v=t.tr,E=Xy({state:t,transaction:v}),{commands:b}=new Jy({editor:this.editor,state:E});if(b.clearNodes(),!!v.steps.length)return v}})]}}),PL=mt.create({name:"paste",addProseMirrorPlugins(){return[new xt({key:new ln("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),VL=mt.create({name:"tabindex",addProseMirrorPlugins(){return[new xt({key:new ln("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),LL=mt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=cc(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new xt({key:new ln("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),KJ=class Jh{constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Jh(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Jh(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Jh(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,a=t.isInline,u=this.pos+r+(s?0:1);if(u<0||u>this.resolvedPos.doc.nodeSize-2)return;const h=this.resolvedPos.doc.resolve(u);if(!i&&!a&&h.depth<=this.depth)return;const f=new Jh(h,this.editor,i,i||a?t:null);i&&(f.actualDepth=this.depth+1),e.push(f)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,a=Object.keys(t);for(let u=0;u<a.length;u+=1){const h=a[u];if(s[h]!==t[h])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&s.every(h=>t[h]===a.node.attrs[h])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},WJ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function YJ(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}var QJ=class extends VJ{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:dJ,createMappablePosition:pJ},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=uL(e,this.options.autofocus);this.editorState=qu.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=YJ(WJ,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=pL(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;t=t.filter(a=>!a.key.startsWith(s))}),e.length===t.length)return;const r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}createExtensionManager(){var n,e;const r=[...this.options.enableCoreExtensions?[ML,xL.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),RL,NL,OL,VL,IL,PL,kL,LL.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new rv(r,this)}createCommandManager(){this.commandManager=new Jy({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=Ib(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=Ib(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=t?this.extensionManager.dispatchTransaction(r):r,s=e.transformPastedHTML,a=this.extensionManager.transformPastedHTML(s);this.editorView=new iL(n,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:i,transformPastedHTML:a,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const u=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(u),this.prependClass(),this.injectCSS();const h=this.view.dom;h.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(f=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(f)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),r=!this.state.selection.eq(e.selection),i=t.includes(n),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const a=t.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),u=a?.getMeta("focus"),h=a?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:a}),h&&this.emit("blur",{editor:this,event:h.event,transaction:a}),!(n.getMeta("preventUpdate")||!t.some(f=>f.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return TL(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,r=typeof n=="string"?e:n;return cJ(this.state,t,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return XS(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return iJ(this.state.doc,{blockSeparator:e,textSerializers:{...vL(this.schema),...t}})}get isEmpty(){return tv(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new KJ(e,this)}get $doc(){return this.$pos(0)}};function Ml(n){return new nv({find:n.find,handler:({state:e,range:t,match:r})=>{const i=ot(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],u=r[0];if(a){const h=u.search(/\S/),f=t.from+u.indexOf(a),p=f+a.length;if(JS(t.from,t.to,e.doc).filter(E=>E.mark.type.excluded.find(S=>S===n.type&&S!==E.mark.type)).filter(E=>E.to>f).length)return null;p<t.to&&s.delete(p,t.to),f>t.from&&s.delete(t.from+h,f);const v=t.from+h+a.length;s.addMark(t.from+h,v,n.type.create(i||{})),s.removeStoredMark(n.type)}},undoable:n.undoable})}function XJ(n){return new nv({find:n.find,handler:({state:e,range:t,match:r})=>{const i=ot(n.getAttributes,void 0,r)||{},{tr:s}=e,a=t.from;let u=t.to;const h=n.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=a+f;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];s.insertText(m,a+r[0].length-1),s.replaceWith(p,u,h)}else if(r[0]){const f=n.type.isInline?a:a-1;s.insert(f,n.type.create(i)).delete(s.mapping.map(a),s.mapping.map(u))}s.scrollIntoView()},undoable:n.undoable})}function Db(n){return new nv({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=ot(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)},undoable:n.undoable})}function hc(n){return new nv({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=ot(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),h=a.doc.resolve(t.from).blockRange(),f=h&&MS(h,n.type,s);if(!f)return null;if(a.wrap(h,f),n.keepMarks&&n.editor){const{selection:m,storedMarks:v}=e,{splittableMarks:E}=n.editor.extensionManager,b=v||m.$to.parentOffset&&m.$from.marks();if(b){const S=b.filter(w=>E.includes(w.type.name));a.ensureMarks(S)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,s).run()}const p=a.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&Ta(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&a.join(t.from-1)},undoable:n.undoable})}function JJ(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof Se){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var ZJ={};KS(ZJ,{createAtomBlockMarkdownSpec:()=>eZ,createBlockMarkdownSpec:()=>tZ,createInlineMarkdownSpec:()=>iZ,parseAttributes:()=>ew,parseIndentedBlocks:()=>Nb,renderNestedMarkdownContent:()=>nw,serializeAttributes:()=>tw});function ew(n){if(!n?.trim())return{};const e={},t=[],r=n.replace(/["']([^"']*)["']/g,f=>(t.push(f),`__QUOTED_${t.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(p=>p.trim().slice(1));e.class=f.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(a)).forEach(([,f,p])=>{var m;const v=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),E=t[v];E&&(e[f]=E.slice(1,-1))});const h=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return h&&h.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function tw(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,r])=>{t==="class"||t==="id"||(r===!0?e.push(t):r!==!1&&r!=null&&e.push(`${t}="${String(r)}"`))}),e.join(" ")}function eZ(n){const{nodeName:e,name:t,parseAttributes:r=ew,serializeAttributes:i=tw,defaultAttributes:s={},requiredAttributes:a=[],allowedAttributes:u}=n,h=t||e,f=p=>{if(!u)return p;const m={};return u.forEach(v=>{v in p&&(m[v]=p[v])}),m};return{parseMarkdown:(p,m)=>{const v={...s,...p.attributes};return m.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const v=new RegExp(`^:::${h}(?:\\s|$)`,"m"),E=(m=p.match(v))==null?void 0:m.index;return E!==void 0?E:-1},tokenize(p,m,v){const E=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),b=p.match(E);if(!b)return;const S=b[1]||"",w=r(S);if(!a.find(N=>!(N in w)))return{type:e,raw:b[0],attributes:w}}},renderMarkdown:p=>{const m=f(p.attrs||{}),v=i(m),E=v?` {${v}}`:"";return`:::${h}${E} :::`}}}function tZ(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=ew,serializeAttributes:s=tw,defaultAttributes:a={},content:u="block",allowedAttributes:h}=n,f=t||e,p=m=>{if(!h)return m;const v={};return h.forEach(E=>{E in m&&(v[E]=m[E])}),v};return{parseMarkdown:(m,v)=>{let E;if(r){const S=r(m);E=typeof S=="string"?[{type:"text",text:S}]:S}else u==="block"?E=v.parseChildren(m.tokens||[]):E=v.parseInline(m.tokens||[]);const b={...a,...m.attributes};return v.createNode(e,b,E)},markdownTokenizer:{name:e,level:"block",start(m){var v;const E=new RegExp(`^:::${f}`,"m"),b=(v=m.match(E))==null?void 0:v.index;return b!==void 0?b:-1},tokenize(m,v,E){var b;const S=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),w=m.match(S);if(!w)return;const[x,N=""]=w,V=i(N);let q=1;const F=x.length;let Z="";const I=/^:::([\w-]*)(\s.*)?/gm,k=m.slice(F);for(I.lastIndex=0;;){const D=I.exec(k);if(D===null)break;const B=D.index,U=D[1];if(!((b=D[2])!=null&&b.endsWith(":::"))){if(U)q+=1;else if(q-=1,q===0){const H=k.slice(0,B);Z=H.trim();const O=m.slice(0,F+B+D[0].length);let ke=[];if(Z)if(u==="block")for(ke=E.blockTokens(H),ke.forEach(Ce=>{Ce.text&&(!Ce.tokens||Ce.tokens.length===0)&&(Ce.tokens=E.inlineTokens(Ce.text))});ke.length>0;){const Ce=ke[ke.length-1];if(Ce.type==="paragraph"&&(!Ce.text||Ce.text.trim()===""))ke.pop();else break}else ke=E.inlineTokens(Z);return{type:e,raw:O,attributes:V,content:Z,tokens:ke}}}}}},renderMarkdown:(m,v)=>{const E=p(m.attrs||{}),b=s(E),S=b?` {${b}}`:"",w=v.renderChildren(m.content||[],`

`);return`:::${f}${S}

${w}

:::`}}}function nZ(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=t.exec(n);for(;r!==null;){const[,i,s,a]=r;e[i]=s||a,r=t.exec(n)}return e}function rZ(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function iZ(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=nZ,serializeAttributes:s=rZ,defaultAttributes:a={},selfClosing:u=!1,allowedAttributes:h}=n,f=t||e,p=v=>{if(!h)return v;const E={};return h.forEach(b=>{const S=typeof b=="string"?b:b.name,w=typeof b=="string"?void 0:b.skipIfDefault;if(S in v){const x=v[S];if(w!==void 0&&x===w)return;E[S]=x}}),E},m=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,E)=>{const b={...a,...v.attributes};if(u)return E.createNode(e,b);const S=r?r(v):v.content||"";return S?E.createNode(e,b,[E.createTextNode(S)]):E.createNode(e,b,[])},markdownTokenizer:{name:e,level:"inline",start(v){const E=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),b=v.match(E),S=b?.index;return S!==void 0?S:-1},tokenize(v,E,b){const S=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),w=v.match(S);if(!w)return;let x="",N="";if(u){const[,q]=w;N=q}else{const[,q,F]=w;N=q,x=F||""}const V=i(N.trim());return{type:e,raw:w[0],content:x.trim(),attributes:V}}},renderMarkdown:v=>{let E="";r?E=r(v):v.content&&v.content.length>0&&(E=v.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const b=p(v.attrs||{}),S=s(b),w=S?` ${S}`:"";return u?`[${f}${w}]`:`[${f}${w}]${E}[/${f}]`}}}function Nb(n,e,t){var r,i,s,a;const u=n.split(`
`),h=[];let f="",p=0;const m=e.baseIndentSize||2;for(;p<u.length;){const v=u[p],E=v.match(e.itemPattern);if(!E){if(h.length>0)break;if(v.trim()===""){p+=1,f=`${f}${v}
`;continue}else return}const b=e.extractItemData(E),{indentLevel:S,mainContent:w}=b;f=`${f}${v}
`;const x=[w];for(p+=1;p<u.length;){const F=u[p];if(F.trim()===""){const I=u.slice(p+1).findIndex(B=>B.trim()!=="");if(I===-1)break;if((((i=(r=u[p+1+I].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>S){x.push(F),f=`${f}${F}
`,p+=1;continue}else break}if((((a=(s=F.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:a.length)||0)>S)x.push(F),f=`${f}${F}
`,p+=1;else break}let N;const V=x.slice(1);if(V.length>0){const F=V.map(Z=>Z.slice(S+m)).join(`
`);F.trim()&&(e.customNestedParser?N=e.customNestedParser(F):N=t.blockTokens(F))}const q=e.createToken(b,N);h.push(q)}if(h.length!==0)return{items:h,raw:f}}function nw(n,e,t,r){if(!n||!Array.isArray(n.content))return"";const i=typeof t=="function"?t(r):t,[s,...a]=n.content,u=e.renderChildren([s]),h=[`${i}${u}`];return a&&a.length>0&&a.forEach(f=>{const p=e.renderChildren([f]);if(p){const m=p.split(`
`).map(v=>v?e.indent(v):"").join(`
`);h.push(m)}}),h.join(`
`)}function sZ(n,e,t={}){const{state:r}=e,{doc:i,tr:s}=r,a=n;i.descendants((u,h)=>{const f=s.mapping.map(h),p=s.mapping.map(h)+u.nodeSize;let m=null;if(u.marks.forEach(E=>{if(E!==a)return!1;m=E}),!m)return;let v=!1;if(Object.keys(t).forEach(E=>{t[E]!==m.attrs[E]&&(v=!0)}),v){const E=n.type.create({...n.attrs,...t});s.removeMark(f,p,n.type),s.addMark(f,p,E)}}),s.docChanged&&e.view.dispatch(s)}var _r=class BL extends ZS{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new BL(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function ca(n){return new jJ({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=ot(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=e,u=r[r.length-1],h=r[0];let f=t.to;if(u){const p=h.search(/\S/),m=t.from+h.indexOf(u),v=m+u.length;if(JS(t.from,t.to,e.doc).filter(b=>b.mark.type.excluded.find(w=>w===n.type&&w!==b.mark.type)).filter(b=>b.to>m).length)return null;v<t.to&&a.delete(v,t.to),m>t.from&&a.delete(t.from+p,m),f=t.from+p+u.length,a.addMark(t.from+p,f,n.type.create(s||{})),a.removeStoredMark(n.type)}}})}const{getOwnPropertyNames:oZ,getOwnPropertySymbols:aZ}=Object,{hasOwnProperty:lZ}=Object.prototype;function oE(n,e){return function(r,i,s){return n(r,i,s)&&e(r,i,s)}}function gm(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);const{cache:s}=i,a=s.get(t),u=s.get(r);if(a&&u)return a===r&&u===t;s.set(t,r),s.set(r,t);const h=n(t,r,i);return s.delete(t),s.delete(r),h}}function uZ(n){return n?.[Symbol.toStringTag]}function uM(n){return oZ(n).concat(aZ(n))}const cZ=Object.hasOwn||((n,e)=>lZ.call(n,e));function Ll(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const hZ="__v",fZ="__o",dZ="_owner",{getOwnPropertyDescriptor:cM,keys:hM}=Object;function pZ(n,e){return n.byteLength===e.byteLength&&Vg(new Uint8Array(n),new Uint8Array(e))}function mZ(n,e,t){let r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function gZ(n,e){return n.byteLength===e.byteLength&&Vg(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function yZ(n,e){return Ll(n.getTime(),e.getTime())}function vZ(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function TZ(n,e){return n===e}function fM(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=n.entries();let a,u,h=0;for(;(a=s.next())&&!a.done;){const f=e.entries();let p=!1,m=0;for(;(u=f.next())&&!u.done;){if(i[m]){m++;continue}const v=a.value,E=u.value;if(t.equals(v[0],E[0],h,m,n,e,t)&&t.equals(v[1],E[1],v[0],E[0],n,e,t)){p=i[m]=!0;break}m++}if(!p)return!1;h++}return!0}const EZ=Ll;function bZ(n,e,t){const r=hM(n);let i=r.length;if(hM(e).length!==i)return!1;for(;i-- >0;)if(!UL(n,e,t,r[i]))return!1;return!0}function zh(n,e,t){const r=uM(n);let i=r.length;if(uM(e).length!==i)return!1;let s,a,u;for(;i-- >0;)if(s=r[i],!UL(n,e,t,s)||(a=cM(n,s),u=cM(e,s),(a||u)&&(!a||!u||a.configurable!==u.configurable||a.enumerable!==u.enumerable||a.writable!==u.writable)))return!1;return!0}function _Z(n,e){return Ll(n.valueOf(),e.valueOf())}function SZ(n,e){return n.source===e.source&&n.flags===e.flags}function dM(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=n.values();let a,u;for(;(a=s.next())&&!a.done;){const h=e.values();let f=!1,p=0;for(;(u=h.next())&&!u.done;){if(!i[p]&&t.equals(a.value,u.value,a.value,u.value,n,e,t)){f=i[p]=!0;break}p++}if(!f)return!1}return!0}function Vg(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function wZ(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function UL(n,e,t,r){return(r===dZ||r===fZ||r===hZ)&&(n.$$typeof||e.$$typeof)?!0:cZ(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}const AZ="[object ArrayBuffer]",CZ="[object Arguments]",xZ="[object Boolean]",RZ="[object DataView]",kZ="[object Date]",IZ="[object Error]",MZ="[object Map]",DZ="[object Number]",NZ="[object Object]",OZ="[object RegExp]",PZ="[object Set]",VZ="[object String]",LZ={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},BZ="[object URL]",UZ=Object.prototype.toString;function zZ({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:a,areNumbersEqual:u,areObjectsEqual:h,arePrimitiveWrappersEqual:f,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:v,areUrlsEqual:E,unknownTagComparators:b}){return function(w,x,N){if(w===x)return!0;if(w==null||x==null)return!1;const V=typeof w;if(V!==typeof x)return!1;if(V!=="object")return V==="number"?u(w,x,N):V==="function"?s(w,x,N):!1;const q=w.constructor;if(q!==x.constructor)return!1;if(q===Object)return h(w,x,N);if(Array.isArray(w))return e(w,x,N);if(q===Date)return r(w,x,N);if(q===RegExp)return p(w,x,N);if(q===Map)return a(w,x,N);if(q===Set)return m(w,x,N);const F=UZ.call(w);if(F===kZ)return r(w,x,N);if(F===OZ)return p(w,x,N);if(F===MZ)return a(w,x,N);if(F===PZ)return m(w,x,N);if(F===NZ)return typeof w.then!="function"&&typeof x.then!="function"&&h(w,x,N);if(F===BZ)return E(w,x,N);if(F===IZ)return i(w,x,N);if(F===CZ)return h(w,x,N);if(LZ[F])return v(w,x,N);if(F===AZ)return n(w,x,N);if(F===RZ)return t(w,x,N);if(F===xZ||F===DZ||F===VZ)return f(w,x,N);if(b){let Z=b[F];if(!Z){const I=uZ(w);I&&(Z=b[I])}if(Z)return Z(w,x,N)}return!1}}function jZ({circular:n,createCustomConfig:e,strict:t}){let r={areArrayBuffersEqual:pZ,areArraysEqual:t?zh:mZ,areDataViewsEqual:gZ,areDatesEqual:yZ,areErrorsEqual:vZ,areFunctionsEqual:TZ,areMapsEqual:t?oE(fM,zh):fM,areNumbersEqual:EZ,areObjectsEqual:t?zh:bZ,arePrimitiveWrappersEqual:_Z,areRegExpsEqual:SZ,areSetsEqual:t?oE(dM,zh):dM,areTypedArraysEqual:t?oE(Vg,zh):Vg,areUrlsEqual:wZ,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),n){const i=gm(r.areArraysEqual),s=gm(r.areMapsEqual),a=gm(r.areObjectsEqual),u=gm(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:u})}return r}function FZ(n){return function(e,t,r,i,s,a,u){return n(e,t,u)}}function HZ({circular:n,comparator:e,createState:t,equals:r,strict:i}){if(t)return function(u,h){const{cache:f=n?new WeakMap:void 0,meta:p}=t();return e(u,h,{cache:f,equals:r,meta:p,strict:i})};if(n)return function(u,h){return e(u,h,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(u,h){return e(u,h,s)}}const qZ=ba();ba({strict:!0});ba({circular:!0});ba({circular:!0,strict:!0});ba({createInternalComparator:()=>Ll});ba({strict:!0,createInternalComparator:()=>Ll});ba({circular:!0,createInternalComparator:()=>Ll});ba({circular:!0,createInternalComparator:()=>Ll,strict:!0});function ba(n={}){const{circular:e=!1,createInternalComparator:t,createState:r,strict:i=!1}=n,s=jZ(n),a=zZ(s),u=t?t(a):FZ(a);return HZ({circular:e,comparator:a,createState:r,equals:u,strict:i})}var aE={exports:{}},lE={};var pM;function $Z(){if(pM)return lE;pM=1;var n=Xf(),e=IP();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,h=n.useDebugValue;return lE.useSyncExternalStoreWithSelector=function(f,p,m,v,E){var b=s(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=u(function(){function x(Z){if(!N){if(N=!0,V=Z,Z=v(Z),E!==void 0&&S.hasValue){var I=S.value;if(E(I,Z))return q=I}return q=Z}if(I=q,r(V,Z))return I;var k=v(Z);return E!==void 0&&E(I,k)?(V=Z,I):(V=Z,q=k)}var N=!1,V,q,F=m===void 0?null:m;return[function(){return x(p())},F===null?void 0:function(){return x(F())}]},[p,m,v,E]);var w=i(f,b[0],b[1]);return a(function(){S.hasValue=!0,S.value=w},[w]),h(w),w},lE}var mM;function GZ(){return mM||(mM=1,aE.exports=$Z()),aE.exports}var KZ=GZ(),WZ=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},YZ=({contentComponent:n})=>{const e=MP.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return $.jsx($.Fragment,{children:Object.values(e)})};function QZ(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:FU.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}var XZ=class extends vl.Component{constructor(n){var e;super(n),this.editorContentRef=vl.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=QZ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return $.jsxs($.Fragment,{children:[$.jsx("div",{ref:WZ(e,this.editorContentRef),...t}),n?.contentComponent&&$.jsx(YZ,{contentComponent:n.contentComponent})]})}},JZ=P.forwardRef((n,e)=>{const t=vl.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return vl.createElement(XZ,{key:t,innerRef:e,...n})}),zL=vl.memo(JZ),ZZ=typeof window<"u"?P.useLayoutEffect:P.useEffect,eee=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function tee(n){var e;const[t]=P.useState(()=>new eee(n.editor)),r=KZ.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:qZ);return ZZ(()=>t.watch(n.editor),[n.editor,t]),P.useDebugValue(r),r}var nee=!1,Ob=typeof window>"u",ree=Ob||!!(typeof window<"u"&&window.next),iee=class jL{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Ob||ree?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new QJ(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var a;return i===((a=t.extensions)==null?void 0:a[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?jL.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function see(n={},e=[]){const t=P.useRef(n);t.current=n;const[r]=P.useState(()=>new iee(t)),i=MP.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return P.useDebugValue(i),P.useEffect(r.onRender(e)),tee({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&s===0?0:s+1}),i}var FL=P.createContext({editor:null});FL.Consumer;var oee=P.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),aee=()=>P.useContext(oee);vl.forwardRef((n,e)=>{const{onDragStart:t}=aee(),r=n.as||"div";return $.jsx(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});vl.createContext({markViewContentRef:()=>{}});var rw=P.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});rw.displayName="TiptapContext";var lee=()=>P.useContext(rw);function HL({editor:n,instance:e,children:t}){const r=n??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=P.useMemo(()=>({editor:r}),[r]),s=P.useMemo(()=>({editor:r}),[r]);return $.jsx(FL.Provider,{value:s,children:$.jsx(rw.Provider,{value:i,children:t})})}HL.displayName="Tiptap";function qL({...n}){const{editor:e}=lee();return $.jsx(zL,{editor:e,...n})}qL.displayName="Tiptap.Content";Object.assign(HL,{Content:qL});var Lg=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},uee=/^\s*>\s$/,cee=_r.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Lg("blockquote",{...Ot(this.options.HTMLAttributes,n),children:Lg("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",r=[];return n.content.forEach(i=>{const u=e.renderChildren([i]).split(`
`).map(h=>h.trim()===""?t:`${t} ${h}`);r.push(u.join(`
`))}),r.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[hc({find:uee,type:this.type})]}}),hee=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,fee=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,dee=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,pee=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,mee=Gs.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Lg("strong",{...Ot(this.options.HTMLAttributes,n),children:Lg("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ml({find:hee,type:this.type}),Ml({find:dee,type:this.type})]},addPasteRules(){return[ca({find:fee,type:this.type}),ca({find:pee,type:this.type})]}}),gee=/(^|[^`])`([^`]+)`(?!`)$/,yee=/(^|[^`])`([^`]+)`(?!`)/g,vee=Gs.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Ot(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ml({find:gee,type:this.type})]},addPasteRules(){return[ca({find:yee,type:this.type})]}}),uE=4,Tee=/^```([a-z]+)?[\s\n]$/,Eee=/^~~~([a-z]+)?[\s\n]$/,bee=_r.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:uE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const s=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Ot(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let r="";const i=((t=n.attrs)==null?void 0:t.language)||"";return n.content?r=[`\`\`\`${i}`,e.renderChildren(n.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:uE,{state:r}=n,{selection:i}=r,{$from:s,empty:a}=i;if(s.parent.type!==this.type)return!1;const u=" ".repeat(t);return a?n.commands.insertContent(u):n.commands.command(({tr:h})=>{const{from:f,to:p}=i,E=r.doc.textBetween(f,p,`
`,`
`).split(`
`).map(b=>u+b).join(`
`);return h.replaceWith(f,p,r.schema.text(E)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:uE,{state:r}=n,{selection:i}=r,{$from:s,empty:a}=i;return s.parent.type!==this.type?!1:a?n.commands.command(({tr:u})=>{var h;const{pos:f}=s,p=s.start(),m=s.end(),E=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let b=0,S=0;const w=f-p;for(let Z=0;Z<E.length;Z+=1){if(S+E[Z].length>=w){b=Z;break}S+=E[Z].length+1}const N=((h=E[b].match(/^ */))==null?void 0:h[0])||"",V=Math.min(N.length,t);if(V===0)return!0;let q=p;for(let Z=0;Z<b;Z+=1)q+=E[Z].length+1;return u.delete(q,q+V),f-q<=V&&u.setSelection(Me.create(u.doc,q)),!0}):n.commands.command(({tr:u})=>{const{from:h,to:f}=i,v=r.doc.textBetween(h,f,`
`,`
`).split(`
`).map(E=>{var b;const S=((b=E.match(/^ */))==null?void 0:b[0])||"",w=Math.min(S.length,t);return E.slice(w)}).join(`
`);return u.replaceWith(h,f,r.schema.text(v)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:f})=>(f.setSelection(ze.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[Db({find:Tee,type:this.type,getAttributes:n=>({language:n[1]})}),Db({find:Eee,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new xt({key:new ln("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!t||!s)return!1;const{tr:a,schema:u}=n.state,h=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},h)),a.selection.$from.parent.type!==this.type&&a.setSelection(Me.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),_ee=_r.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),See=_r.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Ot(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,h=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&h&&a){const m=h.filter(v=>u.includes(v.type.name));f.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),wee=_r.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Ot(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const r=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,i="#".repeat(r);return n.content?`${i} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Db({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),Aee=_r.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Ot(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!JJ(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,i=n();return bL(t)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:a,dispatch:u})=>{if(u){const{$to:h}=a.selection,f=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?a.setSelection(Me.create(a.doc,h.pos+1)):h.nodeAfter.isBlock?a.setSelection(Se.create(a.doc,h.pos)):a.setSelection(Me.create(a.doc,h.pos));else{const p=s.schema.nodes[this.options.nextNodeType]||h.parent.type.contentMatch.defaultType,m=p?.create();m&&(a.insert(f,m),a.setSelection(Me.create(a.doc,f+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[XJ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Cee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,xee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Ree=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,kee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Iee=Gs.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Ot(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ml({find:Cee,type:this.type}),Ml({find:Ree,type:this.type})]},addPasteRules(){return[ca({find:xee,type:this.type}),ca({find:kee,type:this.type})]}});const Mee="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Dee="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Pb="numeric",Vb="ascii",Lb="alpha",yf="asciinumeric",Zh="alphanumeric",Bb="domain",$L="emoji",Nee="scheme",Oee="slashscheme",cE="whitespace";function Pee(n,e){return n in e||(e[n]=[]),e[n]}function hl(n,e,t){e[Pb]&&(e[yf]=!0,e[Zh]=!0),e[Vb]&&(e[yf]=!0,e[Lb]=!0),e[yf]&&(e[Zh]=!0),e[Lb]&&(e[Zh]=!0),e[Zh]&&(e[Bb]=!0),e[$L]&&(e[Bb]=!0);for(const r in e){const i=Pee(r,t);i.indexOf(n)<0&&i.push(n)}}function Vee(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function rr(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}rr.groups={};rr.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||rr.groups;let i;return e&&e.j?i=e:(i=new rr(e),t&&r&&hl(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(n[a]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||rr.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let a,u=i.go(n);if(u?(a=new rr,Object.assign(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new rr,s){if(r)if(a.t&&typeof a.t=="string"){const h=Object.assign(Vee(a.t,r),t);hl(s,h,r)}else t&&hl(s,t,r);a.t=s}return i.j[n]=a,a}};const Ue=(n,e,t,r,i)=>n.ta(e,t,r,i),It=(n,e,t,r,i)=>n.tr(e,t,r,i),gM=(n,e,t,r,i)=>n.ts(e,t,r,i),ue=(n,e,t,r,i)=>n.tt(e,t,r,i),Rs="WORD",Ub="UWORD",GL="ASCIINUMERICAL",KL="ALPHANUMERICAL",Yf="LOCALHOST",zb="TLD",jb="UTLD",Hm="SCHEME",Lu="SLASH_SCHEME",iw="NUM",Fb="WS",sw="NL",vf="OPENBRACE",Tf="CLOSEBRACE",Bg="OPENBRACKET",Ug="CLOSEBRACKET",zg="OPENPAREN",jg="CLOSEPAREN",Fg="OPENANGLEBRACKET",Hg="CLOSEANGLEBRACKET",qg="FULLWIDTHLEFTPAREN",$g="FULLWIDTHRIGHTPAREN",Gg="LEFTCORNERBRACKET",Kg="RIGHTCORNERBRACKET",Wg="LEFTWHITECORNERBRACKET",Yg="RIGHTWHITECORNERBRACKET",Qg="FULLWIDTHLESSTHAN",Xg="FULLWIDTHGREATERTHAN",Jg="AMPERSAND",Zg="APOSTROPHE",ey="ASTERISK",No="AT",ty="BACKSLASH",ny="BACKTICK",ry="CARET",Uo="COLON",ow="COMMA",iy="DOLLAR",ji="DOT",sy="EQUALS",aw="EXCLAMATION",Lr="HYPHEN",Ef="PERCENT",oy="PIPE",ay="PLUS",ly="POUND",bf="QUERY",lw="QUOTE",WL="FULLWIDTHMIDDLEDOT",uw="SEMI",Fi="SLASH",_f="TILDE",uy="UNDERSCORE",YL="EMOJI",cy="SYM";var QL=Object.freeze({__proto__:null,ALPHANUMERICAL:KL,AMPERSAND:Jg,APOSTROPHE:Zg,ASCIINUMERICAL:GL,ASTERISK:ey,AT:No,BACKSLASH:ty,BACKTICK:ny,CARET:ry,CLOSEANGLEBRACKET:Hg,CLOSEBRACE:Tf,CLOSEBRACKET:Ug,CLOSEPAREN:jg,COLON:Uo,COMMA:ow,DOLLAR:iy,DOT:ji,EMOJI:YL,EQUALS:sy,EXCLAMATION:aw,FULLWIDTHGREATERTHAN:Xg,FULLWIDTHLEFTPAREN:qg,FULLWIDTHLESSTHAN:Qg,FULLWIDTHMIDDLEDOT:WL,FULLWIDTHRIGHTPAREN:$g,HYPHEN:Lr,LEFTCORNERBRACKET:Gg,LEFTWHITECORNERBRACKET:Wg,LOCALHOST:Yf,NL:sw,NUM:iw,OPENANGLEBRACKET:Fg,OPENBRACE:vf,OPENBRACKET:Bg,OPENPAREN:zg,PERCENT:Ef,PIPE:oy,PLUS:ay,POUND:ly,QUERY:bf,QUOTE:lw,RIGHTCORNERBRACKET:Kg,RIGHTWHITECORNERBRACKET:Yg,SCHEME:Hm,SEMI:uw,SLASH:Fi,SLASH_SCHEME:Lu,SYM:cy,TILDE:_f,TLD:zb,UNDERSCORE:uy,UTLD:jb,UWORD:Ub,WORD:Rs,WS:Fb});const Cs=/[a-z]/,jh=new RegExp("\\p{L}","u"),hE=new RegExp("\\p{Emoji}","u"),xs=/\d/,fE=/\s/,yM="\r",dE=`
`,Lee="",Bee="",pE="";let ym=null,vm=null;function Uee(n=[]){const e={};rr.groups=e;const t=new rr;ym==null&&(ym=vM(Mee)),vm==null&&(vm=vM(Dee)),ue(t,"'",Zg),ue(t,"{",vf),ue(t,"}",Tf),ue(t,"[",Bg),ue(t,"]",Ug),ue(t,"(",zg),ue(t,")",jg),ue(t,"<",Fg),ue(t,">",Hg),ue(t,"",qg),ue(t,"",$g),ue(t,"",Gg),ue(t,"",Kg),ue(t,"",Wg),ue(t,"",Yg),ue(t,"",Qg),ue(t,"",Xg),ue(t,"&",Jg),ue(t,"*",ey),ue(t,"@",No),ue(t,"`",ny),ue(t,"^",ry),ue(t,":",Uo),ue(t,",",ow),ue(t,"$",iy),ue(t,".",ji),ue(t,"=",sy),ue(t,"!",aw),ue(t,"-",Lr),ue(t,"%",Ef),ue(t,"|",oy),ue(t,"+",ay),ue(t,"#",ly),ue(t,"?",bf),ue(t,'"',lw),ue(t,"/",Fi),ue(t,";",uw),ue(t,"~",_f),ue(t,"_",uy),ue(t,"\\",ty),ue(t,"",WL);const r=It(t,xs,iw,{[Pb]:!0});It(r,xs,r);const i=It(r,Cs,GL,{[yf]:!0}),s=It(r,jh,KL,{[Zh]:!0}),a=It(t,Cs,Rs,{[Vb]:!0});It(a,xs,i),It(a,Cs,a),It(i,xs,i),It(i,Cs,i);const u=It(t,jh,Ub,{[Lb]:!0});It(u,Cs),It(u,xs,s),It(u,jh,u),It(s,xs,s),It(s,Cs),It(s,jh,s);const h=ue(t,dE,sw,{[cE]:!0}),f=ue(t,yM,Fb,{[cE]:!0}),p=It(t,fE,Fb,{[cE]:!0});ue(t,pE,p),ue(f,dE,h),ue(f,pE,p),It(f,fE,p),ue(p,yM),ue(p,dE),It(p,fE,p),ue(p,pE,p);const m=It(t,hE,YL,{[$L]:!0});ue(m,"#"),It(m,hE,m),ue(m,Lee,m);const v=ue(m,Bee);ue(v,"#"),It(v,hE,m);const E=[[Cs,a],[xs,i]],b=[[Cs,null],[jh,u],[xs,s]];for(let S=0;S<ym.length;S++)Ro(t,ym[S],zb,Rs,E);for(let S=0;S<vm.length;S++)Ro(t,vm[S],jb,Ub,b);hl(zb,{tld:!0,ascii:!0},e),hl(jb,{utld:!0,alpha:!0},e),Ro(t,"file",Hm,Rs,E),Ro(t,"mailto",Hm,Rs,E),Ro(t,"http",Lu,Rs,E),Ro(t,"https",Lu,Rs,E),Ro(t,"ftp",Lu,Rs,E),Ro(t,"ftps",Lu,Rs,E),hl(Hm,{scheme:!0,ascii:!0},e),hl(Lu,{slashscheme:!0,ascii:!0},e),n=n.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<n.length;S++){const w=n[S][0],N=n[S][1]?{[Nee]:!0}:{[Oee]:!0};w.indexOf("-")>=0?N[Bb]=!0:Cs.test(w)?xs.test(w)?N[yf]=!0:N[Vb]=!0:N[Pb]=!0,gM(t,w,w,N)}return gM(t,"localhost",Yf,{ascii:!0}),t.jd=new rr(cy),{start:t,tokens:Object.assign({groups:e},QL)}}function XL(n,e){const t=zee(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,i=[];let s=0,a=0;for(;a<r;){let u=n,h=null,f=0,p=null,m=-1,v=-1;for(;a<r&&(h=u.go(t[a]));)u=h,u.accepts()?(m=0,v=0,p=u):m>=0&&(m+=t[a].length,v++),f+=t[a].length,s+=t[a].length,a++;s-=m,a-=v,f-=m,i.push({t:p.t,v:e.slice(s-f,s),s:s-f,e:s})}return i}function zee(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,a=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function Ro(n,e,t,r,i){let s;const a=e.length;for(let u=0;u<a-1;u++){const h=e[u];n.j[h]?s=n.j[h]:(s=new rr(r),s.jr=i.slice(),n.j[h]=s),n=s}return s=new rr(t),s.jr=i.slice(),n.j[e[a-1]]=s,s}function vM(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+s),10);a>0;a--)t.pop();r+=s}else t.push(n[r]),r++}return e}const Qf={defaultProtocol:"http",events:null,format:TM,formatHref:TM,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function cw(n,e=null){let t=Object.assign({},Qf);n&&(t=Object.assign(t,n instanceof cw?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}cw.prototype={o:Qf,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:Qf[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function TM(n){return n}function JL(n,e){this.t="token",this.v=n,this.tk=e}JL.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Qf.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),a={},u=n.get("className",t,e),h=n.get("target",t,e),f=n.get("rel",t,e),p=n.getObj("attributes",t,e),m=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),h&&(a.target=h),f&&(a.rel=f),p&&Object.assign(a,p),{tagName:i,attributes:a,content:s,eventListeners:m}}};function iv(n,e){class t extends JL{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const EM=iv("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),bM=iv("text"),jee=iv("nl"),Tm=iv("url",{isLink:!0,toHref(n=Qf.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Yf&&n[1].t===Uo}}),Vr=n=>new rr(n);function Fee({groups:n}){const e=n.domain.concat([Jg,ey,No,ty,ny,ry,iy,sy,Lr,iw,Ef,oy,ay,ly,Fi,cy,_f,uy]),t=[Zg,Uo,ow,ji,aw,Ef,bf,lw,uw,Fg,Hg,vf,Tf,Ug,Bg,zg,jg,qg,$g,Gg,Kg,Wg,Yg,Qg,Xg],r=[Jg,Zg,ey,ty,ny,ry,iy,sy,Lr,vf,Tf,Ef,oy,ay,ly,bf,Fi,cy,_f,uy],i=Vr(),s=ue(i,_f);Ue(s,r,s),Ue(s,n.domain,s);const a=Vr(),u=Vr(),h=Vr();Ue(i,n.domain,a),Ue(i,n.scheme,u),Ue(i,n.slashscheme,h),Ue(a,r,s),Ue(a,n.domain,a);const f=ue(a,No);ue(s,No,f),ue(u,No,f),ue(h,No,f);const p=ue(s,ji);Ue(p,r,s),Ue(p,n.domain,s);const m=Vr();Ue(f,n.domain,m),Ue(m,n.domain,m);const v=ue(m,ji);Ue(v,n.domain,m);const E=Vr(EM);Ue(v,n.tld,E),Ue(v,n.utld,E),ue(f,Yf,E);const b=ue(m,Lr);ue(b,Lr,b),Ue(b,n.domain,m),Ue(E,n.domain,m),ue(E,ji,v),ue(E,Lr,b);const S=ue(E,Uo);Ue(S,n.numeric,EM);const w=ue(a,Lr),x=ue(a,ji);ue(w,Lr,w),Ue(w,n.domain,a),Ue(x,r,s),Ue(x,n.domain,a);const N=Vr(Tm);Ue(x,n.tld,N),Ue(x,n.utld,N),Ue(N,n.domain,a),Ue(N,r,s),ue(N,ji,x),ue(N,Lr,w),ue(N,No,f);const V=ue(N,Uo),q=Vr(Tm);Ue(V,n.numeric,q);const F=Vr(Tm),Z=Vr();Ue(F,e,F),Ue(F,t,Z),Ue(Z,e,F),Ue(Z,t,Z),ue(N,Fi,F),ue(q,Fi,F);const I=ue(u,Uo),k=ue(h,Uo),D=ue(k,Fi),B=ue(D,Fi);Ue(u,n.domain,a),ue(u,ji,x),ue(u,Lr,w),Ue(h,n.domain,a),ue(h,ji,x),ue(h,Lr,w),Ue(I,n.domain,F),ue(I,Fi,F),ue(I,bf,F),Ue(B,n.domain,F),Ue(B,e,F),ue(B,Fi,F);const U=[[vf,Tf],[Bg,Ug],[zg,jg],[Fg,Hg],[qg,$g],[Gg,Kg],[Wg,Yg],[Qg,Xg]];for(let H=0;H<U.length;H++){const[O,ke]=U[H],Ce=ue(F,O);ue(Z,O,Ce),ue(Ce,ke,F);const ee=Vr(Tm);Ue(Ce,e,ee);const ae=Vr();Ue(Ce,t),Ue(ee,e,ee),Ue(ee,t,ae),Ue(ae,e,ee),Ue(ae,t,ae),ue(ee,ke,F),ue(ae,ke,F)}return ue(i,Yf,N),ue(i,sw,jee),{start:i,tokens:QL}}function Hee(n,e,t){let r=t.length,i=0,s=[],a=[];for(;i<r;){let u=n,h=null,f=null,p=0,m=null,v=-1;for(;i<r&&!(h=u.go(t[i].t));)a.push(t[i++]);for(;i<r&&(f=h||u.go(t[i].t));)h=null,u=f,u.accepts()?(v=0,m=u):v>=0&&v++,i++,p++;if(v<0)i-=p,i<r&&(a.push(t[i]),i++);else{a.length>0&&(s.push(mE(bM,e,a)),a=[]),i-=v,p-=v;const E=m.t,b=t.slice(i-p,i);s.push(mE(E,e,b))}}return a.length>0&&s.push(mE(bM,e,a)),s}function mE(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const qee=typeof console<"u"&&console&&console.warn||(()=>{}),$ee="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Tt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Gee(){return rr.groups={},Tt.scanner=null,Tt.parser=null,Tt.tokenQueue=[],Tt.pluginQueue=[],Tt.customSchemes=[],Tt.initialized=!1,Tt}function _M(n,e=!1){if(Tt.initialized&&qee(`linkifyjs: already initialized - will not register custom scheme "${n}" ${$ee}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Tt.customSchemes.push([n,e])}function Kee(){Tt.scanner=Uee(Tt.customSchemes);for(let n=0;n<Tt.tokenQueue.length;n++)Tt.tokenQueue[n][1]({scanner:Tt.scanner});Tt.parser=Fee(Tt.scanner.tokens);for(let n=0;n<Tt.pluginQueue.length;n++)Tt.pluginQueue[n][1]({scanner:Tt.scanner,parser:Tt.parser});return Tt.initialized=!0,Tt}function hw(n){return Tt.initialized||Kee(),Hee(Tt.parser.start,n,XL(Tt.scanner.start,n))}hw.scan=XL;function ZL(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new cw(t),i=hw(n),s=[];for(let a=0;a<i.length;a++){const u=i[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}var fw="[\0- -\u2029]",Wee=new RegExp(fw),Yee=new RegExp(`${fw}$`),Qee=new RegExp(fw,"g");function Xee(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function Jee(n){return new xt({key:new ln("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(f=>f.docChanged)&&!t.doc.eq(r.doc),s=e.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,u=dL(t.doc,[...e]);if(EL(u).forEach(({newRange:f})=>{const p=JX(r.doc,f,E=>E.isTextblock);let m,v;if(p.length>1)m=p[0],v=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const E=r.doc.textBetween(f.from,f.to," "," ");if(!Yee.test(E))return;m=p[0],v=r.doc.textBetween(m.pos,f.to,void 0," ")}if(m&&v){const E=v.split(Wee).filter(Boolean);if(E.length<=0)return!1;const b=E[E.length-1],S=m.pos+v.lastIndexOf(b);if(!b)return!1;const w=hw(b).map(x=>x.toObject(n.defaultProtocol));if(!Xee(w))return!1;w.filter(x=>x.isLink).map(x=>({...x,from:S+x.start+1,to:S+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>n.validate(x.value)).filter(x=>n.shouldAutoLink(x.value)).forEach(x=>{JS(x.from,x.to,r.doc).some(N=>N.mark.type===n.type)||a.addMark(x.from,x.to,n.type.create({href:x.href}))})}}),!!a.steps.length)return a}})}function Zee(n){return new xt({key:new ln("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{const h=r.target;if(!h)return!1;const f=n.editor.view.dom;a=h.closest("a"),a&&!f.contains(a)&&(a=null)}if(!a)return!1;let u=!1;if(n.enableClickSelection&&(u=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const h=TL(e.state,n.type.name),f=(i=a.href)!=null?i:h.href,p=(s=a.target)!=null?s:h.target;f&&(window.open(f,p),u=!0)}return u}}})}function ete(n){return new xt({key:new ln("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{shouldAutoLink:i}=n,{state:s}=e,{selection:a}=s,{empty:u}=a;if(u)return!1;let h="";r.content.forEach(p=>{h+=p.textContent});const f=ZL(h,{defaultProtocol:n.defaultProtocol}).find(p=>p.isLink&&p.value===h);return!h||!f||i!==void 0&&!i(f.value)?!1:n.editor.commands.setMark(n.type,{href:f.href})}}})}function el(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(Qee,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var tte=Gs.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){_M(n);return}_M(n.scheme,n.optionalSlashes)})},onDestroy(){Gee()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!el(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const i=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!el(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!el(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ot(this.options.HTMLAttributes,n),0]:["a",Ot(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,r,i,s;const a=(r=(t=n.attrs)==null?void 0:t.href)!=null?r:"",u=(s=(i=n.attrs)==null?void 0:i.title)!=null?s:"",h=e.renderChildren(n);return u?`[${h}](${a} "${u}")`:`[${h}](${a})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!el(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!el(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ca({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=ZL(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!el(a,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(Jee({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!el(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(Zee({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(ete({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),nte=Object.defineProperty,rte=(n,e)=>{for(var t in e)nte(n,t,{get:e[t],enumerable:!0})},ite="listItem",SM="textStyle",wM=/^\s*([-+*])\s$/,e3=_r.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Ot(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ite,this.editor.getAttributes(SM)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=hc({find:wM,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=hc({find:wM,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(SM),editor:this.editor})),[n]}}),t3=_r.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Ot(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(i=>i.type==="paragraph"))t=e.parseChildren(n.tokens);else{const i=n.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(i.tokens)}],n.tokens.length>1){const a=n.tokens.slice(1),u=e.parseChildren(a);t.push(...u)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>nw(n,e,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ste={};rte(ste,{findListItemPos:()=>bd,getNextListDepth:()=>dw,handleBackspace:()=>Hb,handleDelete:()=>qb,hasListBefore:()=>n3,hasListItemAfter:()=>ote,hasListItemBefore:()=>r3,listItemHasSubList:()=>i3,nextListIsDeeper:()=>s3,nextListIsHigher:()=>o3});var bd=(n,e)=>{const{$from:t}=e.selection,r=tn(n,e.schema);let i=null,s=t.depth,a=t.pos,u=null;for(;s>0&&u===null;)i=t.node(s),i.type===r?u=s:(s-=1,a-=1);return u===null?null:{$pos:e.doc.resolve(a),depth:u}},dw=(n,e)=>{const t=bd(n,e);if(!t)return!1;const[,r]=lJ(e,n,t.$pos.pos+4);return r},n3=(n,e,t)=>{const{$anchor:r}=n.selection,i=Math.max(0,r.pos-2),s=n.doc.resolve(i).node();return!(!s||!t.includes(s.type.name))},r3=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((t=i.nodeBefore)==null?void 0:t.type.name)!==n)},i3=(n,e,t)=>{if(!t)return!1;const r=tn(n,e.schema);let i=!1;return t.descendants(s=>{s.type===r&&(i=!0)}),i},Hb=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!ua(n.state,e)&&n3(n.state,e,t)){const{$anchor:u}=n.state.selection,h=n.state.doc.resolve(u.before()-1),f=[];h.node().descendants((v,E)=>{v.type.name===e&&f.push({node:v,pos:E})});const p=f.at(-1);if(!p)return!1;const m=n.state.doc.resolve(h.start()+p.pos+1);return n.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!ua(n.state,e)||!fJ(n.state))return!1;const r=bd(e,n.state);if(!r)return!1;const s=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=i3(e,n.state,s);return r3(e,n.state)&&!a?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},s3=(n,e)=>{const t=dw(n,e),r=bd(n,e);return!r||!t?!1:t>r.depth},o3=(n,e)=>{const t=dw(n,e),r=bd(n,e);return!r||!t?!1:t<r.depth},qb=(n,e)=>{if(!ua(n.state,e)||!hJ(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:i}=t;return!t.empty&&r.sameParent(i)?!1:s3(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():o3(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},ote=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((t=i.nodeAfter)==null?void 0:t.type.name)!==n)},a3=mt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&qb(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&qb(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&Hb(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&Hb(n,t,r)&&(e=!0)}),e}}}}),AM=/^(\s*)(\d+)\.\s+(.*)$/,ate=/^\s/;function lte(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t],s=i.match(AM);if(!s)break;const[,a,u,h]=s,f=a.length;let p=h,m=t+1;const v=[i];for(;m<n.length;){const E=n[m];if(E.match(AM))break;if(E.trim()==="")v.push(E),p+=`
`,m+=1;else if(E.match(ate))v.push(E),p+=`
${E.slice(f+2)}`,m+=1;else break}e.push({indent:f,number:parseInt(u,10),content:p.trim(),raw:v.join(`
`)}),r=m,t=m}return[e,r]}function l3(n,e,t){var r;const i=[];let s=0;for(;s<n.length;){const a=n[s];if(a.indent===e){const u=a.content.split(`
`),h=((r=u[0])==null?void 0:r.trim())||"",f=[];h&&f.push({type:"paragraph",raw:h,tokens:t.inlineTokens(h)});const p=u.slice(1).join(`
`).trim();if(p){const E=t.blockTokens(p);f.push(...E)}let m=s+1;const v=[];for(;m<n.length&&n[m].indent>e;)v.push(n[m]),m+=1;if(v.length>0){const E=Math.min(...v.map(S=>S.indent)),b=l3(v,E,t);f.push({type:"list",ordered:!0,start:v[0].number,items:b,raw:v.map(S=>S.raw).join(`
`)})}i.push({type:"list_item",raw:a.raw,tokens:f}),s=m}else s+=1}return i}function ute(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const r=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var cte="listItem",CM="textStyle",xM=/^(\d+)\.\s$/,u3=_r.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Ot(this.options.HTMLAttributes,t),0]:["ol",Ot(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,r=n.items?ute(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:r}:{type:"orderedList",content:r}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var r;const i=n.split(`
`),[s,a]=lte(i);if(s.length===0)return;const u=l3(s,0,t);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:u,raw:i.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cte,this.editor.getAttributes(CM)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=hc({find:xM,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=hc({find:xM,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(CM)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),hte=/^\s*(\[([( |x])?\])\s$/,fte=_r.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Ot(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const r=e.parseChildren(n.nestedTokens);t.push(...r)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const i=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return nw(n,e,i)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),u=document.createElement("input"),h=document.createElement("div"),f=m=>{var v,E;u.ariaLabel=((E=(v=this.options.a11y)==null?void 0:v.checkboxLabel)==null?void 0:E.call(v,m,u.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};f(n),s.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",m=>m.preventDefault()),u.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:v}=m.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:E})=>{const b=t();if(typeof b!="number")return!1;const S=E.doc.nodeAt(b);return E.setNodeMarkup(b,void 0,{...S?.attrs,checked:v}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,v)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,v])=>{i.setAttribute(m,v)}),i.dataset.checked=n.attrs.checked,u.checked=n.attrs.checked,s.append(u,a),i.append(s,h),Object.entries(e).forEach(([m,v])=>{i.setAttribute(m,v)});let p=new Set(Object.keys(e));return{dom:i,contentDOM:h,update:m=>{if(m.type!==this.type)return!1;i.dataset.checked=m.attrs.checked,u.checked=m.attrs.checked,f(m);const v=r.extensionManager.attributes,E=Wf(m,v),b=new Set(Object.keys(E)),S=this.options.HTMLAttributes;return p.forEach(w=>{b.has(w)||(w in S?i.setAttribute(w,S[w]):i.removeAttribute(w))}),Object.entries(E).forEach(([w,x])=>{x==null?w in S?i.setAttribute(w,S[w]):i.removeAttribute(w):i.setAttribute(w,x)}),p=b,!0}}}},addInputRules(){return[hc({find:hte,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),dte=_r.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Ot(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const r=s=>{const a=Nb(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,h)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:t.inlineTokens(u.mainContent),nestedTokens:h}),customNestedParser:r},t);return a?[{type:"taskList",raw:a.raw,items:a.items}]:t.blockTokens(s)},i=Nb(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,a)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:t.inlineTokens(s.mainContent),nestedTokens:a}),customNestedParser:r},t);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});mt.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(e3.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(t3.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(a3.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(u3.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(fte.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(dte.configure(this.options.taskList)),n}});var RM="&nbsp;",pte="",mte=_r.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Ot(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const r=e.parseInline(t);return r.length===1&&r[0].type==="text"&&(r[0].text===RM||r[0].text===pte)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?RM:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),gte=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,yte=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,vte=Gs.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Ot(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ml({find:gte,type:this.type})]},addPasteRules(){return[ca({find:yte,type:this.type})]}}),Tte=_r.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),Ete=Gs.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Ot(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:t.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function bte(n={}){return new xt({view(e){return new _te(e,n)}})}class _te{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,u=s.height/i.offsetHeight;if(t){let m=e.nodeBefore,v=e.nodeAfter;if(m||v){let E=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(E){let b=E.getBoundingClientRect(),S=m?b.bottom:b.top;m&&v&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*u;r={left:b.left,right:b.right,top:S-w,bottom:S+w}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*a;r={left:m.left-v,right:m.left+v,top:m.top,bottom:m.bottom}}let h=this.editorView.dom.offsetParent;this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let f,p;if(!h||h==document.body&&getComputedStyle(h).position=="static")f=-pageXOffset,p=-pageYOffset;else{let m=h.getBoundingClientRect(),v=m.width/h.offsetWidth,E=m.height/h.offsetHeight;f=m.left-h.scrollLeft*v,p=m.top-h.scrollTop*E}this.element.style.left=(r.left-f)/a+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=iV(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Dt extends ze{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Dt.valid(r)?new Dt(r):ze.near(r)}content(){return de.empty}eq(e){return e instanceof Dt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Dt(e.resolve(t.pos))}getBookmark(){return new pw(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Ste(e)||!wte(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Dt.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){s=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let h=e.doc.resolve(i);if(Dt.valid(h))return h}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!Se.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=a,i+=t;let u=e.doc.resolve(i);if(Dt.valid(u))return u}return null}}}Dt.prototype.visible=!1;Dt.findFrom=Dt.findGapCursorFrom;ze.jsonID("gapcursor",Dt);class pw{constructor(e){this.pos=e}map(e){return new pw(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Dt.valid(t)?new Dt(t):ze.near(t)}}function c3(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function Ste(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||c3(i.type))return!0;if(i.inlineContent)return!1}}return!0}function wte(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||c3(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Ate(){return new xt({props:{decorations:kte,createSelectionBetween(n,e,t){return e.pos==t.pos&&Dt.valid(t)?new Dt(t):null},handleClick:xte,handleKeyDown:Cte,handleDOMEvents:{beforeinput:Rte}}})}const Cte=sL({ArrowLeft:Em("horiz",-1),ArrowRight:Em("horiz",1),ArrowUp:Em("vert",-1),ArrowDown:Em("vert",1)});function Em(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,u=e>0?a.$to:a.$from,h=a.empty;if(a instanceof Me){if(!s.endOfTextblock(t)||u.depth==0)return!1;h=!1,u=r.doc.resolve(e>0?u.after():u.before())}let f=Dt.findGapCursorFrom(u,e,h);return f?(i&&i(r.tr.setSelection(new Dt(f))),!0):!1}}function xte(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Dt.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Se.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Dt(r))),!0)}function Rte(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Dt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=le.empty;for(let a=r.length-1;a>=0;a--)i=le.from(r[a].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new de(i,0,0));return s.setSelection(Me.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function kte(n){if(!(n.selection instanceof Dt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",wt.create(n.doc,[Gn.widget(n.selection.head,e,{key:"gapcursor"})])}var hy=200,gn=function(){};gn.prototype.append=function(e){return e.length?(e=gn.from(e),!this.length&&e||e.length<hy&&this.leafAppend(e)||this.length<hy&&e.leafPrepend(this)||this.appendInner(e)):this};gn.prototype.prepend=function(e){return e.length?gn.from(e).append(this):this};gn.prototype.appendInner=function(e){return new Ite(this,e)};gn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?gn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};gn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};gn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};gn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},t,r),i};gn.from=function(e){return e instanceof gn?e:e&&e.length?new h3(e):gn.empty};var h3=(function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,u){for(var h=s;h<a;h++)if(i(this.values[h],u+h)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,u){for(var h=s-1;h>=a;h--)if(i(this.values[h],u+h)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=hy)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=hy)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(gn);gn.empty=new h3([]);var Ite=(function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(s,u),a)===!1||s>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,s)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(s,u)-u,a+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(i,u),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(gn);const Mte=500;class oi{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,u,h,f=[],p=[];return this.items.forEach((m,v)=>{if(!m.step){i||(i=this.remapping(r,v+1),s=i.maps.length),s--,p.push(m);return}if(i){p.push(new Hi(m.map));let E=m.step.map(i.slice(s)),b;E&&a.maybeStep(E).doc&&(b=a.mapping.maps[a.mapping.maps.length-1],f.push(new Hi(b,void 0,void 0,f.length+p.length))),s--,b&&i.appendMap(b,s)}else a.maybeStep(m.step);if(m.selection)return u=i?m.selection.map(i.slice(s)):m.selection,h=new oi(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:a,selection:u}}addTransform(e,t,r,i){let s=[],a=this.eventCount,u=this.items,h=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),v=new Hi(e.mapping.maps[p],m,t),E;(E=h&&h.merge(v))&&(v=E,p?s.pop():u=u.slice(0,u.length-1)),s.push(v),t&&(a++,t=void 0),i||(h=v)}let f=a-r.depth;return f>Nte&&(u=Dte(u,f),a-=f),new oi(u.append(s),a)}remapping(e,t){let r=new Ff;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new oi(this.items.append(e.map(t=>new Hi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},i);let h=t;this.items.forEach(v=>{let E=s.getMirror(--h);if(E==null)return;a=Math.min(a,E);let b=s.maps[E];if(v.step){let S=e.steps[E].invert(e.docs[E]),w=v.selection&&v.selection.map(s.slice(h+1,E));w&&u++,r.push(new Hi(b,S,w))}else r.push(new Hi(b))},i);let f=[];for(let v=t;v<a;v++)f.push(new Hi(s.maps[v]));let p=this.items.slice(0,i).append(f).append(r),m=new oi(p,u);return m.emptyItemCount()>Mte&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((a,u)=>{if(u>=e)i.push(a),a.selection&&s++;else if(a.step){let h=a.step.map(t.slice(r)),f=h&&h.getMap();if(r--,f&&t.appendMap(f,r),h){let p=a.selection&&a.selection.map(t.slice(r));p&&s++;let m=new Hi(f.invert(),h,p),v,E=i.length-1;(v=i.length&&i[E].merge(m))?i[E]=v:i.push(m)}}else a.map&&r--},this.items.length,0),new oi(gn.from(i.reverse()),s)}}oi.empty=new oi(gn.empty,0);function Dte(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Hi{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Hi(t.getMap().invert(),t,this.selection)}}}class Oo{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Nte=20;function Ote(n,e,t,r){let i=t.getMeta(yl),s;if(i)return i.historyState;t.getMeta(Lte)&&(n=new Oo(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(yl))return a.getMeta(yl).redo?new Oo(n.done.addTransform(t,void 0,r,qm(e)),n.undone,kM(t.mapping.maps),n.prevTime,n.prevComposition):new Oo(n.done,n.undone.addTransform(t,void 0,r,qm(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),h=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!Pte(t,n.prevRanges)),f=a?gE(n.prevRanges,t.mapping):kM(t.mapping.maps);return new Oo(n.done.addTransform(t,h?e.selection.getBookmark():void 0,r,qm(e)),oi.empty,f,t.time,u??n.prevComposition)}else return(s=t.getMeta("rebased"))?new Oo(n.done.rebased(t,s),n.undone.rebased(t,s),gE(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Oo(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),gE(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function Pte(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function kM(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,a)=>e.push(s,a));return e}function gE(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function Vte(n,e,t){let r=qm(e),i=yl.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),u=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),h=new Oo(t?u:s.remaining,t?s.remaining:u,null,0,-1);return s.transform.setSelection(a).setMeta(yl,{redo:t,historyState:h})}let yE=!1,IM=null;function qm(n){let e=n.plugins;if(IM!=e){yE=!1,IM=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){yE=!0;break}}return yE}const yl=new ln("history"),Lte=new ln("closeHistory");function Bte(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new xt({key:yl,state:{init(){return new Oo(oi.empty,oi.empty,null,0,-1)},apply(e,t,r){return Ote(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?d3:r=="historyRedo"?p3:null;return!i||!e.editable?!1:(t.preventDefault(),i(e.state,e.dispatch))}}}})}function f3(n,e){return(t,r)=>{let i=yl.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=Vte(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const d3=f3(!1,!0),p3=f3(!0,!0);mt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new xt({key:new ln("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const i=this.options.limit;if(i==null||i===0){n=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const a=s-i,u=0,h=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(u,h);return n=!0,f}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:t.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,h=s-r,f=u-h,p=u;return e.deleteRange(f,p),!(this.storage.characters({node:e.doc})>r)}})]}});var Ute=mt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[bte(this.options)]}});mt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new xt({key:new ln("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!t||!r)return wt.create(n,[]);let a=0;this.options.mode==="deepest"&&n.descendants((h,f)=>{if(h.isText)return;if(!(i>=f&&i<=f+h.nodeSize-1))return!1;a+=1});let u=0;return n.descendants((h,f)=>{if(h.isText||!(i>=f&&i<=f+h.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&a-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";s.push(Gn.node(f,f+h.nodeSize,{class:this.options.className}))}),wt.create(n,s)}}})]}});var zte=mt.create({name:"gapCursor",addProseMirrorPlugins(){return[Ate()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ot(Ee(n,"allowGapCursor",t)))!=null?e:null}}}),MM="placeholder";function jte(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}mt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:MM,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${jte(this.options.dataAttribute)}`:`data-${MM}`;return[new xt({key:new ln("placeholder"),props:{decorations:({doc:e,selection:t})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=t,s=[];if(!r)return null;const a=this.editor.isEmpty;return e.descendants((u,h)=>{const f=i>=h&&i<=h+u.nodeSize,p=!u.isLeaf&&tv(u);if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];a&&m.push(this.options.emptyEditorClass);const v=Gn.node(h,h+u.nodeSize,{class:m.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:u,pos:h,hasAnchor:f}):this.options.placeholder});s.push(v)}return this.options.includeChildren}),wt.create(e,s)}}})]}});mt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new xt({key:new ln("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||bL(t.selection)||n.view.dragging?null:wt.create(t.doc,[Gn.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function DM({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var Fte=mt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new ln(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(t).includes(i.name));return[new xt({key:e,appendTransaction:(i,s,a)=>{const{doc:u,tr:h,schema:f}=a,p=e.getState(a),m=u.content.size,v=f.nodes[t];if(p)return h.insert(m,v.create())},state:{init:(i,s)=>{const a=s.tr.doc.lastChild;return!DM({node:a,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const a=i.doc.lastChild;return!DM({node:a,types:r})}}})]}}),Hte=mt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>d3(n,e),redo:()=>({state:n,dispatch:e})=>p3(n,e)}},addProseMirrorPlugins(){return[Bte(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),qte=mt.create({name:"starterKit",addExtensions(){var n,e,t,r;const i=[];return this.options.bold!==!1&&i.push(mee.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(cee.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(e3.configure(this.options.bulletList)),this.options.code!==!1&&i.push(vee.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(bee.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(_ee.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Ute.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(zte.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(See.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(wee.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Hte.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Aee.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Iee.configure(this.options.italic)),this.options.listItem!==!1&&i.push(t3.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(a3.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&i.push(tte.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(u3.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(mte.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(vte.configure(this.options.strike)),this.options.text!==!1&&i.push(Tte.configure(this.options.text)),this.options.underline!==!1&&i.push(Ete.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&i.push(Fte.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),$te=qte,Gte=20,m3=(n,e=0)=>{const t=[];return!n.children.length||e>Gte||Array.from(n.children).forEach(r=>{r.tagName==="SPAN"?t.push(r):r.children.length&&t.push(...m3(r,e+1))}),t},Kte=n=>{if(!n.children.length)return;const e=m3(n);e&&e.forEach(t=>{var r,i;const s=t.getAttribute("style"),a=(i=(r=t.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");t.setAttribute("style",`${a};${s}`)})},g3=Gs.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&Kte(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Ot(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleTextStyle:n=>({commands:e})=>e.toggleMark(this.name,n),removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),Wte=mt.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const a=s[0].trim().toLowerCase(),u=s.slice(1).join(":").trim();if(a==="background-color")return u.replace(/['"]+/g,"")}}}return(e=n.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.backgroundColor?{style:`background-color: ${n.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:n=>({chain:e})=>e().setMark("textStyle",{backgroundColor:n}).run(),unsetBackgroundColor:()=>({chain:n})=>n().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),y3=mt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const a=s[0].trim().toLowerCase(),u=s.slice(1).join(":").trim();if(a==="color")return u.replace(/['"]+/g,"")}}}return(e=n.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),v3=mt.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:n=>({chain:e})=>e().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),T3=mt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Yte=mt.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:n=>n.style.lineHeight,renderHTML:n=>n.lineHeight?{style:`line-height: ${n.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:n=>({chain:e})=>e().setMark("textStyle",{lineHeight:n}).run(),unsetLineHeight:()=>({chain:n})=>n().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});mt.create({name:"textStyleKit",addExtensions(){const n=[];return this.options.backgroundColor!==!1&&n.push(Wte.configure(this.options.backgroundColor)),this.options.color!==!1&&n.push(y3.configure(this.options.color)),this.options.fontFamily!==!1&&n.push(v3.configure(this.options.fontFamily)),this.options.fontSize!==!1&&n.push(T3.configure(this.options.fontSize)),this.options.lineHeight!==!1&&n.push(Yte.configure(this.options.lineHeight)),this.options.textStyle!==!1&&n.push(g3.configure(this.options.textStyle)),n}});var Qte=y3,Xte=v3,Jte=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Zte=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,ene=Gs.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",Ot(this.options.HTMLAttributes,n),0]},renderMarkdown:(n,e)=>`==${e.renderChildren(n)}==`,parseMarkdown:(n,e)=>e.applyMark("highlight",e.parseInline(n.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:n=>n.indexOf("=="),tokenize(n,e,t){const i=/^(==)([^=]+)(==)/.exec(n);if(i){const s=i[2].trim(),a=t.inlineTokens(s);return{type:"highlight",raw:i[0],text:s,tokens:a}}}},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Ml({find:Jte,type:this.type})]},addPasteRules(){return[ca({find:Zte,type:this.type})]}}),tne=ene;const nne=864e5,NM=Symbol.for("constructDateFrom");function E3(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&NM in n?n[NM](e):n instanceof Date?new n.constructor(e):new Date(e)}function b3(n,e){return E3(n,n)}function OM(n){const e=b3(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function rne(n,...e){const t=E3.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function fy(n,e){const t=b3(n);return t.setHours(0,0,0,0),t}function ine(n,e,t){const[r,i]=rne(t?.in,n,e),s=fy(r),a=fy(i),u=+s-OM(s),h=+a-OM(a);return Math.round((u-h)/nne)}function sne(n,e,t){if(n===null)return{newStreak:1};const r=fy(n),i=fy(e),s=ine(i,r);return s===0?{newStreak:t}:s===1?{newStreak:t+1}:{newStreak:1}}function _3(n){return typeof n!="string"||n.trim().length===0?{valid:!1,error:"Title is required"}:n.trim().length>Jk?{valid:!1,error:`Title must be ${Jk} characters or less`}:{valid:!0}}function one(n){return pb.includes(n)?{valid:!0}:{valid:!1,error:`Mood must be one of: ${pb.join(", ")}`}}function ane(n){if(!Array.isArray(n))return{valid:!1,error:"Images must be an array"};if(n.length>Xk)return{valid:!1,error:`Maximum ${Xk} images allowed`};for(let e=0;e<n.length;e++)if(typeof n[e]!="string"||n[e].trim().length===0)return{valid:!1,error:`Image at index ${e} must be a non-empty string`};return{valid:!0}}function S3(n){return!(n instanceof Date)||isNaN(n.getTime())?{valid:!1,error:"Date must be a valid Date object"}:n>new Date?{valid:!1,error:"Entry date cannot be in the future"}:{valid:!0}}function lne(n){const e=[],t=_3(n?.title);t.valid||e.push(t.error);const r=one(n?.mood);r.valid||e.push(r.error);const i=ane(n?.images??[]);i.valid||e.push(i.error);const s=S3(n?.date);return s.valid||e.push(s.error),e.length>0?{valid:!1,errors:e}:{valid:!0}}async function une(n,e,t){const r=lne(e);if(!r.valid)throw new Error(r.errors.join(", "));const i=ft.now(),s={userId:n,date:ft.fromDate(e.date),title:e.title.trim(),content:e.content,mood:e.mood,images:e.images??[],drawingURL:e.drawingURL??null,theme:e.theme,updatedAt:i};let a;return await hq(ui,async u=>{if(t){const h=Vs(ui,"entries",t),f=await u.get(h);if(!f.exists())throw new Error("Entry not found");if(f.data().userId!==n)throw new Error("Permission denied");u.update(h,s),a=t}else{const h=Vs(_O(ui,"entries"));u.set(h,{...s,createdAt:i}),a=h.id;const f=Vs(ui,"users",n),p=await u.get(f);if(!p.exists())throw new Error("User not found");const m=p.data(),v=m.lastEntryDate?.toDate()??null,E=m.streak??0,b=m.longestStreak??0,{newStreak:S}=sne(v,e.date,E);u.update(f,{streak:S,longestStreak:Math.max(b,S),lastEntryDate:ft.fromDate(e.date)})}}),a}async function cne(n,e){const t=Vs(ui,"entries",n),r=await By(t);if(!r.exists())throw new Error("Entry not found");const i=r.data();if(i.userId!==e)throw new Error("Permission denied");return{entryId:r.id,...i}}const hne=[{label:"Poppins",value:"Poppins"},{label:"Caveat",value:"Caveat"},{label:"Pacifico",value:"Pacifico"}],fne=[{label:"S",value:"14px"},{label:"M",value:"18px"},{label:"L",value:"24px"}],dne=["#4A2040","#1E3A5F","#744210","#22543D","#2D3748","#FF69B4","#63B3ED","#ECC94B","#48BB78","#A0AEC0","#E53E3E","#805AD5","#DD6B20","#319795","#718096"],pne=["#FFE4E1","#E6E6FA","#FEFCBF","#F0FFF4","#EBF8FF","#FFF0F5","#FED7E2","#FEEBC8","#C6F6D5","#BEE3F8"];function mne({editor:n}){if(!n)return null;const e=P.useCallback(s=>{n.chain().focus().setFontFamily(s).run()},[n]),t=P.useCallback(s=>{n.chain().focus().setFontSize(s).run()},[n]),r=P.useCallback(s=>{n.chain().focus().setColor(s).run()},[n]),i=P.useCallback(s=>{n.chain().focus().toggleHighlight({color:s}).run()},[n]);return $.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 bg-pink-50/80 rounded-2xl border border-pink-100 mb-4",children:[$.jsxs("div",{className:"flex items-center gap-1",children:[$.jsx("label",{className:"sr-only",htmlFor:"font-family-select",children:"Font family"}),$.jsx("select",{id:"font-family-select",onChange:s=>e(s.target.value),className:"px-2 py-1.5 rounded-lg bg-white border border-pink-200 text-sm font-['Poppins'] text-gray-700 cursor-pointer focus:outline-none focus:ring-2 focus:ring-pink-300","aria-label":"Font family",children:hne.map(s=>$.jsx("option",{value:s.value,style:{fontFamily:s.value},children:s.label},s.value))})]}),$.jsx("div",{className:"w-px h-6 bg-pink-200","aria-hidden":"true"}),$.jsx("div",{className:"flex items-center gap-1",role:"group","aria-label":"Font size",children:fne.map(s=>$.jsx("button",{type:"button",onClick:()=>t(s.value),className:"px-2.5 py-1 rounded-lg text-sm font-['Poppins'] bg-white border border-pink-200 hover:bg-pink-100 transition-colors text-gray-700","aria-label":`Font size ${s.label}`,children:s.label},s.value))}),$.jsx("div",{className:"w-px h-6 bg-pink-200","aria-hidden":"true"}),$.jsxs("div",{className:"flex items-center gap-1",role:"group","aria-label":"Text formatting",children:[$.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleBold().run(),className:`px-2.5 py-1 rounded-lg text-sm font-bold border transition-colors ${n.isActive("bold")?"bg-pink-200 border-pink-300 text-pink-800":"bg-white border-pink-200 hover:bg-pink-100 text-gray-700"}`,"aria-label":"Bold","aria-pressed":n.isActive("bold"),children:"B"}),$.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleItalic().run(),className:`px-2.5 py-1 rounded-lg text-sm italic border transition-colors ${n.isActive("italic")?"bg-pink-200 border-pink-300 text-pink-800":"bg-white border-pink-200 hover:bg-pink-100 text-gray-700"}`,"aria-label":"Italic","aria-pressed":n.isActive("italic"),children:"I"}),$.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleStrike().run(),className:`px-2.5 py-1 rounded-lg text-sm line-through border transition-colors ${n.isActive("strike")?"bg-pink-200 border-pink-300 text-pink-800":"bg-white border-pink-200 hover:bg-pink-100 text-gray-700"}`,"aria-label":"Strikethrough","aria-pressed":n.isActive("strike"),children:"S"})]}),$.jsx("div",{className:"w-px h-6 bg-pink-200","aria-hidden":"true"}),$.jsxs("div",{className:"flex items-center gap-1",children:[$.jsx("span",{className:"text-xs font-['Poppins'] text-gray-500 mr-1",children:"Text"}),$.jsx("div",{className:"flex flex-wrap gap-1",role:"group","aria-label":"Text color",children:dne.map(s=>$.jsx("button",{type:"button",onClick:()=>r(s),className:"w-5 h-5 rounded-full border border-gray-200 hover:scale-125 transition-transform cursor-pointer",style:{backgroundColor:s},"aria-label":`Text color ${s}`},s))})]}),$.jsx("div",{className:"w-px h-6 bg-pink-200","aria-hidden":"true"}),$.jsxs("div",{className:"flex items-center gap-1",children:[$.jsx("span",{className:"text-xs font-['Poppins'] text-gray-500 mr-1",children:"Highlight"}),$.jsx("div",{className:"flex flex-wrap gap-1",role:"group","aria-label":"Highlight color",children:pne.map(s=>$.jsx("button",{type:"button",onClick:()=>i(s),className:"w-5 h-5 rounded-full border border-gray-200 hover:scale-125 transition-transform cursor-pointer",style:{backgroundColor:s},"aria-label":`Highlight color ${s}`},s))})]})]})}const mw="dearme-draft",gne=3e4;function PM(){try{const n=localStorage.getItem(mw);return n?JSON.parse(n):null}catch{return null}}function yne(n){try{localStorage.setItem(mw,JSON.stringify(n))}catch{}}function VM(){localStorage.removeItem(mw)}function vne(){const{entryId:n}=KB(),e=Zf(),{user:t}=Uy(),[r,i]=P.useState(""),[s,a]=P.useState("neutral"),[u,h]=P.useState([]),[f,p]=P.useState(null),[m,v]=P.useState([]),[E,b]=P.useState(!1),[S,w]=P.useState(!1),[x,N]=P.useState(!!n),[V,q]=P.useState(!1),[F,Z]=P.useState(n||null),I=P.useRef(null),k=P.useRef(!1),D=see({extensions:[$te,g3,T3,Qte,Xte,tne.configure({multicolor:!0})],content:"<p>Start writing your thoughts...</p>",editorProps:{attributes:{class:"prose prose-sm sm:prose-base max-w-none focus:outline-none min-h-[300px] font-['Poppins'] text-gray-800 p-4"}},onUpdate:()=>{k.current=!0}});P.useEffect(()=>{if(!n||!t)return;let O=!1;async function ke(){try{N(!0);const Ce=await cne(n,t.uid);if(O)return;i(Ce.title||""),a(Ce.mood||"neutral"),h(Ce.images||[]),p(Ce.drawingURL||null),Z(n),D&&Ce.content&&D.commands.setContent(Ce.content)}catch(Ce){O||v([Ce.message||"Failed to load entry"])}finally{O||N(!1)}}return ke(),()=>{O=!0}},[n,t,D]),P.useEffect(()=>{if(n)return;const O=PM();O&&(O.title||O.mood!=="neutral"||O.content)&&q(!0)},[n]);const B=P.useCallback(()=>{const O=PM();O&&(O.title&&i(O.title),O.mood&&a(O.mood),D&&O.content&&D.commands.setContent(O.content),q(!1))},[D]),U=P.useCallback(()=>{VM(),q(!1)},[]);P.useEffect(()=>{if(!n)return I.current=setInterval(()=>{if(!D)return;const O={title:r,mood:s,content:D.getJSON(),savedAt:new Date().toISOString()};yne(O)},gne),()=>{I.current&&clearInterval(I.current)}},[n,r,s,D]);const H=P.useCallback(async()=>{if(!D||!t)return;const O=[],ke=_3(r);ke.valid||O.push(ke.error);const Ce=S3(new Date);if(Ce.valid||O.push(Ce.error),O.length>0){v(O);return}v([]),b(!0);try{const ee={title:r.trim(),content:D.getJSON(),mood:s,images:u,drawingURL:f,theme:"pastel-pink",date:new Date};await une(t.uid,ee,F||void 0),VM(),w(!0),setTimeout(()=>{e("/dashboard")},1200)}catch(ee){v([ee.message||"Failed to save entry"])}finally{b(!1)}},[D,t,r,s,u,f,F,e]);return x?$.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:$.jsxs("div",{className:"text-center",children:[$.jsx("div",{className:"w-10 h-10 border-4 border-pink-200 border-t-pink-500 rounded-full animate-spin mx-auto mb-3"}),$.jsx("p",{className:"font-['Poppins'] text-gray-500",children:"Loading entry..."})]})}):$.jsxs("div",{className:"max-w-3xl mx-auto p-4 sm:p-6",children:[$.jsx(Vk,{children:S&&$.jsx(mr.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/20",children:$.jsxs(mr.div,{initial:{y:20},animate:{y:0},className:"bg-white rounded-3xl p-8 shadow-2xl text-center",children:[$.jsx("span",{className:"text-5xl mb-3 block",children:""}),$.jsx("p",{className:"font-['Caveat'] text-2xl text-pink-600",children:"Entry saved!"})]})})}),$.jsx(Vk,{children:V&&$.jsxs(mr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-2xl flex items-center justify-between",children:[$.jsx("p",{className:"font-['Poppins'] text-sm text-yellow-800",children:"You have an unsaved draft. Would you like to restore it?"}),$.jsxs("div",{className:"flex gap-2 ml-4",children:[$.jsx("button",{type:"button",onClick:B,className:"px-3 py-1.5 bg-yellow-400 text-yellow-900 rounded-lg text-sm font-medium hover:bg-yellow-500 transition-colors",children:"Restore"}),$.jsx("button",{type:"button",onClick:U,className:"px-3 py-1.5 bg-white text-gray-600 rounded-lg text-sm border border-gray-200 hover:bg-gray-50 transition-colors",children:"Discard"})]})]})}),$.jsx("h1",{className:"font-['Caveat'] text-3xl sm:text-4xl text-[var(--color-text,#4A2040)] mb-6",children:F?" Edit Entry":" New Entry"}),m.length>0&&$.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-2xl",role:"alert",children:m.map((O,ke)=>$.jsx("p",{className:"font-['Poppins'] text-sm text-red-600",children:O},ke))}),$.jsxs("div",{className:"mb-4",children:[$.jsx("label",{htmlFor:"entry-title",className:"block font-['Poppins'] text-sm text-gray-600 mb-1",children:"Title"}),$.jsx("input",{id:"entry-title",type:"text",value:r,onChange:O=>i(O.target.value),placeholder:"Give your entry a title...",maxLength:200,className:"w-full px-4 py-3 rounded-2xl border border-pink-200 bg-white font-['Caveat'] text-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-transparent transition-shadow"}),$.jsxs("p",{className:"mt-1 text-xs font-['Poppins'] text-gray-400 text-right",children:[r.length,"/200"]})]}),$.jsxs("div",{className:"mb-6",children:[$.jsx("p",{className:"font-['Poppins'] text-sm text-gray-600 mb-2",children:"How are you feeling?"}),$.jsx(kP,{value:s,onChange:a})]}),$.jsx(mne,{editor:D}),$.jsx("div",{className:"bg-white rounded-2xl border border-pink-100 shadow-sm min-h-[350px] mb-6 overflow-hidden",style:{backgroundImage:"repeating-linear-gradient(transparent, transparent 31px, #f9e4ec 31px, #f9e4ec 32px)",backgroundSize:"100% 32px"},children:$.jsx(zL,{editor:D})}),$.jsx("div",{className:"flex justify-end",children:$.jsx(mr.button,{type:"button",onClick:H,disabled:E,whileHover:{scale:1.02},whileTap:{scale:.98},className:`px-8 py-3 rounded-2xl font-['Poppins'] font-medium text-white shadow-lg transition-colors ${E?"bg-pink-300 cursor-not-allowed":"bg-pink-500 hover:bg-pink-600 cursor-pointer"}`,children:E?"Saving...":F?"Update Entry":"Save Entry"})})]})}function Tne(){return $.jsxs("div",{className:"p-6",children:[$.jsx("h1",{className:"font-['Caveat'] text-3xl text-[var(--color-text)] mb-4",children:"Calendar"}),$.jsx("p",{className:"font-['Poppins'] text-[var(--color-text)]",children:"Your diary calendar view "})]})}function Ene(){return $.jsx(Wq,{children:$.jsx(DU,{children:$.jsxs(lU,{children:[$.jsx(ko,{path:"/login",element:$.jsx($K,{})}),$.jsx(ko,{element:$.jsx(Xq,{}),children:$.jsxs(ko,{element:$.jsx(Qq,{}),children:[$.jsx(ko,{path:"/dashboard",element:$.jsx(ZK,{})}),$.jsx(ko,{path:"/editor/:entryId?",element:$.jsx(vne,{})}),$.jsx(ko,{path:"/calendar",element:$.jsx(Tne,{})})]})}),$.jsx(ko,{path:"*",element:$.jsx(JM,{to:"/dashboard",replace:!0})})]})})})}lB.createRoot(document.getElementById("root")).render($.jsx(P.StrictMode,{children:$.jsx(Ene,{})}));
