(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function QM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cb={exports:{}},Lh={};var Qx;function kU(){if(Qx)return Lh;Qx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Lh.Fragment=e,Lh.jsx=t,Lh.jsxs=t,Lh}var Xx;function IU(){return Xx||(Xx=1,cb.exports=kU()),cb.exports}var q=IU(),hb={exports:{}},De={};var Jx;function MU(){if(Jx)return De;Jx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function C(L,te,ue){this.props=L,this.context=te,this.refs=w,this.updater=ue||T}C.prototype.isReactComponent={},C.prototype.setState=function(L,te){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,te,"setState")},C.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function N(){}N.prototype=C.prototype;function V(L,te,ue){this.props=L,this.context=te,this.refs=w,this.updater=ue||T}var $=V.prototype=new N;$.constructor=V,S($,C.prototype),$.isPureReactComponent=!0;var F=Array.isArray;function Z(){}var I={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function D(L,te,ue){var de=ue.ref;return{$$typeof:n,type:L,key:te,ref:de!==void 0?de:null,props:ue}}function B(L,te){return D(L.type,te,L.props)}function z(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function H(L){var te={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ue){return te[ue]})}var P=/\/+/g;function Oe(L,te){return typeof L=="object"&&L!==null&&L.key!=null?H(""+L.key):te.toString(36)}function Ae(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Z,Z):(L.status="pending",L.then(function(te){L.status==="pending"&&(L.status="fulfilled",L.value=te)},function(te){L.status==="pending"&&(L.status="rejected",L.reason=te)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ee(L,te,ue,de,ke){var Ve=typeof L;(Ve==="undefined"||Ve==="boolean")&&(L=null);var Qe=!1;if(L===null)Qe=!0;else switch(Ve){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(L.$$typeof){case n:case e:Qe=!0;break;case p:return Qe=L._init,ee(Qe(L._payload),te,ue,de,ke)}}if(Qe)return ke=ke(L),Qe=de===""?"."+Oe(L,0):de,F(ke)?(ue="",Qe!=null&&(ue=Qe.replace(P,"$&/")+"/"),ee(ke,te,ue,"",function(xa){return xa})):ke!=null&&(z(ke)&&(ke=B(ke,ue+(ke.key==null||L&&L.key===ke.key?"":(""+ke.key).replace(P,"$&/")+"/")+Qe)),te.push(ke)),1;Qe=0;var sn=de===""?".":de+":";if(F(L))for(var Et=0;Et<L.length;Et++)de=L[Et],Ve=sn+Oe(de,Et),Qe+=ee(de,te,ue,Ve,ke);else if(Et=E(L),typeof Et=="function")for(L=Et.call(L),Et=0;!(de=L.next()).done;)de=de.value,Ve=sn+Oe(de,Et++),Qe+=ee(de,te,ue,Ve,ke);else if(Ve==="object"){if(typeof L.then=="function")return ee(Ae(L),te,ue,de,ke);throw te=String(L),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function ae(L,te,ue){if(L==null)return L;var de=[],ke=0;return ee(L,de,"","",function(Ve){return te.call(ue,Ve,ke++)}),de}function me(L){if(L._status===-1){var te=L._result;te=te(),te.then(function(ue){(L._status===0||L._status===-1)&&(L._status=1,L._result=ue)},function(ue){(L._status===0||L._status===-1)&&(L._status=2,L._result=ue)}),L._status===-1&&(L._status=0,L._result=te)}if(L._status===1)return L._result.default;throw L._result}var Ne=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},je={map:ae,forEach:function(L,te,ue){ae(L,function(){te.apply(this,arguments)},ue)},count:function(L){var te=0;return ae(L,function(){te++}),te},toArray:function(L){return ae(L,function(te){return te})||[]},only:function(L){if(!z(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return De.Activity=m,De.Children=je,De.Component=C,De.Fragment=t,De.Profiler=i,De.PureComponent=V,De.StrictMode=r,De.Suspense=h,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,De.__COMPILER_RUNTIME={__proto__:null,c:function(L){return I.H.useMemoCache(L)}},De.cache=function(L){return function(){return L.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(L,te,ue){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=S({},L.props),ke=L.key;if(te!=null)for(Ve in te.key!==void 0&&(ke=""+te.key),te)!k.call(te,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&te.ref===void 0||(de[Ve]=te[Ve]);var Ve=arguments.length-2;if(Ve===1)de.children=ue;else if(1<Ve){for(var Qe=Array(Ve),sn=0;sn<Ve;sn++)Qe[sn]=arguments[sn+2];de.children=Qe}return D(L.type,ke,de)},De.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},De.createElement=function(L,te,ue){var de,ke={},Ve=null;if(te!=null)for(de in te.key!==void 0&&(Ve=""+te.key),te)k.call(te,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ke[de]=te[de]);var Qe=arguments.length-2;if(Qe===1)ke.children=ue;else if(1<Qe){for(var sn=Array(Qe),Et=0;Et<Qe;Et++)sn[Et]=arguments[Et+2];ke.children=sn}if(L&&L.defaultProps)for(de in Qe=L.defaultProps,Qe)ke[de]===void 0&&(ke[de]=Qe[de]);return D(L,Ve,ke)},De.createRef=function(){return{current:null}},De.forwardRef=function(L){return{$$typeof:u,render:L}},De.isValidElement=z,De.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:me}},De.memo=function(L,te){return{$$typeof:f,type:L,compare:te===void 0?null:te}},De.startTransition=function(L){var te=I.T,ue={};I.T=ue;try{var de=L(),ke=I.S;ke!==null&&ke(ue,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Z,Ne)}catch(Ve){Ne(Ve)}finally{te!==null&&ue.types!==null&&(te.types=ue.types),I.T=te}},De.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},De.use=function(L){return I.H.use(L)},De.useActionState=function(L,te,ue){return I.H.useActionState(L,te,ue)},De.useCallback=function(L,te){return I.H.useCallback(L,te)},De.useContext=function(L){return I.H.useContext(L)},De.useDebugValue=function(){},De.useDeferredValue=function(L,te){return I.H.useDeferredValue(L,te)},De.useEffect=function(L,te){return I.H.useEffect(L,te)},De.useEffectEvent=function(L){return I.H.useEffectEvent(L)},De.useId=function(){return I.H.useId()},De.useImperativeHandle=function(L,te,ue){return I.H.useImperativeHandle(L,te,ue)},De.useInsertionEffect=function(L,te){return I.H.useInsertionEffect(L,te)},De.useLayoutEffect=function(L,te){return I.H.useLayoutEffect(L,te)},De.useMemo=function(L,te){return I.H.useMemo(L,te)},De.useOptimistic=function(L,te){return I.H.useOptimistic(L,te)},De.useReducer=function(L,te,ue){return I.H.useReducer(L,te,ue)},De.useRef=function(L){return I.H.useRef(L)},De.useState=function(L){return I.H.useState(L)},De.useSyncExternalStore=function(L,te,ue){return I.H.useSyncExternalStore(L,te,ue)},De.useTransition=function(){return I.H.useTransition()},De.version="19.2.4",De}var Zx;function sd(){return Zx||(Zx=1,hb.exports=MU()),hb.exports}var O=sd();const wl=QM(O);var fb={exports:{}},Vh={},db={exports:{}},pb={};var eC;function DU(){return eC||(eC=1,(function(n){function e(ee,ae){var me=ee.length;ee.push(ae);e:for(;0<me;){var Ne=me-1>>>1,je=ee[Ne];if(0<i(je,ae))ee[Ne]=ae,ee[me]=je,me=Ne;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ae=ee[0],me=ee.pop();if(me!==ae){ee[0]=me;e:for(var Ne=0,je=ee.length,L=je>>>1;Ne<L;){var te=2*(Ne+1)-1,ue=ee[te],de=te+1,ke=ee[de];if(0>i(ue,me))de<je&&0>i(ke,ue)?(ee[Ne]=ke,ee[de]=me,Ne=de):(ee[Ne]=ue,ee[te]=me,Ne=te);else if(de<je&&0>i(ke,me))ee[Ne]=ke,ee[de]=me,Ne=de;else break e}}return ae}function i(ee,ae){var me=ee.sortIndex-ae.sortIndex;return me!==0?me:ee.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var h=[],f=[],p=1,m=null,v=3,E=!1,T=!1,S=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function $(ee){for(var ae=t(f);ae!==null;){if(ae.callback===null)r(f);else if(ae.startTime<=ee)r(f),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=t(f)}}function F(ee){if(S=!1,$(ee),!T)if(t(h)!==null)T=!0,Z||(Z=!0,H());else{var ae=t(f);ae!==null&&Ae(F,ae.startTime-ee)}}var Z=!1,I=-1,k=5,D=-1;function B(){return w?!0:!(n.unstable_now()-D<k)}function z(){if(w=!1,Z){var ee=n.unstable_now();D=ee;var ae=!0;try{e:{T=!1,S&&(S=!1,N(I),I=-1),E=!0;var me=v;try{t:{for($(ee),m=t(h);m!==null&&!(m.expirationTime>ee&&B());){var Ne=m.callback;if(typeof Ne=="function"){m.callback=null,v=m.priorityLevel;var je=Ne(m.expirationTime<=ee);if(ee=n.unstable_now(),typeof je=="function"){m.callback=je,$(ee),ae=!0;break t}m===t(h)&&r(h),$(ee)}else r(h);m=t(h)}if(m!==null)ae=!0;else{var L=t(f);L!==null&&Ae(F,L.startTime-ee),ae=!1}}break e}finally{m=null,v=me,E=!1}ae=void 0}}finally{ae?H():Z=!1}}}var H;if(typeof V=="function")H=function(){V(z)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Oe=P.port2;P.port1.onmessage=z,H=function(){Oe.postMessage(null)}}else H=function(){C(z,0)};function Ae(ee,ae){I=C(function(){ee(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var me=v;v=ae;try{return ee()}finally{v=me}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var me=v;v=ee;try{return ae()}finally{v=me}},n.unstable_scheduleCallback=function(ee,ae,me){var Ne=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ne+me:Ne):me=Ne,ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=me+je,ee={id:p++,callback:ae,priorityLevel:ee,startTime:me,expirationTime:je,sortIndex:-1},me>Ne?(ee.sortIndex=me,e(f,ee),t(h)===null&&ee===t(f)&&(S?(N(I),I=-1):S=!0,Ae(F,me-Ne))):(ee.sortIndex=je,e(h,ee),T||E||(T=!0,Z||(Z=!0,H()))),ee},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(ee){var ae=v;return function(){var me=v;v=ae;try{return ee.apply(this,arguments)}finally{v=me}}}})(pb)),pb}var tC;function NU(){return tC||(tC=1,db.exports=DU()),db.exports}var mb={exports:{}},Nn={};var nC;function OU(){if(nC)return Nn;nC=1;var n=sd();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(h,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:h,containerInfo:f,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Nn.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return s(h,f,null,p)},Nn.flushSync=function(h){var f=a.T,p=r.p;try{if(a.T=null,r.p=2,h)return h()}finally{a.T=f,r.p=p,r.d.f()}},Nn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Nn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Nn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:E}):p==="script"&&r.d.X(h,{crossOrigin:m,integrity:v,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Nn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Nn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Nn.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Nn.requestFormReset=function(h){r.d.r(h)},Nn.unstable_batchedUpdates=function(h,f){return h(f)},Nn.useFormState=function(h,f,p){return a.H.useFormState(h,f,p)},Nn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Nn.version="19.2.4",Nn}var rC;function XM(){if(rC)return mb.exports;rC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mb.exports=OU(),mb.exports}var iC;function PU(){if(iC)return Vh;iC=1;var n=NU(),e=sd(),t=XM();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function h(o){if(s(o)!==o)throw Error(r(188))}function f(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(r(188));return l!==o?null:o}for(var c=o,d=l;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return h(y),o;if(b===d)return h(y),l;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=b;else{for(var A=!1,R=y.child;R;){if(R===c){A=!0,c=y,d=b;break}if(R===d){A=!0,d=y,c=b;break}R=R.sibling}if(!A){for(R=b.child;R;){if(R===c){A=!0,c=b,d=y;break}if(R===d){A=!0,d=b,c=y;break}R=R.sibling}if(!A)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?o:l}function p(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=p(o),l!==null)return l;o=o.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),V=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function H(o){return o===null||typeof o!="object"?null:(o=z&&o[z]||o["@@iterator"],typeof o=="function"?o:null)}var P=Symbol.for("react.client.reference");function Oe(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===P?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case C:return"Profiler";case w:return"StrictMode";case F:return"Suspense";case Z:return"SuspenseList";case D:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case V:return o.displayName||"Context";case N:return(o._context.displayName||"Context")+".Consumer";case $:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return l=o.displayName||null,l!==null?l:Oe(o.type)||"Memo";case k:l=o._payload,o=o._init;try{return Oe(o(l))}catch{}}return null}var Ae=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ne=[],je=-1;function L(o){return{current:o}}function te(o){0>je||(o.current=Ne[je],Ne[je]=null,je--)}function ue(o,l){je++,Ne[je]=o.current,o.current=l}var de=L(null),ke=L(null),Ve=L(null),Qe=L(null);function sn(o,l){switch(ue(Ve,l),ue(ke,o),ue(de,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?bx(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=bx(l),o=Ex(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}te(de),ue(de,o)}function Et(){te(de),te(ke),te(Ve)}function xa(o){o.memoizedState!==null&&ue(Qe,o);var l=de.current,c=Ex(l,o.type);l!==c&&(ue(ke,o),ue(de,c))}function ql(o){ke.current===o&&(te(de),te(ke)),Qe.current===o&&(te(Qe),Dh._currentValue=me)}var $l,Gl;function Ti(o){if($l===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);$l=l&&l[1]||"",Gl=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$l+o+Gl}var Dc=!1;function Ca(o,l){if(!o||Dc)return"";Dc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(J){var Q=J}Reflect.construct(o,[],se)}else{try{se.call()}catch(J){Q=J}o.call(se.prototype)}}else{try{throw Error()}catch(J){Q=J}(se=o())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),A=b[0],R=b[1];if(A&&R){var U=A.split(`
`),Y=R.split(`
`);for(y=d=0;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(d===U.length||y===Y.length)for(d=U.length-1,y=Y.length-1;1<=d&&0<=y&&U[d]!==Y[y];)y--;for(;1<=d&&0<=y;d--,y--)if(U[d]!==Y[y]){if(d!==1||y!==1)do if(d--,y--,0>y||U[d]!==Y[y]){var ne=`
`+U[d].replace(" at new "," at ");return o.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",o.displayName)),ne}while(1<=d&&0<=y);break}}}finally{Dc=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?Ti(c):""}function Nc(o,l){switch(o.tag){case 26:case 27:case 5:return Ti(o.type);case 16:return Ti("Lazy");case 13:return o.child!==l&&l!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return Ca(o.type,!1);case 11:return Ca(o.type.render,!1);case 1:return Ca(o.type,!0);case 31:return Ti("Activity");default:return""}}function Oc(o){try{var l="",c=null;do l+=Nc(o,c),c=o,o=o.return;while(o);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ht=Object.prototype.hasOwnProperty,on=n.unstable_scheduleCallback,Ys=n.unstable_cancelCallback,f0=n.unstable_shouldYield,Id=n.unstable_requestPaint,jn=n.unstable_now,Ra=n.unstable_getCurrentPriorityLevel,Pc=n.unstable_ImmediatePriority,Lc=n.unstable_UserBlockingPriority,Qs=n.unstable_NormalPriority,d0=n.unstable_LowPriority,Md=n.unstable_IdlePriority,Dd=n.log,Nd=n.unstable_setDisableYieldValue,Qr=null,bn=null;function Cr(o){if(typeof Dd=="function"&&Nd(o),bn&&typeof bn.setStrictMode=="function")try{bn.setStrictMode(Qr,o)}catch{}}var Ut=Math.clz32?Math.clz32:Pd,Od=Math.log,Kl=Math.LN2;function Pd(o){return o>>>=0,o===0?32:31-(Od(o)/Kl|0)|0}var _i=256,ka=262144,qt=4194304;function Si(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function wi(o,l,c){var d=o.pendingLanes;if(d===0)return 0;var y=0,b=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var R=d&134217727;return R!==0?(d=R&~b,d!==0?y=Si(d):(A&=R,A!==0?y=Si(A):c||(c=R&~o,c!==0&&(y=Si(c))))):(R=d&~b,R!==0?y=Si(R):A!==0?y=Si(A):c||(c=d&~o,c!==0&&(y=Si(c)))),y===0?0:l!==0&&l!==y&&(l&b)===0&&(b=y&-y,c=l&-l,b>=c||b===32&&(c&4194048)!==0)?l:y}function Xr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function p0(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ld(){var o=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),o}function Ai(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Ia(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function m0(o,l,c,d,y,b){var A=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var R=o.entanglements,U=o.expirationTimes,Y=o.hiddenUpdates;for(c=A&~c;0<c;){var ne=31-Ut(c),se=1<<ne;R[ne]=0,U[ne]=-1;var Q=Y[ne];if(Q!==null)for(Y[ne]=null,ne=0;ne<Q.length;ne++){var J=Q[ne];J!==null&&(J.lane&=-536870913)}c&=~se}d!==0&&Ma(o,d,0),b!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=b&~(A&~l))}function Ma(o,l,c){o.pendingLanes|=l,o.suspendedLanes&=~l;var d=31-Ut(l);o.entangledLanes|=l,o.entanglements[d]=o.entanglements[d]|1073741824|c&261930}function Vc(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var d=31-Ut(c),y=1<<d;y&l|o[d]&l&&(o[d]|=l),c&=~y}}function Uc(o,l){var c=l&-l;return c=(c&42)!==0?1:Da(c),(c&(o.suspendedLanes|l))!==0?0:c}function Da(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ls(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Vd(){var o=ae.p;return o!==0?o:(o=window.event,o===void 0?32:Hx(o.type))}function Jr(o,l){var c=ae.p;try{return ae.p=o,l()}finally{ae.p=c}}var Zr=Math.random().toString(36).slice(2),$t="__reactFiber$"+Zr,hn="__reactProps$"+Zr,xi="__reactContainer$"+Zr,Wl="__reactEvents$"+Zr,g0="__reactListeners$"+Zr,Ud="__reactHandles$"+Zr,Bd="__reactResources$"+Zr,Ci="__reactMarker$"+Zr;function Yl(o){delete o[$t],delete o[hn],delete o[Wl],delete o[g0],delete o[Ud]}function Ri(o){var l=o[$t];if(l)return l;for(var c=o.parentNode;c;){if(l=c[xi]||c[$t]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=Cx(o);o!==null;){if(c=o[$t])return c;o=Cx(o)}return l}o=c,c=o.parentNode}return null}function Rr(o){if(o=o[$t]||o[xi]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function ur(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function ki(o){var l=o[Bd];return l||(l=o[Bd]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Gt(o){o[Ci]=!0}var Bc=new Set,zc={};function Ii(o,l){Mi(o,l),Mi(o+"Capture",l)}function Mi(o,l){for(zc[o]=l,o=0;o<l.length;o++)Bc.add(l[o])}var jc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fc={},Hc={};function zd(o){return Ht.call(Hc,o)?!0:Ht.call(Fc,o)?!1:jc.test(o)?Hc[o]=!0:(Fc[o]=!0,!1)}function Ql(o,l,c){if(zd(l))if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+c)}}function cr(o,l,c){if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+c)}}function Kt(o,l,c,d){if(d===null)o.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(l,c,""+d)}}function fn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Xs(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function qc(o,l,c){var d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,b=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(A){c=""+A,b.call(this,A)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function rt(o){if(!o._valueTracker){var l=Xs(o)?"checked":"value";o._valueTracker=qc(o,l,""+o[l])}}function Na(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),d="";return o&&(d=Xs(o)?o.checked?"true":"false":o.value),o=d,o!==c?(l.setValue(o),!0):!1}function Di(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Oa=/[\n"\\]/g;function Jn(o){return o.replace(Oa,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Xl(o,l,c,d,y,b,A,R){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),l!=null?A==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+fn(l)):o.value!==""+fn(l)&&(o.value=""+fn(l)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),l!=null?$c(o,A,fn(l)):c!=null?$c(o,A,fn(c)):d!=null&&o.removeAttribute("value"),y==null&&b!=null&&(o.defaultChecked=!!b),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.name=""+fn(R):o.removeAttribute("name")}function jd(o,l,c,d,y,b,A,R){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.type=b),l!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||l!=null)){rt(o);return}c=c!=null?""+fn(c):"",l=l!=null?""+fn(l):c,R||l===o.value||(o.value=l),o.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=R?o.checked:!!d,o.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A),rt(o)}function $c(o,l,c){l==="number"&&Di(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function Js(o,l,c,d){if(o=o.options,l){l={};for(var y=0;y<c.length;y++)l["$"+c[y]]=!0;for(c=0;c<o.length;c++)y=l.hasOwnProperty("$"+o[c].value),o[c].selected!==y&&(o[c].selected=y),y&&d&&(o[c].defaultSelected=!0)}else{for(c=""+fn(c),l=null,y=0;y<o.length;y++){if(o[y].value===c){o[y].selected=!0,d&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Fd(o,l,c){if(l!=null&&(l=""+fn(l),l!==o.value&&(o.value=l),c==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=c!=null?""+fn(c):""}function Zs(o,l,c,d){if(l==null){if(d!=null){if(c!=null)throw Error(r(92));if(Ae(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),l=c}c=fn(l),o.defaultValue=c,d=o.textContent,d===c&&d!==""&&d!==null&&(o.value=d),rt(o)}function Zn(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var Hd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gc(o,l,c){var d=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":d?o.setProperty(l,c):typeof c!="number"||c===0||Hd.has(l)?l==="float"?o.cssFloat=c:o[l]=(""+c).trim():o[l]=c+"px"}function Kc(o,l,c){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&c[y]!==d&&Gc(o,y,d)}else for(var b in l)l.hasOwnProperty(b)&&Gc(o,b,l[b])}function Jl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zl(o){return eo.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ei(){}var Wc=null;function kr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var to=null,Ni=null;function Pa(o){var l=Rr(o);if(l&&(o=l.stateNode)){var c=o[hn]||null;e:switch(o=l.stateNode,l.type){case"input":if(Xl(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Jn(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var d=c[l];if(d!==o&&d.form===o.form){var y=d[hn]||null;if(!y)throw Error(r(90));Xl(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<c.length;l++)d=c[l],d.form===o.form&&Na(d)}break e;case"textarea":Fd(o,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&Js(o,!!c.multiple,l,!1)}}}var eu=!1;function no(o,l,c){if(eu)return o(l,c);eu=!0;try{var d=o(l);return d}finally{if(eu=!1,(to!==null||Ni!==null)&&(Vp(),to&&(l=to,o=Ni,Ni=to=null,Pa(l),o)))for(l=0;l<o.length;l++)Pa(o[l])}}function ti(o,l){var c=o.stateNode;if(c===null)return null;var d=c[hn]||null;if(d===null)return null;c=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(r(231,l,typeof c));return c}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),La=!1;if(Ir)try{var at={};Object.defineProperty(at,"passive",{get:function(){La=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{La=!1}var Oi=null,Yc=null,Va=null;function Qc(){if(Va)return Va;var o,l=Yc,c=l.length,d,y="value"in Oi?Oi.value:Oi.textContent,b=y.length;for(o=0;o<c&&l[o]===y[o];o++);var A=c-o;for(d=1;d<=A&&l[c-d]===y[b-d];d++);return Va=y.slice(o,1<d?1-d:void 0)}function Ua(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function us(){return!0}function ni(){return!1}function En(o){function l(c,d,y,b,A){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var R in o)o.hasOwnProperty(R)&&(c=o[R],this[R]=c?c(b):b[R]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?us:ni,this.isPropagationStopped=ni,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),l}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=En(cs),ro=m({},cs,{view:0,detail:0}),Xc=En(ro),io,tu,Li,nu=m({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:so,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Li&&(Li&&o.type==="mousemove"?(io=o.screenX-Li.screenX,tu=o.screenY-Li.screenY):tu=io=0,Li=o),io)},movementY:function(o){return"movementY"in o?o.movementY:tu}}),Jc=En(nu),Ba=m({},nu,{dataTransfer:0}),$d=En(Ba),Gd=m({},ro,{relatedTarget:0}),za=En(Gd),Zc=m({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kd=En(Zc),ru=m({},cs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Wd=En(ru),Yd=m({},cs,{data:0}),Vi=En(Yd),Qd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zd(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Jd[o])?!!l[o]:!1}function so(){return Zd}var Fn=m({},ro,{key:function(o){if(o.key){var l=Qd[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Ua(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Xd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:so,charCode:function(o){return o.type==="keypress"?Ua(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ua(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ep=En(Fn),tp=m({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hs=En(tp),g=m({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:so}),_=En(g),x=m({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),M=En(x),K=m({},nu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),X=En(K),he=m({},cs,{newState:0,oldState:0}),Pe=En(he),Bt=[9,13,27,32],tt=Ir&&"CompositionEvent"in window,Tt=null;Ir&&"documentMode"in document&&(Tt=document.documentMode);var Mr=Ir&&"TextEvent"in window&&!Tt,Ui=Ir&&(!tt||Tt&&8<Tt&&11>=Tt),ri=" ",ii=!1;function ja(o,l){switch(o){case"keyup":return Bt.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var su=!1;function Z3(o,l){switch(o){case"compositionend":return iu(l);case"keypress":return l.which!==32?null:(ii=!0,ri);case"textInput":return o=l.data,o===ri&&ii?null:o;default:return null}}function e4(o,l){if(su)return o==="compositionend"||!tt&&ja(o,l)?(o=Qc(),Va=Yc=Oi=null,su=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ui&&l.locale!=="ko"?null:l.data;default:return null}}var t4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iw(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!t4[o.type]:l==="textarea"}function Mw(o,l,c,d){to?Ni?Ni.push(d):Ni=[d]:to=d,l=qp(l,"onChange"),0<l.length&&(c=new Pi("onChange","change",null,c,d),o.push({event:c,listeners:l}))}var eh=null,th=null;function n4(o){dx(o,0)}function np(o){var l=ur(o);if(Na(l))return o}function Dw(o,l){if(o==="change")return l}var Nw=!1;if(Ir){var y0;if(Ir){var v0="oninput"in document;if(!v0){var Ow=document.createElement("div");Ow.setAttribute("oninput","return;"),v0=typeof Ow.oninput=="function"}y0=v0}else y0=!1;Nw=y0&&(!document.documentMode||9<document.documentMode)}function Pw(){eh&&(eh.detachEvent("onpropertychange",Lw),th=eh=null)}function Lw(o){if(o.propertyName==="value"&&np(th)){var l=[];Mw(l,th,o,kr(o)),no(n4,l)}}function r4(o,l,c){o==="focusin"?(Pw(),eh=l,th=c,eh.attachEvent("onpropertychange",Lw)):o==="focusout"&&Pw()}function i4(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return np(th)}function s4(o,l){if(o==="click")return np(l)}function o4(o,l){if(o==="input"||o==="change")return np(l)}function a4(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var hr=typeof Object.is=="function"?Object.is:a4;function nh(o,l){if(hr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),d=Object.keys(l);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!Ht.call(l,y)||!hr(o[y],l[y]))return!1}return!0}function Vw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Uw(o,l){var c=Vw(o);o=0;for(var d;c;){if(c.nodeType===3){if(d=o+c.textContent.length,o<=l&&d>=l)return{node:c,offset:l-o};o=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Vw(c)}}function Bw(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Bw(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function zw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Di(o.document);l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=Di(o.document)}return l}function b0(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var l4=Ir&&"documentMode"in document&&11>=document.documentMode,ou=null,E0=null,rh=null,T0=!1;function jw(o,l,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;T0||ou==null||ou!==Di(d)||(d=ou,"selectionStart"in d&&b0(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),rh&&nh(rh,d)||(rh=d,d=qp(E0,"onSelect"),0<d.length&&(l=new Pi("onSelect","select",null,l,c),o.push({event:l,listeners:d}),l.target=ou)))}function Fa(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var au={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},_0={},Fw={};Ir&&(Fw=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function Ha(o){if(_0[o])return _0[o];if(!au[o])return o;var l=au[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in Fw)return _0[o]=l[c];return o}var Hw=Ha("animationend"),qw=Ha("animationiteration"),$w=Ha("animationstart"),u4=Ha("transitionrun"),c4=Ha("transitionstart"),h4=Ha("transitioncancel"),Gw=Ha("transitionend"),Kw=new Map,S0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");S0.push("scrollEnd");function si(o,l){Kw.set(o,l),Ii(l,[o])}var rp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Dr=[],lu=0,w0=0;function ip(){for(var o=lu,l=w0=lu=0;l<o;){var c=Dr[l];Dr[l++]=null;var d=Dr[l];Dr[l++]=null;var y=Dr[l];Dr[l++]=null;var b=Dr[l];if(Dr[l++]=null,d!==null&&y!==null){var A=d.pending;A===null?y.next=y:(y.next=A.next,A.next=y),d.pending=y}b!==0&&Ww(c,y,b)}}function sp(o,l,c,d){Dr[lu++]=o,Dr[lu++]=l,Dr[lu++]=c,Dr[lu++]=d,w0|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function A0(o,l,c,d){return sp(o,l,c,d),op(o)}function qa(o,l){return sp(o,null,null,l),op(o)}function Ww(o,l,c){o.lanes|=c;var d=o.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=o.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(o=b.stateNode,o===null||o._visibility&1||(y=!0)),o=b,b=b.return;return o.tag===3?(b=o.stateNode,y&&l!==null&&(y=31-Ut(c),o=b.hiddenUpdates,d=o[y],d===null?o[y]=[l]:d.push(l),l.lane=c|536870912),b):null}function op(o){if(50<Ah)throw Ah=0,Ov=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var uu={};function f4(o,l,c,d){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(o,l,c,d){return new f4(o,l,c,d)}function x0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function fs(o,l){var c=o.alternate;return c===null?(c=fr(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function Yw(o,l){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,l=c.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function ap(o,l,c,d,y,b){var A=0;if(d=o,typeof o=="function")x0(o)&&(A=1);else if(typeof o=="string")A=yU(o,c,de.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case D:return o=fr(31,c,l,y),o.elementType=D,o.lanes=b,o;case S:return $a(c.children,y,b,l);case w:A=8,y|=24;break;case C:return o=fr(12,c,l,y|2),o.elementType=C,o.lanes=b,o;case F:return o=fr(13,c,l,y),o.elementType=F,o.lanes=b,o;case Z:return o=fr(19,c,l,y),o.elementType=Z,o.lanes=b,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case V:A=10;break e;case N:A=9;break e;case $:A=11;break e;case I:A=14;break e;case k:A=16,d=null;break e}A=29,c=Error(r(130,o===null?"null":typeof o,"")),d=null}return l=fr(A,c,l,y),l.elementType=o,l.type=d,l.lanes=b,l}function $a(o,l,c,d){return o=fr(7,o,d,l),o.lanes=c,o}function C0(o,l,c){return o=fr(6,o,null,l),o.lanes=c,o}function Qw(o){var l=fr(18,null,null,0);return l.stateNode=o,l}function R0(o,l,c){return l=fr(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var Xw=new WeakMap;function Nr(o,l){if(typeof o=="object"&&o!==null){var c=Xw.get(o);return c!==void 0?c:(l={value:o,source:l,stack:Oc(l)},Xw.set(o,l),l)}return{value:o,source:l,stack:Oc(l)}}var cu=[],hu=0,lp=null,ih=0,Or=[],Pr=0,oo=null,Bi=1,zi="";function ds(o,l){cu[hu++]=ih,cu[hu++]=lp,lp=o,ih=l}function Jw(o,l,c){Or[Pr++]=Bi,Or[Pr++]=zi,Or[Pr++]=oo,oo=o;var d=Bi;o=zi;var y=32-Ut(d)-1;d&=~(1<<y),c+=1;var b=32-Ut(l)+y;if(30<b){var A=y-y%5;b=(d&(1<<A)-1).toString(32),d>>=A,y-=A,Bi=1<<32-Ut(l)+y|c<<y|d,zi=b+o}else Bi=1<<b|c<<y|d,zi=o}function k0(o){o.return!==null&&(ds(o,1),Jw(o,1,0))}function I0(o){for(;o===lp;)lp=cu[--hu],cu[hu]=null,ih=cu[--hu],cu[hu]=null;for(;o===oo;)oo=Or[--Pr],Or[Pr]=null,zi=Or[--Pr],Or[Pr]=null,Bi=Or[--Pr],Or[Pr]=null}function Zw(o,l){Or[Pr++]=Bi,Or[Pr++]=zi,Or[Pr++]=oo,Bi=l.id,zi=l.overflow,oo=o}var Tn=null,yt=null,Ye=!1,ao=null,Lr=!1,M0=Error(r(519));function lo(o){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sh(Nr(l,o)),M0}function e1(o){var l=o.stateNode,c=o.type,d=o.memoizedProps;switch(l[$t]=o,l[hn]=d,c){case"dialog":He("cancel",l),He("close",l);break;case"iframe":case"object":case"embed":He("load",l);break;case"video":case"audio":for(c=0;c<Ch.length;c++)He(Ch[c],l);break;case"source":He("error",l);break;case"img":case"image":case"link":He("error",l),He("load",l);break;case"details":He("toggle",l);break;case"input":He("invalid",l),jd(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":He("invalid",l);break;case"textarea":He("invalid",l),Zs(l,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||d.suppressHydrationWarning===!0||yx(l.textContent,c)?(d.popover!=null&&(He("beforetoggle",l),He("toggle",l)),d.onScroll!=null&&He("scroll",l),d.onScrollEnd!=null&&He("scrollend",l),d.onClick!=null&&(l.onclick=ei),l=!0):l=!1,l||lo(o,!0)}function t1(o){for(Tn=o.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:Lr=!1;return;case 27:case 3:Lr=!0;return;default:Tn=Tn.return}}function fu(o){if(o!==Tn)return!1;if(!Ye)return t1(o),Ye=!0,!1;var l=o.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||Yv(o.type,o.memoizedProps)),c=!c),c&&yt&&lo(o),t1(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));yt=xx(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));yt=xx(o)}else l===27?(l=yt,So(o.type)?(o=eb,eb=null,yt=o):yt=l):yt=Tn?Ur(o.stateNode.nextSibling):null;return!0}function Ga(){yt=Tn=null,Ye=!1}function D0(){var o=ao;return o!==null&&(rr===null?rr=o:rr.push.apply(rr,o),ao=null),o}function sh(o){ao===null?ao=[o]:ao.push(o)}var N0=L(null),Ka=null,ps=null;function uo(o,l,c){ue(N0,l._currentValue),l._currentValue=c}function ms(o){o._currentValue=N0.current,te(N0)}function O0(o,l,c){for(;o!==null;){var d=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),o===c)break;o=o.return}}function P0(o,l,c,d){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var b=y.dependencies;if(b!==null){var A=y.child;b=b.firstContext;e:for(;b!==null;){var R=b;b=y;for(var U=0;U<l.length;U++)if(R.context===l[U]){b.lanes|=c,R=b.alternate,R!==null&&(R.lanes|=c),O0(b.return,c,o),d||(A=null);break e}b=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(r(341));A.lanes|=c,b=A.alternate,b!==null&&(b.lanes|=c),O0(A,c,o),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===o){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function du(o,l,c,d){o=null;for(var y=l,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var R=y.type;hr(y.pendingProps.value,A.value)||(o!==null?o.push(R):o=[R])}}else if(y===Qe.current){if(A=y.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Dh):o=[Dh])}y=y.return}o!==null&&P0(l,o,c,d),l.flags|=262144}function up(o){for(o=o.firstContext;o!==null;){if(!hr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Wa(o){Ka=o,ps=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function _n(o){return n1(Ka,o)}function cp(o,l){return Ka===null&&Wa(o),n1(o,l)}function n1(o,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},ps===null){if(o===null)throw Error(r(308));ps=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else ps=ps.next=l;return c}var d4=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(c,d){o.push(d)}};this.abort=function(){l.aborted=!0,o.forEach(function(c){return c()})}},p4=n.unstable_scheduleCallback,m4=n.unstable_NormalPriority,Wt={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function L0(){return{controller:new d4,data:new Map,refCount:0}}function oh(o){o.refCount--,o.refCount===0&&p4(m4,function(){o.controller.abort()})}var ah=null,V0=0,pu=0,mu=null;function g4(o,l){if(ah===null){var c=ah=[];V0=0,pu=zv(),mu={status:"pending",value:void 0,then:function(d){c.push(d)}}}return V0++,l.then(r1,r1),l}function r1(){if(--V0===0&&ah!==null){mu!==null&&(mu.status="fulfilled");var o=ah;ah=null,pu=0,mu=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function y4(o,l){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return o.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<c.length;y++)(0,c[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var i1=ee.S;ee.S=function(o,l){jA=jn(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&g4(o,l),i1!==null&&i1(o,l)};var Ya=L(null);function U0(){var o=Ya.current;return o!==null?o:dt.pooledCache}function hp(o,l){l===null?ue(Ya,Ya.current):ue(Ya,l.pool)}function s1(){var o=U0();return o===null?null:{parent:Wt._currentValue,pool:o}}var gu=Error(r(460)),B0=Error(r(474)),fp=Error(r(542)),dp={then:function(){}};function o1(o){return o=o.status,o==="fulfilled"||o==="rejected"}function a1(o,l,c){switch(c=o[c],c===void 0?o.push(l):c!==l&&(l.then(ei,ei),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,u1(o),o;default:if(typeof l.status=="string")l.then(ei,ei);else{if(o=dt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,u1(o),o}throw Xa=l,gu}}function Qa(o){try{var l=o._init;return l(o._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Xa=c,gu):c}}var Xa=null;function l1(){if(Xa===null)throw Error(r(459));var o=Xa;return Xa=null,o}function u1(o){if(o===gu||o===fp)throw Error(r(483))}var yu=null,lh=0;function pp(o){var l=lh;return lh+=1,yu===null&&(yu=[]),a1(yu,o,l)}function uh(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function mp(o,l){throw l.$$typeof===v?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function c1(o){function l(G,j){if(o){var W=G.deletions;W===null?(G.deletions=[j],G.flags|=16):W.push(j)}}function c(G,j){if(!o)return null;for(;j!==null;)l(G,j),j=j.sibling;return null}function d(G){for(var j=new Map;G!==null;)G.key!==null?j.set(G.key,G):j.set(G.index,G),G=G.sibling;return j}function y(G,j){return G=fs(G,j),G.index=0,G.sibling=null,G}function b(G,j,W){return G.index=W,o?(W=G.alternate,W!==null?(W=W.index,W<j?(G.flags|=67108866,j):W):(G.flags|=67108866,j)):(G.flags|=1048576,j)}function A(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function R(G,j,W,ie){return j===null||j.tag!==6?(j=C0(W,G.mode,ie),j.return=G,j):(j=y(j,W),j.return=G,j)}function U(G,j,W,ie){var _e=W.type;return _e===S?ne(G,j,W.props.children,ie,W.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===k&&Qa(_e)===j.type)?(j=y(j,W.props),uh(j,W),j.return=G,j):(j=ap(W.type,W.key,W.props,null,G.mode,ie),uh(j,W),j.return=G,j)}function Y(G,j,W,ie){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=R0(W,G.mode,ie),j.return=G,j):(j=y(j,W.children||[]),j.return=G,j)}function ne(G,j,W,ie,_e){return j===null||j.tag!==7?(j=$a(W,G.mode,ie,_e),j.return=G,j):(j=y(j,W),j.return=G,j)}function se(G,j,W){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=C0(""+j,G.mode,W),j.return=G,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case E:return W=ap(j.type,j.key,j.props,null,G.mode,W),uh(W,j),W.return=G,W;case T:return j=R0(j,G.mode,W),j.return=G,j;case k:return j=Qa(j),se(G,j,W)}if(Ae(j)||H(j))return j=$a(j,G.mode,W,null),j.return=G,j;if(typeof j.then=="function")return se(G,pp(j),W);if(j.$$typeof===V)return se(G,cp(G,j),W);mp(G,j)}return null}function Q(G,j,W,ie){var _e=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return _e!==null?null:R(G,j,""+W,ie);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return W.key===_e?U(G,j,W,ie):null;case T:return W.key===_e?Y(G,j,W,ie):null;case k:return W=Qa(W),Q(G,j,W,ie)}if(Ae(W)||H(W))return _e!==null?null:ne(G,j,W,ie,null);if(typeof W.then=="function")return Q(G,j,pp(W),ie);if(W.$$typeof===V)return Q(G,j,cp(G,W),ie);mp(G,W)}return null}function J(G,j,W,ie,_e){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return G=G.get(W)||null,R(j,G,""+ie,_e);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:return G=G.get(ie.key===null?W:ie.key)||null,U(j,G,ie,_e);case T:return G=G.get(ie.key===null?W:ie.key)||null,Y(j,G,ie,_e);case k:return ie=Qa(ie),J(G,j,W,ie,_e)}if(Ae(ie)||H(ie))return G=G.get(W)||null,ne(j,G,ie,_e,null);if(typeof ie.then=="function")return J(G,j,W,pp(ie),_e);if(ie.$$typeof===V)return J(G,j,W,cp(j,ie),_e);mp(j,ie)}return null}function ye(G,j,W,ie){for(var _e=null,Ze=null,be=j,Ue=j=0,$e=null;be!==null&&Ue<W.length;Ue++){be.index>Ue?($e=be,be=null):$e=be.sibling;var et=Q(G,be,W[Ue],ie);if(et===null){be===null&&(be=$e);break}o&&be&&et.alternate===null&&l(G,be),j=b(et,j,Ue),Ze===null?_e=et:Ze.sibling=et,Ze=et,be=$e}if(Ue===W.length)return c(G,be),Ye&&ds(G,Ue),_e;if(be===null){for(;Ue<W.length;Ue++)be=se(G,W[Ue],ie),be!==null&&(j=b(be,j,Ue),Ze===null?_e=be:Ze.sibling=be,Ze=be);return Ye&&ds(G,Ue),_e}for(be=d(be);Ue<W.length;Ue++)$e=J(be,G,Ue,W[Ue],ie),$e!==null&&(o&&$e.alternate!==null&&be.delete($e.key===null?Ue:$e.key),j=b($e,j,Ue),Ze===null?_e=$e:Ze.sibling=$e,Ze=$e);return o&&be.forEach(function(Ro){return l(G,Ro)}),Ye&&ds(G,Ue),_e}function xe(G,j,W,ie){if(W==null)throw Error(r(151));for(var _e=null,Ze=null,be=j,Ue=j=0,$e=null,et=W.next();be!==null&&!et.done;Ue++,et=W.next()){be.index>Ue?($e=be,be=null):$e=be.sibling;var Ro=Q(G,be,et.value,ie);if(Ro===null){be===null&&(be=$e);break}o&&be&&Ro.alternate===null&&l(G,be),j=b(Ro,j,Ue),Ze===null?_e=Ro:Ze.sibling=Ro,Ze=Ro,be=$e}if(et.done)return c(G,be),Ye&&ds(G,Ue),_e;if(be===null){for(;!et.done;Ue++,et=W.next())et=se(G,et.value,ie),et!==null&&(j=b(et,j,Ue),Ze===null?_e=et:Ze.sibling=et,Ze=et);return Ye&&ds(G,Ue),_e}for(be=d(be);!et.done;Ue++,et=W.next())et=J(be,G,Ue,et.value,ie),et!==null&&(o&&et.alternate!==null&&be.delete(et.key===null?Ue:et.key),j=b(et,j,Ue),Ze===null?_e=et:Ze.sibling=et,Ze=et);return o&&be.forEach(function(RU){return l(G,RU)}),Ye&&ds(G,Ue),_e}function ct(G,j,W,ie){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case E:e:{for(var _e=W.key;j!==null;){if(j.key===_e){if(_e=W.type,_e===S){if(j.tag===7){c(G,j.sibling),ie=y(j,W.props.children),ie.return=G,G=ie;break e}}else if(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===k&&Qa(_e)===j.type){c(G,j.sibling),ie=y(j,W.props),uh(ie,W),ie.return=G,G=ie;break e}c(G,j);break}else l(G,j);j=j.sibling}W.type===S?(ie=$a(W.props.children,G.mode,ie,W.key),ie.return=G,G=ie):(ie=ap(W.type,W.key,W.props,null,G.mode,ie),uh(ie,W),ie.return=G,G=ie)}return A(G);case T:e:{for(_e=W.key;j!==null;){if(j.key===_e)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){c(G,j.sibling),ie=y(j,W.children||[]),ie.return=G,G=ie;break e}else{c(G,j);break}else l(G,j);j=j.sibling}ie=R0(W,G.mode,ie),ie.return=G,G=ie}return A(G);case k:return W=Qa(W),ct(G,j,W,ie)}if(Ae(W))return ye(G,j,W,ie);if(H(W)){if(_e=H(W),typeof _e!="function")throw Error(r(150));return W=_e.call(W),xe(G,j,W,ie)}if(typeof W.then=="function")return ct(G,j,pp(W),ie);if(W.$$typeof===V)return ct(G,j,cp(G,W),ie);mp(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,j!==null&&j.tag===6?(c(G,j.sibling),ie=y(j,W),ie.return=G,G=ie):(c(G,j),ie=C0(W,G.mode,ie),ie.return=G,G=ie),A(G)):c(G,j)}return function(G,j,W,ie){try{lh=0;var _e=ct(G,j,W,ie);return yu=null,_e}catch(be){if(be===gu||be===fp)throw be;var Ze=fr(29,be,null,G.mode);return Ze.lanes=ie,Ze.return=G,Ze}}}var Ja=c1(!0),h1=c1(!1),co=!1;function z0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function j0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ho(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function fo(o,l,c){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(nt&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=op(o),Ww(o,null,c),l}return sp(o,d,l,c),op(o)}function ch(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var d=l.lanes;d&=o.pendingLanes,c|=d,l.lanes=c,Vc(o,c)}}function F0(o,l){var c=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=A:b=b.next=A,c=c.next}while(c!==null);b===null?y=b=l:b=b.next=l}else y=b=l;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}var H0=!1;function hh(){if(H0){var o=mu;if(o!==null)throw o}}function fh(o,l,c,d){H0=!1;var y=o.updateQueue;co=!1;var b=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var U=R,Y=U.next;U.next=null,A===null?b=Y:A.next=Y,A=U;var ne=o.alternate;ne!==null&&(ne=ne.updateQueue,R=ne.lastBaseUpdate,R!==A&&(R===null?ne.firstBaseUpdate=Y:R.next=Y,ne.lastBaseUpdate=U))}if(b!==null){var se=y.baseState;A=0,ne=Y=U=null,R=b;do{var Q=R.lane&-536870913,J=Q!==R.lane;if(J?(qe&Q)===Q:(d&Q)===Q){Q!==0&&Q===pu&&(H0=!0),ne!==null&&(ne=ne.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ye=o,xe=R;Q=l;var ct=c;switch(xe.tag){case 1:if(ye=xe.payload,typeof ye=="function"){se=ye.call(ct,se,Q);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=xe.payload,Q=typeof ye=="function"?ye.call(ct,se,Q):ye,Q==null)break e;se=m({},se,Q);break e;case 2:co=!0}}Q=R.callback,Q!==null&&(o.flags|=64,J&&(o.flags|=8192),J=y.callbacks,J===null?y.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ne===null?(Y=ne=J,U=se):ne=ne.next=J,A|=Q;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;J=R,R=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);ne===null&&(U=se),y.baseState=U,y.firstBaseUpdate=Y,y.lastBaseUpdate=ne,b===null&&(y.shared.lanes=0),vo|=A,o.lanes=A,o.memoizedState=se}}function f1(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function d1(o,l){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)f1(c[o],l)}var vu=L(null),gp=L(0);function p1(o,l){o=ws,ue(gp,o),ue(vu,l),ws=o|l.baseLanes}function q0(){ue(gp,ws),ue(vu,vu.current)}function $0(){ws=gp.current,te(vu),te(gp)}var dr=L(null),Vr=null;function po(o){var l=o.alternate;ue(zt,zt.current&1),ue(dr,o),Vr===null&&(l===null||vu.current!==null||l.memoizedState!==null)&&(Vr=o)}function G0(o){ue(zt,zt.current),ue(dr,o),Vr===null&&(Vr=o)}function m1(o){o.tag===22?(ue(zt,zt.current),ue(dr,o),Vr===null&&(Vr=o)):mo()}function mo(){ue(zt,zt.current),ue(dr,dr.current)}function pr(o){te(dr),Vr===o&&(Vr=null),te(zt)}var zt=L(0);function yp(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Jv(c)||Zv(c)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var gs=0,Le=null,lt=null,Yt=null,vp=!1,bu=!1,Za=!1,bp=0,dh=0,Eu=null,v4=0;function kt(){throw Error(r(321))}function K0(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!hr(o[c],l[c]))return!1;return!0}function W0(o,l,c,d,y,b){return gs=b,Le=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ee.H=o===null||o.memoizedState===null?J1:uv,Za=!1,b=c(d,y),Za=!1,bu&&(b=y1(l,c,d,y)),g1(o),b}function g1(o){ee.H=gh;var l=lt!==null&&lt.next!==null;if(gs=0,Yt=lt=Le=null,vp=!1,dh=0,Eu=null,l)throw Error(r(300));o===null||Qt||(o=o.dependencies,o!==null&&up(o)&&(Qt=!0))}function y1(o,l,c,d){Le=o;var y=0;do{if(bu&&(Eu=null),dh=0,bu=!1,25<=y)throw Error(r(301));if(y+=1,Yt=lt=null,o.updateQueue!=null){var b=o.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}ee.H=Z1,b=l(c,d)}while(bu);return b}function b4(){var o=ee.H,l=o.useState()[0];return l=typeof l.then=="function"?ph(l):l,o=o.useState()[0],(lt!==null?lt.memoizedState:null)!==o&&(Le.flags|=1024),l}function Y0(){var o=bp!==0;return bp=0,o}function Q0(o,l,c){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~c}function X0(o){if(vp){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}vp=!1}gs=0,Yt=lt=Le=null,bu=!1,dh=bp=0,Eu=null}function Hn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Le.memoizedState=Yt=o:Yt=Yt.next=o,Yt}function jt(){if(lt===null){var o=Le.alternate;o=o!==null?o.memoizedState:null}else o=lt.next;var l=Yt===null?Le.memoizedState:Yt.next;if(l!==null)Yt=l,lt=o;else{if(o===null)throw Le.alternate===null?Error(r(467)):Error(r(310));lt=o,o={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Yt===null?Le.memoizedState=Yt=o:Yt=Yt.next=o}return Yt}function Ep(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ph(o){var l=dh;return dh+=1,Eu===null&&(Eu=[]),o=a1(Eu,o,l),l=Le,(Yt===null?l.memoizedState:Yt.next)===null&&(l=l.alternate,ee.H=l===null||l.memoizedState===null?J1:uv),o}function Tp(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ph(o);if(o.$$typeof===V)return _n(o)}throw Error(r(438,String(o)))}function J0(o){var l=null,c=Le.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var d=Le.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=Ep(),Le.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(o),d=0;d<o;d++)c[d]=B;return l.index++,c}function ys(o,l){return typeof l=="function"?l(o):l}function _p(o){var l=jt();return Z0(l,lt,o)}function Z0(o,l,c){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=o.baseQueue,b=d.pending;if(b!==null){if(y!==null){var A=y.next;y.next=b.next,b.next=A}l.baseQueue=y=b,d.pending=null}if(b=o.baseState,y===null)o.memoizedState=b;else{l=y.next;var R=A=null,U=null,Y=l,ne=!1;do{var se=Y.lane&-536870913;if(se!==Y.lane?(qe&se)===se:(gs&se)===se){var Q=Y.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),se===pu&&(ne=!0);else if((gs&Q)===Q){Y=Y.next,Q===pu&&(ne=!0);continue}else se={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(R=U=se,A=b):U=U.next=se,Le.lanes|=Q,vo|=Q;se=Y.action,Za&&c(b,se),b=Y.hasEagerState?Y.eagerState:c(b,se)}else Q={lane:se,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(R=U=Q,A=b):U=U.next=Q,Le.lanes|=se,vo|=se;Y=Y.next}while(Y!==null&&Y!==l);if(U===null?A=b:U.next=R,!hr(b,o.memoizedState)&&(Qt=!0,ne&&(c=mu,c!==null)))throw c;o.memoizedState=b,o.baseState=A,o.baseQueue=U,d.lastRenderedState=b}return y===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function ev(o){var l=jt(),c=l.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var d=c.dispatch,y=c.pending,b=l.memoizedState;if(y!==null){c.pending=null;var A=y=y.next;do b=o(b,A.action),A=A.next;while(A!==y);hr(b,l.memoizedState)||(Qt=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),c.lastRenderedState=b}return[b,d]}function v1(o,l,c){var d=Le,y=jt(),b=Ye;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=l();var A=!hr((lt||y).memoizedState,c);if(A&&(y.memoizedState=c,Qt=!0),y=y.queue,rv(T1.bind(null,d,y,o),[o]),y.getSnapshot!==l||A||Yt!==null&&Yt.memoizedState.tag&1){if(d.flags|=2048,Tu(9,{destroy:void 0},E1.bind(null,d,y,c,l),null),dt===null)throw Error(r(349));b||(gs&127)!==0||b1(d,l,c)}return c}function b1(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=Le.updateQueue,l===null?(l=Ep(),Le.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function E1(o,l,c,d){l.value=c,l.getSnapshot=d,_1(l)&&S1(o)}function T1(o,l,c){return c(function(){_1(l)&&S1(o)})}function _1(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!hr(o,c)}catch{return!0}}function S1(o){var l=qa(o,2);l!==null&&ir(l,o,2)}function tv(o){var l=Hn();if(typeof o=="function"){var c=o;if(o=c(),Za){Cr(!0);try{c()}finally{Cr(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:o},l}function w1(o,l,c,d){return o.baseState=c,Z0(o,lt,typeof d=="function"?d:ys)}function E4(o,l,c,d,y){if(Ap(o))throw Error(r(485));if(o=l.action,o!==null){var b={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};ee.T!==null?c(!0):b.isTransition=!1,d(b),c=l.pending,c===null?(b.next=l.pending=b,A1(l,b)):(b.next=c.next,l.pending=c.next=b)}}function A1(o,l){var c=l.action,d=l.payload,y=o.state;if(l.isTransition){var b=ee.T,A={};ee.T=A;try{var R=c(y,d),U=ee.S;U!==null&&U(A,R),x1(o,l,R)}catch(Y){nv(o,l,Y)}finally{b!==null&&A.types!==null&&(b.types=A.types),ee.T=b}}else try{b=c(y,d),x1(o,l,b)}catch(Y){nv(o,l,Y)}}function x1(o,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){C1(o,l,d)},function(d){return nv(o,l,d)}):C1(o,l,c)}function C1(o,l,c){l.status="fulfilled",l.value=c,R1(l),o.state=c,l=o.pending,l!==null&&(c=l.next,c===l?o.pending=null:(c=c.next,l.next=c,A1(o,c)))}function nv(o,l,c){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=c,R1(l),l=l.next;while(l!==d)}o.action=null}function R1(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function k1(o,l){return l}function I1(o,l){if(Ye){var c=dt.formState;if(c!==null){e:{var d=Le;if(Ye){if(yt){t:{for(var y=yt,b=Lr;y.nodeType!==8;){if(!b){y=null;break t}if(y=Ur(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){yt=Ur(y.nextSibling),d=y.data==="F!";break e}}lo(d)}d=!1}d&&(l=c[0])}}return c=Hn(),c.memoizedState=c.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k1,lastRenderedState:l},c.queue=d,c=Y1.bind(null,Le,d),d.dispatch=c,d=tv(!1),b=lv.bind(null,Le,!1,d.queue),d=Hn(),y={state:l,dispatch:null,action:o,pending:null},d.queue=y,c=E4.bind(null,Le,y,b,c),y.dispatch=c,d.memoizedState=o,[l,c,!1]}function M1(o){var l=jt();return D1(l,lt,o)}function D1(o,l,c){if(l=Z0(o,l,k1)[0],o=_p(ys)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=ph(l)}catch(A){throw A===gu?fp:A}else d=l;l=jt();var y=l.queue,b=y.dispatch;return c!==l.memoizedState&&(Le.flags|=2048,Tu(9,{destroy:void 0},T4.bind(null,y,c),null)),[d,b,o]}function T4(o,l){o.action=l}function N1(o){var l=jt(),c=lt;if(c!==null)return D1(l,c,o);jt(),l=l.memoizedState,c=jt();var d=c.queue.dispatch;return c.memoizedState=o,[l,d,!1]}function Tu(o,l,c,d){return o={tag:o,create:c,deps:d,inst:l,next:null},l=Le.updateQueue,l===null&&(l=Ep(),Le.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=o.next=o:(d=c.next,c.next=o,o.next=d,l.lastEffect=o),o}function O1(){return jt().memoizedState}function Sp(o,l,c,d){var y=Hn();Le.flags|=o,y.memoizedState=Tu(1|l,{destroy:void 0},c,d===void 0?null:d)}function wp(o,l,c,d){var y=jt();d=d===void 0?null:d;var b=y.memoizedState.inst;lt!==null&&d!==null&&K0(d,lt.memoizedState.deps)?y.memoizedState=Tu(l,b,c,d):(Le.flags|=o,y.memoizedState=Tu(1|l,b,c,d))}function P1(o,l){Sp(8390656,8,o,l)}function rv(o,l){wp(2048,8,o,l)}function _4(o){Le.flags|=4;var l=Le.updateQueue;if(l===null)l=Ep(),Le.updateQueue=l,l.events=[o];else{var c=l.events;c===null?l.events=[o]:c.push(o)}}function L1(o){var l=jt().memoizedState;return _4({ref:l,nextImpl:o}),function(){if((nt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function V1(o,l){return wp(4,2,o,l)}function U1(o,l){return wp(4,4,o,l)}function B1(o,l){if(typeof l=="function"){o=o();var c=l(o);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function z1(o,l,c){c=c!=null?c.concat([o]):null,wp(4,4,B1.bind(null,l,o),c)}function iv(){}function j1(o,l){var c=jt();l=l===void 0?null:l;var d=c.memoizedState;return l!==null&&K0(l,d[1])?d[0]:(c.memoizedState=[o,l],o)}function F1(o,l){var c=jt();l=l===void 0?null:l;var d=c.memoizedState;if(l!==null&&K0(l,d[1]))return d[0];if(d=o(),Za){Cr(!0);try{o()}finally{Cr(!1)}}return c.memoizedState=[d,l],d}function sv(o,l,c){return c===void 0||(gs&1073741824)!==0&&(qe&261930)===0?o.memoizedState=l:(o.memoizedState=c,o=HA(),Le.lanes|=o,vo|=o,c)}function H1(o,l,c,d){return hr(c,l)?c:vu.current!==null?(o=sv(o,c,d),hr(o,l)||(Qt=!0),o):(gs&42)===0||(gs&1073741824)!==0&&(qe&261930)===0?(Qt=!0,o.memoizedState=c):(o=HA(),Le.lanes|=o,vo|=o,l)}function q1(o,l,c,d,y){var b=ae.p;ae.p=b!==0&&8>b?b:8;var A=ee.T,R={};ee.T=R,lv(o,!1,l,c);try{var U=y(),Y=ee.S;if(Y!==null&&Y(R,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ne=y4(U,d);mh(o,l,ne,yr(o))}else mh(o,l,d,yr(o))}catch(se){mh(o,l,{then:function(){},status:"rejected",reason:se},yr())}finally{ae.p=b,A!==null&&R.types!==null&&(A.types=R.types),ee.T=A}}function S4(){}function ov(o,l,c,d){if(o.tag!==5)throw Error(r(476));var y=$1(o).queue;q1(o,y,l,me,c===null?S4:function(){return G1(o),c(d)})}function $1(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:me},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:c},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function G1(o){var l=$1(o);l.next===null&&(l=o.alternate.memoizedState),mh(o,l.next.queue,{},yr())}function av(){return _n(Dh)}function K1(){return jt().memoizedState}function W1(){return jt().memoizedState}function w4(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var c=yr();o=ho(c);var d=fo(l,o,c);d!==null&&(ir(d,l,c),ch(d,l,c)),l={cache:L0()},o.payload=l;return}l=l.return}}function A4(o,l,c){var d=yr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ap(o)?Q1(l,c):(c=A0(o,l,c,d),c!==null&&(ir(c,o,d),X1(c,l,d)))}function Y1(o,l,c){var d=yr();mh(o,l,c,d)}function mh(o,l,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ap(o))Q1(l,y);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var A=l.lastRenderedState,R=b(A,c);if(y.hasEagerState=!0,y.eagerState=R,hr(R,A))return sp(o,l,y,0),dt===null&&ip(),!1}catch{}if(c=A0(o,l,y,d),c!==null)return ir(c,o,d),X1(c,l,d),!0}return!1}function lv(o,l,c,d){if(d={lane:2,revertLane:zv(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ap(o)){if(l)throw Error(r(479))}else l=A0(o,c,d,2),l!==null&&ir(l,o,2)}function Ap(o){var l=o.alternate;return o===Le||l!==null&&l===Le}function Q1(o,l){bu=vp=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function X1(o,l,c){if((c&4194048)!==0){var d=l.lanes;d&=o.pendingLanes,c|=d,l.lanes=c,Vc(o,c)}}var gh={readContext:_n,use:Tp,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};gh.useEffectEvent=kt;var J1={readContext:_n,use:Tp,useCallback:function(o,l){return Hn().memoizedState=[o,l===void 0?null:l],o},useContext:_n,useEffect:P1,useImperativeHandle:function(o,l,c){c=c!=null?c.concat([o]):null,Sp(4194308,4,B1.bind(null,l,o),c)},useLayoutEffect:function(o,l){return Sp(4194308,4,o,l)},useInsertionEffect:function(o,l){Sp(4,2,o,l)},useMemo:function(o,l){var c=Hn();l=l===void 0?null:l;var d=o();if(Za){Cr(!0);try{o()}finally{Cr(!1)}}return c.memoizedState=[d,l],d},useReducer:function(o,l,c){var d=Hn();if(c!==void 0){var y=c(l);if(Za){Cr(!0);try{c(l)}finally{Cr(!1)}}}else y=l;return d.memoizedState=d.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},d.queue=o,o=o.dispatch=A4.bind(null,Le,o),[d.memoizedState,o]},useRef:function(o){var l=Hn();return o={current:o},l.memoizedState=o},useState:function(o){o=tv(o);var l=o.queue,c=Y1.bind(null,Le,l);return l.dispatch=c,[o.memoizedState,c]},useDebugValue:iv,useDeferredValue:function(o,l){var c=Hn();return sv(c,o,l)},useTransition:function(){var o=tv(!1);return o=q1.bind(null,Le,o.queue,!0,!1),Hn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,c){var d=Le,y=Hn();if(Ye){if(c===void 0)throw Error(r(407));c=c()}else{if(c=l(),dt===null)throw Error(r(349));(qe&127)!==0||b1(d,l,c)}y.memoizedState=c;var b={value:c,getSnapshot:l};return y.queue=b,P1(T1.bind(null,d,b,o),[o]),d.flags|=2048,Tu(9,{destroy:void 0},E1.bind(null,d,b,c,l),null),c},useId:function(){var o=Hn(),l=dt.identifierPrefix;if(Ye){var c=zi,d=Bi;c=(d&~(1<<32-Ut(d)-1)).toString(32)+c,l="_"+l+"R_"+c,c=bp++,0<c&&(l+="H"+c.toString(32)),l+="_"}else c=v4++,l="_"+l+"r_"+c.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:av,useFormState:I1,useActionState:I1,useOptimistic:function(o){var l=Hn();l.memoizedState=l.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=lv.bind(null,Le,!0,c),c.dispatch=l,[o,l]},useMemoCache:J0,useCacheRefresh:function(){return Hn().memoizedState=w4.bind(null,Le)},useEffectEvent:function(o){var l=Hn(),c={impl:o};return l.memoizedState=c,function(){if((nt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},uv={readContext:_n,use:Tp,useCallback:j1,useContext:_n,useEffect:rv,useImperativeHandle:z1,useInsertionEffect:V1,useLayoutEffect:U1,useMemo:F1,useReducer:_p,useRef:O1,useState:function(){return _p(ys)},useDebugValue:iv,useDeferredValue:function(o,l){var c=jt();return H1(c,lt.memoizedState,o,l)},useTransition:function(){var o=_p(ys)[0],l=jt().memoizedState;return[typeof o=="boolean"?o:ph(o),l]},useSyncExternalStore:v1,useId:K1,useHostTransitionStatus:av,useFormState:M1,useActionState:M1,useOptimistic:function(o,l){var c=jt();return w1(c,lt,o,l)},useMemoCache:J0,useCacheRefresh:W1};uv.useEffectEvent=L1;var Z1={readContext:_n,use:Tp,useCallback:j1,useContext:_n,useEffect:rv,useImperativeHandle:z1,useInsertionEffect:V1,useLayoutEffect:U1,useMemo:F1,useReducer:ev,useRef:O1,useState:function(){return ev(ys)},useDebugValue:iv,useDeferredValue:function(o,l){var c=jt();return lt===null?sv(c,o,l):H1(c,lt.memoizedState,o,l)},useTransition:function(){var o=ev(ys)[0],l=jt().memoizedState;return[typeof o=="boolean"?o:ph(o),l]},useSyncExternalStore:v1,useId:K1,useHostTransitionStatus:av,useFormState:N1,useActionState:N1,useOptimistic:function(o,l){var c=jt();return lt!==null?w1(c,lt,o,l):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:J0,useCacheRefresh:W1};Z1.useEffectEvent=L1;function cv(o,l,c,d){l=o.memoizedState,c=c(d,l),c=c==null?l:m({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var hv={enqueueSetState:function(o,l,c){o=o._reactInternals;var d=yr(),y=ho(d);y.payload=l,c!=null&&(y.callback=c),l=fo(o,y,d),l!==null&&(ir(l,o,d),ch(l,o,d))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var d=yr(),y=ho(d);y.tag=1,y.payload=l,c!=null&&(y.callback=c),l=fo(o,y,d),l!==null&&(ir(l,o,d),ch(l,o,d))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=yr(),d=ho(c);d.tag=2,l!=null&&(d.callback=l),l=fo(o,d,c),l!==null&&(ir(l,o,c),ch(l,o,c))}};function eA(o,l,c,d,y,b,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,b,A):l.prototype&&l.prototype.isPureReactComponent?!nh(c,d)||!nh(y,b):!0}function tA(o,l,c,d){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,d),l.state!==o&&hv.enqueueReplaceState(l,l.state,null)}function el(o,l){var c=l;if("ref"in l){c={};for(var d in l)d!=="ref"&&(c[d]=l[d])}if(o=o.defaultProps){c===l&&(c=m({},c));for(var y in o)c[y]===void 0&&(c[y]=o[y])}return c}function nA(o){rp(o)}function rA(o){console.error(o)}function iA(o){rp(o)}function xp(o,l){try{var c=o.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function sA(o,l,c){try{var d=o.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function fv(o,l,c){return c=ho(c),c.tag=3,c.payload={element:null},c.callback=function(){xp(o,l)},c}function oA(o){return o=ho(o),o.tag=3,o}function aA(o,l,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;o.payload=function(){return y(b)},o.callback=function(){sA(l,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){sA(l,c,d),typeof y!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function x4(o,l,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=c.alternate,l!==null&&du(l,c,y,!0),c=dr.current,c!==null){switch(c.tag){case 31:case 13:return Vr===null?Up():c.alternate===null&&It===0&&(It=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===dp?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([d]):l.add(d),Vv(o,d,y)),!1;case 22:return c.flags|=65536,d===dp?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([d]):c.add(d)),Vv(o,d,y)),!1}throw Error(r(435,c.tag))}return Vv(o,d,y),Up(),!1}if(Ye)return l=dr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==M0&&(o=Error(r(422),{cause:d}),sh(Nr(o,c)))):(d!==M0&&(l=Error(r(423),{cause:d}),sh(Nr(l,c))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,d=Nr(d,c),y=fv(o.stateNode,d,y),F0(o,y),It!==4&&(It=2)),!1;var b=Error(r(520),{cause:d});if(b=Nr(b,c),wh===null?wh=[b]:wh.push(b),It!==4&&(It=2),l===null)return!0;d=Nr(d,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,o=y&-y,c.lanes|=o,o=fv(c.stateNode,d,o),F0(c,o),!1;case 1:if(l=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(bo===null||!bo.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=oA(y),aA(y,o,c,d),F0(c,y),!1}c=c.return}while(c!==null);return!1}var dv=Error(r(461)),Qt=!1;function Sn(o,l,c,d){l.child=o===null?h1(l,null,c,d):Ja(l,o.child,c,d)}function lA(o,l,c,d,y){c=c.render;var b=l.ref;if("ref"in d){var A={};for(var R in d)R!=="ref"&&(A[R]=d[R])}else A=d;return Wa(l),d=W0(o,l,c,A,b,y),R=Y0(),o!==null&&!Qt?(Q0(o,l,y),vs(o,l,y)):(Ye&&R&&k0(l),l.flags|=1,Sn(o,l,d,y),l.child)}function uA(o,l,c,d,y){if(o===null){var b=c.type;return typeof b=="function"&&!x0(b)&&b.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=b,cA(o,l,b,d,y)):(o=ap(c.type,null,d,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,!Tv(o,y)){var A=b.memoizedProps;if(c=c.compare,c=c!==null?c:nh,c(A,d)&&o.ref===l.ref)return vs(o,l,y)}return l.flags|=1,o=fs(b,d),o.ref=l.ref,o.return=l,l.child=o}function cA(o,l,c,d,y){if(o!==null){var b=o.memoizedProps;if(nh(b,d)&&o.ref===l.ref)if(Qt=!1,l.pendingProps=d=b,Tv(o,y))(o.flags&131072)!==0&&(Qt=!0);else return l.lanes=o.lanes,vs(o,l,y)}return pv(o,l,c,d,y)}function hA(o,l,c,d){var y=d.children,b=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((l.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,o!==null){for(d=l.child=o.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~b}else d=0,l.child=null;return fA(o,l,b,c,d)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&hp(l,b!==null?b.cachePool:null),b!==null?p1(l,b):q0(),m1(l);else return d=l.lanes=536870912,fA(o,l,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(hp(l,b.cachePool),p1(l,b),mo(),l.memoizedState=null):(o!==null&&hp(l,null),q0(),mo());return Sn(o,l,y,c),l.child}function yh(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function fA(o,l,c,d,y){var b=U0();return b=b===null?null:{parent:Wt._currentValue,pool:b},l.memoizedState={baseLanes:c,cachePool:b},o!==null&&hp(l,null),q0(),m1(l),o!==null&&du(o,l,d,!0),l.childLanes=y,null}function Cp(o,l){return l=kp({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function dA(o,l,c){return Ja(l,o.child,null,c),o=Cp(l,l.pendingProps),o.flags|=2,pr(l),l.memoizedState=null,o}function C4(o,l,c){var d=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(Ye){if(d.mode==="hidden")return o=Cp(l,d),l.lanes=536870912,yh(null,o);if(G0(l),(o=yt)?(o=Ax(o,Lr),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:oo!==null?{id:Bi,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},c=Qw(o),c.return=l,l.child=c,Tn=l,yt=null)):o=null,o===null)throw lo(l);return l.lanes=536870912,null}return Cp(l,d)}var b=o.memoizedState;if(b!==null){var A=b.dehydrated;if(G0(l),y)if(l.flags&256)l.flags&=-257,l=dA(o,l,c);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(r(558));else if(Qt||du(o,l,c,!1),y=(c&o.childLanes)!==0,Qt||y){if(d=dt,d!==null&&(A=Uc(d,c),A!==0&&A!==b.retryLane))throw b.retryLane=A,qa(o,A),ir(d,o,A),dv;Up(),l=dA(o,l,c)}else o=b.treeContext,yt=Ur(A.nextSibling),Tn=l,Ye=!0,ao=null,Lr=!1,o!==null&&Zw(l,o),l=Cp(l,d),l.flags|=4096;return l}return o=fs(o.child,{mode:d.mode,children:d.children}),o.ref=l.ref,l.child=o,o.return=l,o}function Rp(o,l){var c=l.ref;if(c===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(o===null||o.ref!==c)&&(l.flags|=4194816)}}function pv(o,l,c,d,y){return Wa(l),c=W0(o,l,c,d,void 0,y),d=Y0(),o!==null&&!Qt?(Q0(o,l,y),vs(o,l,y)):(Ye&&d&&k0(l),l.flags|=1,Sn(o,l,c,y),l.child)}function pA(o,l,c,d,y,b){return Wa(l),l.updateQueue=null,c=y1(l,d,c,y),g1(o),d=Y0(),o!==null&&!Qt?(Q0(o,l,b),vs(o,l,b)):(Ye&&d&&k0(l),l.flags|=1,Sn(o,l,c,b),l.child)}function mA(o,l,c,d,y){if(Wa(l),l.stateNode===null){var b=uu,A=c.contextType;typeof A=="object"&&A!==null&&(b=_n(A)),b=new c(d,b),l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=hv,l.stateNode=b,b._reactInternals=l,b=l.stateNode,b.props=d,b.state=l.memoizedState,b.refs={},z0(l),A=c.contextType,b.context=typeof A=="object"&&A!==null?_n(A):uu,b.state=l.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(cv(l,c,A,d),b.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&hv.enqueueReplaceState(b,b.state,null),fh(l,d,b,y),hh(),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(o===null){b=l.stateNode;var R=l.memoizedProps,U=el(c,R);b.props=U;var Y=b.context,ne=c.contextType;A=uu,typeof ne=="object"&&ne!==null&&(A=_n(ne));var se=c.getDerivedStateFromProps;ne=typeof se=="function"||typeof b.getSnapshotBeforeUpdate=="function",R=l.pendingProps!==R,ne||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(R||Y!==A)&&tA(l,b,d,A),co=!1;var Q=l.memoizedState;b.state=Q,fh(l,d,b,y),hh(),Y=l.memoizedState,R||Q!==Y||co?(typeof se=="function"&&(cv(l,c,se,d),Y=l.memoizedState),(U=co||eA(l,c,U,d,Q,Y,A))?(ne||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=Y),b.props=d,b.state=Y,b.context=A,d=U):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{b=l.stateNode,j0(o,l),A=l.memoizedProps,ne=el(c,A),b.props=ne,se=l.pendingProps,Q=b.context,Y=c.contextType,U=uu,typeof Y=="object"&&Y!==null&&(U=_n(Y)),R=c.getDerivedStateFromProps,(Y=typeof R=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==se||Q!==U)&&tA(l,b,d,U),co=!1,Q=l.memoizedState,b.state=Q,fh(l,d,b,y),hh();var J=l.memoizedState;A!==se||Q!==J||co||o!==null&&o.dependencies!==null&&up(o.dependencies)?(typeof R=="function"&&(cv(l,c,R,d),J=l.memoizedState),(ne=co||eA(l,c,ne,d,Q,J,U)||o!==null&&o.dependencies!==null&&up(o.dependencies))?(Y||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,J,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,J,U)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=J),b.props=d,b.state=J,b.context=U,d=ne):(typeof b.componentDidUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Q===o.memoizedState||(l.flags|=1024),d=!1)}return b=d,Rp(o,l),d=(l.flags&128)!==0,b||d?(b=l.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),l.flags|=1,o!==null&&d?(l.child=Ja(l,o.child,null,y),l.child=Ja(l,null,c,y)):Sn(o,l,c,y),l.memoizedState=b.state,o=l.child):o=vs(o,l,y),o}function gA(o,l,c,d){return Ga(),l.flags|=256,Sn(o,l,c,d),l.child}var mv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gv(o){return{baseLanes:o,cachePool:s1()}}function yv(o,l,c){return o=o!==null?o.childLanes&~c:0,l&&(o|=gr),o}function yA(o,l,c){var d=l.pendingProps,y=!1,b=(l.flags&128)!==0,A;if((A=b)||(A=o!==null&&o.memoizedState===null?!1:(zt.current&2)!==0),A&&(y=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,o===null){if(Ye){if(y?po(l):mo(),(o=yt)?(o=Ax(o,Lr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:oo!==null?{id:Bi,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},c=Qw(o),c.return=l,l.child=c,Tn=l,yt=null)):o=null,o===null)throw lo(l);return Zv(o)?l.lanes=32:l.lanes=536870912,null}var R=d.children;return d=d.fallback,y?(mo(),y=l.mode,R=kp({mode:"hidden",children:R},y),d=$a(d,y,c,null),R.return=l,d.return=l,R.sibling=d,l.child=R,d=l.child,d.memoizedState=gv(c),d.childLanes=yv(o,A,c),l.memoizedState=mv,yh(null,d)):(po(l),vv(l,R))}var U=o.memoizedState;if(U!==null&&(R=U.dehydrated,R!==null)){if(b)l.flags&256?(po(l),l.flags&=-257,l=bv(o,l,c)):l.memoizedState!==null?(mo(),l.child=o.child,l.flags|=128,l=null):(mo(),R=d.fallback,y=l.mode,d=kp({mode:"visible",children:d.children},y),R=$a(R,y,c,null),R.flags|=2,d.return=l,R.return=l,d.sibling=R,l.child=d,Ja(l,o.child,null,c),d=l.child,d.memoizedState=gv(c),d.childLanes=yv(o,A,c),l.memoizedState=mv,l=yh(null,d));else if(po(l),Zv(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var Y=A.dgst;A=Y,d=Error(r(419)),d.stack="",d.digest=A,sh({value:d,source:null,stack:null}),l=bv(o,l,c)}else if(Qt||du(o,l,c,!1),A=(c&o.childLanes)!==0,Qt||A){if(A=dt,A!==null&&(d=Uc(A,c),d!==0&&d!==U.retryLane))throw U.retryLane=d,qa(o,d),ir(A,o,d),dv;Jv(R)||Up(),l=bv(o,l,c)}else Jv(R)?(l.flags|=192,l.child=o.child,l=null):(o=U.treeContext,yt=Ur(R.nextSibling),Tn=l,Ye=!0,ao=null,Lr=!1,o!==null&&Zw(l,o),l=vv(l,d.children),l.flags|=4096);return l}return y?(mo(),R=d.fallback,y=l.mode,U=o.child,Y=U.sibling,d=fs(U,{mode:"hidden",children:d.children}),d.subtreeFlags=U.subtreeFlags&65011712,Y!==null?R=fs(Y,R):(R=$a(R,y,c,null),R.flags|=2),R.return=l,d.return=l,d.sibling=R,l.child=d,yh(null,d),d=l.child,R=o.child.memoizedState,R===null?R=gv(c):(y=R.cachePool,y!==null?(U=Wt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=s1(),R={baseLanes:R.baseLanes|c,cachePool:y}),d.memoizedState=R,d.childLanes=yv(o,A,c),l.memoizedState=mv,yh(o.child,d)):(po(l),c=o.child,o=c.sibling,c=fs(c,{mode:"visible",children:d.children}),c.return=l,c.sibling=null,o!==null&&(A=l.deletions,A===null?(l.deletions=[o],l.flags|=16):A.push(o)),l.child=c,l.memoizedState=null,c)}function vv(o,l){return l=kp({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function kp(o,l){return o=fr(22,o,null,l),o.lanes=0,o}function bv(o,l,c){return Ja(l,o.child,null,c),o=vv(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function vA(o,l,c){o.lanes|=l;var d=o.alternate;d!==null&&(d.lanes|=l),O0(o.return,l,c)}function Ev(o,l,c,d,y,b){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:b}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=c,A.tailMode=y,A.treeForkCount=b)}function bA(o,l,c){var d=l.pendingProps,y=d.revealOrder,b=d.tail;d=d.children;var A=zt.current,R=(A&2)!==0;if(R?(A=A&1|2,l.flags|=128):A&=1,ue(zt,A),Sn(o,l,d,c),d=Ye?ih:0,!R&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vA(o,c,l);else if(o.tag===19)vA(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(c=l.child,y=null;c!==null;)o=c.alternate,o!==null&&yp(o)===null&&(y=c),c=c.sibling;c=y,c===null?(y=l.child,l.child=null):(y=c.sibling,c.sibling=null),Ev(l,!1,y,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&yp(o)===null){l.child=y;break}o=y.sibling,y.sibling=c,c=y,y=o}Ev(l,!0,c,null,b,d);break;case"together":Ev(l,!1,null,null,void 0,d);break;default:l.memoizedState=null}return l.child}function vs(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),vo|=l.lanes,(c&l.childLanes)===0)if(o!==null){if(du(o,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,c=fs(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=fs(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function Tv(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&up(o)))}function R4(o,l,c){switch(l.tag){case 3:sn(l,l.stateNode.containerInfo),uo(l,Wt,o.memoizedState.cache),Ga();break;case 27:case 5:xa(l);break;case 4:sn(l,l.stateNode.containerInfo);break;case 10:uo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,G0(l),null;break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(po(l),l.flags|=128,null):(c&l.child.childLanes)!==0?yA(o,l,c):(po(l),o=vs(o,l,c),o!==null?o.sibling:null);po(l);break;case 19:var y=(o.flags&128)!==0;if(d=(c&l.childLanes)!==0,d||(du(o,l,c,!1),d=(c&l.childLanes)!==0),y){if(d)return bA(o,l,c);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(zt,zt.current),d)break;return null;case 22:return l.lanes=0,hA(o,l,c,l.pendingProps);case 24:uo(l,Wt,o.memoizedState.cache)}return vs(o,l,c)}function EA(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps)Qt=!0;else{if(!Tv(o,c)&&(l.flags&128)===0)return Qt=!1,R4(o,l,c);Qt=(o.flags&131072)!==0}else Qt=!1,Ye&&(l.flags&1048576)!==0&&Jw(l,ih,l.index);switch(l.lanes=0,l.tag){case 16:e:{var d=l.pendingProps;if(o=Qa(l.elementType),l.type=o,typeof o=="function")x0(o)?(d=el(o,d),l.tag=1,l=mA(null,l,o,d,c)):(l.tag=0,l=pv(null,l,o,d,c));else{if(o!=null){var y=o.$$typeof;if(y===$){l.tag=11,l=lA(null,l,o,d,c);break e}else if(y===I){l.tag=14,l=uA(null,l,o,d,c);break e}}throw l=Oe(o)||o,Error(r(306,l,""))}}return l;case 0:return pv(o,l,l.type,l.pendingProps,c);case 1:return d=l.type,y=el(d,l.pendingProps),mA(o,l,d,y,c);case 3:e:{if(sn(l,l.stateNode.containerInfo),o===null)throw Error(r(387));d=l.pendingProps;var b=l.memoizedState;y=b.element,j0(o,l),fh(l,d,null,c);var A=l.memoizedState;if(d=A.cache,uo(l,Wt,d),d!==b.cache&&P0(l,[Wt],c,!0),hh(),d=A.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=gA(o,l,d,c);break e}else if(d!==y){y=Nr(Error(r(424)),l),sh(y),l=gA(o,l,d,c);break e}else for(o=l.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,yt=Ur(o.firstChild),Tn=l,Ye=!0,ao=null,Lr=!0,c=h1(l,null,d,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ga(),d===y){l=vs(o,l,c);break e}Sn(o,l,d,c)}l=l.child}return l;case 26:return Rp(o,l),o===null?(c=Mx(l.type,null,l.pendingProps,null))?l.memoizedState=c:Ye||(c=l.type,o=l.pendingProps,d=$p(Ve.current).createElement(c),d[$t]=l,d[hn]=o,wn(d,c,o),Gt(d),l.stateNode=d):l.memoizedState=Mx(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return xa(l),o===null&&Ye&&(d=l.stateNode=Rx(l.type,l.pendingProps,Ve.current),Tn=l,Lr=!0,y=yt,So(l.type)?(eb=y,yt=Ur(d.firstChild)):yt=y),Sn(o,l,l.pendingProps.children,c),Rp(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Ye&&((y=d=yt)&&(d=iU(d,l.type,l.pendingProps,Lr),d!==null?(l.stateNode=d,Tn=l,yt=Ur(d.firstChild),Lr=!1,y=!0):y=!1),y||lo(l)),xa(l),y=l.type,b=l.pendingProps,A=o!==null?o.memoizedProps:null,d=b.children,Yv(y,b)?d=null:A!==null&&Yv(y,A)&&(l.flags|=32),l.memoizedState!==null&&(y=W0(o,l,b4,null,null,c),Dh._currentValue=y),Rp(o,l),Sn(o,l,d,c),l.child;case 6:return o===null&&Ye&&((o=c=yt)&&(c=sU(c,l.pendingProps,Lr),c!==null?(l.stateNode=c,Tn=l,yt=null,o=!0):o=!1),o||lo(l)),null;case 13:return yA(o,l,c);case 4:return sn(l,l.stateNode.containerInfo),d=l.pendingProps,o===null?l.child=Ja(l,null,d,c):Sn(o,l,d,c),l.child;case 11:return lA(o,l,l.type,l.pendingProps,c);case 7:return Sn(o,l,l.pendingProps,c),l.child;case 8:return Sn(o,l,l.pendingProps.children,c),l.child;case 12:return Sn(o,l,l.pendingProps.children,c),l.child;case 10:return d=l.pendingProps,uo(l,l.type,d.value),Sn(o,l,d.children,c),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,Wa(l),y=_n(y),d=d(y),l.flags|=1,Sn(o,l,d,c),l.child;case 14:return uA(o,l,l.type,l.pendingProps,c);case 15:return cA(o,l,l.type,l.pendingProps,c);case 19:return bA(o,l,c);case 31:return C4(o,l,c);case 22:return hA(o,l,c,l.pendingProps);case 24:return Wa(l),d=_n(Wt),o===null?(y=U0(),y===null&&(y=dt,b=L0(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),l.memoizedState={parent:d,cache:y},z0(l),uo(l,Wt,y)):((o.lanes&c)!==0&&(j0(o,l),fh(l,null,null,c),hh()),y=o.memoizedState,b=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),uo(l,Wt,d)):(d=b.cache,uo(l,Wt,d),d!==y.cache&&P0(l,[Wt],c,!0))),Sn(o,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function bs(o){o.flags|=4}function _v(o,l,c,d,y){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(KA())o.flags|=8192;else throw Xa=dp,B0}else o.flags&=-16777217}function TA(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Lx(l))if(KA())o.flags|=8192;else throw Xa=dp,B0}function Ip(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Ld():536870912,o.lanes|=l,Au|=l)}function vh(o,l){if(!Ye)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function vt(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,d=0;if(l)for(var y=o.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=d,o.childLanes=c,l}function k4(o,l,c){var d=l.pendingProps;switch(I0(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(l),null;case 1:return vt(l),null;case 3:return c=l.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ms(Wt),Et(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(fu(l)?bs(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,D0())),vt(l),null;case 26:var y=l.type,b=l.memoizedState;return o===null?(bs(l),b!==null?(vt(l),TA(l,b)):(vt(l),_v(l,y,null,d,c))):b?b!==o.memoizedState?(bs(l),vt(l),TA(l,b)):(vt(l),l.flags&=-16777217):(o=o.memoizedProps,o!==d&&bs(l),vt(l),_v(l,y,o,d,c)),null;case 27:if(ql(l),c=Ve.current,y=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&bs(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return vt(l),null}o=de.current,fu(l)?e1(l):(o=Rx(y,d,c),l.stateNode=o,bs(l))}return vt(l),null;case 5:if(ql(l),y=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==d&&bs(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return vt(l),null}if(b=de.current,fu(l))e1(l);else{var A=$p(Ve.current);switch(b){case 1:b=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=A.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?A.createElement(y,{is:d.is}):A.createElement(y)}}b[$t]=l,b[hn]=d;e:for(A=l.child;A!==null;){if(A.tag===5||A.tag===6)b.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===l)break e;for(;A.sibling===null;){if(A.return===null||A.return===l)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}l.stateNode=b;e:switch(wn(b,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&bs(l)}}return vt(l),_v(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,c),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==d&&bs(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(o=Ve.current,fu(l)){if(o=l.stateNode,c=l.memoizedProps,d=null,y=Tn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}o[$t]=l,o=!!(o.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||yx(o.nodeValue,c)),o||lo(l,!0)}else o=$p(o).createTextNode(d),o[$t]=l,l.stateNode=o}return vt(l),null;case 31:if(c=l.memoizedState,o===null||o.memoizedState!==null){if(d=fu(l),c!==null){if(o===null){if(!d)throw Error(r(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[$t]=l}else Ga(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vt(l),o=!1}else c=D0(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=c),o=!0;if(!o)return l.flags&256?(pr(l),l):(pr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return vt(l),null;case 13:if(d=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=fu(l),d!==null&&d.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[$t]=l}else Ga(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vt(l),y=!1}else y=D0(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(pr(l),l):(pr(l),null)}return pr(l),(l.flags&128)!==0?(l.lanes=c,l):(c=d!==null,o=o!==null&&o.memoizedState!==null,c&&(d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)),c!==o&&c&&(l.child.flags|=8192),Ip(l,l.updateQueue),vt(l),null);case 4:return Et(),o===null&&qv(l.stateNode.containerInfo),vt(l),null;case 10:return ms(l.type),vt(l),null;case 19:if(te(zt),d=l.memoizedState,d===null)return vt(l),null;if(y=(l.flags&128)!==0,b=d.rendering,b===null)if(y)vh(d,!1);else{if(It!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(b=yp(o),b!==null){for(l.flags|=128,vh(d,!1),o=b.updateQueue,l.updateQueue=o,Ip(l,o),l.subtreeFlags=0,o=c,c=l.child;c!==null;)Yw(c,o),c=c.sibling;return ue(zt,zt.current&1|2),Ye&&ds(l,d.treeForkCount),l.child}o=o.sibling}d.tail!==null&&jn()>Pp&&(l.flags|=128,y=!0,vh(d,!1),l.lanes=4194304)}else{if(!y)if(o=yp(b),o!==null){if(l.flags|=128,y=!0,o=o.updateQueue,l.updateQueue=o,Ip(l,o),vh(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Ye)return vt(l),null}else 2*jn()-d.renderingStartTime>Pp&&c!==536870912&&(l.flags|=128,y=!0,vh(d,!1),l.lanes=4194304);d.isBackwards?(b.sibling=l.child,l.child=b):(o=d.last,o!==null?o.sibling=b:l.child=b,d.last=b)}return d.tail!==null?(o=d.tail,d.rendering=o,d.tail=o.sibling,d.renderingStartTime=jn(),o.sibling=null,c=zt.current,ue(zt,y?c&1|2:c&1),Ye&&ds(l,d.treeForkCount),o):(vt(l),null);case 22:case 23:return pr(l),$0(),d=l.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(c&536870912)!==0&&(l.flags&128)===0&&(vt(l),l.subtreeFlags&6&&(l.flags|=8192)):vt(l),c=l.updateQueue,c!==null&&Ip(l,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048),o!==null&&te(Ya),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),ms(Wt),vt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function I4(o,l){switch(I0(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return ms(Wt),Et(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return ql(l),null;case 31:if(l.memoizedState!==null){if(pr(l),l.alternate===null)throw Error(r(340));Ga()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(pr(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Ga()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return te(zt),null;case 4:return Et(),null;case 10:return ms(l.type),null;case 22:case 23:return pr(l),$0(),o!==null&&te(Ya),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return ms(Wt),null;case 25:return null;default:return null}}function _A(o,l){switch(I0(l),l.tag){case 3:ms(Wt),Et();break;case 26:case 27:case 5:ql(l);break;case 4:Et();break;case 31:l.memoizedState!==null&&pr(l);break;case 13:pr(l);break;case 19:te(zt);break;case 10:ms(l.type);break;case 22:case 23:pr(l),$0(),o!==null&&te(Ya);break;case 24:ms(Wt)}}function bh(o,l){try{var c=l.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&o)===o){d=void 0;var b=c.create,A=c.inst;d=b(),A.destroy=d}c=c.next}while(c!==y)}}catch(R){st(l,l.return,R)}}function go(o,l,c){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&o)===o){var A=d.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=l;var U=c,Y=R;try{Y()}catch(ne){st(y,U,ne)}}}d=d.next}while(d!==b)}}catch(ne){st(l,l.return,ne)}}function SA(o){var l=o.updateQueue;if(l!==null){var c=o.stateNode;try{d1(l,c)}catch(d){st(o,o.return,d)}}}function wA(o,l,c){c.props=el(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(d){st(o,l,d)}}function Eh(o,l){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof c=="function"?o.refCleanup=c(d):c.current=d}}catch(y){st(o,l,y)}}function ji(o,l){var c=o.ref,d=o.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){st(o,l,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){st(o,l,y)}else c.current=null}function AA(o){var l=o.type,c=o.memoizedProps,d=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){st(o,o.return,y)}}function Sv(o,l,c){try{var d=o.stateNode;J4(d,o.type,c,l),d[hn]=l}catch(y){st(o,o.return,y)}}function xA(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&So(o.type)||o.tag===4}function wv(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||xA(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&So(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Av(o,l,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(o),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=ei));else if(d!==4&&(d===27&&So(o.type)&&(c=o.stateNode,l=null),o=o.child,o!==null))for(Av(o,l,c),o=o.sibling;o!==null;)Av(o,l,c),o=o.sibling}function Mp(o,l,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(d!==4&&(d===27&&So(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(Mp(o,l,c),o=o.sibling;o!==null;)Mp(o,l,c),o=o.sibling}function CA(o){var l=o.stateNode,c=o.memoizedProps;try{for(var d=o.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);wn(l,d,c),l[$t]=o,l[hn]=c}catch(b){st(o,o.return,b)}}var Es=!1,Xt=!1,xv=!1,RA=typeof WeakSet=="function"?WeakSet:Set,dn=null;function M4(o,l){if(o=o.containerInfo,Kv=Jp,o=zw(o),b0(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var A=0,R=-1,U=-1,Y=0,ne=0,se=o,Q=null;t:for(;;){for(var J;se!==c||y!==0&&se.nodeType!==3||(R=A+y),se!==b||d!==0&&se.nodeType!==3||(U=A+d),se.nodeType===3&&(A+=se.nodeValue.length),(J=se.firstChild)!==null;)Q=se,se=J;for(;;){if(se===o)break t;if(Q===c&&++Y===y&&(R=A),Q===b&&++ne===d&&(U=A),(J=se.nextSibling)!==null)break;se=Q,Q=se.parentNode}se=J}c=R===-1||U===-1?null:{start:R,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(Wv={focusedElem:o,selectionRange:c},Jp=!1,dn=l;dn!==null;)if(l=dn,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,dn=o;else for(;dn!==null;){switch(l=dn,b=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(c=0;c<o.length;c++)y=o[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&b!==null){o=void 0,c=l,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var ye=el(c.type,y);o=d.getSnapshotBeforeUpdate(ye,b),d.__reactInternalSnapshotBeforeUpdate=o}catch(xe){st(c,c.return,xe)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,c=o.nodeType,c===9)Xv(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Xv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,dn=o;break}dn=l.return}}function kA(o,l,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:_s(o,c),d&4&&bh(5,c);break;case 1:if(_s(o,c),d&4)if(o=c.stateNode,l===null)try{o.componentDidMount()}catch(A){st(c,c.return,A)}else{var y=el(c.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(y,l,o.__reactInternalSnapshotBeforeUpdate)}catch(A){st(c,c.return,A)}}d&64&&SA(c),d&512&&Eh(c,c.return);break;case 3:if(_s(o,c),d&64&&(o=c.updateQueue,o!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{d1(o,l)}catch(A){st(c,c.return,A)}}break;case 27:l===null&&d&4&&CA(c);case 26:case 5:_s(o,c),l===null&&d&4&&AA(c),d&512&&Eh(c,c.return);break;case 12:_s(o,c);break;case 31:_s(o,c),d&4&&DA(o,c);break;case 13:_s(o,c),d&4&&NA(o,c),d&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=z4.bind(null,c),oU(o,c))));break;case 22:if(d=c.memoizedState!==null||Es,!d){l=l!==null&&l.memoizedState!==null||Xt,y=Es;var b=Xt;Es=d,(Xt=l)&&!b?Ss(o,c,(c.subtreeFlags&8772)!==0):_s(o,c),Es=y,Xt=b}break;case 30:break;default:_s(o,c)}}function IA(o){var l=o.alternate;l!==null&&(o.alternate=null,IA(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Yl(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var _t=null,er=!1;function Ts(o,l,c){for(c=c.child;c!==null;)MA(o,l,c),c=c.sibling}function MA(o,l,c){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Qr,c)}catch{}switch(c.tag){case 26:Xt||ji(c,l),Ts(o,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Xt||ji(c,l);var d=_t,y=er;So(c.type)&&(_t=c.stateNode,er=!1),Ts(o,l,c),kh(c.stateNode),_t=d,er=y;break;case 5:Xt||ji(c,l);case 6:if(d=_t,y=er,_t=null,Ts(o,l,c),_t=d,er=y,_t!==null)if(er)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(c.stateNode)}catch(b){st(c,l,b)}else try{_t.removeChild(c.stateNode)}catch(b){st(c,l,b)}break;case 18:_t!==null&&(er?(o=_t,Sx(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),Nu(o)):Sx(_t,c.stateNode));break;case 4:d=_t,y=er,_t=c.stateNode.containerInfo,er=!0,Ts(o,l,c),_t=d,er=y;break;case 0:case 11:case 14:case 15:go(2,c,l),Xt||go(4,c,l),Ts(o,l,c);break;case 1:Xt||(ji(c,l),d=c.stateNode,typeof d.componentWillUnmount=="function"&&wA(c,l,d)),Ts(o,l,c);break;case 21:Ts(o,l,c);break;case 22:Xt=(d=Xt)||c.memoizedState!==null,Ts(o,l,c),Xt=d;break;default:Ts(o,l,c)}}function DA(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Nu(o)}catch(c){st(l,l.return,c)}}}function NA(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Nu(o)}catch(c){st(l,l.return,c)}}function D4(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new RA),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new RA),l;default:throw Error(r(435,o.tag))}}function Dp(o,l){var c=D4(o);l.forEach(function(d){if(!c.has(d)){c.add(d);var y=j4.bind(null,o,d);d.then(y,y)}})}function tr(o,l){var c=l.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=o,A=l,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(So(R.type)){_t=R.stateNode,er=!1;break e}break;case 5:_t=R.stateNode,er=!1;break e;case 3:case 4:_t=R.stateNode.containerInfo,er=!0;break e}R=R.return}if(_t===null)throw Error(r(160));MA(b,A,y),_t=null,er=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)OA(l,o),l=l.sibling}var oi=null;function OA(o,l){var c=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:tr(l,o),nr(o),d&4&&(go(3,o,o.return),bh(3,o),go(5,o,o.return));break;case 1:tr(l,o),nr(o),d&512&&(Xt||c===null||ji(c,c.return)),d&64&&Es&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=oi;if(tr(l,o),nr(o),d&512&&(Xt||c===null||ji(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=o.memoizedState,c===null)if(d===null)if(o.stateNode===null){e:{d=o.type,c=o.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Ci]||b[$t]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),wn(b,d,c),b[$t]=o,Gt(b),d=b;break e;case"link":var A=Ox("link","href",y).get(d+(c.href||""));if(A){for(var R=0;R<A.length;R++)if(b=A[R],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(R,1);break t}}b=y.createElement(d),wn(b,d,c),y.head.appendChild(b);break;case"meta":if(A=Ox("meta","content",y).get(d+(c.content||""))){for(R=0;R<A.length;R++)if(b=A[R],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(R,1);break t}}b=y.createElement(d),wn(b,d,c),y.head.appendChild(b);break;default:throw Error(r(468,d))}b[$t]=o,Gt(b),d=b}o.stateNode=d}else Px(y,o.type,o.stateNode);else o.stateNode=Nx(y,d,o.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?Px(y,o.type,o.stateNode):Nx(y,d,o.memoizedProps)):d===null&&o.stateNode!==null&&Sv(o,o.memoizedProps,c.memoizedProps)}break;case 27:tr(l,o),nr(o),d&512&&(Xt||c===null||ji(c,c.return)),c!==null&&d&4&&Sv(o,o.memoizedProps,c.memoizedProps);break;case 5:if(tr(l,o),nr(o),d&512&&(Xt||c===null||ji(c,c.return)),o.flags&32){y=o.stateNode;try{Zn(y,"")}catch(ye){st(o,o.return,ye)}}d&4&&o.stateNode!=null&&(y=o.memoizedProps,Sv(o,y,c!==null?c.memoizedProps:y)),d&1024&&(xv=!0);break;case 6:if(tr(l,o),nr(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,c=o.stateNode;try{c.nodeValue=d}catch(ye){st(o,o.return,ye)}}break;case 3:if(Wp=null,y=oi,oi=Gp(l.containerInfo),tr(l,o),oi=y,nr(o),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Nu(l.containerInfo)}catch(ye){st(o,o.return,ye)}xv&&(xv=!1,PA(o));break;case 4:d=oi,oi=Gp(o.stateNode.containerInfo),tr(l,o),nr(o),oi=d;break;case 12:tr(l,o),nr(o);break;case 31:tr(l,o),nr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Dp(o,d)));break;case 13:tr(l,o),nr(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Op=jn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Dp(o,d)));break;case 22:y=o.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,Y=Es,ne=Xt;if(Es=Y||y,Xt=ne||U,tr(l,o),Xt=ne,Es=Y,nr(o),d&8192)e:for(l=o.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(c===null||U||Es||Xt||tl(o)),c=null,l=o;;){if(l.tag===5||l.tag===26){if(c===null){U=c=l;try{if(b=U.stateNode,y)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=U.stateNode;var se=U.memoizedProps.style,Q=se!=null&&se.hasOwnProperty("display")?se.display:null;R.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ye){st(U,U.return,ye)}}}else if(l.tag===6){if(c===null){U=l;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(ye){st(U,U.return,ye)}}}else if(l.tag===18){if(c===null){U=l;try{var J=U.stateNode;y?wx(J,!0):wx(U.stateNode,!1)}catch(ye){st(U,U.return,ye)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=o.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Dp(o,c))));break;case 19:tr(l,o),nr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Dp(o,d)));break;case 30:break;case 21:break;default:tr(l,o),nr(o)}}function nr(o){var l=o.flags;if(l&2){try{for(var c,d=o.return;d!==null;){if(xA(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,b=wv(o);Mp(o,b,y);break;case 5:var A=c.stateNode;c.flags&32&&(Zn(A,""),c.flags&=-33);var R=wv(o);Mp(o,R,A);break;case 3:case 4:var U=c.stateNode.containerInfo,Y=wv(o);Av(o,Y,U);break;default:throw Error(r(161))}}catch(ne){st(o,o.return,ne)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function PA(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;PA(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function _s(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)kA(o,l.alternate,l),l=l.sibling}function tl(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:go(4,l,l.return),tl(l);break;case 1:ji(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&wA(l,l.return,c),tl(l);break;case 27:kh(l.stateNode);case 26:case 5:ji(l,l.return),tl(l);break;case 22:l.memoizedState===null&&tl(l);break;case 30:tl(l);break;default:tl(l)}o=o.sibling}}function Ss(o,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=o,b=l,A=b.flags;switch(b.tag){case 0:case 11:case 15:Ss(y,b,c),bh(4,b);break;case 1:if(Ss(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){st(d,d.return,Y)}if(d=b,y=d.updateQueue,y!==null){var R=d.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)f1(U[y],R)}catch(Y){st(d,d.return,Y)}}c&&A&64&&SA(b),Eh(b,b.return);break;case 27:CA(b);case 26:case 5:Ss(y,b,c),c&&d===null&&A&4&&AA(b),Eh(b,b.return);break;case 12:Ss(y,b,c);break;case 31:Ss(y,b,c),c&&A&4&&DA(y,b);break;case 13:Ss(y,b,c),c&&A&4&&NA(y,b);break;case 22:b.memoizedState===null&&Ss(y,b,c),Eh(b,b.return);break;case 30:break;default:Ss(y,b,c)}l=l.sibling}}function Cv(o,l){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&oh(c))}function Rv(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&oh(o))}function ai(o,l,c,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)LA(o,l,c,d),l=l.sibling}function LA(o,l,c,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:ai(o,l,c,d),y&2048&&bh(9,l);break;case 1:ai(o,l,c,d);break;case 3:ai(o,l,c,d),y&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&oh(o)));break;case 12:if(y&2048){ai(o,l,c,d),o=l.stateNode;try{var b=l.memoizedProps,A=b.id,R=b.onPostCommit;typeof R=="function"&&R(A,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(U){st(l,l.return,U)}}else ai(o,l,c,d);break;case 31:ai(o,l,c,d);break;case 13:ai(o,l,c,d);break;case 23:break;case 22:b=l.stateNode,A=l.alternate,l.memoizedState!==null?b._visibility&2?ai(o,l,c,d):Th(o,l):b._visibility&2?ai(o,l,c,d):(b._visibility|=2,_u(o,l,c,d,(l.subtreeFlags&10256)!==0||!1)),y&2048&&Cv(A,l);break;case 24:ai(o,l,c,d),y&2048&&Rv(l.alternate,l);break;default:ai(o,l,c,d)}}function _u(o,l,c,d,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var b=o,A=l,R=c,U=d,Y=A.flags;switch(A.tag){case 0:case 11:case 15:_u(b,A,R,U,y),bh(8,A);break;case 23:break;case 22:var ne=A.stateNode;A.memoizedState!==null?ne._visibility&2?_u(b,A,R,U,y):Th(b,A):(ne._visibility|=2,_u(b,A,R,U,y)),y&&Y&2048&&Cv(A.alternate,A);break;case 24:_u(b,A,R,U,y),y&&Y&2048&&Rv(A.alternate,A);break;default:_u(b,A,R,U,y)}l=l.sibling}}function Th(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=o,d=l,y=d.flags;switch(d.tag){case 22:Th(c,d),y&2048&&Cv(d.alternate,d);break;case 24:Th(c,d),y&2048&&Rv(d.alternate,d);break;default:Th(c,d)}l=l.sibling}}var _h=8192;function Su(o,l,c){if(o.subtreeFlags&_h)for(o=o.child;o!==null;)VA(o,l,c),o=o.sibling}function VA(o,l,c){switch(o.tag){case 26:Su(o,l,c),o.flags&_h&&o.memoizedState!==null&&vU(c,oi,o.memoizedState,o.memoizedProps);break;case 5:Su(o,l,c);break;case 3:case 4:var d=oi;oi=Gp(o.stateNode.containerInfo),Su(o,l,c),oi=d;break;case 22:o.memoizedState===null&&(d=o.alternate,d!==null&&d.memoizedState!==null?(d=_h,_h=16777216,Su(o,l,c),_h=d):Su(o,l,c));break;default:Su(o,l,c)}}function UA(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Sh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];dn=d,zA(d,o)}UA(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)BA(o),o=o.sibling}function BA(o){switch(o.tag){case 0:case 11:case 15:Sh(o),o.flags&2048&&go(9,o,o.return);break;case 3:Sh(o);break;case 12:Sh(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Np(o)):Sh(o);break;default:Sh(o)}}function Np(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];dn=d,zA(d,o)}UA(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:go(8,l,l.return),Np(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,Np(l));break;default:Np(l)}o=o.sibling}}function zA(o,l){for(;dn!==null;){var c=dn;switch(c.tag){case 0:case 11:case 15:go(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:oh(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,dn=d;else e:for(c=o;dn!==null;){d=dn;var y=d.sibling,b=d.return;if(IA(d),d===c){dn=null;break e}if(y!==null){y.return=b,dn=y;break e}dn=b}}}var N4={getCacheForType:function(o){var l=_n(Wt),c=l.data.get(o);return c===void 0&&(c=o(),l.data.set(o,c)),c},cacheSignal:function(){return _n(Wt).controller.signal}},O4=typeof WeakMap=="function"?WeakMap:Map,nt=0,dt=null,Fe=null,qe=0,it=0,mr=null,yo=!1,wu=!1,kv=!1,ws=0,It=0,vo=0,nl=0,Iv=0,gr=0,Au=0,wh=null,rr=null,Mv=!1,Op=0,jA=0,Pp=1/0,Lp=null,bo=null,an=0,Eo=null,xu=null,As=0,Dv=0,Nv=null,FA=null,Ah=0,Ov=null;function yr(){return(nt&2)!==0&&qe!==0?qe&-qe:ee.T!==null?zv():Vd()}function HA(){if(gr===0)if((qe&536870912)===0||Ye){var o=ka;ka<<=1,(ka&3932160)===0&&(ka=262144),gr=o}else gr=536870912;return o=dr.current,o!==null&&(o.flags|=32),gr}function ir(o,l,c){(o===dt&&(it===2||it===9)||o.cancelPendingCommit!==null)&&(Cu(o,0),To(o,qe,gr,!1)),Ia(o,c),((nt&2)===0||o!==dt)&&(o===dt&&((nt&2)===0&&(nl|=c),It===4&&To(o,qe,gr,!1)),Fi(o))}function qA(o,l,c){if((nt&6)!==0)throw Error(r(327));var d=!c&&(l&127)===0&&(l&o.expiredLanes)===0||Xr(o,l),y=d?V4(o,l):Lv(o,l,!0),b=d;do{if(y===0){wu&&!d&&To(o,l,0,!1);break}else{if(c=o.current.alternate,b&&!P4(c)){y=Lv(o,l,!1),b=!1;continue}if(y===2){if(b=l,o.errorRecoveryDisabledLanes&b)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var R=o;y=wh;var U=R.current.memoizedState.isDehydrated;if(U&&(Cu(R,A).flags|=256),A=Lv(R,A,!1),A!==2){if(kv&&!U){R.errorRecoveryDisabledLanes|=b,nl|=b,y=4;break e}b=rr,rr=y,b!==null&&(rr===null?rr=b:rr.push.apply(rr,b))}y=A}if(b=!1,y!==2)continue}}if(y===1){Cu(o,0),To(o,l,0,!0);break}e:{switch(d=o,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:To(d,l,gr,!yo);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=Op+300-jn(),10<y)){if(To(d,l,gr,!yo),wi(d,0,!0)!==0)break e;As=l,d.timeoutHandle=Tx($A.bind(null,d,c,rr,Lp,Mv,l,gr,nl,Au,yo,b,"Throttled",-0,0),y);break e}$A(d,c,rr,Lp,Mv,l,gr,nl,Au,yo,b,null,-0,0)}}break}while(!0);Fi(o)}function $A(o,l,c,d,y,b,A,R,U,Y,ne,se,Q,J){if(o.timeoutHandle=-1,se=l.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},VA(l,b,se);var ye=(b&62914560)===b?Op-jn():(b&4194048)===b?jA-jn():0;if(ye=bU(se,ye),ye!==null){As=b,o.cancelPendingCommit=ye(ZA.bind(null,o,l,b,c,d,y,A,R,U,ne,se,null,Q,J)),To(o,b,A,!Y);return}}ZA(o,l,b,c,d,y,A,R,U)}function P4(o){for(var l=o;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!hr(b(),y))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function To(o,l,c,d){l&=~Iv,l&=~nl,o.suspendedLanes|=l,o.pingedLanes&=~l,d&&(o.warmLanes|=l),d=o.expirationTimes;for(var y=l;0<y;){var b=31-Ut(y),A=1<<b;d[b]=-1,y&=~A}c!==0&&Ma(o,c,l)}function Vp(){return(nt&6)===0?(xh(0),!1):!0}function Pv(){if(Fe!==null){if(it===0)var o=Fe.return;else o=Fe,ps=Ka=null,X0(o),yu=null,lh=0,o=Fe;for(;o!==null;)_A(o.alternate,o),o=o.return;Fe=null}}function Cu(o,l){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,tU(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),As=0,Pv(),dt=o,Fe=c=fs(o.current,null),qe=l,it=0,mr=null,yo=!1,wu=Xr(o,l),kv=!1,Au=gr=Iv=nl=vo=It=0,rr=wh=null,Mv=!1,(l&8)!==0&&(l|=l&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=l;0<d;){var y=31-Ut(d),b=1<<y;l|=o[y],d&=~b}return ws=l,ip(),c}function GA(o,l){Le=null,ee.H=gh,l===gu||l===fp?(l=l1(),it=3):l===B0?(l=l1(),it=4):it=l===dv?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,mr=l,Fe===null&&(It=1,xp(o,Nr(l,o.current)))}function KA(){var o=dr.current;return o===null?!0:(qe&4194048)===qe?Vr===null:(qe&62914560)===qe||(qe&536870912)!==0?o===Vr:!1}function WA(){var o=ee.H;return ee.H=gh,o===null?gh:o}function YA(){var o=ee.A;return ee.A=N4,o}function Up(){It=4,yo||(qe&4194048)!==qe&&dr.current!==null||(wu=!0),(vo&134217727)===0&&(nl&134217727)===0||dt===null||To(dt,qe,gr,!1)}function Lv(o,l,c){var d=nt;nt|=2;var y=WA(),b=YA();(dt!==o||qe!==l)&&(Lp=null,Cu(o,l)),l=!1;var A=It;e:do try{if(it!==0&&Fe!==null){var R=Fe,U=mr;switch(it){case 8:Pv(),A=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(l=!0);var Y=it;if(it=0,mr=null,Ru(o,R,U,Y),c&&wu){A=0;break e}break;default:Y=it,it=0,mr=null,Ru(o,R,U,Y)}}L4(),A=It;break}catch(ne){GA(o,ne)}while(!0);return l&&o.shellSuspendCounter++,ps=Ka=null,nt=d,ee.H=y,ee.A=b,Fe===null&&(dt=null,qe=0,ip()),A}function L4(){for(;Fe!==null;)QA(Fe)}function V4(o,l){var c=nt;nt|=2;var d=WA(),y=YA();dt!==o||qe!==l?(Lp=null,Pp=jn()+500,Cu(o,l)):wu=Xr(o,l);e:do try{if(it!==0&&Fe!==null){l=Fe;var b=mr;t:switch(it){case 1:it=0,mr=null,Ru(o,l,b,1);break;case 2:case 9:if(o1(b)){it=0,mr=null,XA(l);break}l=function(){it!==2&&it!==9||dt!==o||(it=7),Fi(o)},b.then(l,l);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:o1(b)?(it=0,mr=null,XA(l)):(it=0,mr=null,Ru(o,l,b,7));break;case 5:var A=null;switch(Fe.tag){case 26:A=Fe.memoizedState;case 5:case 27:var R=Fe;if(A?Lx(A):R.stateNode.complete){it=0,mr=null;var U=R.sibling;if(U!==null)Fe=U;else{var Y=R.return;Y!==null?(Fe=Y,Bp(Y)):Fe=null}break t}}it=0,mr=null,Ru(o,l,b,5);break;case 6:it=0,mr=null,Ru(o,l,b,6);break;case 8:Pv(),It=6;break e;default:throw Error(r(462))}}U4();break}catch(ne){GA(o,ne)}while(!0);return ps=Ka=null,ee.H=d,ee.A=y,nt=c,Fe!==null?0:(dt=null,qe=0,ip(),It)}function U4(){for(;Fe!==null&&!f0();)QA(Fe)}function QA(o){var l=EA(o.alternate,o,ws);o.memoizedProps=o.pendingProps,l===null?Bp(o):Fe=l}function XA(o){var l=o,c=l.alternate;switch(l.tag){case 15:case 0:l=pA(c,l,l.pendingProps,l.type,void 0,qe);break;case 11:l=pA(c,l,l.pendingProps,l.type.render,l.ref,qe);break;case 5:X0(l);default:_A(c,l),l=Fe=Yw(l,ws),l=EA(c,l,ws)}o.memoizedProps=o.pendingProps,l===null?Bp(o):Fe=l}function Ru(o,l,c,d){ps=Ka=null,X0(l),yu=null,lh=0;var y=l.return;try{if(x4(o,y,l,c,qe)){It=1,xp(o,Nr(c,o.current)),Fe=null;return}}catch(b){if(y!==null)throw Fe=y,b;It=1,xp(o,Nr(c,o.current)),Fe=null;return}l.flags&32768?(Ye||d===1?o=!0:wu||(qe&536870912)!==0?o=!1:(yo=o=!0,(d===2||d===9||d===3||d===6)&&(d=dr.current,d!==null&&d.tag===13&&(d.flags|=16384))),JA(l,o)):Bp(l)}function Bp(o){var l=o;do{if((l.flags&32768)!==0){JA(l,yo);return}o=l.return;var c=k4(l.alternate,l,ws);if(c!==null){Fe=c;return}if(l=l.sibling,l!==null){Fe=l;return}Fe=l=o}while(l!==null);It===0&&(It=5)}function JA(o,l){do{var c=I4(o.alternate,o);if(c!==null){c.flags&=32767,Fe=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(o=o.sibling,o!==null)){Fe=o;return}Fe=o=c}while(o!==null);It=6,Fe=null}function ZA(o,l,c,d,y,b,A,R,U){o.cancelPendingCommit=null;do zp();while(an!==0);if((nt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(b=l.lanes|l.childLanes,b|=w0,m0(o,c,b,A,R,U),o===dt&&(Fe=dt=null,qe=0),xu=l,Eo=o,As=c,Dv=b,Nv=y,FA=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,F4(Qs,function(){return ix(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null,y=ae.p,ae.p=2,A=nt,nt|=4;try{M4(o,l,c)}finally{nt=A,ae.p=y,ee.T=d}}an=1,ex(),tx(),nx()}}function ex(){if(an===1){an=0;var o=Eo,l=xu,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null;var d=ae.p;ae.p=2;var y=nt;nt|=4;try{OA(l,o);var b=Wv,A=zw(o.containerInfo),R=b.focusedElem,U=b.selectionRange;if(A!==R&&R&&R.ownerDocument&&Bw(R.ownerDocument.documentElement,R)){if(U!==null&&b0(R)){var Y=U.start,ne=U.end;if(ne===void 0&&(ne=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(ne,R.value.length);else{var se=R.ownerDocument||document,Q=se&&se.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),ye=R.textContent.length,xe=Math.min(U.start,ye),ct=U.end===void 0?xe:Math.min(U.end,ye);!J.extend&&xe>ct&&(A=ct,ct=xe,xe=A);var G=Uw(R,xe),j=Uw(R,ct);if(G&&j&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==j.node||J.focusOffset!==j.offset)){var W=se.createRange();W.setStart(G.node,G.offset),J.removeAllRanges(),xe>ct?(J.addRange(W),J.extend(j.node,j.offset)):(W.setEnd(j.node,j.offset),J.addRange(W))}}}}for(se=[],J=R;J=J.parentNode;)J.nodeType===1&&se.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<se.length;R++){var ie=se[R];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Jp=!!Kv,Wv=Kv=null}finally{nt=y,ae.p=d,ee.T=c}}o.current=l,an=2}}function tx(){if(an===2){an=0;var o=Eo,l=xu,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=ee.T,ee.T=null;var d=ae.p;ae.p=2;var y=nt;nt|=4;try{kA(o,l.alternate,l)}finally{nt=y,ae.p=d,ee.T=c}}an=3}}function nx(){if(an===4||an===3){an=0,Id();var o=Eo,l=xu,c=As,d=FA;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?an=5:(an=0,xu=Eo=null,rx(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(bo=null),ls(c),l=l.stateNode,bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Qr,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=ee.T,y=ae.p,ae.p=2,ee.T=null;try{for(var b=o.onRecoverableError,A=0;A<d.length;A++){var R=d[A];b(R.value,{componentStack:R.stack})}}finally{ee.T=l,ae.p=y}}(As&3)!==0&&zp(),Fi(o),y=o.pendingLanes,(c&261930)!==0&&(y&42)!==0?o===Ov?Ah++:(Ah=0,Ov=o):Ah=0,xh(0)}}function rx(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,oh(l)))}function zp(){return ex(),tx(),nx(),ix()}function ix(){if(an!==5)return!1;var o=Eo,l=Dv;Dv=0;var c=ls(As),d=ee.T,y=ae.p;try{ae.p=32>c?32:c,ee.T=null,c=Nv,Nv=null;var b=Eo,A=As;if(an=0,xu=Eo=null,As=0,(nt&6)!==0)throw Error(r(331));var R=nt;if(nt|=4,BA(b.current),LA(b,b.current,A,c),nt=R,xh(0,!1),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Qr,b)}catch{}return!0}finally{ae.p=y,ee.T=d,rx(o,l)}}function sx(o,l,c){l=Nr(c,l),l=fv(o.stateNode,l,2),o=fo(o,l,2),o!==null&&(Ia(o,2),Fi(o))}function st(o,l,c){if(o.tag===3)sx(o,o,c);else for(;l!==null;){if(l.tag===3){sx(l,o,c);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(bo===null||!bo.has(d))){o=Nr(c,o),c=oA(2),d=fo(l,c,2),d!==null&&(aA(c,d,l,o),Ia(d,2),Fi(d));break}}l=l.return}}function Vv(o,l,c){var d=o.pingCache;if(d===null){d=o.pingCache=new O4;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(c)||(kv=!0,y.add(c),o=B4.bind(null,o,l,c),l.then(o,o))}function B4(o,l,c){var d=o.pingCache;d!==null&&d.delete(l),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,dt===o&&(qe&c)===c&&(It===4||It===3&&(qe&62914560)===qe&&300>jn()-Op?(nt&2)===0&&Cu(o,0):Iv|=c,Au===qe&&(Au=0)),Fi(o)}function ox(o,l){l===0&&(l=Ld()),o=qa(o,l),o!==null&&(Ia(o,l),Fi(o))}function z4(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),ox(o,c)}function j4(o,l){var c=0;switch(o.tag){case 31:case 13:var d=o.stateNode,y=o.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),ox(o,c)}function F4(o,l){return on(o,l)}var jp=null,ku=null,Uv=!1,Fp=!1,Bv=!1,_o=0;function Fi(o){o!==ku&&o.next===null&&(ku===null?jp=ku=o:ku=ku.next=o),Fp=!0,Uv||(Uv=!0,q4())}function xh(o,l){if(!Bv&&Fp){Bv=!0;do for(var c=!1,d=jp;d!==null;){if(o!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var A=d.suspendedLanes,R=d.pingedLanes;b=(1<<31-Ut(42|o)+1)-1,b&=y&~(A&~R),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,cx(d,b))}else b=qe,b=wi(d,d===dt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Xr(d,b)||(c=!0,cx(d,b));d=d.next}while(c);Bv=!1}}function H4(){ax()}function ax(){Fp=Uv=!1;var o=0;_o!==0&&eU()&&(o=_o);for(var l=jn(),c=null,d=jp;d!==null;){var y=d.next,b=lx(d,l);b===0?(d.next=null,c===null?jp=y:c.next=y,y===null&&(ku=c)):(c=d,(o!==0||(b&3)!==0)&&(Fp=!0)),d=y}an!==0&&an!==5||xh(o),_o!==0&&(_o=0)}function lx(o,l){for(var c=o.suspendedLanes,d=o.pingedLanes,y=o.expirationTimes,b=o.pendingLanes&-62914561;0<b;){var A=31-Ut(b),R=1<<A,U=y[A];U===-1?((R&c)===0||(R&d)!==0)&&(y[A]=p0(R,l)):U<=l&&(o.expiredLanes|=R),b&=~R}if(l=dt,c=qe,c=wi(o,o===l?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,c===0||o===l&&(it===2||it===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&Ys(d),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||Xr(o,c)){if(l=c&-c,l===o.callbackPriority)return l;switch(d!==null&&Ys(d),ls(c)){case 2:case 8:c=Lc;break;case 32:c=Qs;break;case 268435456:c=Md;break;default:c=Qs}return d=ux.bind(null,o),c=on(c,d),o.callbackPriority=l,o.callbackNode=c,l}return d!==null&&d!==null&&Ys(d),o.callbackPriority=2,o.callbackNode=null,2}function ux(o,l){if(an!==0&&an!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(zp()&&o.callbackNode!==c)return null;var d=qe;return d=wi(o,o===dt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(qA(o,d,l),lx(o,jn()),o.callbackNode!=null&&o.callbackNode===c?ux.bind(null,o):null)}function cx(o,l){if(zp())return null;qA(o,l,!0)}function q4(){nU(function(){(nt&6)!==0?on(Pc,H4):ax()})}function zv(){if(_o===0){var o=pu;o===0&&(o=_i,_i<<=1,(_i&261888)===0&&(_i=256)),_o=o}return _o}function hx(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Zl(""+o)}function fx(o,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,o.id&&c.setAttribute("form",o.id),l.parentNode.insertBefore(c,l),o=new FormData(o),c.parentNode.removeChild(c),o}function $4(o,l,c,d,y){if(l==="submit"&&c&&c.stateNode===y){var b=hx((y[hn]||null).action),A=d.submitter;A&&(l=(l=A[hn]||null)?hx(l.formAction):A.getAttribute("formAction"),l!==null&&(b=l,A=null));var R=new Pi("action","action",null,d,y);o.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(_o!==0){var U=A?fx(y,A):new FormData(y);ov(c,{pending:!0,data:U,method:y.method,action:b},null,U)}}else typeof b=="function"&&(R.preventDefault(),U=A?fx(y,A):new FormData(y),ov(c,{pending:!0,data:U,method:y.method,action:b},b,U))},currentTarget:y}]})}}for(var jv=0;jv<S0.length;jv++){var Fv=S0[jv],G4=Fv.toLowerCase(),K4=Fv[0].toUpperCase()+Fv.slice(1);si(G4,"on"+K4)}si(Hw,"onAnimationEnd"),si(qw,"onAnimationIteration"),si($w,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(u4,"onTransitionRun"),si(c4,"onTransitionStart"),si(h4,"onTransitionCancel"),si(Gw,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ch));function dx(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var d=o[c],y=d.event;d=d.listeners;e:{var b=void 0;if(l)for(var A=d.length-1;0<=A;A--){var R=d[A],U=R.instance,Y=R.currentTarget;if(R=R.listener,U!==b&&y.isPropagationStopped())break e;b=R,y.currentTarget=Y;try{b(y)}catch(ne){rp(ne)}y.currentTarget=null,b=U}else for(A=0;A<d.length;A++){if(R=d[A],U=R.instance,Y=R.currentTarget,R=R.listener,U!==b&&y.isPropagationStopped())break e;b=R,y.currentTarget=Y;try{b(y)}catch(ne){rp(ne)}y.currentTarget=null,b=U}}}}function He(o,l){var c=l[Wl];c===void 0&&(c=l[Wl]=new Set);var d=o+"__bubble";c.has(d)||(px(l,o,2,!1),c.add(d))}function Hv(o,l,c){var d=0;l&&(d|=4),px(c,o,d,l)}var Hp="_reactListening"+Math.random().toString(36).slice(2);function qv(o){if(!o[Hp]){o[Hp]=!0,Bc.forEach(function(c){c!=="selectionchange"&&(W4.has(c)||Hv(c,!1,o),Hv(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Hp]||(l[Hp]=!0,Hv("selectionchange",!1,l))}}function px(o,l,c,d){switch(Hx(l)){case 2:var y=_U;break;case 8:y=SU;break;default:y=sb}c=y.bind(null,l,c,o),y=void 0,!La||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?o.addEventListener(l,c,{capture:!0,passive:y}):o.addEventListener(l,c,!0):y!==void 0?o.addEventListener(l,c,{passive:y}):o.addEventListener(l,c,!1)}function $v(o,l,c,d,y){var b=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var R=d.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=d.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Ri(R),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){d=b=A;continue e}R=R.parentNode}}d=d.return}no(function(){var Y=b,ne=kr(c),se=[];e:{var Q=Kw.get(o);if(Q!==void 0){var J=Pi,ye=o;switch(o){case"keypress":if(Ua(c)===0)break e;case"keydown":case"keyup":J=ep;break;case"focusin":ye="focus",J=za;break;case"focusout":ye="blur",J=za;break;case"beforeblur":case"afterblur":J=za;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=$d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=_;break;case Hw:case qw:case $w:J=Kd;break;case Gw:J=M;break;case"scroll":case"scrollend":J=Xc;break;case"wheel":J=X;break;case"copy":case"cut":case"paste":J=Wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=hs;break;case"toggle":case"beforetoggle":J=Pe}var xe=(l&4)!==0,ct=!xe&&(o==="scroll"||o==="scrollend"),G=xe?Q!==null?Q+"Capture":null:Q;xe=[];for(var j=Y,W;j!==null;){var ie=j;if(W=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||W===null||G===null||(ie=ti(j,G),ie!=null&&xe.push(Rh(j,ie,W))),ct)break;j=j.return}0<xe.length&&(Q=new J(Q,ye,null,c,ne),se.push({event:Q,listeners:xe}))}}if((l&7)===0){e:{if(Q=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",Q&&c!==Wc&&(ye=c.relatedTarget||c.fromElement)&&(Ri(ye)||ye[xi]))break e;if((J||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(ye=c.relatedTarget||c.toElement,J=Y,ye=ye?Ri(ye):null,ye!==null&&(ct=s(ye),xe=ye.tag,ye!==ct||xe!==5&&xe!==27&&xe!==6)&&(ye=null)):(J=null,ye=Y),J!==ye)){if(xe=Jc,ie="onMouseLeave",G="onMouseEnter",j="mouse",(o==="pointerout"||o==="pointerover")&&(xe=hs,ie="onPointerLeave",G="onPointerEnter",j="pointer"),ct=J==null?Q:ur(J),W=ye==null?Q:ur(ye),Q=new xe(ie,j+"leave",J,c,ne),Q.target=ct,Q.relatedTarget=W,ie=null,Ri(ne)===Y&&(xe=new xe(G,j+"enter",ye,c,ne),xe.target=W,xe.relatedTarget=ct,ie=xe),ct=ie,J&&ye)t:{for(xe=Y4,G=J,j=ye,W=0,ie=G;ie;ie=xe(ie))W++;ie=0;for(var _e=j;_e;_e=xe(_e))ie++;for(;0<W-ie;)G=xe(G),W--;for(;0<ie-W;)j=xe(j),ie--;for(;W--;){if(G===j||j!==null&&G===j.alternate){xe=G;break t}G=xe(G),j=xe(j)}xe=null}else xe=null;J!==null&&mx(se,Q,J,xe,!1),ye!==null&&ct!==null&&mx(se,ct,ye,xe,!0)}}e:{if(Q=Y?ur(Y):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var Ze=Dw;else if(Iw(Q))if(Nw)Ze=o4;else{Ze=i4;var be=r4}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&Jl(Y.elementType)&&(Ze=Dw):Ze=s4;if(Ze&&(Ze=Ze(o,Y))){Mw(se,Ze,c,ne);break e}be&&be(o,Q,Y),o==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&$c(Q,"number",Q.value)}switch(be=Y?ur(Y):window,o){case"focusin":(Iw(be)||be.contentEditable==="true")&&(ou=be,E0=Y,rh=null);break;case"focusout":rh=E0=ou=null;break;case"mousedown":T0=!0;break;case"contextmenu":case"mouseup":case"dragend":T0=!1,jw(se,c,ne);break;case"selectionchange":if(l4)break;case"keydown":case"keyup":jw(se,c,ne)}var Ue;if(tt)e:{switch(o){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else su?ja(o,c)&&($e="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&($e="onCompositionStart");$e&&(Ui&&c.locale!=="ko"&&(su||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&su&&(Ue=Qc()):(Oi=ne,Yc="value"in Oi?Oi.value:Oi.textContent,su=!0)),be=qp(Y,$e),0<be.length&&($e=new Vi($e,o,null,c,ne),se.push({event:$e,listeners:be}),Ue?$e.data=Ue:(Ue=iu(c),Ue!==null&&($e.data=Ue)))),(Ue=Mr?Z3(o,c):e4(o,c))&&($e=qp(Y,"onBeforeInput"),0<$e.length&&(be=new Vi("onBeforeInput","beforeinput",null,c,ne),se.push({event:be,listeners:$e}),be.data=Ue)),$4(se,o,Y,c,ne)}dx(se,l)})}function Rh(o,l,c){return{instance:o,listener:l,currentTarget:c}}function qp(o,l){for(var c=l+"Capture",d=[];o!==null;){var y=o,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=ti(o,c),y!=null&&d.unshift(Rh(o,y,b)),y=ti(o,l),y!=null&&d.push(Rh(o,y,b))),o.tag===3)return d;o=o.return}return[]}function Y4(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function mx(o,l,c,d,y){for(var b=l._reactName,A=[];c!==null&&c!==d;){var R=c,U=R.alternate,Y=R.stateNode;if(R=R.tag,U!==null&&U===d)break;R!==5&&R!==26&&R!==27||Y===null||(U=Y,y?(Y=ti(c,b),Y!=null&&A.unshift(Rh(c,Y,U))):y||(Y=ti(c,b),Y!=null&&A.push(Rh(c,Y,U)))),c=c.return}A.length!==0&&o.push({event:l,listeners:A})}var Q4=/\r\n?/g,X4=/\u0000|\uFFFD/g;function gx(o){return(typeof o=="string"?o:""+o).replace(Q4,`
`).replace(X4,"")}function yx(o,l){return l=gx(l),gx(o)===l}function ut(o,l,c,d,y,b){switch(c){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Zn(o,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Zn(o,""+d);break;case"className":cr(o,"class",d);break;case"tabIndex":cr(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(o,c,d);break;case"style":Kc(o,d,b);break;case"data":if(l!=="object"){cr(o,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||c!=="href")){o.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Zl(""+d),o.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(l!=="input"&&ut(o,l,"name",y.name,y,null),ut(o,l,"formEncType",y.formEncType,y,null),ut(o,l,"formMethod",y.formMethod,y,null),ut(o,l,"formTarget",y.formTarget,y,null)):(ut(o,l,"encType",y.encType,y,null),ut(o,l,"method",y.method,y,null),ut(o,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Zl(""+d),o.setAttribute(c,d);break;case"onClick":d!=null&&(o.onclick=ei);break;case"onScroll":d!=null&&He("scroll",o);break;case"onScrollEnd":d!=null&&He("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}c=Zl(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""+d):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":d===!0?o.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,d):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(c,d):o.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(c):o.setAttribute(c,d);break;case"popover":He("beforetoggle",o),He("toggle",o),Ql(o,"popover",d);break;case"xlinkActuate":Kt(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Kt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Kt(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Kt(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Kt(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Kt(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Kt(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Kt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Kt(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ql(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=qd.get(c)||c,Ql(o,c,d))}}function Gv(o,l,c,d,y,b){switch(c){case"style":Kc(o,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"children":typeof d=="string"?Zn(o,d):(typeof d=="number"||typeof d=="bigint")&&Zn(o,""+d);break;case"onScroll":d!=null&&He("scroll",o);break;case"onScrollEnd":d!=null&&He("scrollend",o);break;case"onClick":d!=null&&(o.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),l=c.slice(2,y?c.length-7:void 0),b=o[hn]||null,b=b!=null?b[c]:null,typeof b=="function"&&o.removeEventListener(l,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(l,d,y);break e}c in o?o[c]=d:d===!0?o.setAttribute(c,""):Ql(o,c,d)}}}function wn(o,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",o),He("load",o);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var A=c[b];if(A!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:ut(o,l,b,A,c,null)}}y&&ut(o,l,"srcSet",c.srcSet,c,null),d&&ut(o,l,"src",c.src,c,null);return;case"input":He("invalid",o);var R=b=A=y=null,U=null,Y=null;for(d in c)if(c.hasOwnProperty(d)){var ne=c[d];if(ne!=null)switch(d){case"name":y=ne;break;case"type":A=ne;break;case"checked":U=ne;break;case"defaultChecked":Y=ne;break;case"value":b=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,l));break;default:ut(o,l,d,ne,c,null)}}jd(o,b,R,U,Y,A,y,!1);return;case"select":He("invalid",o),d=A=b=null;for(y in c)if(c.hasOwnProperty(y)&&(R=c[y],R!=null))switch(y){case"value":b=R;break;case"defaultValue":A=R;break;case"multiple":d=R;default:ut(o,l,y,R,c,null)}l=b,c=A,o.multiple=!!d,l!=null?Js(o,!!d,l,!1):c!=null&&Js(o,!!d,c,!0);return;case"textarea":He("invalid",o),b=y=d=null;for(A in c)if(c.hasOwnProperty(A)&&(R=c[A],R!=null))switch(A){case"value":d=R;break;case"defaultValue":y=R;break;case"children":b=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:ut(o,l,A,R,c,null)}Zs(o,d,y,b);return;case"option":for(U in c)c.hasOwnProperty(U)&&(d=c[U],d!=null)&&(U==="selected"?o.selected=d&&typeof d!="function"&&typeof d!="symbol":ut(o,l,U,d,c,null));return;case"dialog":He("beforetoggle",o),He("toggle",o),He("cancel",o),He("close",o);break;case"iframe":case"object":He("load",o);break;case"video":case"audio":for(d=0;d<Ch.length;d++)He(Ch[d],o);break;case"image":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"embed":case"source":case"link":He("error",o),He("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(d=c[Y],d!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:ut(o,l,Y,d,c,null)}return;default:if(Jl(l)){for(ne in c)c.hasOwnProperty(ne)&&(d=c[ne],d!==void 0&&Gv(o,l,ne,d,c,void 0));return}}for(R in c)c.hasOwnProperty(R)&&(d=c[R],d!=null&&ut(o,l,R,d,c,null))}function J4(o,l,c,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,A=null,R=null,U=null,Y=null,ne=null;for(J in c){var se=c[J];if(c.hasOwnProperty(J)&&se!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":U=se;default:d.hasOwnProperty(J)||ut(o,l,J,null,d,se)}}for(var Q in d){var J=d[Q];if(se=c[Q],d.hasOwnProperty(Q)&&(J!=null||se!=null))switch(Q){case"type":b=J;break;case"name":y=J;break;case"checked":Y=J;break;case"defaultChecked":ne=J;break;case"value":A=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,l));break;default:J!==se&&ut(o,l,Q,J,d,se)}}Xl(o,A,R,U,Y,ne,b,y);return;case"select":J=A=R=Q=null;for(b in c)if(U=c[b],c.hasOwnProperty(b)&&U!=null)switch(b){case"value":break;case"multiple":J=U;default:d.hasOwnProperty(b)||ut(o,l,b,null,d,U)}for(y in d)if(b=d[y],U=c[y],d.hasOwnProperty(y)&&(b!=null||U!=null))switch(y){case"value":Q=b;break;case"defaultValue":R=b;break;case"multiple":A=b;default:b!==U&&ut(o,l,y,b,d,U)}l=R,c=A,d=J,Q!=null?Js(o,!!c,Q,!1):!!d!=!!c&&(l!=null?Js(o,!!c,l,!0):Js(o,!!c,c?[]:"",!1));return;case"textarea":J=Q=null;for(R in c)if(y=c[R],c.hasOwnProperty(R)&&y!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ut(o,l,R,null,d,y)}for(A in d)if(y=d[A],b=c[A],d.hasOwnProperty(A)&&(y!=null||b!=null))switch(A){case"value":Q=y;break;case"defaultValue":J=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&ut(o,l,A,y,d,b)}Fd(o,Q,J);return;case"option":for(var ye in c)Q=c[ye],c.hasOwnProperty(ye)&&Q!=null&&!d.hasOwnProperty(ye)&&(ye==="selected"?o.selected=!1:ut(o,l,ye,null,d,Q));for(U in d)Q=d[U],J=c[U],d.hasOwnProperty(U)&&Q!==J&&(Q!=null||J!=null)&&(U==="selected"?o.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":ut(o,l,U,Q,d,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in c)Q=c[xe],c.hasOwnProperty(xe)&&Q!=null&&!d.hasOwnProperty(xe)&&ut(o,l,xe,null,d,Q);for(Y in d)if(Q=d[Y],J=c[Y],d.hasOwnProperty(Y)&&Q!==J&&(Q!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,l));break;default:ut(o,l,Y,Q,d,J)}return;default:if(Jl(l)){for(var ct in c)Q=c[ct],c.hasOwnProperty(ct)&&Q!==void 0&&!d.hasOwnProperty(ct)&&Gv(o,l,ct,void 0,d,Q);for(ne in d)Q=d[ne],J=c[ne],!d.hasOwnProperty(ne)||Q===J||Q===void 0&&J===void 0||Gv(o,l,ne,Q,d,J);return}}for(var G in c)Q=c[G],c.hasOwnProperty(G)&&Q!=null&&!d.hasOwnProperty(G)&&ut(o,l,G,null,d,Q);for(se in d)Q=d[se],J=c[se],!d.hasOwnProperty(se)||Q===J||Q==null&&J==null||ut(o,l,se,Q,d,J)}function vx(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Z4(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],b=y.transferSize,A=y.initiatorType,R=y.duration;if(b&&R&&vx(A)){for(A=0,R=y.responseEnd,d+=1;d<c.length;d++){var U=c[d],Y=U.startTime;if(Y>R)break;var ne=U.transferSize,se=U.initiatorType;ne&&vx(se)&&(U=U.responseEnd,A+=ne*(U<R?1:(R-Y)/(U-Y)))}if(--d,l+=8*(b+A)/(y.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Kv=null,Wv=null;function $p(o){return o.nodeType===9?o:o.ownerDocument}function bx(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ex(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Yv(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Qv=null;function eU(){var o=window.event;return o&&o.type==="popstate"?o===Qv?!1:(Qv=o,!0):(Qv=null,!1)}var Tx=typeof setTimeout=="function"?setTimeout:void 0,tU=typeof clearTimeout=="function"?clearTimeout:void 0,_x=typeof Promise=="function"?Promise:void 0,nU=typeof queueMicrotask=="function"?queueMicrotask:typeof _x<"u"?function(o){return _x.resolve(null).then(o).catch(rU)}:Tx;function rU(o){setTimeout(function(){throw o})}function So(o){return o==="head"}function Sx(o,l){var c=l,d=0;do{var y=c.nextSibling;if(o.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){o.removeChild(y),Nu(l);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")kh(o.ownerDocument.documentElement);else if(c==="head"){c=o.ownerDocument.head,kh(c);for(var b=c.firstChild;b;){var A=b.nextSibling,R=b.nodeName;b[Ci]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=A}}else c==="body"&&kh(o.ownerDocument.body);c=y}while(c);Nu(l)}function wx(o,l){var c=o;o=0;do{var d=c.nextSibling;if(c.nodeType===1?l?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(l?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(o===0)break;o--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||o++;c=d}while(c)}function Xv(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Xv(c),Yl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function iU(o,l,c,d){for(;o.nodeType===1;){var y=c;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[Ci])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(b=o.getAttribute("rel"),b==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(b!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(b=o.getAttribute("src"),(b!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===b)return o}else return o;if(o=Ur(o.nextSibling),o===null)break}return null}function sU(o,l,c){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Ur(o.nextSibling),o===null))return null;return o}function Ax(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Ur(o.nextSibling),o===null))return null;return o}function Jv(o){return o.data==="$?"||o.data==="$~"}function Zv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function oU(o,l){var c=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||c.readyState!=="loading")l();else{var d=function(){l(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Ur(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var eb=null;function xx(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"||c==="/&"){if(l===0)return Ur(o.nextSibling);l--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||l++}o=o.nextSibling}return null}function Cx(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(l===0)return o;l--}else c!=="/$"&&c!=="/&"||l++}o=o.previousSibling}return null}function Rx(o,l,c){switch(l=$p(c),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function kh(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Yl(o)}var Br=new Map,kx=new Set;function Gp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var xs=ae.d;ae.d={f:aU,r:lU,D:uU,C:cU,L:hU,m:fU,X:pU,S:dU,M:mU};function aU(){var o=xs.f(),l=Vp();return o||l}function lU(o){var l=Rr(o);l!==null&&l.tag===5&&l.type==="form"?G1(l):xs.r(o)}var Iu=typeof document>"u"?null:document;function Ix(o,l,c){var d=Iu;if(d&&typeof l=="string"&&l){var y=Jn(l);y='link[rel="'+o+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),kx.has(y)||(kx.add(y),o={rel:o,crossOrigin:c,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),wn(l,"link",o),Gt(l),d.head.appendChild(l)))}}function uU(o){xs.D(o),Ix("dns-prefetch",o,null)}function cU(o,l){xs.C(o,l),Ix("preconnect",o,l)}function hU(o,l,c){xs.L(o,l,c);var d=Iu;if(d&&o&&l){var y='link[rel="preload"][as="'+Jn(l)+'"]';l==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Jn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Jn(c.imageSizes)+'"]')):y+='[href="'+Jn(o)+'"]';var b=y;switch(l){case"style":b=Mu(o);break;case"script":b=Du(o)}Br.has(b)||(o=m({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:o,as:l},c),Br.set(b,o),d.querySelector(y)!==null||l==="style"&&d.querySelector(Ih(b))||l==="script"&&d.querySelector(Mh(b))||(l=d.createElement("link"),wn(l,"link",o),Gt(l),d.head.appendChild(l)))}}function fU(o,l){xs.m(o,l);var c=Iu;if(c&&o){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Jn(d)+'"][href="'+Jn(o)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Du(o)}if(!Br.has(b)&&(o=m({rel:"modulepreload",href:o},l),Br.set(b,o),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Mh(b)))return}d=c.createElement("link"),wn(d,"link",o),Gt(d),c.head.appendChild(d)}}}function dU(o,l,c){xs.S(o,l,c);var d=Iu;if(d&&o){var y=ki(d).hoistableStyles,b=Mu(o);l=l||"default";var A=y.get(b);if(!A){var R={loading:0,preload:null};if(A=d.querySelector(Ih(b)))R.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":l},c),(c=Br.get(b))&&tb(o,c);var U=A=d.createElement("link");Gt(U),wn(U,"link",o),U._p=new Promise(function(Y,ne){U.onload=Y,U.onerror=ne}),U.addEventListener("load",function(){R.loading|=1}),U.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Kp(A,l,d)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(b,A)}}}function pU(o,l){xs.X(o,l);var c=Iu;if(c&&o){var d=ki(c).hoistableScripts,y=Du(o),b=d.get(y);b||(b=c.querySelector(Mh(y)),b||(o=m({src:o,async:!0},l),(l=Br.get(y))&&nb(o,l),b=c.createElement("script"),Gt(b),wn(b,"link",o),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function mU(o,l){xs.M(o,l);var c=Iu;if(c&&o){var d=ki(c).hoistableScripts,y=Du(o),b=d.get(y);b||(b=c.querySelector(Mh(y)),b||(o=m({src:o,async:!0,type:"module"},l),(l=Br.get(y))&&nb(o,l),b=c.createElement("script"),Gt(b),wn(b,"link",o),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function Mx(o,l,c,d){var y=(y=Ve.current)?Gp(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=Mu(c.href),c=ki(y).hoistableStyles,d=c.get(l),d||(d={type:"style",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=Mu(c.href);var b=ki(y).hoistableStyles,A=b.get(o);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(o,A),(b=y.querySelector(Ih(o)))&&!b._p&&(A.instance=b,A.state.loading=5),Br.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Br.set(o,c),b||gU(y,o,c,A.state))),l&&d===null)throw Error(r(528,""));return A}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Du(c),c=ki(y).hoistableScripts,d=c.get(l),d||(d={type:"script",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Mu(o){return'href="'+Jn(o)+'"'}function Ih(o){return'link[rel="stylesheet"]['+o+"]"}function Dx(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function gU(o,l,c,d){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=o.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),wn(l,"link",c),Gt(l),o.head.appendChild(l))}function Du(o){return'[src="'+Jn(o)+'"]'}function Mh(o){return"script[async]"+o}function Nx(o,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var d=o.querySelector('style[data-href~="'+Jn(c.href)+'"]');if(d)return l.instance=d,Gt(d),d;var y=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Gt(d),wn(d,"style",y),Kp(d,c.precedence,o),l.instance=d;case"stylesheet":y=Mu(c.href);var b=o.querySelector(Ih(y));if(b)return l.state.loading|=4,l.instance=b,Gt(b),b;d=Dx(c),(y=Br.get(y))&&tb(d,y),b=(o.ownerDocument||o).createElement("link"),Gt(b);var A=b;return A._p=new Promise(function(R,U){A.onload=R,A.onerror=U}),wn(b,"link",d),l.state.loading|=4,Kp(b,c.precedence,o),l.instance=b;case"script":return b=Du(c.src),(y=o.querySelector(Mh(b)))?(l.instance=y,Gt(y),y):(d=c,(y=Br.get(b))&&(d=m({},c),nb(d,y)),o=o.ownerDocument||o,y=o.createElement("script"),Gt(y),wn(y,"link",d),o.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,Kp(d,c.precedence,o));return l.instance}function Kp(o,l,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,A=0;A<d.length;A++){var R=d[A];if(R.dataset.precedence===l)b=R;else if(b!==y)break}b?b.parentNode.insertBefore(o,b.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(o,l.firstChild))}function tb(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function nb(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Wp=null;function Ox(o,l,c){if(Wp===null){var d=new Map,y=Wp=new Map;y.set(c,d)}else y=Wp,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(o))return d;for(d.set(o,null),c=c.getElementsByTagName(o),y=0;y<c.length;y++){var b=c[y];if(!(b[Ci]||b[$t]||o==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(l)||"";A=o+A;var R=d.get(A);R?R.push(b):d.set(A,[b])}}return d}function Px(o,l,c){o=o.ownerDocument||o,o.head.insertBefore(c,l==="title"?o.querySelector("head > title"):null)}function yU(o,l,c){if(c===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(o=l.disabled,typeof l.precedence=="string"&&o==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Lx(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function vU(o,l,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Mu(d.href),b=l.querySelector(Ih(y));if(b){l=b._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=Yp.bind(o),l.then(o,o)),c.state.loading|=4,c.instance=b,Gt(b);return}b=l.ownerDocument||l,d=Dx(d),(y=Br.get(y))&&tb(d,y),b=b.createElement("link"),Gt(b);var A=b;A._p=new Promise(function(R,U){A.onload=R,A.onerror=U}),wn(b,"link",d),c.instance=b}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(o.count++,c=Yp.bind(o),l.addEventListener("load",c),l.addEventListener("error",c))}}var rb=0;function bU(o,l){return o.stylesheets&&o.count===0&&Xp(o,o.stylesheets),0<o.count||0<o.imgCount?function(c){var d=setTimeout(function(){if(o.stylesheets&&Xp(o,o.stylesheets),o.unsuspend){var b=o.unsuspend;o.unsuspend=null,b()}},6e4+l);0<o.imgBytes&&rb===0&&(rb=62500*Z4());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Xp(o,o.stylesheets),o.unsuspend)){var b=o.unsuspend;o.unsuspend=null,b()}},(o.imgBytes>rb?50:800)+l);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function Yp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Qp=null;function Xp(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Qp=new Map,l.forEach(EU,o),Qp=null,Yp.call(o))}function EU(o,l){if(!(l.state.loading&4)){var c=Qp.get(o);if(c)var d=c.get(null);else{c=new Map,Qp.set(o,c);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var A=y[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}y=l.instance,A=y.getAttribute("data-precedence"),b=c.get(A)||d,b===d&&c.set(null,y),c.set(A,y),this.count++,d=Yp.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),l.state.loading|=4}}var Dh={$$typeof:V,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function TU(o,l,c,d,y,b,A,R,U){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Vx(o,l,c,d,y,b,A,R,U,Y,ne,se){return o=new TU(o,l,c,A,U,Y,ne,se,R),l=1,b===!0&&(l|=24),b=fr(3,null,null,l),o.current=b,b.stateNode=o,l=L0(),l.refCount++,o.pooledCache=l,l.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:l},z0(b),o}function Ux(o){return o?(o=uu,o):uu}function Bx(o,l,c,d,y,b){y=Ux(y),d.context===null?d.context=y:d.pendingContext=y,d=ho(l),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=fo(o,d,l),c!==null&&(ir(c,o,l),ch(c,o,l))}function zx(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function ib(o,l){zx(o,l),(o=o.alternate)&&zx(o,l)}function jx(o){if(o.tag===13||o.tag===31){var l=qa(o,67108864);l!==null&&ir(l,o,67108864),ib(o,67108864)}}function Fx(o){if(o.tag===13||o.tag===31){var l=yr();l=Da(l);var c=qa(o,l);c!==null&&ir(c,o,l),ib(o,l)}}var Jp=!0;function _U(o,l,c,d){var y=ee.T;ee.T=null;var b=ae.p;try{ae.p=2,sb(o,l,c,d)}finally{ae.p=b,ee.T=y}}function SU(o,l,c,d){var y=ee.T;ee.T=null;var b=ae.p;try{ae.p=8,sb(o,l,c,d)}finally{ae.p=b,ee.T=y}}function sb(o,l,c,d){if(Jp){var y=ob(d);if(y===null)$v(o,l,d,Zp,c),qx(o,d);else if(AU(y,o,l,c,d))d.stopPropagation();else if(qx(o,d),l&4&&-1<wU.indexOf(o)){for(;y!==null;){var b=Rr(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=Si(b.pendingLanes);if(A!==0){var R=b;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var U=1<<31-Ut(A);R.entanglements[1]|=U,A&=~U}Fi(b),(nt&6)===0&&(Pp=jn()+500,xh(0))}}break;case 31:case 13:R=qa(b,2),R!==null&&ir(R,b,2),Vp(),ib(b,2)}if(b=ob(d),b===null&&$v(o,l,d,Zp,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else $v(o,l,d,null,c)}}function ob(o){return o=kr(o),ab(o)}var Zp=null;function ab(o){if(Zp=null,o=Ri(o),o!==null){var l=s(o);if(l===null)o=null;else{var c=l.tag;if(c===13){if(o=a(l),o!==null)return o;o=null}else if(c===31){if(o=u(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Zp=o,null}function Hx(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ra()){case Pc:return 2;case Lc:return 8;case Qs:case d0:return 32;case Md:return 268435456;default:return 32}default:return 32}}var lb=!1,wo=null,Ao=null,xo=null,Nh=new Map,Oh=new Map,Co=[],wU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qx(o,l){switch(o){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":Nh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oh.delete(l.pointerId)}}function Ph(o,l,c,d,y,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},l!==null&&(l=Rr(l),l!==null&&jx(l)),o):(o.eventSystemFlags|=d,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function AU(o,l,c,d,y){switch(l){case"focusin":return wo=Ph(wo,o,l,c,d,y),!0;case"dragenter":return Ao=Ph(Ao,o,l,c,d,y),!0;case"mouseover":return xo=Ph(xo,o,l,c,d,y),!0;case"pointerover":var b=y.pointerId;return Nh.set(b,Ph(Nh.get(b)||null,o,l,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,Oh.set(b,Ph(Oh.get(b)||null,o,l,c,d,y)),!0}return!1}function $x(o){var l=Ri(o.target);if(l!==null){var c=s(l);if(c!==null){if(l=c.tag,l===13){if(l=a(c),l!==null){o.blockedOn=l,Jr(o.priority,function(){Fx(c)});return}}else if(l===31){if(l=u(c),l!==null){o.blockedOn=l,Jr(o.priority,function(){Fx(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function em(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=ob(o.nativeEvent);if(c===null){c=o.nativeEvent;var d=new c.constructor(c.type,c);Wc=d,c.target.dispatchEvent(d),Wc=null}else return l=Rr(c),l!==null&&jx(l),o.blockedOn=c,!1;l.shift()}return!0}function Gx(o,l,c){em(o)&&c.delete(l)}function xU(){lb=!1,wo!==null&&em(wo)&&(wo=null),Ao!==null&&em(Ao)&&(Ao=null),xo!==null&&em(xo)&&(xo=null),Nh.forEach(Gx),Oh.forEach(Gx)}function tm(o,l){o.blockedOn===l&&(o.blockedOn=null,lb||(lb=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,xU)))}var nm=null;function Kx(o){nm!==o&&(nm=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nm===o&&(nm=null);for(var l=0;l<o.length;l+=3){var c=o[l],d=o[l+1],y=o[l+2];if(typeof d!="function"){if(ab(d||c)===null)continue;break}var b=Rr(c);b!==null&&(o.splice(l,3),l-=3,ov(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function Nu(o){function l(U){return tm(U,o)}wo!==null&&tm(wo,o),Ao!==null&&tm(Ao,o),xo!==null&&tm(xo,o),Nh.forEach(l),Oh.forEach(l);for(var c=0;c<Co.length;c++){var d=Co[c];d.blockedOn===o&&(d.blockedOn=null)}for(;0<Co.length&&(c=Co[0],c.blockedOn===null);)$x(c),c.blockedOn===null&&Co.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],A=y[hn]||null;if(typeof b=="function")A||Kx(c);else if(A){var R=null;if(b&&b.hasAttribute("formAction")){if(y=b,A=b[hn]||null)R=A.formAction;else if(ab(y)!==null)continue}else R=A.action;typeof R=="function"?c[d+1]=R:(c.splice(d,3),d-=3),Kx(c)}}}function Wx(){function o(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function ub(o){this._internalRoot=o}rm.prototype.render=ub.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var c=l.current,d=yr();Bx(c,d,o,l,null,null)},rm.prototype.unmount=ub.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Bx(o.current,2,null,o,null,null),Vp(),l[xi]=null}};function rm(o){this._internalRoot=o}rm.prototype.unstable_scheduleHydration=function(o){if(o){var l=Vd();o={blockedOn:null,target:o,priority:l};for(var c=0;c<Co.length&&l!==0&&l<Co[c].priority;c++);Co.splice(c,0,o),c===0&&$x(o)}};var Yx=e.version;if(Yx!=="19.2.4")throw Error(r(527,Yx,"19.2.4"));ae.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(l),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var CU={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{Qr=im.inject(CU),bn=im}catch{}}return Vh.createRoot=function(o,l){if(!i(o))throw Error(r(299));var c=!1,d="",y=nA,b=rA,A=iA;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=Vx(o,1,!1,null,null,c,d,null,y,b,A,Wx),o[xi]=l.current,qv(o),new ub(l)},Vh.hydrateRoot=function(o,l,c){if(!i(o))throw Error(r(299));var d=!1,y="",b=nA,A=rA,R=iA,U=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.formState!==void 0&&(U=c.formState)),l=Vx(o,1,!0,l,c??null,d,y,U,b,A,R,Wx),l.context=Ux(null),c=l.current,d=yr(),d=Da(d),y=ho(d),y.callback=null,fo(c,y,d),c=d,l.current.lanes=c,Ia(l,c),Fi(l),o[xi]=l.current,qv(o),new rm(l)},Vh.version="19.2.4",Vh}var sC;function LU(){if(sC)return fb.exports;sC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fb.exports=PU(),fb.exports}var VU=LU();var oC="popstate";function UU(n={}){function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return xE("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Mf(i)}return zU(e,t,null,n)}function St(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BU(){return Math.random().toString(36).substring(2,10)}function aC(n,e){return{usr:n.state,key:n.key,idx:e}}function xE(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vc(e):e,state:t,key:e&&e.key||r||BU()}}function Mf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function zU(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u="POP",h=null,f=p();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function p(){return(a.state||{idx:null}).idx}function m(){u="POP";let w=p(),C=w==null?null:w-f;f=w,h&&h({action:u,location:S.location,delta:C})}function v(w,C){u="PUSH";let N=xE(S.location,w,C);f=p()+1;let V=aC(N,f),$=S.createHref(N);try{a.pushState(V,"",$)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign($)}s&&h&&h({action:u,location:S.location,delta:1})}function E(w,C){u="REPLACE";let N=xE(S.location,w,C);f=p();let V=aC(N,f),$=S.createHref(N);a.replaceState(V,"",$),s&&h&&h({action:u,location:S.location,delta:0})}function T(w){return jU(w)}let S={get action(){return u},get location(){return n(i,a)},listen(w){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(oC,m),h=w,()=>{i.removeEventListener(oC,m),h=null}},createHref(w){return e(i,w)},createURL:T,encodeLocation(w){let C=T(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:E,go(w){return a.go(w)}};return S}function jU(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),St(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Mf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function JM(n,e,t="/"){return FU(n,e,t,!1)}function FU(n,e,t,r){let i=typeof e=="string"?vc(e):e,s=js(i.pathname||"/",t);if(s==null)return null;let a=ZM(n);HU(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=eB(s);u=JU(a[h],f,r)}return u}function ZM(n,e=[],t=[],r="",i=!1){let s=(a,u,h=i,f)=>{let p={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&h)return;St(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=Ls([r,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(St(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),ZM(a.children,e,v,m,h)),!(a.path==null&&!a.index)&&e.push({path:m,score:QU(m,a.index),routesMeta:v})};return n.forEach((a,u)=>{if(a.path===""||!a.path?.includes("?"))s(a,u);else for(let h of eD(a.path))s(a,u,!0,h)}),e}function eD(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=eD(r.join("/")),u=[];return u.push(...a.map(h=>h===""?s:[s,h].join("/"))),i&&u.push(...a),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function HU(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:XU(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var qU=/^:[\w-]+$/,$U=3,GU=2,KU=1,WU=10,YU=-2,lC=n=>n==="*";function QU(n,e){let t=n.split("/"),r=t.length;return t.some(lC)&&(r+=YU),e&&(r+=GU),t.filter(i=>!lC(i)).reduce((i,s)=>i+(qU.test(s)?$U:s===""?KU:WU),r)}function XU(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function JU(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=eg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!m&&f&&t&&!r[r.length-1].route.index&&(m=eg({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Ls([s,m.pathname]),pathnameBase:iB(Ls([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=Ls([s,m.pathnameBase]))}return a}function eg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=ZU(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:m},v)=>{if(p==="*"){let T=u[v]||"";a=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const E=u[v];return m&&!E?f[p]=void 0:f[p]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function ZU(n,e=!1,t=!0){bi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function eB(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function js(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var tB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function nB(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?vc(n):n,s;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?s=uC(t.substring(1),"/"):s=uC(t,e)):s=e,{pathname:s,search:sB(r),hash:oB(i)}}function uC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function gb(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rB(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function e_(n){let e=rB(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function t_(n,e,t,r=!1){let i;typeof n=="string"?i=vc(n):(i={...n},St(!i.pathname||!i.pathname.includes("?"),gb("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),gb("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),gb("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let m=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}u=m>=0?e[m]:"/"}let h=nB(i,u),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var Ls=n=>n.join("/").replace(/\/\/+/g,"/"),iB=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),sB=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,oB=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,aB=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function lB(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function uB(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nD(n,e){let t=n;if(typeof t!="string"||!tB.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,i=!1;if(tD)try{let s=new URL(window.location.href),a=t.startsWith("//")?new URL(s.protocol+t):new URL(t),u=js(a.pathname,e);a.origin===s.origin&&u!=null?t=u+a.search+a.hash:i=!0}catch{bi(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rD=["POST","PUT","PATCH","DELETE"];new Set(rD);var cB=["GET",...rD];new Set(cB);var bc=O.createContext(null);bc.displayName="DataRouter";var Ey=O.createContext(null);Ey.displayName="DataRouterState";var hB=O.createContext(!1),iD=O.createContext({isTransitioning:!1});iD.displayName="ViewTransition";var fB=O.createContext(new Map);fB.displayName="Fetchers";var dB=O.createContext(null);dB.displayName="Await";var Ar=O.createContext(null);Ar.displayName="Navigation";var od=O.createContext(null);od.displayName="Location";var Yr=O.createContext({outlet:null,matches:[],isDataRoute:!1});Yr.displayName="Route";var n_=O.createContext(null);n_.displayName="RouteError";var sD="REACT_ROUTER_ERROR",pB="REDIRECT",mB="ROUTE_ERROR_RESPONSE";function gB(n){if(n.startsWith(`${sD}:${pB}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function yB(n){if(n.startsWith(`${sD}:${mB}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new aB(e.status,e.statusText,e.data)}catch{}}function vB(n,{relative:e}={}){St(Ec(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=O.useContext(Ar),{hash:i,pathname:s,search:a}=ld(n,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:Ls([t,s])),r.createHref({pathname:u,search:a,hash:i})}function Ec(){return O.useContext(od)!=null}function pa(){return St(Ec(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(od).location}var oD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aD(n){O.useContext(Ar).static||O.useLayoutEffect(n)}function ad(){let{isDataRoute:n}=O.useContext(Yr);return n?OB():bB()}function bB(){St(Ec(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(bc),{basename:e,navigator:t}=O.useContext(Ar),{matches:r}=O.useContext(Yr),{pathname:i}=pa(),s=JSON.stringify(e_(r)),a=O.useRef(!1);return aD(()=>{a.current=!0}),O.useCallback((h,f={})=>{if(bi(a.current,oD),!a.current)return;if(typeof h=="number"){t.go(h);return}let p=t_(h,JSON.parse(s),i,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ls([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,s,i,n])}var EB=O.createContext(null);function TB(n){let e=O.useContext(Yr).outlet;return O.useMemo(()=>e&&O.createElement(EB.Provider,{value:n},e),[e,n])}function _B(){let{matches:n}=O.useContext(Yr),e=n[n.length-1];return e?e.params:{}}function ld(n,{relative:e}={}){let{matches:t}=O.useContext(Yr),{pathname:r}=pa(),i=JSON.stringify(e_(t));return O.useMemo(()=>t_(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function SB(n,e){return lD(n,e)}function lD(n,e,t,r,i){St(Ec(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=O.useContext(Ar),{matches:a}=O.useContext(Yr),u=a[a.length-1],h=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let N=m&&m.path||"";cD(f,!m||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=pa(),E;if(e){let N=typeof e=="string"?vc(e):e;St(p==="/"||N.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${N.pathname}" was given in the \`location\` prop.`),E=N}else E=v;let T=E.pathname||"/",S=T;if(p!=="/"){let N=p.replace(/^\//,"").split("/");S="/"+T.replace(/^\//,"").split("/").slice(N.length).join("/")}let w=JM(n,{pathname:S});bi(m||w!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),bi(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=RB(w&&w.map(N=>Object.assign({},N,{params:Object.assign({},h,N.params),pathname:Ls([p,s.encodeLocation?s.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:Ls([p,s.encodeLocation?s.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),a,t,r,i);return e&&C?O.createElement(od.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},C):C}function wB(){let n=NB(),e=lB(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:s},"ErrorBoundary")," or"," ",O.createElement("code",{style:s},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:i},t):null,a)}var AB=O.createElement(wB,null),uD=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=yB(n.digest);t&&(n=t)}let e=n!==void 0?O.createElement(Yr.Provider,{value:this.props.routeContext},O.createElement(n_.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?O.createElement(xB,{error:n},e):e}};uD.contextType=hB;var yb=new WeakMap;function xB({children:n,error:e}){let{basename:t}=O.useContext(Ar);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=gB(e.digest);if(r){let i=yb.get(e);if(i)throw i;let s=nD(r.location,t);if(tD&&!yb.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw yb.set(e,a),a}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return n}function CB({routeContext:n,match:e,children:t}){let r=O.useContext(bc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(Yr.Provider,{value:n},t)}function RB(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t?.errors;if(a!=null){let p=s.findIndex(m=>m.route.id&&a?.[m.route.id]!==void 0);St(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,h=-1;if(t)for(let p=0;p<s.length;p++){let m=s[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:v,errors:E}=t,T=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||T){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}let f=t&&r?(p,m)=>{r(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:uB(t.matches),errorInfo:m})}:void 0;return s.reduceRight((p,m,v)=>{let E,T=!1,S=null,w=null;t&&(E=a&&m.route.id?a[m.route.id]:void 0,S=m.route.errorElement||AB,u&&(h<0&&v===0?(cD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,w=null):h===v&&(T=!0,w=m.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,v+1)),N=()=>{let V;return E?V=S:T?V=w:m.route.Component?V=O.createElement(m.route.Component,null):m.route.element?V=m.route.element:V=p,O.createElement(CB,{match:m,routeContext:{outlet:p,matches:C,isDataRoute:t!=null},children:V})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?O.createElement(uD,{location:t.location,revalidation:t.revalidation,component:S,error:E,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:f}):N()},null)}function r_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kB(n){let e=O.useContext(bc);return St(e,r_(n)),e}function IB(n){let e=O.useContext(Ey);return St(e,r_(n)),e}function MB(n){let e=O.useContext(Yr);return St(e,r_(n)),e}function i_(n){let e=MB(n),t=e.matches[e.matches.length-1];return St(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function DB(){return i_("useRouteId")}function NB(){let n=O.useContext(n_),e=IB("useRouteError"),t=i_("useRouteError");return n!==void 0?n:e.errors?.[t]}function OB(){let{router:n}=kB("useNavigate"),e=i_("useNavigate"),t=O.useRef(!1);return aD(()=>{t.current=!0}),O.useCallback(async(i,s={})=>{bi(t.current,oD),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var cC={};function cD(n,e,t){!e&&!cC[n]&&(cC[n]=!0,bi(!1,t))}O.memo(PB);function PB({routes:n,future:e,state:t,onError:r}){return lD(n,void 0,t,r,e)}function hD({to:n,replace:e,state:t,relative:r}){St(Ec(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=O.useContext(Ar);bi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=O.useContext(Yr),{pathname:a}=pa(),u=ad(),h=t_(n,e_(s),a,r==="path"),f=JSON.stringify(h);return O.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:r})},[u,f,r,e,t]),null}function fD(n){return TB(n.context)}function Mo(n){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LB({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){St(!Ec(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:u,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[u,i,s,a]);typeof t=="string"&&(t=vc(t));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:E="default"}=t,T=O.useMemo(()=>{let S=js(f,u);return S==null?null:{location:{pathname:S,search:p,hash:m,state:v,key:E},navigationType:r}},[u,f,p,m,v,E,r]);return bi(T!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:O.createElement(Ar.Provider,{value:h},O.createElement(od.Provider,{children:e,value:T}))}function VB({children:n,location:e}){return SB(CE(n),e)}function CE(n,e=[]){let t=[];return O.Children.forEach(n,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){t.push.apply(t,CE(r.props.children,s));return}St(r.type===Mo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=CE(r.props.children,s)),t.push(a)}),t}var Im="get",Mm="application/x-www-form-urlencoded";function Ty(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function UB(n){return Ty(n)&&n.tagName.toLowerCase()==="button"}function BB(n){return Ty(n)&&n.tagName.toLowerCase()==="form"}function zB(n){return Ty(n)&&n.tagName.toLowerCase()==="input"}function jB(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function FB(n,e){return n.button===0&&(!e||e==="_self")&&!jB(n)}var sm=null;function HB(){if(sm===null)try{new FormData(document.createElement("form"),0),sm=!1}catch{sm=!0}return sm}var qB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vb(n){return n!=null&&!qB.has(n)?(bi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mm}"`),null):n}function $B(n,e){let t,r,i,s,a;if(BB(n)){let u=n.getAttribute("action");r=u?js(u,e):null,t=n.getAttribute("method")||Im,i=vb(n.getAttribute("enctype"))||Mm,s=new FormData(n)}else if(UB(n)||zB(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(r=h?js(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Im,i=vb(n.getAttribute("formenctype"))||vb(u.getAttribute("enctype"))||Mm,s=new FormData(u,n),!HB()){let{name:f,type:p,value:m}=n;if(p==="image"){let v=f?`${f}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else f&&s.append(f,m)}}else{if(Ty(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Im,r=null,i=Mm,a=n}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function s_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function GB(n,e,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&js(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function KB(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WB(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function YB(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await KB(s,t);return a.links?a.links():[]}return[]}));return ZB(r.flat(1).filter(WB).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function hC(n,e,t,r,i,s){let a=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return s==="assets"?e.filter((h,f)=>a(h,f)||u(h,f)):s==="data"?e.filter((h,f)=>{let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(a(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let m=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function QB(n,e,{includeHydrateFallback:t}={}){return XB(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function XB(n){return[...new Set(n)]}function JB(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function ZB(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(JB(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function dD(){let n=O.useContext(bc);return s_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function ez(){let n=O.useContext(Ey);return s_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var o_=O.createContext(void 0);o_.displayName="FrameworkContext";function pD(){let n=O.useContext(o_);return s_(n,"You must render this element inside a <HydratedRouter> element"),n}function tz(n,e){let t=O.useContext(o_),[r,i]=O.useState(!1),[s,a]=O.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:m}=e,v=O.useRef(null);O.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let S=C=>{C.forEach(N=>{a(N.isIntersecting)})},w=new IntersectionObserver(S,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[n]),O.useEffect(()=>{if(r){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},T=()=>{i(!1),a(!1)};return t?n!=="intent"?[s,v,{}]:[s,v,{onFocus:Uh(u,E),onBlur:Uh(h,T),onMouseEnter:Uh(f,E),onMouseLeave:Uh(p,T),onTouchStart:Uh(m,E)}]:[!1,v,{}]}function Uh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function nz({page:n,...e}){let{router:t}=dD(),r=O.useMemo(()=>JM(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?O.createElement(iz,{page:n,matches:r,...e}):null}function rz(n){let{manifest:e,routeModules:t}=pD(),[r,i]=O.useState([]);return O.useEffect(()=>{let s=!1;return YB(n,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[n,e,t]),r}function iz({page:n,matches:e,...t}){let r=pa(),{future:i,manifest:s,routeModules:a}=pD(),{basename:u}=dD(),{loaderData:h,matches:f}=ez(),p=O.useMemo(()=>hC(n,e,f,s,r,"data"),[n,e,f,s,r]),m=O.useMemo(()=>hC(n,e,f,s,r,"assets"),[n,e,f,s,r]),v=O.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,w=!1;if(e.forEach(N=>{let V=s.routes[N.route.id];!V||!V.hasLoader||(!p.some($=>$.route.id===N.route.id)&&N.route.id in h&&a[N.route.id]?.shouldRevalidate||V.hasClientLoader?w=!0:S.add(N.route.id))}),S.size===0)return[];let C=GB(n,u,i.unstable_trailingSlashAwareDataRequests,"data");return w&&S.size>0&&C.searchParams.set("_routes",e.filter(N=>S.has(N.route.id)).map(N=>N.route.id).join(",")),[C.pathname+C.search]},[u,i.unstable_trailingSlashAwareDataRequests,h,r,s,p,e,n,a]),E=O.useMemo(()=>QB(m,s),[m,s]),T=rz(m);return O.createElement(O.Fragment,null,v.map(S=>O.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>O.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),T.map(({key:S,link:w})=>O.createElement("link",{key:S,nonce:t.nonce,...w,crossOrigin:w.crossOrigin??t.crossOrigin})))}function sz(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var oz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oz&&(window.__reactRouterVersion="7.13.0")}catch{}function az({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=O.useRef();i.current==null&&(i.current=UU({window:r,v5Compat:!0}));let s=i.current,[a,u]=O.useState({action:s.action,location:s.location}),h=O.useCallback(f=>{t===!1?u(f):O.startTransition(()=>u(f))},[t]);return O.useLayoutEffect(()=>s.listen(h),[s,h]),O.createElement(LB,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:t})}var mD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a_=O.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:u,target:h,to:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...E},T){let{basename:S,unstable_useTransitions:w}=O.useContext(Ar),C=typeof f=="string"&&mD.test(f),N=nD(f,S);f=N.to;let V=vB(f,{relative:i}),[$,F,Z]=tz(r,E),I=cz(f,{replace:a,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:w});function k(B){e&&e(B),B.defaultPrevented||I(B)}let D=O.createElement("a",{...E,...Z,href:N.absoluteURL||V,onClick:N.isExternal||s?e:k,ref:sz(T,F),target:h,"data-discover":!C&&t==="render"?"true":void 0});return $&&!C?O.createElement(O.Fragment,null,D,O.createElement(nz,{page:V})):D});a_.displayName="Link";var gD=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:u,children:h,...f},p){let m=ld(a,{relative:f.relative}),v=pa(),E=O.useContext(Ey),{navigator:T,basename:S}=O.useContext(Ar),w=E!=null&&mz(m)&&u===!0,C=T.encodeLocation?T.encodeLocation(m).pathname:m.pathname,N=v.pathname,V=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(N=N.toLowerCase(),V=V?V.toLowerCase():null,C=C.toLowerCase()),V&&S&&(V=js(V,S)||V);const $=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let F=N===C||!i&&N.startsWith(C)&&N.charAt($)==="/",Z=V!=null&&(V===C||!i&&V.startsWith(C)&&V.charAt(C.length)==="/"),I={isActive:F,isPending:Z,isTransitioning:w},k=F?e:void 0,D;typeof r=="function"?D=r(I):D=[r,F?"active":null,Z?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(I):s;return O.createElement(a_,{...f,"aria-current":k,className:D,ref:p,style:B,to:a,viewTransition:u},typeof h=="function"?h(I):h)});gD.displayName="NavLink";var lz=O.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:a=Im,action:u,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...E},T)=>{let{unstable_useTransitions:S}=O.useContext(Ar),w=dz(),C=pz(u,{relative:f}),N=a.toLowerCase()==="get"?"get":"post",V=typeof u=="string"&&mD.test(u),$=F=>{if(h&&h(F),F.defaultPrevented)return;F.preventDefault();let Z=F.nativeEvent.submitter,I=Z?.getAttribute("formmethod")||a,k=()=>w(Z||F.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:i,state:s,relative:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v});S&&t!==!1?O.startTransition(()=>k()):k()};return O.createElement("form",{ref:T,method:N,action:C,onSubmit:r?h:$,...E,"data-discover":!V&&n==="render"?"true":void 0})});lz.displayName="Form";function uz(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yD(n){let e=O.useContext(bc);return St(e,uz(n)),e}function cz(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let f=ad(),p=pa(),m=ld(n,{relative:s});return O.useCallback(v=>{if(FB(v,e)){v.preventDefault();let E=t!==void 0?t:Mf(p)===Mf(m),T=()=>f(n,{replace:E,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:u});h?O.startTransition(()=>T()):T()}},[p,f,m,t,r,e,n,i,s,a,u,h])}var hz=0,fz=()=>`__${String(++hz)}__`;function dz(){let{router:n}=yD("useSubmit"),{basename:e}=O.useContext(Ar),t=DB(),r=n.fetch,i=n.navigate;return O.useCallback(async(s,a={})=>{let{action:u,method:h,encType:f,formData:p,body:m}=$B(s,e);if(a.navigate===!1){let v=a.fetcherKey||fz();await r(v,t,a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||h,formEncType:a.encType||f,flushSync:a.flushSync})}else await i(a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||h,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,t])}function pz(n,{relative:e}={}){let{basename:t}=O.useContext(Ar),r=O.useContext(Yr);St(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ld(n||".",{relative:e})},a=pa();if(n==null){s.search=a.search;let u=new URLSearchParams(s.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ls([t,s.pathname])),Mf(s)}function mz(n,{relative:e}={}){let t=O.useContext(iD);St(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yD("useViewTransitionState"),i=ld(n,{relative:e});if(!t.isTransitioning)return!1;let s=js(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=js(t.nextLocation.pathname,r)||t.nextLocation.pathname;return eg(i.pathname,a)!=null||eg(i.pathname,s)!=null}var gz=XM();const yz=QM(gz),vz=()=>{};var fC={};const vD=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bz=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},bD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,p=s>>2,m=(s&3)<<4|u>>4;let v=(u&15)<<2|f>>6,E=f&63;h||(E=64,a||(v=64)),r.push(t[p],t[m],t[v],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||f==null||m==null)throw new Ez;const v=s<<2|u>>4;if(r.push(v),f!==64){const E=u<<4&240|f>>2;if(r.push(E),m!==64){const T=f<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ez extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tz=function(n){const e=vD(n);return bD.encodeByteArray(e,!0)},tg=function(n){return Tz(n).replace(/\./g,"")},ED=function(n){try{return bD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _z(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Sz=()=>_z().__FIREBASE_DEFAULTS__,wz=()=>{if(typeof process>"u"||typeof fC>"u")return;const n=fC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Az=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ED(n[1]);return e&&JSON.parse(e)},_y=()=>{try{return vz()||Sz()||wz()||Az()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},TD=n=>_y()?.emulatorHosts?.[n],_D=n=>{const e=TD(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},SD=()=>_y()?.config,wD=n=>_y()?.[`_${n}`];class xz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ma(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l_(n){return(await fetch(n,{credentials:"include"})).ok}function AD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[tg(JSON.stringify(t)),tg(JSON.stringify(a)),""].join(".")}const lf={};function Cz(){const n={prod:[],emulator:[]};for(const e of Object.keys(lf))lf[e]?n.emulator.push(e):n.prod.push(e);return n}function Rz(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dC=!1;function u_(n,e){if(typeof window>"u"||typeof document>"u"||!ma(window.location.host)||lf[n]===e||lf[n]||dC)return;lf[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=Cz().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{dC=!0,a()},v}function p(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=Rz(r),E=t("text"),T=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),w=document.getElementById(S)||document.createElement("a"),C=t("preprendIcon"),N=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const V=v.element;u(V),p(w,S);const $=f();h(N,C),V.append(N,T,w,$),document.body.appendChild(V)}s?(T.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function Iz(){const n=_y()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Dz(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Nz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Oz(){const n=Un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Pz(){return!Iz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lz(){try{return typeof indexedDB=="object"}catch{return!1}}function Vz(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const Uz="FirebaseError";class as extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Uz,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ud.prototype.create)}}class ud{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Bz(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new as(i,u,r)}}function Bz(n,e){return n.replace(zz,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zz=/\{\$([^}]+)}/g;function jz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Al(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(pC(s)&&pC(a)){if(!Al(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function pC(n){return n!==null&&typeof n=="object"}function cd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Qh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Fz(n,e){const t=new Hz(n,e);return t.subscribe.bind(t)}class Hz{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=bb),i.error===void 0&&(i.error=bb),i.complete===void 0&&(i.complete=bb);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qz(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bb(){}function wt(n){return n&&n._delegate?n._delegate:n}class ra{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sl="[DEFAULT]";class $z{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new xz;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kz(e))try{this.getOrInitializeService({instanceIdentifier:sl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=sl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sl){return this.instances.has(e)}getOptions(e=sl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sl){return this.component?this.component.multipleInstances?e:sl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gz(n){return n===sl?void 0:n}function Kz(n){return n.instantiationMode==="EAGER"}class Wz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $z(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const Yz={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},Qz=Ge.INFO,Xz={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},Jz=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Xz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c_{constructor(e){this.name=e,this._logLevel=Qz,this._logHandler=Jz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const Zz=(n,e)=>e.some(t=>n instanceof t);let mC,gC;function e6(){return mC||(mC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t6(){return gC||(gC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xD=new WeakMap,RE=new WeakMap,CD=new WeakMap,Eb=new WeakMap,h_=new WeakMap;function n6(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Wo(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&xD.set(t,n)}).catch(()=>{}),h_.set(e,n),e}function r6(n){if(RE.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});RE.set(n,e)}let kE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return RE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function i6(n){kE=n(kE)}function s6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Tb(this),e,...t);return CD.set(r,e.sort?e.sort():[e]),Wo(r)}:t6().includes(n)?function(...e){return n.apply(Tb(this),e),Wo(xD.get(this))}:function(...e){return Wo(n.apply(Tb(this),e))}}function o6(n){return typeof n=="function"?s6(n):(n instanceof IDBTransaction&&r6(n),Zz(n,e6())?new Proxy(n,kE):n)}function Wo(n){if(n instanceof IDBRequest)return n6(n);if(Eb.has(n))return Eb.get(n);const e=o6(n);return e!==n&&(Eb.set(n,e),h_.set(e,n)),e}const Tb=n=>h_.get(n);function a6(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=Wo(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Wo(a.result),h.oldVersion,h.newVersion,Wo(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const l6=["get","getKey","getAll","getAllKeys","count"],u6=["put","add","delete","clear"],_b=new Map;function yC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_b.get(e))return _b.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=u6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||l6.includes(t)))return;const s=async function(a,...u){const h=this.transaction(a,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&h.done]))[0]};return _b.set(e,s),s}i6(n=>({...n,get:(e,t,r)=>yC(e,t)||n.get(e,t,r),has:(e,t)=>!!yC(e,t)||n.has(e,t)}));class c6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(h6(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function h6(n){return n.getComponent()?.type==="VERSION"}const IE="@firebase/app",vC="0.14.8";const Fs=new c_("@firebase/app"),f6="@firebase/app-compat",d6="@firebase/analytics-compat",p6="@firebase/analytics",m6="@firebase/app-check-compat",g6="@firebase/app-check",y6="@firebase/auth",v6="@firebase/auth-compat",b6="@firebase/database",E6="@firebase/data-connect",T6="@firebase/database-compat",_6="@firebase/functions",S6="@firebase/functions-compat",w6="@firebase/installations",A6="@firebase/installations-compat",x6="@firebase/messaging",C6="@firebase/messaging-compat",R6="@firebase/performance",k6="@firebase/performance-compat",I6="@firebase/remote-config",M6="@firebase/remote-config-compat",D6="@firebase/storage",N6="@firebase/storage-compat",O6="@firebase/firestore",P6="@firebase/ai",L6="@firebase/firestore-compat",V6="firebase",U6="12.9.0";const ME="[DEFAULT]",B6={[IE]:"fire-core",[f6]:"fire-core-compat",[p6]:"fire-analytics",[d6]:"fire-analytics-compat",[g6]:"fire-app-check",[m6]:"fire-app-check-compat",[y6]:"fire-auth",[v6]:"fire-auth-compat",[b6]:"fire-rtdb",[E6]:"fire-data-connect",[T6]:"fire-rtdb-compat",[_6]:"fire-fn",[S6]:"fire-fn-compat",[w6]:"fire-iid",[A6]:"fire-iid-compat",[x6]:"fire-fcm",[C6]:"fire-fcm-compat",[R6]:"fire-perf",[k6]:"fire-perf-compat",[I6]:"fire-rc",[M6]:"fire-rc-compat",[D6]:"fire-gcs",[N6]:"fire-gcs-compat",[O6]:"fire-fst",[L6]:"fire-fst-compat",[P6]:"fire-vertex","fire-js":"fire-js",[V6]:"fire-js-all"};const ng=new Map,z6=new Map,DE=new Map;function bC(n,e){try{n.container.addComponent(e)}catch(t){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xl(n){const e=n.name;if(DE.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;DE.set(e,n);for(const t of ng.values())bC(t,n);for(const t of z6.values())bC(t,n);return!0}function Sy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ar(n){return n==null?!1:n.settings!==void 0}const j6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yo=new ud("app","Firebase",j6);class F6{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yo.create("app-deleted",{appName:this._name})}}const Bl=U6;function RD(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ME,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Yo.create("bad-app-name",{appName:String(i)});if(t||(t=SD()),!t)throw Yo.create("no-options");const s=ng.get(i);if(s){if(Al(t,s.options)&&Al(r,s.config))return s;throw Yo.create("duplicate-app",{appName:i})}const a=new Wz(i);for(const h of DE.values())a.addComponent(h);const u=new F6(t,r,a);return ng.set(i,u),u}function f_(n=ME){const e=ng.get(n);if(!e&&n===ME&&SD())return RD();if(!e)throw Yo.create("no-app",{appName:n});return e}function Yi(n,e,t){let r=B6[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(a.join(" "));return}xl(new ra(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const H6="firebase-heartbeat-database",q6=1,Df="firebase-heartbeat-store";let Sb=null;function kD(){return Sb||(Sb=a6(H6,q6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Df)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yo.create("idb-open",{originalErrorMessage:n.message})})),Sb}async function $6(n){try{const t=(await kD()).transaction(Df),r=await t.objectStore(Df).get(ID(n));return await t.done,r}catch(e){if(e instanceof as)Fs.warn(e.message);else{const t=Yo.create("idb-get",{originalErrorMessage:e?.message});Fs.warn(t.message)}}}async function EC(n,e){try{const r=(await kD()).transaction(Df,"readwrite");await r.objectStore(Df).put(e,ID(n)),await r.done}catch(t){if(t instanceof as)Fs.warn(t.message);else{const r=Yo.create("idb-set",{originalErrorMessage:t?.message});Fs.warn(r.message)}}}function ID(n){return`${n.name}!${n.options.appId}`}const G6=1024,K6=30;class W6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Q6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=TC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>K6){const i=X6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=TC(),{heartbeatsToSend:t,unsentEntries:r}=Y6(this._heartbeatsCache.heartbeats),i=tg(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Fs.warn(e),""}}}function TC(){return new Date().toISOString().substring(0,10)}function Y6(n,e=G6){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),_C(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),_C(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Q6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lz()?Vz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return EC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return EC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _C(n){return tg(JSON.stringify({version:2,heartbeats:n})).length}function X6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function J6(n){xl(new ra("platform-logger",e=>new c6(e),"PRIVATE")),xl(new ra("heartbeat",e=>new W6(e),"PRIVATE")),Yi(IE,vC,n),Yi(IE,vC,"esm2020"),Yi("fire-js","")}J6("");function MD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z6=MD,DD=new ud("auth","Firebase",MD());const rg=new c_("@firebase/auth");function e5(n,...e){rg.logLevel<=Ge.WARN&&rg.warn(`Auth (${Bl}): ${n}`,...e)}function Dm(n,...e){rg.logLevel<=Ge.ERROR&&rg.error(`Auth (${Bl}): ${n}`,...e)}function Wr(n,...e){throw p_(n,...e)}function pi(n,...e){return p_(n,...e)}function d_(n,e,t){const r={...Z6(),[e]:t};return new ud("auth","Firebase",r).create(e,{appName:n.name})}function Vs(n){return d_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wr(n,"argument-error"),d_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function p_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return DD.create(n,...e)}function Re(n,e,...t){if(!n)throw p_(e,...t)}function Ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Dm(e),new Error(e)}function Hs(n,e){n||Ns(e)}function NE(){return typeof self<"u"&&self.location?.href||""}function n5(){return SC()==="http:"||SC()==="https:"}function SC(){return typeof self<"u"&&self.location?.protocol||null}function r5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n5()||Dz()||"connection"in navigator)?navigator.onLine:!0}function i5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class hd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hs(t>e,"Short delay should be less than long delay!"),this.isMobile=kz()||Nz()}get(){return r5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function m_(n,e){Hs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ND{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const s5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const o5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],a5=new hd(3e4,6e4);function ga(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ya(n,e,t,r,i={}){return OD(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=cd({key:n.config.apiKey,...a}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...s};return Mz()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&ma(n.emulatorConfig.host)&&(f.credentials="include"),ND.fetch()(await PD(n,n.config.apiHost,t,u),f)})}async function OD(n,e,t){n._canInitEmulator=!1;const r={...s5,...e};try{const i=new u5(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw om(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw om(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw om(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw om(n,"user-disabled",a);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw d_(n,p,f);Wr(n,p)}}catch(i){if(i instanceof as)throw i;Wr(n,"network-request-failed",{message:String(i)})}}async function fd(n,e,t,r,i={}){const s=await ya(n,e,t,r,i);return"mfaPendingCredential"in s&&Wr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function PD(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?m_(n.config,i):`${n.config.apiScheme}://${i}`;return o5.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function l5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pi(this.auth,"network-request-failed")),a5.get())})}}function om(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=pi(n,e,r);return i.customData._tokenResponse=t,i}function wC(n){return n!==void 0&&n.enterprise!==void 0}class c5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return l5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function h5(n,e){return ya(n,"GET","/v2/recaptchaConfig",ga(n,e))}async function f5(n,e){return ya(n,"POST","/v1/accounts:delete",e)}async function ig(n,e){return ya(n,"POST","/v1/accounts:lookup",e)}function uf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d5(n,e=!1){const t=wt(n),r=await t.getIdToken(e),i=g_(r);Re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:uf(wb(i.auth_time)),issuedAtTime:uf(wb(i.iat)),expirationTime:uf(wb(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function wb(n){return Number(n)*1e3}function g_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Dm("JWT malformed, contained fewer than 3 sections"),null;try{const i=ED(t);return i?JSON.parse(i):(Dm("Failed to decode base64 JWT payload"),null)}catch(i){return Dm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function AC(n){const e=g_(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Nf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof as&&p5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function p5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class m5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class OE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uf(this.lastLoginAt),this.creationTime=uf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sg(n){const e=n.auth,t=await n.getIdToken(),r=await Nf(n,ig(e,{idToken:t}));Re(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?LD(i.providerUserInfo):[],a=y5(n.providerData,s),u=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!a?.length,f=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new OE(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function g5(n){const e=wt(n);await sg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function LD(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function v5(n,e){const t=await OD(n,{},async()=>{const r=cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await PD(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&ma(n.emulatorConfig.host)&&(h.credentials="include"),ND.fetch()(a,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function b5(n,e){return ya(n,"POST","/v2/accounts:revokeToken",ga(n,e))}class Xu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=AC(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await v5(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Xu;return r&&(Re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Re(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xu,this.toJSON())}_performRefresh(){return Ns("not implemented")}}function ko(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hi{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new m5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new OE(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Nf(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return d5(this,e)}reload(){return g5(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await sg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await Nf(this,f5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:E,providerData:T,stsTokenManager:S}=t;Re(m&&S,e,"internal-error");const w=Xu.fromJSON(this.name,S);Re(typeof m=="string",e,"internal-error"),ko(r,e.name),ko(i,e.name),Re(typeof v=="boolean",e,"internal-error"),Re(typeof E=="boolean",e,"internal-error"),ko(s,e.name),ko(a,e.name),ko(u,e.name),ko(h,e.name),ko(f,e.name),ko(p,e.name);const C=new hi({uid:m,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:E,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:w,createdAt:f,lastLoginAt:p});return T&&Array.isArray(T)&&(C.providerData=T.map(N=>({...N}))),h&&(C._redirectEventId=h),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new Xu;i.updateFromServerResponse(t);const s=new hi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sg(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Re(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?LD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new Xu;u.updateFromIdToken(r);const h=new hi({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new OE(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(h,f),h}}const xC=new Map;function Os(n){Hs(n instanceof Function,"Expected a class definition");let e=xC.get(n);return e?(Hs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,xC.set(n,e),e)}class VD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VD.type="NONE";const CC=VD;function Nm(n,e,t){return`firebase:${n}:${e}:${t}`}class Ju{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Nm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ig(this.auth,{idToken:e}).catch(()=>{});return t?hi._fromGetAccountInfoResponse(this.auth,t,e):null}return hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ju(Os(CC),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||Os(CC);const a=Nm(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(a);if(p){let m;if(typeof p=="string"){const v=await ig(e,{idToken:p}).catch(()=>{});if(!v)break;m=await hi._fromGetAccountInfoResponse(e,v,p)}else m=hi._fromJSON(e,p);f!==s&&(u=m),s=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ju(s,e,r):(s=h[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new Ju(s,e,r))}}function RC(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HD(e))return"Blackberry";if(qD(e))return"Webos";if(BD(e))return"Safari";if((e.includes("chrome/")||zD(e))&&!e.includes("edge/"))return"Chrome";if(FD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function UD(n=Un()){return/firefox\//i.test(n)}function BD(n=Un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zD(n=Un()){return/crios\//i.test(n)}function jD(n=Un()){return/iemobile/i.test(n)}function FD(n=Un()){return/android/i.test(n)}function HD(n=Un()){return/blackberry/i.test(n)}function qD(n=Un()){return/webos/i.test(n)}function y_(n=Un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function E5(n=Un()){return y_(n)&&!!window.navigator?.standalone}function T5(){return Oz()&&document.documentMode===10}function $D(n=Un()){return y_(n)||FD(n)||qD(n)||HD(n)||/windows phone/i.test(n)||jD(n)}function GD(n,e=[]){let t;switch(n){case"Browser":t=RC(Un());break;case"Worker":t=`${RC(Un())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bl}/${r}`}class _5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const h=e(s);a(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function S5(n,e={}){return ya(n,"GET","/v2/passwordPolicy",ga(n,e))}const w5=6;class A5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??w5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class x5{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kC(this),this.idTokenSubscription=new kC(this),this.beforeStateQueue=new _5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Os(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ju.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ig(this,{idToken:e}),r=await hi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ar(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(Vs(this));const t=e?wt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await S5(this),t=new A5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ud("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await b5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Os(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Ju.create(this,[Os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(t);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&e5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function va(n){return wt(n)}class kC{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fz(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C5(n){wy=n}function KD(n){return wy.loadJS(n)}function R5(){return wy.recaptchaEnterpriseScript}function k5(){return wy.gapiScript}function I5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class M5{constructor(){this.enterprise=new D5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class D5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const N5="recaptcha-enterprise",WD="NO_RECAPTCHA";class O5{constructor(e){this.type=N5,this.auth=va(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{h5(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new c5(h);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(h=>{u(h)})})}function i(s,a,u){const h=window.grecaptcha;wC(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a(WD)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new M5().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&wC(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=R5();h.length!==0&&(h+=u),KD(h).then(()=>{i(u,s,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function IC(n,e,t,r=!1,i=!1){const s=new O5(n);let a;if(i)a=WD;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function PE(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await IC(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await IC(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function P5(n,e){const t=Sy(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Al(s,e??{}))return i;Wr(i,"already-initialized")}return t.initialize({options:e})}function L5(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Os);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function V5(n,e,t){const r=va(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=YD(e),{host:a,port:u}=U5(e),h=u===null?"":`:${u}`,f={url:`${s}//${a}${h}/`},p=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Al(f,r.config.emulator)&&Al(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,ma(a)?(l_(`${s}//${a}${h}`),u_("Auth",!0)):B5()}function YD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function U5(n){const e=YD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:MC(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:MC(a)}}}function MC(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function B5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class v_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,t){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}}async function z5(n,e){return ya(n,"POST","/v1/accounts:signUp",e)}async function j5(n,e){return fd(n,"POST","/v1/accounts:signInWithPassword",ga(n,e))}async function F5(n,e){return fd(n,"POST","/v1/accounts:signInWithEmailLink",ga(n,e))}async function H5(n,e){return fd(n,"POST","/v1/accounts:signInWithEmailLink",ga(n,e))}class Of extends v_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Of(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Of(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return PE(e,t,"signInWithPassword",j5);case"emailLink":return F5(e,{email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return PE(e,r,"signUpPassword",z5);case"emailLink":return H5(e,{idToken:t,email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zu(n,e){return fd(n,"POST","/v1/accounts:signInWithIdp",ga(n,e))}const q5="http://localhost";class Cl extends v_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Cl(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Zu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Zu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zu(e,t)}buildRequest(){const e={requestUri:q5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cd(t)}return e}}function $5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G5(n){const e=Yh(Qh(n)).link,t=e?Yh(Qh(e)).deep_link_id:null,r=Yh(Qh(n)).deep_link_id;return(r?Yh(Qh(r)).link:null)||r||t||e||n}class b_{constructor(e){const t=Yh(Qh(e)),r=t.apiKey??null,i=t.oobCode??null,s=$5(t.mode??null);Re(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=G5(e);try{return new b_(t)}catch{return null}}}class Tc{constructor(){this.providerId=Tc.PROVIDER_ID}static credential(e,t){return Of._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=b_.parseLink(t);return Re(r,"argument-error"),Of._fromEmailAndCode(e,r.code,r.tenantId)}}Tc.PROVIDER_ID="password";Tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class E_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class dd extends E_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vo extends dd{constructor(){super("facebook.com")}static credential(e){return Cl._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vo.credential(e.oauthAccessToken)}catch{return null}}}Vo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vo.PROVIDER_ID="facebook.com";class Ds extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cl._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ds.credential(t,r)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";class Uo extends dd{constructor(){super("github.com")}static credential(e){return Cl._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.GITHUB_SIGN_IN_METHOD="github.com";Uo.PROVIDER_ID="github.com";class Bo extends dd{constructor(){super("twitter.com")}static credential(e,t){return Cl._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Bo.credential(t,r)}catch{return null}}}Bo.TWITTER_SIGN_IN_METHOD="twitter.com";Bo.PROVIDER_ID="twitter.com";async function K5(n,e){return fd(n,"POST","/v1/accounts:signUp",ga(n,e))}class Rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await hi._fromIdTokenResponse(e,r,i),a=DC(r);return new Rl({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=DC(r);return new Rl({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function DC(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class og extends as{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,og.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new og(e,t,r,i)}}function QD(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?og._fromErrorAndOperation(n,s,e,r):s})}async function W5(n,e,t=!1){const r=await Nf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Rl._forOperation(n,"link",r)}async function Y5(n,e,t=!1){const{auth:r}=n;if(ar(r.app))return Promise.reject(Vs(r));const i="reauthenticate";try{const s=await Nf(n,QD(r,i,e,n),t);Re(s.idToken,r,"internal-error");const a=g_(s.idToken);Re(a,r,"internal-error");const{sub:u}=a;return Re(n.uid===u,r,"user-mismatch"),Rl._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Wr(r,"user-mismatch"),s}}async function XD(n,e,t=!1){if(ar(n.app))return Promise.reject(Vs(n));const r="signIn",i=await QD(n,r,e),s=await Rl._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Q5(n,e){return XD(va(n),e)}async function JD(n){const e=va(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function X5(n,e,t){if(ar(n.app))return Promise.reject(Vs(n));const r=va(n),a=await PE(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",K5).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&JD(n),h}),u=await Rl._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function J5(n,e,t){return ar(n.app)?Promise.reject(Vs(n)):Q5(wt(n),Tc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JD(n),r})}function Z5(n,e,t,r){return wt(n).onIdTokenChanged(e,t,r)}function ej(n,e,t){return wt(n).beforeAuthStateChanged(e,t)}function tj(n,e,t,r){return wt(n).onAuthStateChanged(e,t,r)}function nj(n){return wt(n).signOut()}const ag="__sak";class ZD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ag,"1"),this.storage.removeItem(ag),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const rj=1e3,ij=10;class eN extends ZD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$D(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);T5()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ij):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eN.type="LOCAL";const sj=eN;class tN extends ZD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tN.type="SESSION";const nN=tN;function oj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Ay{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Ay(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async f=>f(t.origin,s)),h=await oj(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ay.receivers=[];function T_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class aj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,h)=>{const f=T_("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(m){const v=m;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(v.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Qi(){return window}function lj(n){Qi().location.href=n}function rN(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function uj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cj(){return navigator?.serviceWorker?.controller||null}function hj(){return rN()?self:null}const iN="firebaseLocalStorageDb",fj=1,lg="firebaseLocalStorage",sN="fbase_key";class pd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xy(n,e){return n.transaction([lg],e?"readwrite":"readonly").objectStore(lg)}function dj(){const n=indexedDB.deleteDatabase(iN);return new pd(n).toPromise()}function LE(){const n=indexedDB.open(iN,fj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(lg,{keyPath:sN})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(lg)?e(r):(r.close(),await dj(),e(await LE()))})})}async function NC(n,e,t){const r=xy(n,!0).put({[sN]:e,value:t});return new pd(r).toPromise()}async function pj(n,e){const t=xy(n,!1).get(e),r=await new pd(t).toPromise();return r===void 0?null:r.value}function OC(n,e){const t=xy(n,!0).delete(e);return new pd(t).toPromise()}const mj=800,gj=3;class oN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await LE(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>gj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ay._getInstance(hj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uj(),!this.activeServiceWorker)return;this.sender=new aj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await LE();return await NC(e,ag,"1"),await OC(e,ag),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>NC(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>pj(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>OC(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=xy(i,!1).getAll();return new pd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oN.type="LOCAL";const yj=oN;new hd(3e4,6e4);function aN(n,e){return e?Os(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class __ extends v_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vj(n){return XD(n.auth,new __(n),n.bypassAuthState)}function bj(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),Y5(t,new __(n),n.bypassAuthState)}async function Ej(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),W5(t,new __(n),n.bypassAuthState)}class lN{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vj;case"linkViaPopup":case"linkViaRedirect":return Ej;case"reauthViaPopup":case"reauthViaRedirect":return bj;default:Wr(this.auth,"internal-error")}}resolve(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tj=new hd(2e3,1e4);async function _j(n,e,t){if(ar(n.app))return Promise.reject(pi(n,"operation-not-supported-in-this-environment"));const r=va(n);t5(n,e,E_);const i=aN(r,t);return new ul(r,"signInViaPopup",e,i).executeNotNull()}class ul extends lN{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Hs(this.filter.length===1,"Popup operations only handle one event");const e=T_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tj.get())};e()}}ul.currentPopupAction=null;const Sj="pendingRedirect",Om=new Map;class wj extends lN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Om.get(this.auth._key());if(!e){try{const r=await Aj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Om.set(this.auth._key(),e)}return this.bypassAuthState||Om.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Aj(n,e){const t=Rj(e),r=Cj(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function xj(n,e){Om.set(n._key(),e)}function Cj(n){return Os(n._redirectPersistence)}function Rj(n){return Nm(Sj,n.config.apiKey,n.name)}async function kj(n,e,t=!1){if(ar(n.app))return Promise.reject(Vs(n));const r=va(n),i=aN(r,e),a=await new wj(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const Ij=600*1e3;class Mj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!uN(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ij&&this.cachedEventUids.clear(),this.cachedEventUids.has(PC(e))}saveEventToCache(e){this.cachedEventUids.add(PC(e)),this.lastProcessedEventTime=Date.now()}}function PC(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function uN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Dj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uN(n);default:return!1}}async function Nj(n,e={}){return ya(n,"GET","/v1/projects",e)}const Oj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pj=/^https?/;async function Lj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Nj(n);for(const t of e)try{if(Vj(t))return}catch{}Wr(n,"unauthorized-domain")}function Vj(n){const e=NE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Pj.test(t))return!1;if(Oj.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Uj=new hd(3e4,6e4);function LC(){const n=Qi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Bj(n){return new Promise((e,t)=>{function r(){LC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LC(),t(pi(n,"network-request-failed"))},timeout:Uj.get()})}if(Qi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qi().gapi?.load)r();else{const i=I5("iframefcb");return Qi()[i]=()=>{gapi.load?r():t(pi(n,"network-request-failed"))},KD(`${k5()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Pm=null,e})}let Pm=null;function zj(n){return Pm=Pm||Bj(n),Pm}const jj=new hd(5e3,15e3),Fj="__/auth/iframe",Hj="emulator/auth/iframe",qj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$j=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gj(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?m_(e,Hj):`https://${n.config.authDomain}/${Fj}`,r={apiKey:e.apiKey,appName:n.name,v:Bl},i=$j.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${cd(r).slice(1)}`}async function Kj(n){const e=await zj(n),t=Qi().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:Gj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=pi(n,"network-request-failed"),u=Qi().setTimeout(()=>{s(a)},jj.get());function h(){Qi().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{s(a)})}))}const Wj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yj=500,Qj=600,Xj="_blank",Jj="http://localhost";class VC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zj(n,e,t,r=Yj,i=Qj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...Wj,width:r.toString(),height:i.toString(),top:s,left:a},f=Un().toLowerCase();t&&(u=zD(f)?Xj:t),UD(f)&&(e=e||Jj,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[E,T])=>`${v}${E}=${T},`,"");if(E5(f)&&u!=="_self")return eF(e||"",u),new VC(null);const m=window.open(e||"",u,p);Re(m,n,"popup-blocked");try{m.focus()}catch{}return new VC(m)}function eF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const tF="__/auth/handler",nF="emulator/auth/handler",rF=encodeURIComponent("fac");async function UC(n,e,t,r,i,s){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bl,eventId:i};if(e instanceof E_){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",jz(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof dd){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await n._getAppCheckToken(),f=h?`#${rF}=${encodeURIComponent(h)}`:"";return`${iF(n)}?${cd(u).slice(1)}${f}`}function iF({config:n}){return n.emulator?m_(n,nF):`https://${n.authDomain}/${tF}`}const Ab="webStorageSupport";class sF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nN,this._completeRedirectFn=kj,this._overrideRedirectResult=xj}async _openPopup(e,t,r,i){Hs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await UC(e,t,r,NE(),i);return Zj(e,s,T_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await UC(e,t,r,NE(),i);return lj(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Hs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Kj(e),r=new Mj(e);return t.register("authEvent",i=>(Re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ab,{type:Ab},i=>{const s=i?.[0]?.[Ab];s!==void 0&&t(!!s),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $D()||BD()||y_()}}const oF=sF;var BC="@firebase/auth",zC="1.12.0";class aF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uF(n){xl(new ra("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;Re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GD(n)},f=new x5(r,i,s,h);return L5(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xl(new ra("auth-internal",e=>{const t=va(e.getProvider("auth").getImmediate());return(r=>new aF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yi(BC,zC,lF(n)),Yi(BC,zC,"esm2020")}const cF=300,hF=wD("authIdTokenMaxAge")||cF;let jC=null;const fF=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hF)return;const i=t?.token;jC!==i&&(jC=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dF(n=f_()){const e=Sy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=P5(n,{popupRedirectResolver:oF,persistence:[yj,sj,nN]}),r=wD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=fF(s.toString());ej(t,a,()=>a(t.currentUser)),Z5(t,u=>a(u))}}const i=TD("auth");return i&&V5(t,`http://${i}`),t}function pF(){return document.getElementsByTagName("head")?.[0]??document}C5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=pi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",pF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uF("Browser");var FC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qo,cN;(function(){var n;function e(I,k){function D(){}D.prototype=k.prototype,I.F=k.prototype,I.prototype=new D,I.prototype.constructor=I,I.D=function(B,z,H){for(var P=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)P[Oe-2]=arguments[Oe];return k.prototype[z].apply(B,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,k,D){D||(D=0);const B=Array(16);if(typeof k=="string")for(var z=0;z<16;++z)B[z]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(z=0;z<16;++z)B[z]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=I.g[0],D=I.g[1],z=I.g[2];let H=I.g[3],P;P=k+(H^D&(z^H))+B[0]+3614090360&4294967295,k=D+(P<<7&4294967295|P>>>25),P=H+(z^k&(D^z))+B[1]+3905402710&4294967295,H=k+(P<<12&4294967295|P>>>20),P=z+(D^H&(k^D))+B[2]+606105819&4294967295,z=H+(P<<17&4294967295|P>>>15),P=D+(k^z&(H^k))+B[3]+3250441966&4294967295,D=z+(P<<22&4294967295|P>>>10),P=k+(H^D&(z^H))+B[4]+4118548399&4294967295,k=D+(P<<7&4294967295|P>>>25),P=H+(z^k&(D^z))+B[5]+1200080426&4294967295,H=k+(P<<12&4294967295|P>>>20),P=z+(D^H&(k^D))+B[6]+2821735955&4294967295,z=H+(P<<17&4294967295|P>>>15),P=D+(k^z&(H^k))+B[7]+4249261313&4294967295,D=z+(P<<22&4294967295|P>>>10),P=k+(H^D&(z^H))+B[8]+1770035416&4294967295,k=D+(P<<7&4294967295|P>>>25),P=H+(z^k&(D^z))+B[9]+2336552879&4294967295,H=k+(P<<12&4294967295|P>>>20),P=z+(D^H&(k^D))+B[10]+4294925233&4294967295,z=H+(P<<17&4294967295|P>>>15),P=D+(k^z&(H^k))+B[11]+2304563134&4294967295,D=z+(P<<22&4294967295|P>>>10),P=k+(H^D&(z^H))+B[12]+1804603682&4294967295,k=D+(P<<7&4294967295|P>>>25),P=H+(z^k&(D^z))+B[13]+4254626195&4294967295,H=k+(P<<12&4294967295|P>>>20),P=z+(D^H&(k^D))+B[14]+2792965006&4294967295,z=H+(P<<17&4294967295|P>>>15),P=D+(k^z&(H^k))+B[15]+1236535329&4294967295,D=z+(P<<22&4294967295|P>>>10),P=k+(z^H&(D^z))+B[1]+4129170786&4294967295,k=D+(P<<5&4294967295|P>>>27),P=H+(D^z&(k^D))+B[6]+3225465664&4294967295,H=k+(P<<9&4294967295|P>>>23),P=z+(k^D&(H^k))+B[11]+643717713&4294967295,z=H+(P<<14&4294967295|P>>>18),P=D+(H^k&(z^H))+B[0]+3921069994&4294967295,D=z+(P<<20&4294967295|P>>>12),P=k+(z^H&(D^z))+B[5]+3593408605&4294967295,k=D+(P<<5&4294967295|P>>>27),P=H+(D^z&(k^D))+B[10]+38016083&4294967295,H=k+(P<<9&4294967295|P>>>23),P=z+(k^D&(H^k))+B[15]+3634488961&4294967295,z=H+(P<<14&4294967295|P>>>18),P=D+(H^k&(z^H))+B[4]+3889429448&4294967295,D=z+(P<<20&4294967295|P>>>12),P=k+(z^H&(D^z))+B[9]+568446438&4294967295,k=D+(P<<5&4294967295|P>>>27),P=H+(D^z&(k^D))+B[14]+3275163606&4294967295,H=k+(P<<9&4294967295|P>>>23),P=z+(k^D&(H^k))+B[3]+4107603335&4294967295,z=H+(P<<14&4294967295|P>>>18),P=D+(H^k&(z^H))+B[8]+1163531501&4294967295,D=z+(P<<20&4294967295|P>>>12),P=k+(z^H&(D^z))+B[13]+2850285829&4294967295,k=D+(P<<5&4294967295|P>>>27),P=H+(D^z&(k^D))+B[2]+4243563512&4294967295,H=k+(P<<9&4294967295|P>>>23),P=z+(k^D&(H^k))+B[7]+1735328473&4294967295,z=H+(P<<14&4294967295|P>>>18),P=D+(H^k&(z^H))+B[12]+2368359562&4294967295,D=z+(P<<20&4294967295|P>>>12),P=k+(D^z^H)+B[5]+4294588738&4294967295,k=D+(P<<4&4294967295|P>>>28),P=H+(k^D^z)+B[8]+2272392833&4294967295,H=k+(P<<11&4294967295|P>>>21),P=z+(H^k^D)+B[11]+1839030562&4294967295,z=H+(P<<16&4294967295|P>>>16),P=D+(z^H^k)+B[14]+4259657740&4294967295,D=z+(P<<23&4294967295|P>>>9),P=k+(D^z^H)+B[1]+2763975236&4294967295,k=D+(P<<4&4294967295|P>>>28),P=H+(k^D^z)+B[4]+1272893353&4294967295,H=k+(P<<11&4294967295|P>>>21),P=z+(H^k^D)+B[7]+4139469664&4294967295,z=H+(P<<16&4294967295|P>>>16),P=D+(z^H^k)+B[10]+3200236656&4294967295,D=z+(P<<23&4294967295|P>>>9),P=k+(D^z^H)+B[13]+681279174&4294967295,k=D+(P<<4&4294967295|P>>>28),P=H+(k^D^z)+B[0]+3936430074&4294967295,H=k+(P<<11&4294967295|P>>>21),P=z+(H^k^D)+B[3]+3572445317&4294967295,z=H+(P<<16&4294967295|P>>>16),P=D+(z^H^k)+B[6]+76029189&4294967295,D=z+(P<<23&4294967295|P>>>9),P=k+(D^z^H)+B[9]+3654602809&4294967295,k=D+(P<<4&4294967295|P>>>28),P=H+(k^D^z)+B[12]+3873151461&4294967295,H=k+(P<<11&4294967295|P>>>21),P=z+(H^k^D)+B[15]+530742520&4294967295,z=H+(P<<16&4294967295|P>>>16),P=D+(z^H^k)+B[2]+3299628645&4294967295,D=z+(P<<23&4294967295|P>>>9),P=k+(z^(D|~H))+B[0]+4096336452&4294967295,k=D+(P<<6&4294967295|P>>>26),P=H+(D^(k|~z))+B[7]+1126891415&4294967295,H=k+(P<<10&4294967295|P>>>22),P=z+(k^(H|~D))+B[14]+2878612391&4294967295,z=H+(P<<15&4294967295|P>>>17),P=D+(H^(z|~k))+B[5]+4237533241&4294967295,D=z+(P<<21&4294967295|P>>>11),P=k+(z^(D|~H))+B[12]+1700485571&4294967295,k=D+(P<<6&4294967295|P>>>26),P=H+(D^(k|~z))+B[3]+2399980690&4294967295,H=k+(P<<10&4294967295|P>>>22),P=z+(k^(H|~D))+B[10]+4293915773&4294967295,z=H+(P<<15&4294967295|P>>>17),P=D+(H^(z|~k))+B[1]+2240044497&4294967295,D=z+(P<<21&4294967295|P>>>11),P=k+(z^(D|~H))+B[8]+1873313359&4294967295,k=D+(P<<6&4294967295|P>>>26),P=H+(D^(k|~z))+B[15]+4264355552&4294967295,H=k+(P<<10&4294967295|P>>>22),P=z+(k^(H|~D))+B[6]+2734768916&4294967295,z=H+(P<<15&4294967295|P>>>17),P=D+(H^(z|~k))+B[13]+1309151649&4294967295,D=z+(P<<21&4294967295|P>>>11),P=k+(z^(D|~H))+B[4]+4149444226&4294967295,k=D+(P<<6&4294967295|P>>>26),P=H+(D^(k|~z))+B[11]+3174756917&4294967295,H=k+(P<<10&4294967295|P>>>22),P=z+(k^(H|~D))+B[2]+718787259&4294967295,z=H+(P<<15&4294967295|P>>>17),P=D+(H^(z|~k))+B[9]+3951481745&4294967295,I.g[0]=I.g[0]+k&4294967295,I.g[1]=I.g[1]+(z+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+z&4294967295,I.g[3]=I.g[3]+H&4294967295}r.prototype.v=function(I,k){k===void 0&&(k=I.length);const D=k-this.blockSize,B=this.C;let z=this.h,H=0;for(;H<k;){if(z==0)for(;H<=D;)i(this,I,H),H+=this.blockSize;if(typeof I=="string"){for(;H<k;)if(B[z++]=I.charCodeAt(H++),z==this.blockSize){i(this,B),z=0;break}}else for(;H<k;)if(B[z++]=I[H++],z==this.blockSize){i(this,B),z=0;break}}this.h=z,this.o+=k},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var k=1;k<I.length-8;++k)I[k]=0;k=this.o*8;for(var D=I.length-8;D<I.length;++D)I[D]=k&255,k/=256;for(this.v(I),I=Array(16),k=0,D=0;D<4;++D)for(let B=0;B<32;B+=8)I[k++]=this.g[D]>>>B&255;return I};function s(I,k){var D=u;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=k(I)}function a(I,k){this.h=k;const D=[];let B=!0;for(let z=I.length-1;z>=0;z--){const H=I[z]|0;B&&H==k||(D[z]=H,B=!1)}this.g=D}var u={};function h(I){return-128<=I&&I<128?s(I,function(k){return new a([k|0],k<0?-1:0)}):new a([I|0],I<0?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return m;if(I<0)return w(f(-I));const k=[];let D=1;for(let B=0;I>=D;B++)k[B]=I/D|0,D*=4294967296;return new a(k,0)}function p(I,k){if(I.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(I.charAt(0)=="-")return w(p(I.substring(1),k));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=f(Math.pow(k,8));let B=m;for(let H=0;H<I.length;H+=8){var z=Math.min(8,I.length-H);const P=parseInt(I.substring(H,H+z),k);z<8?(z=f(Math.pow(k,z)),B=B.j(z).add(f(P))):(B=B.j(D),B=B.add(f(P)))}return B}var m=h(0),v=h(1),E=h(16777216);n=a.prototype,n.m=function(){if(S(this))return-w(this).m();let I=0,k=1;for(let D=0;D<this.g.length;D++){const B=this.i(D);I+=(B>=0?B:4294967296+B)*k,k*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(S(this))return"-"+w(this).toString(I);const k=f(Math.pow(I,6));var D=this;let B="";for(;;){const z=$(D,k).g;D=C(D,z.j(k));let H=((D.g.length>0?D.g[0]:D.h)>>>0).toString(I);if(D=z,T(D))return H+B;for(;H.length<6;)H="0"+H;B=H+B}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(let k=0;k<I.g.length;k++)if(I.g[k]!=0)return!1;return!0}function S(I){return I.h==-1}n.l=function(I){return I=C(this,I),S(I)?-1:T(I)?0:1};function w(I){const k=I.g.length,D=[];for(let B=0;B<k;B++)D[B]=~I.g[B];return new a(D,~I.h).add(v)}n.abs=function(){return S(this)?w(this):this},n.add=function(I){const k=Math.max(this.g.length,I.g.length),D=[];let B=0;for(let z=0;z<=k;z++){let H=B+(this.i(z)&65535)+(I.i(z)&65535),P=(H>>>16)+(this.i(z)>>>16)+(I.i(z)>>>16);B=P>>>16,H&=65535,P&=65535,D[z]=P<<16|H}return new a(D,D[D.length-1]&-2147483648?-1:0)};function C(I,k){return I.add(w(k))}n.j=function(I){if(T(this)||T(I))return m;if(S(this))return S(I)?w(this).j(w(I)):w(w(this).j(I));if(S(I))return w(this.j(w(I)));if(this.l(E)<0&&I.l(E)<0)return f(this.m()*I.m());const k=this.g.length+I.g.length,D=[];for(var B=0;B<2*k;B++)D[B]=0;for(B=0;B<this.g.length;B++)for(let z=0;z<I.g.length;z++){const H=this.i(B)>>>16,P=this.i(B)&65535,Oe=I.i(z)>>>16,Ae=I.i(z)&65535;D[2*B+2*z]+=P*Ae,N(D,2*B+2*z),D[2*B+2*z+1]+=H*Ae,N(D,2*B+2*z+1),D[2*B+2*z+1]+=P*Oe,N(D,2*B+2*z+1),D[2*B+2*z+2]+=H*Oe,N(D,2*B+2*z+2)}for(I=0;I<k;I++)D[I]=D[2*I+1]<<16|D[2*I];for(I=k;I<2*k;I++)D[I]=0;return new a(D,0)};function N(I,k){for(;(I[k]&65535)!=I[k];)I[k+1]+=I[k]>>>16,I[k]&=65535,k++}function V(I,k){this.g=I,this.h=k}function $(I,k){if(T(k))throw Error("division by zero");if(T(I))return new V(m,m);if(S(I))return k=$(w(I),k),new V(w(k.g),w(k.h));if(S(k))return k=$(I,w(k)),new V(w(k.g),k.h);if(I.g.length>30){if(S(I)||S(k))throw Error("slowDivide_ only works with positive integers.");for(var D=v,B=k;B.l(I)<=0;)D=F(D),B=F(B);var z=Z(D,1),H=Z(B,1);for(B=Z(B,2),D=Z(D,2);!T(B);){var P=H.add(B);P.l(I)<=0&&(z=z.add(D),H=P),B=Z(B,1),D=Z(D,1)}return k=C(I,z.j(k)),new V(z,k)}for(z=m;I.l(k)>=0;){for(D=Math.max(1,Math.floor(I.m()/k.m())),B=Math.ceil(Math.log(D)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),H=f(D),P=H.j(k);S(P)||P.l(I)>0;)D-=B,H=f(D),P=H.j(k);T(H)&&(H=v),z=z.add(H),I=C(I,P)}return new V(z,I)}n.B=function(I){return $(this,I).h},n.and=function(I){const k=Math.max(this.g.length,I.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)&I.i(B);return new a(D,this.h&I.h)},n.or=function(I){const k=Math.max(this.g.length,I.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)|I.i(B);return new a(D,this.h|I.h)},n.xor=function(I){const k=Math.max(this.g.length,I.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)^I.i(B);return new a(D,this.h^I.h)};function F(I){const k=I.g.length+1,D=[];for(let B=0;B<k;B++)D[B]=I.i(B)<<1|I.i(B-1)>>>31;return new a(D,I.h)}function Z(I,k){const D=k>>5;k%=32;const B=I.g.length-D,z=[];for(let H=0;H<B;H++)z[H]=k>0?I.i(H+D)>>>k|I.i(H+D+1)<<32-k:I.i(H+D);return new a(z,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cN=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,Qo=a}).apply(typeof FC<"u"?FC:typeof self<"u"?self:typeof window<"u"?window:{});var am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hN,Xh,fN,Lm,VE,dN,pN,mN;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof am=="object"&&am];for(var _=0;_<g.length;++_){var x=g[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function i(g,_){if(_)e:{var x=r;g=g.split(".");for(var M=0;M<g.length-1;M++){var K=g[M];if(!(K in x))break e;x=x[K]}g=g[g.length-1],M=x[g],_=_(M),_!=M&&_!=null&&e(x,g,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(_){var x=[],M;for(M in _)Object.prototype.hasOwnProperty.call(_,M)&&x.push([M,_[M]]);return x}});var s=s||{},a=this||self;function u(g){var _=typeof g;return _=="object"&&g!=null||_=="function"}function h(g,_,x){return g.call.apply(g.bind,arguments)}function f(g,_,x){return f=h,f.apply(null,arguments)}function p(g,_){var x=Array.prototype.slice.call(arguments,1);return function(){var M=x.slice();return M.push.apply(M,arguments),g.apply(this,M)}}function m(g,_){function x(){}x.prototype=_.prototype,g.Z=_.prototype,g.prototype=new x,g.prototype.constructor=g,g.Ob=function(M,K,X){for(var he=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)he[Pe-2]=arguments[Pe];return _.prototype[K].apply(M,he)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function E(g){const _=g.length;if(_>0){const x=Array(_);for(let M=0;M<_;M++)x[M]=g[M];return x}return[]}function T(g,_){for(let M=1;M<arguments.length;M++){const K=arguments[M];var x=typeof K;if(x=x!="object"?x:K?Array.isArray(K)?"array":x:"null",x=="array"||x=="object"&&typeof K.length=="number"){x=g.length||0;const X=K.length||0;g.length=x+X;for(let he=0;he<X;he++)g[x+he]=K[he]}else g.push(K)}}class S{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function w(g){a.setTimeout(()=>{throw g},0)}function C(){var g=I;let _=null;return g.g&&(_=g.g,g.g=g.g.next,g.g||(g.h=null),_.next=null),_}class N{constructor(){this.h=this.g=null}add(_,x){const M=V.get();M.set(_,x),this.h?this.h.next=M:this.g=M,this.h=M}}var V=new S(()=>new $,g=>g.reset());class ${constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let F,Z=!1,I=new N,k=()=>{const g=Promise.resolve(void 0);F=()=>{g.then(D)}};function D(){for(var g;g=C();){try{g.h.call(g.g)}catch(x){w(x)}var _=V;_.j(g),_.h<100&&(_.h++,g.next=_.g,_.g=g)}Z=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(g,_){this.type=g,this.g=this.target=_,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,_=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const x=()=>{};a.addEventListener("test",x,_),a.removeEventListener("test",x,_)}catch{}return g})();function P(g){return/^[\s\xa0]*$/.test(g)}function Oe(g,_){z.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,_)}m(Oe,z),Oe.prototype.init=function(g,_){const x=this.type=g.type,M=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=_,_=g.relatedTarget,_||(x=="mouseover"?_=g.fromElement:x=="mouseout"&&(_=g.toElement)),this.relatedTarget=_,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ae(g,_,x,M,K){this.listener=g,this.proxy=null,this.src=_,this.type=x,this.capture=!!M,this.ha=K,this.key=++ee,this.da=this.fa=!1}function me(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ne(g,_,x){for(const M in g)_.call(x,g[M],M,g)}function je(g,_){for(const x in g)_.call(void 0,g[x],x,g)}function L(g){const _={};for(const x in g)_[x]=g[x];return _}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(g,_){let x,M;for(let K=1;K<arguments.length;K++){M=arguments[K];for(x in M)g[x]=M[x];for(let X=0;X<te.length;X++)x=te[X],Object.prototype.hasOwnProperty.call(M,x)&&(g[x]=M[x])}}function de(g){this.src=g,this.g={},this.h=0}de.prototype.add=function(g,_,x,M,K){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const he=Ve(g,_,M,K);return he>-1?(_=g[he],x||(_.fa=!1)):(_=new ae(_,this.src,X,!!M,K),_.fa=x,g.push(_)),_};function ke(g,_){const x=_.type;if(x in g.g){var M=g.g[x],K=Array.prototype.indexOf.call(M,_,void 0),X;(X=K>=0)&&Array.prototype.splice.call(M,K,1),X&&(me(_),g.g[x].length==0&&(delete g.g[x],g.h--))}}function Ve(g,_,x,M){for(let K=0;K<g.length;++K){const X=g[K];if(!X.da&&X.listener==_&&X.capture==!!x&&X.ha==M)return K}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),sn={};function Et(g,_,x,M,K){if(Array.isArray(_)){for(let X=0;X<_.length;X++)Et(g,_[X],x,M,K);return null}return x=Oc(x),g&&g[Ae]?g.J(_,x,u(M)?!!M.capture:!1,K):xa(g,_,x,!1,M,K)}function xa(g,_,x,M,K,X){if(!_)throw Error("Invalid event type");const he=u(K)?!!K.capture:!!K;let Pe=Ca(g);if(Pe||(g[Qe]=Pe=new de(g)),x=Pe.add(_,x,M,he,X),x.proxy)return x;if(M=ql(),x.proxy=M,M.src=g,M.listener=x,g.addEventListener)H||(K=he),K===void 0&&(K=!1),g.addEventListener(_.toString(),M,K);else if(g.attachEvent)g.attachEvent(Ti(_.toString()),M);else if(g.addListener&&g.removeListener)g.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ql(){function g(x){return _.call(g.src,g.listener,x)}const _=Dc;return g}function $l(g,_,x,M,K){if(Array.isArray(_))for(var X=0;X<_.length;X++)$l(g,_[X],x,M,K);else M=u(M)?!!M.capture:!!M,x=Oc(x),g&&g[Ae]?(g=g.i,X=String(_).toString(),X in g.g&&(_=g.g[X],x=Ve(_,x,M,K),x>-1&&(me(_[x]),Array.prototype.splice.call(_,x,1),_.length==0&&(delete g.g[X],g.h--)))):g&&(g=Ca(g))&&(_=g.g[_.toString()],g=-1,_&&(g=Ve(_,x,M,K)),(x=g>-1?_[g]:null)&&Gl(x))}function Gl(g){if(typeof g!="number"&&g&&!g.da){var _=g.src;if(_&&_[Ae])ke(_.i,g);else{var x=g.type,M=g.proxy;_.removeEventListener?_.removeEventListener(x,M,g.capture):_.detachEvent?_.detachEvent(Ti(x),M):_.addListener&&_.removeListener&&_.removeListener(M),(x=Ca(_))?(ke(x,g),x.h==0&&(x.src=null,_[Qe]=null)):me(g)}}}function Ti(g){return g in sn?sn[g]:sn[g]="on"+g}function Dc(g,_){if(g.da)g=!0;else{_=new Oe(_,this);const x=g.listener,M=g.ha||g.src;g.fa&&Gl(g),g=x.call(M,_)}return g}function Ca(g){return g=g[Qe],g instanceof de?g:null}var Nc="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oc(g){return typeof g=="function"?g:(g[Nc]||(g[Nc]=function(_){return g.handleEvent(_)}),g[Nc])}function Ht(){B.call(this),this.i=new de(this),this.M=this,this.G=null}m(Ht,B),Ht.prototype[Ae]=!0,Ht.prototype.removeEventListener=function(g,_,x,M){$l(this,g,_,x,M)};function on(g,_){var x,M=g.G;if(M)for(x=[];M;M=M.G)x.push(M);if(g=g.M,M=_.type||_,typeof _=="string")_=new z(_,g);else if(_ instanceof z)_.target=_.target||g;else{var K=_;_=new z(M,g),ue(_,K)}K=!0;let X,he;if(x)for(he=x.length-1;he>=0;he--)X=_.g=x[he],K=Ys(X,M,!0,_)&&K;if(X=_.g=g,K=Ys(X,M,!0,_)&&K,K=Ys(X,M,!1,_)&&K,x)for(he=0;he<x.length;he++)X=_.g=x[he],K=Ys(X,M,!1,_)&&K}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var g=this.i;for(const _ in g.g){const x=g.g[_];for(let M=0;M<x.length;M++)me(x[M]);delete g.g[_],g.h--}}this.G=null},Ht.prototype.J=function(g,_,x,M){return this.i.add(String(g),_,!1,x,M)},Ht.prototype.K=function(g,_,x,M){return this.i.add(String(g),_,!0,x,M)};function Ys(g,_,x,M){if(_=g.i.g[String(_)],!_)return!0;_=_.concat();let K=!0;for(let X=0;X<_.length;++X){const he=_[X];if(he&&!he.da&&he.capture==x){const Pe=he.listener,Bt=he.ha||he.src;he.fa&&ke(g.i,he),K=Pe.call(Bt,M)!==!1&&K}}return K&&!M.defaultPrevented}function f0(g,_){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:a.setTimeout(g,_||0)}function Id(g){g.g=f0(()=>{g.g=null,g.i&&(g.i=!1,Id(g))},g.l);const _=g.h;g.h=null,g.m.apply(null,_)}class jn extends B{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Id(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(g){B.call(this),this.h=g,this.g={}}m(Ra,B);var Pc=[];function Lc(g){Ne(g.g,function(_,x){this.g.hasOwnProperty(x)&&Gl(_)},g),g.g={}}Ra.prototype.N=function(){Ra.Z.N.call(this),Lc(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qs=a.JSON.stringify,d0=a.JSON.parse,Md=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function Dd(){}function Nd(){}var Qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bn(){z.call(this,"d")}m(bn,z);function Cr(){z.call(this,"c")}m(Cr,z);var Ut={},Od=null;function Kl(){return Od=Od||new Ht}Ut.Ia="serverreachability";function Pd(g){z.call(this,Ut.Ia,g)}m(Pd,z);function _i(g){const _=Kl();on(_,new Pd(_))}Ut.STAT_EVENT="statevent";function ka(g,_){z.call(this,Ut.STAT_EVENT,g),this.stat=_}m(ka,z);function qt(g){const _=Kl();on(_,new ka(_,g))}Ut.Ja="timingevent";function Si(g,_){z.call(this,Ut.Ja,g),this.size=_}m(Si,z);function wi(g,_){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},_)}function Xr(){this.g=!0}Xr.prototype.ua=function(){this.g=!1};function p0(g,_,x,M,K,X){g.info(function(){if(g.g)if(X){var he="",Pe=X.split("&");for(let tt=0;tt<Pe.length;tt++){var Bt=Pe[tt].split("=");if(Bt.length>1){const Tt=Bt[0];Bt=Bt[1];const Mr=Tt.split("_");he=Mr.length>=2&&Mr[1]=="type"?he+(Tt+"="+Bt+"&"):he+(Tt+"=redacted&")}}}else he=null;else he=X;return"XMLHTTP REQ ("+M+") [attempt "+K+"]: "+_+`
`+x+`
`+he})}function Ld(g,_,x,M,K,X,he){g.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+K+"]: "+_+`
`+x+`
`+X+" "+he})}function Ai(g,_,x,M){g.info(function(){return"XMLHTTP TEXT ("+_+"): "+m0(g,x)+(M?" "+M:"")})}function Ia(g,_){g.info(function(){return"TIMEOUT: "+_})}Xr.prototype.info=function(){};function m0(g,_){if(!g.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var x=X[g];if(!(x.length<2)){var M=x[1];if(Array.isArray(M)&&!(M.length<1)){var K=M[0];if(K!="noop"&&K!="stop"&&K!="close")for(let he=1;he<M.length;he++)M[he]=""}}}}return Qs(X)}catch{return _}}var Ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uc;function Da(){}m(Da,Dd),Da.prototype.g=function(){return new XMLHttpRequest},Uc=new Da;function ls(g){return encodeURIComponent(String(g))}function Vd(g){var _=1;g=g.split(":");const x=[];for(;_>0&&g.length;)x.push(g.shift()),_--;return g.length&&x.push(g.join(":")),x}function Jr(g,_,x,M){this.j=g,this.i=_,this.l=x,this.S=M||1,this.V=new Ra(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zr}function Zr(){this.i=null,this.g="",this.h=!1}var $t={},hn={};function xi(g,_,x){g.M=1,g.A=Na(Kt(_)),g.u=x,g.R=!0,Wl(g,null)}function Wl(g,_){g.F=Date.now(),Ci(g),g.B=Kt(g.A);var x=g.B,M=g.S;Array.isArray(M)||(M=[String(M)]),Jl(x.i,"t",M),g.C=0,x=g.j.L,g.h=new Zr,g.g=Jd(g.j,x?_:null,!g.u),g.P>0&&(g.O=new jn(f(g.Y,g,g.g),g.P)),_=g.V,x=g.g,M=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(Pc[0]=K.toString()),K=Pc);for(let X=0;X<K.length;X++){const he=Et(x,K[X],M||_.handleEvent,!1,_.h||_);if(!he)break;_.g[he.key]=he}_=g.J?L(g.J):{},g.u?(g.v||(g.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,_)):(g.v="GET",g.g.ea(g.B,g.v,null,_)),_i(),p0(g.i,g.v,g.B,g.l,g.S,g.u)}Jr.prototype.ba=function(g){g=g.target;const _=this.O;_&&ni(g)==3?_.j():this.Y(g)},Jr.prototype.Y=function(g){try{if(g==this.g)e:{const Pe=ni(this.g),Bt=this.g.ya(),tt=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||En(this.g)))){this.K||Pe!=4||Bt==7||(Bt==8||tt<=0?_i(3):_i(2)),Ri(this);var _=this.g.ca();this.X=_;var x=g0(this);if(this.o=_==200,Ld(this.i,this.v,this.B,this.l,this.S,Pe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var M,K=this.g;if((M=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(M)){var X=M;break t}}X=null}if(g=X)Ai(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ki(this,g);else{this.o=!1,this.m=3,qt(12),ur(this),Rr(this);break e}}if(this.R){g=!0;let Tt;for(;!this.K&&this.C<x.length;)if(Tt=Bd(this,x),Tt==hn){Pe==4&&(this.m=4,qt(14),g=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==$t){this.m=4,qt(15),Ai(this.i,this.l,x,"[Invalid Chunk]"),g=!1;break}else Ai(this.i,this.l,Tt,null),ki(this,Tt);if(Ud(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,qt(16),g=!1),this.o=this.o&&g,!g)Ai(this.i,this.l,x,"[Invalid Chunked Response]"),ur(this),Rr(this);else if(x.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Zc(he),he.P=!0,qt(11))}}else Ai(this.i,this.l,x,null),ki(this,x);Pe==4&&ur(this),this.o&&!this.K&&(Pe==4?Wd(this.j,this):(this.o=!1,Ci(this)))}else cs(this.g),_==400&&x.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),ur(this),Rr(this)}}}catch{}};function g0(g){if(!Ud(g))return g.g.la();const _=En(g.g);if(_==="")return"";let x="";const M=_.length,K=ni(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return ur(g),Rr(g),"";g.h.i=new a.TextDecoder}for(let X=0;X<M;X++)g.h.h=!0,x+=g.h.i.decode(_[X],{stream:!(K&&X==M-1)});return _.length=0,g.h.g+=x,g.C=0,g.h.g}function Ud(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Bd(g,_){var x=g.C,M=_.indexOf(`
`,x);return M==-1?hn:(x=Number(_.substring(x,M)),isNaN(x)?$t:(M+=1,M+x>_.length?hn:(_=_.slice(M,M+x),g.C=M+x,_)))}Jr.prototype.cancel=function(){this.K=!0,ur(this)};function Ci(g){g.T=Date.now()+g.H,Yl(g,g.H)}function Yl(g,_){if(g.D!=null)throw Error("WatchDog timer not null");g.D=wi(f(g.aa,g),_)}function Ri(g){g.D&&(a.clearTimeout(g.D),g.D=null)}Jr.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Ia(this.i,this.B),this.M!=2&&(_i(),qt(17)),ur(this),this.m=2,Rr(this)):Yl(this,this.T-g)};function Rr(g){g.j.I==0||g.K||Wd(g.j,g)}function ur(g){Ri(g);var _=g.O;_&&typeof _.dispose=="function"&&_.dispose(),g.O=null,Lc(g.V),g.g&&(_=g.g,g.g=null,_.abort(),_.dispose())}function ki(g,_){try{var x=g.j;if(x.I!=0&&(x.g==g||Mi(x.h,g))){if(!g.L&&Mi(x.h,g)&&x.I==3){try{var M=x.Ba.g.parse(_)}catch{M=null}if(Array.isArray(M)&&M.length==3){var K=M;if(K[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<g.F)ru(x),io(x);else break e;za(x),qt(18)}}else x.xa=K[1],0<x.xa-x.K&&K[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=wi(f(x.Va,x),6e3));Ii(x.h)<=1&&x.ta&&(x.ta=void 0)}else Vi(x,11)}else if((g.L||x.g==g)&&ru(x),!P(_))for(K=x.Ba.g.parse(_),_=0;_<K.length;_++){let tt=K[_];const Tt=tt[0];if(!(Tt<=x.K))if(x.K=Tt,tt=tt[1],x.I==2)if(tt[0]=="c"){x.M=tt[1],x.ba=tt[2];const Mr=tt[3];Mr!=null&&(x.ka=Mr,x.j.info("VER="+x.ka));const Ui=tt[4];Ui!=null&&(x.za=Ui,x.j.info("SVER="+x.za));const ri=tt[5];ri!=null&&typeof ri=="number"&&ri>0&&(M=1.5*ri,x.O=M,x.j.info("backChannelRequestTimeoutMs_="+M)),M=x;const ii=g.g;if(ii){const ja=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var X=M.h;X.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(jc(X,X.h),X.h=null))}if(M.G){const iu=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(M.wa=iu,rt(M.J,M.G,iu))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-g.F,x.j.info("Handshake RTT: "+x.T+"ms")),M=x;var he=g;if(M.na=Xd(M,M.L?M.ba:null,M.W),he.L){Fc(M.h,he);var Pe=he,Bt=M.O;Bt&&(Pe.H=Bt),Pe.D&&(Ri(Pe),Ci(Pe)),M.g=he}else Gd(M);x.i.length>0&&Li(x)}else tt[0]!="stop"&&tt[0]!="close"||Vi(x,7);else x.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Vi(x,7):Xc(x):tt[0]!="noop"&&x.l&&x.l.qa(tt),x.A=0)}}_i(4)}catch{}}var Gt=class{constructor(g,_){this.g=g,this.map=_}};function Bc(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zc(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ii(g){return g.h?1:g.g?g.g.size:0}function Mi(g,_){return g.h?g.h==_:g.g?g.g.has(_):!1}function jc(g,_){g.g?g.g.add(_):g.h=_}function Fc(g,_){g.h&&g.h==_?g.h=null:g.g&&g.g.has(_)&&g.g.delete(_)}Bc.prototype.cancel=function(){if(this.i=Hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Hc(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let _=g.i;for(const x of g.g.values())_=_.concat(x.G);return _}return E(g.i)}var zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ql(g,_){if(g){g=g.split("&");for(let x=0;x<g.length;x++){const M=g[x].indexOf("=");let K,X=null;M>=0?(K=g[x].substring(0,M),X=g[x].substring(M+1)):K=g[x],_(K,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function cr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;g instanceof cr?(this.l=g.l,fn(this,g.j),this.o=g.o,this.g=g.g,Xs(this,g.u),this.h=g.h,qc(this,qd(g.i)),this.m=g.m):g&&(_=String(g).match(zd))?(this.l=!1,fn(this,_[1]||"",!0),this.o=Di(_[2]||""),this.g=Di(_[3]||"",!0),Xs(this,_[4]),this.h=Di(_[5]||"",!0),qc(this,_[6]||"",!0),this.m=Di(_[7]||"")):(this.l=!1,this.i=new Zs(null,this.l))}cr.prototype.toString=function(){const g=[];var _=this.j;_&&g.push(Oa(_,Xl,!0),":");var x=this.g;return(x||_=="file")&&(g.push("//"),(_=this.o)&&g.push(Oa(_,Xl,!0),"@"),g.push(ls(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&g.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&g.push("/"),g.push(Oa(x,x.charAt(0)=="/"?$c:jd,!0))),(x=this.i.toString())&&g.push("?",x),(x=this.m)&&g.push("#",Oa(x,Fd)),g.join("")},cr.prototype.resolve=function(g){const _=Kt(this);let x=!!g.j;x?fn(_,g.j):x=!!g.o,x?_.o=g.o:x=!!g.g,x?_.g=g.g:x=g.u!=null;var M=g.h;if(x)Xs(_,g.u);else if(x=!!g.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var K=_.h.lastIndexOf("/");K!=-1&&(M=_.h.slice(0,K+1)+M)}if(K=M,K==".."||K==".")M="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){M=K.lastIndexOf("/",0)==0,K=K.split("/");const X=[];for(let he=0;he<K.length;){const Pe=K[he++];Pe=="."?M&&he==K.length&&X.push(""):Pe==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),M&&he==K.length&&X.push("")):(X.push(Pe),M=!0)}M=X.join("/")}else M=K}return x?_.h=M:x=g.i.toString()!=="",x?qc(_,qd(g.i)):x=!!g.m,x&&(_.m=g.m),_};function Kt(g){return new cr(g)}function fn(g,_,x){g.j=x?Di(_,!0):_,g.j&&(g.j=g.j.replace(/:$/,""))}function Xs(g,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);g.u=_}else g.u=null}function qc(g,_,x){_ instanceof Zs?(g.i=_,Zl(g.i,g.l)):(x||(_=Oa(_,Js)),g.i=new Zs(_,g.l))}function rt(g,_,x){g.i.set(_,x)}function Na(g){return rt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Di(g,_){return g?_?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Oa(g,_,x){return typeof g=="string"?(g=encodeURI(g).replace(_,Jn),x&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Jn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Xl=/[#\/\?@]/g,jd=/[#\?:]/g,$c=/[#\?]/g,Js=/[#\?@]/g,Fd=/#/g;function Zs(g,_){this.h=this.g=null,this.i=g||null,this.j=!!_}function Zn(g){g.g||(g.g=new Map,g.h=0,g.i&&Ql(g.i,function(_,x){g.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}n=Zs.prototype,n.add=function(g,_){Zn(this),this.i=null,g=eo(this,g);let x=this.g.get(g);return x||this.g.set(g,x=[]),x.push(_),this.h+=1,this};function Hd(g,_){Zn(g),_=eo(g,_),g.g.has(_)&&(g.i=null,g.h-=g.g.get(_).length,g.g.delete(_))}function Gc(g,_){return Zn(g),_=eo(g,_),g.g.has(_)}n.forEach=function(g,_){Zn(this),this.g.forEach(function(x,M){x.forEach(function(K){g.call(_,K,M,this)},this)},this)};function Kc(g,_){Zn(g);let x=[];if(typeof _=="string")Gc(g,_)&&(x=x.concat(g.g.get(eo(g,_))));else for(g=Array.from(g.g.values()),_=0;_<g.length;_++)x=x.concat(g[_]);return x}n.set=function(g,_){return Zn(this),this.i=null,g=eo(this,g),Gc(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[_]),this.h+=1,this},n.get=function(g,_){return g?(g=Kc(this,g),g.length>0?String(g[0]):_):_};function Jl(g,_,x){Hd(g,_),x.length>0&&(g.i=null,g.g.set(eo(g,_),E(x)),g.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],_=Array.from(this.g.keys());for(let M=0;M<_.length;M++){var x=_[M];const K=ls(x);x=Kc(this,x);for(let X=0;X<x.length;X++){let he=K;x[X]!==""&&(he+="="+ls(x[X])),g.push(he)}}return this.i=g.join("&")};function qd(g){const _=new Zs;return _.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),_}function eo(g,_){return _=String(_),g.j&&(_=_.toLowerCase()),_}function Zl(g,_){_&&!g.j&&(Zn(g),g.i=null,g.g.forEach(function(x,M){const K=M.toLowerCase();M!=K&&(Hd(this,M),Jl(this,K,x))},g)),g.j=_}function ei(g,_){const x=new Xr;if(a.Image){const M=new Image;M.onload=p(kr,x,"TestLoadImage: loaded",!0,_,M),M.onerror=p(kr,x,"TestLoadImage: error",!1,_,M),M.onabort=p(kr,x,"TestLoadImage: abort",!1,_,M),M.ontimeout=p(kr,x,"TestLoadImage: timeout",!1,_,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=g}else _(!1)}function Wc(g,_){const x=new Xr,M=new AbortController,K=setTimeout(()=>{M.abort(),kr(x,"TestPingServer: timeout",!1,_)},1e4);fetch(g,{signal:M.signal}).then(X=>{clearTimeout(K),X.ok?kr(x,"TestPingServer: ok",!0,_):kr(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(K),kr(x,"TestPingServer: error",!1,_)})}function kr(g,_,x,M,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),M(x)}catch{}}function to(){this.g=new Md}function Ni(g){this.i=g.Sb||null,this.h=g.ab||!1}m(Ni,Dd),Ni.prototype.g=function(){return new Pa(this.i,this.h)};function Pa(g,_){Ht.call(this),this.H=g,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Pa,Ht),n=Pa.prototype,n.open=function(g,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=_,this.readyState=1,ti(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(_.body=g),(this.H||a).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,no(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eu(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function eu(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var _=g.value?g.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!g.done}))&&(this.response=this.responseText+=_)}g.done?no(this):ti(this),this.readyState==3&&eu(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,no(this))},n.Na=function(g){this.g&&(this.response=g,no(this))},n.ga=function(){this.g&&no(this)};function no(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ti(g)}n.setRequestHeader=function(g,_){this.A.append(g,_)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,g.push(x[0]+": "+x[1]),x=_.next();return g.join(`\r
`)};function ti(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Ir(g){let _="";return Ne(g,function(x,M){_+=M,_+=":",_+=x,_+=`\r
`}),_}function La(g,_,x){e:{for(M in x){var M=!1;break e}M=!0}M||(x=Ir(x),typeof g=="string"?x!=null&&ls(x):rt(g,_,x))}function at(g){Ht.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(at,Ht);var Oi=/^https?$/i,Yc=["POST","PUT"];n=at.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,_,x,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);_=_?_.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(_,String(g),!0),this.B=!1}catch(X){Va(this,X);return}if(g=x||"",x=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var K in M)x.set(K,M[K]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const X of M.keys())x.set(X,M.get(X));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),K=a.FormData&&g instanceof a.FormData,!(Array.prototype.indexOf.call(Yc,_,void 0)>=0)||M||K||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,he]of x)this.g.setRequestHeader(X,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){Va(this,X)}};function Va(g,_){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=_,g.o=5,Qc(g),us(g)}function Qc(g){g.A||(g.A=!0,on(g,"complete"),on(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,on(this,"complete"),on(this,"abort"),us(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),us(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ua(this):this.Xa())},n.Xa=function(){Ua(this)};function Ua(g){if(g.h&&typeof s<"u"){if(g.v&&ni(g)==4)setTimeout(g.Ca.bind(g),0);else if(on(g,"readystatechange"),ni(g)==4){g.h=!1;try{const X=g.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var M;if(M=X===0){let he=String(g.D).match(zd)[1]||null;!he&&a.self&&a.self.location&&(he=a.self.location.protocol.slice(0,-1)),M=!Oi.test(he?he.toLowerCase():"")}x=M}if(x)on(g,"complete"),on(g,"success");else{g.o=6;try{var K=ni(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",Qc(g)}}finally{us(g)}}}}function us(g,_){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const x=g.g;g.g=null,_||on(g,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ni(g){return g.g?g.g.readyState:0}n.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var _=this.g.responseText;return g&&_.indexOf(g)==0&&(_=_.substring(g.length)),d0(_)}};function En(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function cs(g){const _={};g=(g.g&&ni(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<g.length;M++){if(P(g[M]))continue;var x=Vd(g[M]);const K=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=_[K]||[];_[K]=X,X.push(x)}je(_,function(M){return M.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(g,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[g]||_}function ro(g){this.za=0,this.i=[],this.j=new Xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pi("baseRetryDelayMs",5e3,g),this.Za=Pi("retryDelaySeedMs",1e4,g),this.Ta=Pi("forwardChannelMaxRetries",2,g),this.va=Pi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Bc(g&&g.concurrentRequestLimit),this.Ba=new to,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ro.prototype,n.ka=8,n.I=1,n.connect=function(g,_,x,M){qt(0),this.W=g,this.H=_||{},x&&M!==void 0&&(this.H.OSID=x,this.H.OAID=M),this.F=this.X,this.J=Xd(this,null,this.W),Li(this)};function Xc(g){if(tu(g),g.I==3){var _=g.V++,x=Kt(g.J);if(rt(x,"SID",g.M),rt(x,"RID",_),rt(x,"TYPE","terminate"),Ba(g,x),_=new Jr(g,g.j,_),_.M=2,_.A=Na(Kt(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(_.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=_.A,x=!0),x||(_.g=Jd(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ci(_)}Qd(g)}function io(g){g.g&&(Zc(g),g.g.cancel(),g.g=null)}function tu(g){io(g),g.v&&(a.clearTimeout(g.v),g.v=null),ru(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&a.clearTimeout(g.m),g.m=null)}function Li(g){if(!zc(g.h)&&!g.m){g.m=!0;var _=g.Ea;F||k(),Z||(F(),Z=!0),I.add(_,g),g.D=0}}function nu(g,_){return Ii(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=_.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=wi(f(g.Ea,g,_),Yd(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new Jr(this,this.j,g);let X=this.o;if(this.U&&(X?(X=L(X),ue(X,this.U)):X=this.U),this.u!==null||this.R||(K.J=X,X=null),this.S)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var M=this.i[x];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(_+=M,_>4096){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=$d(this,K,_),x=Kt(this.J),rt(x,"RID",g),rt(x,"CVER",22),this.G&&rt(x,"X-HTTP-Session-Id",this.G),Ba(this,x),X&&(this.R?_="headers="+ls(Ir(X))+"&"+_:this.u&&La(x,this.u,X)),jc(this.h,K),this.Ra&&rt(x,"TYPE","init"),this.S?(rt(x,"$req",_),rt(x,"SID","null"),K.U=!0,xi(K,x,null)):xi(K,x,_),this.I=2}}else this.I==3&&(g?Jc(this,g):this.i.length==0||zc(this.h)||Jc(this))};function Jc(g,_){var x;_?x=_.l:x=g.V++;const M=Kt(g.J);rt(M,"SID",g.M),rt(M,"RID",x),rt(M,"AID",g.K),Ba(g,M),g.u&&g.o&&La(M,g.u,g.o),x=new Jr(g,g.j,x,g.D+1),g.u===null&&(x.J=g.o),_&&(g.i=_.G.concat(g.i)),_=$d(g,x,1e3),x.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),jc(g.h,x),xi(x,M,_)}function Ba(g,_){g.H&&Ne(g.H,function(x,M){rt(_,M,x)}),g.l&&Ne({},function(x,M){rt(_,M,x)})}function $d(g,_,x){x=Math.min(g.i.length,x);const M=g.l?f(g.l.Ka,g.l,g):null;e:{var K=g.i;let Pe=-1;for(;;){const Bt=["count="+x];Pe==-1?x>0?(Pe=K[0].g,Bt.push("ofs="+Pe)):Pe=0:Bt.push("ofs="+Pe);let tt=!0;for(let Tt=0;Tt<x;Tt++){var X=K[Tt].g;const Mr=K[Tt].map;if(X-=Pe,X<0)Pe=Math.max(0,K[Tt].g-100),tt=!1;else try{X="req"+X+"_"||"";try{var he=Mr instanceof Map?Mr:Object.entries(Mr);for(const[Ui,ri]of he){let ii=ri;u(ri)&&(ii=Qs(ri)),Bt.push(X+Ui+"="+encodeURIComponent(ii))}}catch(Ui){throw Bt.push(X+"type="+encodeURIComponent("_badmap")),Ui}}catch{M&&M(Mr)}}if(tt){he=Bt.join("&");break e}}he=void 0}return g=g.i.splice(0,x),_.G=g,he}function Gd(g){if(!g.g&&!g.v){g.Y=1;var _=g.Da;F||k(),Z||(F(),Z=!0),I.add(_,g),g.A=0}}function za(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=wi(f(g.Da,g),Yd(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Kd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=wi(f(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),io(this),Kd(this))};function Zc(g){g.B!=null&&(a.clearTimeout(g.B),g.B=null)}function Kd(g){g.g=new Jr(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var _=Kt(g.na);rt(_,"RID","rpc"),rt(_,"SID",g.M),rt(_,"AID",g.K),rt(_,"CI",g.F?"0":"1"),!g.F&&g.ia&&rt(_,"TO",g.ia),rt(_,"TYPE","xmlhttp"),Ba(g,_),g.u&&g.o&&La(_,g.u,g.o),g.O&&(g.g.H=g.O);var x=g.g;g=g.ba,x.M=1,x.A=Na(Kt(_)),x.u=null,x.R=!0,Wl(x,g)}n.Va=function(){this.C!=null&&(this.C=null,io(this),za(this),qt(19))};function ru(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function Wd(g,_){var x=null;if(g.g==_){ru(g),Zc(g),g.g=null;var M=2}else if(Mi(g.h,_))x=_.G,Fc(g.h,_),M=1;else return;if(g.I!=0){if(_.o)if(M==1){x=_.u?_.u.length:0,_=Date.now()-_.F;var K=g.D;M=Kl(),on(M,new Si(M,x)),Li(g)}else Gd(g);else if(K=_.m,K==3||K==0&&_.X>0||!(M==1&&nu(g,_)||M==2&&za(g)))switch(x&&x.length>0&&(_=g.h,_.i=_.i.concat(x)),K){case 1:Vi(g,5);break;case 4:Vi(g,10);break;case 3:Vi(g,6);break;default:Vi(g,2)}}}function Yd(g,_){let x=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(x*=2),x*_}function Vi(g,_){if(g.j.info("Error code "+_),_==2){var x=f(g.bb,g),M=g.Ua;const K=!M;M=new cr(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fn(M,"https"),Na(M),K?ei(M.toString(),x):Wc(M.toString(),x)}else qt(2);g.I=0,g.l&&g.l.pa(_),Qd(g),tu(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Qd(g){if(g.I=0,g.ja=[],g.l){const _=Hc(g.h);(_.length!=0||g.i.length!=0)&&(T(g.ja,_),T(g.ja,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.oa()}}function Xd(g,_,x){var M=x instanceof cr?Kt(x):new cr(x);if(M.g!="")_&&(M.g=_+"."+M.g),Xs(M,M.u);else{var K=a.location;M=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;const X=new cr(null);M&&fn(X,M),_&&(X.g=_),K&&Xs(X,K),x&&(X.h=x),M=X}return x=g.G,_=g.wa,x&&_&&rt(M,x,_),rt(M,"VER",g.ka),Ba(g,M),M}function Jd(g,_,x){if(_&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=g.Aa&&!g.ma?new at(new Ni({ab:x})):new at(g.ma),_.Fa(g.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zd(){}n=Zd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function so(){}so.prototype.g=function(g,_){return new Fn(g,_)};function Fn(g,_){Ht.call(this),this.g=new ro(_),this.l=g,this.h=_&&_.messageUrlParams||null,g=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(g?g["X-WebChannel-Content-Type"]=_.messageContentType:g={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(g?g["X-WebChannel-Client-Profile"]=_.sa:g={"X-WebChannel-Client-Profile":_.sa}),this.g.U=g,(g=_&&_.Qb)&&!P(g)&&(this.g.u=g),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!P(_)&&(this.g.G=_,g=this.h,g!==null&&_ in g&&(g=this.h,_ in g&&delete g[_])),this.j=new hs(this)}m(Fn,Ht),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Xc(this.g)},Fn.prototype.o=function(g){var _=this.g;if(typeof g=="string"){var x={};x.__data__=g,g=x}else this.v&&(x={},x.__data__=Qs(g),g=x);_.i.push(new Gt(_.Ya++,g)),_.I==3&&Li(_)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Xc(this.g),delete this.g,Fn.Z.N.call(this)};function ep(g){bn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var _=g.__sm__;if(_){e:{for(const x in _){g=x;break e}g=void 0}(this.i=g)&&(g=this.i,_=_!==null&&g in _?_[g]:void 0),this.data=_}else this.data=g}m(ep,bn);function tp(){Cr.call(this),this.status=1}m(tp,Cr);function hs(g){this.g=g}m(hs,Zd),hs.prototype.ra=function(){on(this.g,"a")},hs.prototype.qa=function(g){on(this.g,new ep(g))},hs.prototype.pa=function(g){on(this.g,new tp)},hs.prototype.oa=function(){on(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,mN=function(){return new so},pN=function(){return Kl()},dN=Ut,VE={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,Lm=Ma,Vc.COMPLETE="complete",fN=Vc,Nd.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Xh=Nd,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,hN=at}).apply(typeof am<"u"?am:typeof self<"u"?self:typeof window<"u"?window:{});class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");let _c="12.9.0";function mF(n){_c=n}const kl=new c_("@firebase/firestore");function Lu(){return kl.logLevel}function ge(n,...e){if(kl.logLevel<=Ge.DEBUG){const t=e.map(S_);kl.debug(`Firestore (${_c}): ${n}`,...t)}}function qs(n,...e){if(kl.logLevel<=Ge.ERROR){const t=e.map(S_);kl.error(`Firestore (${_c}): ${n}`,...t)}}function Il(n,...e){if(kl.logLevel<=Ge.WARN){const t=e.map(S_);kl.warn(`Firestore (${_c}): ${n}`,...t)}}function S_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function we(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,gN(n,r,t)}function gN(n,e,t){let r=`FIRESTORE (${_c}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw qs(r),new Error(r)}function Je(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||gN(e,i,r)}function Me(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends as{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class yN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ln.UNAUTHENTICATED)))}shutdown(){}}class yF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class vF{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let s=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xi,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const h=s;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xi)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new yN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class bF{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class EF{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new bF(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TF{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const r=s=>{s.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new HC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _F(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class w_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_F(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Ke(n,e){return n<e?-1:n>e?1:0}function UE(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return xb(i)===xb(s)?Ke(i,s):xb(i)?1:-1}return Ke(n.length,e.length)}const SF=55296,wF=57343;function xb(n){const e=n.charCodeAt(0);return e>=SF&&e<=wF}function oc(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const qC="__name__";class Ki{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Ki.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ke(e.length,t.length)}static compareSegments(e,t){const r=Ki.isNumericId(e),i=Ki.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ki.extractNumericId(e).compare(Ki.extractNumericId(t)):UE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qo.fromString(e.substring(4,e.length-2))}}class ht extends Ki{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const AF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Ki{construct(e,t,r){return new In(e,t,r)}static isValidIdentifier(e){return AF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qC}static keyField(){return new In([qC])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new fe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new fe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ht.fromString(e))}static fromName(e){return new Te(ht.fromString(e).popFirst(5))}static empty(){return new Te(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ht(e.slice()))}}function vN(n,e,t){if(!t)throw new fe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xF(n,e,t,r){if(e===!0&&r===!0)throw new fe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $C(n){if(!Te.isDocumentKey(n))throw new fe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GC(n){if(Te.isDocumentKey(n))throw new fe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function ts(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cy(n);throw new fe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tn(n,e){const t={typeString:n};return e&&(t.value=e),t}function md(n,e){if(!bN(n))throw new fe(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new fe(re.INVALID_ARGUMENT,t);return!0}const KC=-62135596800,WC=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*WC);return new ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KC)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WC}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(md(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:tn("string",ft._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ft(0,0))}static max(){return new Ce(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Pf=-1;function CF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new ia(i,Te.empty(),e)}function RF(n){return new ia(n.readTime,n.key,Pf)}class ia{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ia(Ce.min(),Te.empty(),Pf)}static max(){return new ia(Ce.max(),Te.empty(),Pf)}}function kF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}const IF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Sc(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==IF)throw n;ge("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,r)=>{t(e)}))}static reject(e){return new oe(((t,r)=>{r(e)}))}static waitFor(e){return new oe(((t,r)=>{let i=0,s=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++s,a&&s===i&&t()}),(h=>r(h)))})),a=!0,s===i&&t()}))}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next((i=>i?oe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new oe(((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let h=0;h<s;h++){const f=h;t(e[f]).next((p=>{a[f]=p,++u,u===s&&r(a)}),(p=>i(p)))}}))}static doWhile(e,t){return new oe(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}function DF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wc(n){return n.name==="IndexedDbTransactionError"}class Ry{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ry.ce=-1;const A_=-1;function gd(n){return n==null}function ug(n){return n===0&&1/n==-1/0}function NF(n){return typeof n=="number"&&Number.isInteger(n)&&!ug(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const EN="";function OF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YC(e)),e=PF(n.get(t),e);return YC(e)}function PF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case EN:t+="";break;default:t+=s}}return t}function YC(n){return n+EN+""}function QC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ba(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ct{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new Ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lm(this.root,e,this.comparator,!1)}getReverseIterator(){return new lm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lm(this.root,e,this.comparator,!0)}}class lm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Cn.RED,this.left=i??Cn.EMPTY,this.right=s??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Cn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Cn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XC(this.data.getIterator())}getIteratorFrom(e){return new XC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class XC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Tr{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Tr([])}unionWith(e){let t=new un(In.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class _N extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _N("Invalid base64 string: "+s):s}})(e);return new Dn(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const LF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=LF.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ft(n.seconds),nanos:Ft(n.nanos)}}function Ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?Dn.fromBase64String(n):Dn.fromUint8Array(n)}const SN="server_timestamp",wN="__type__",AN="__previous_value__",xN="__local_write_time__";function x_(n){return(n?.mapValue?.fields||{})[wN]?.stringValue===SN}function ky(n){const e=n.mapValue.fields[AN];return x_(e)?ky(e):e}function Lf(n){const e=sa(n.mapValue.fields[xN].timestampValue);return new ft(e.seconds,e.nanos)}class VF{constructor(e,t,r,i,s,a,u,h,f,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p,this.apiKey=m}}const cg="(default)";class Vf{constructor(e,t){this.projectId=e,this.database=t||cg}static empty(){return new Vf("","")}get isDefaultDatabase(){return this.database===cg}isEqual(e){return e instanceof Vf&&e.projectId===this.projectId&&e.database===this.database}}function UF(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new fe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vf(n.options.projectId,e)}const CN="__type__",BF="__max__",um={mapValue:{}},RN="__vector__",hg="value";function aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?x_(n)?4:jF(n)?9007199254740991:zF(n)?10:11:we(28295,{value:n})}function ns(n,e){if(n===e)return!0;const t=aa(n);if(t!==aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lf(n).isEqual(Lf(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=sa(i.timestampValue),u=sa(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return oa(i.bytesValue).isEqual(oa(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ft(i.geoPointValue.latitude)===Ft(s.geoPointValue.latitude)&&Ft(i.geoPointValue.longitude)===Ft(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ft(i.integerValue)===Ft(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ft(i.doubleValue),u=Ft(s.doubleValue);return a===u?ug(a)===ug(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return oc(n.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(QC(a)!==QC(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!ns(a[h],u[h])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Uf(n,e){return(n.values||[]).find((t=>ns(t,e)))!==void 0}function ac(n,e){if(n===e)return 0;const t=aa(n),r=aa(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=Ft(s.integerValue||s.doubleValue),h=Ft(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(n,e);case 3:return JC(n.timestampValue,e.timestampValue);case 4:return JC(Lf(n),Lf(e));case 5:return UE(n.stringValue,e.stringValue);case 6:return(function(s,a){const u=oa(s),h=oa(a);return u.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=Ke(u[f],h[f]);if(p!==0)return p}return Ke(u.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=Ke(Ft(s.latitude),Ft(a.latitude));return u!==0?u:Ke(Ft(s.longitude),Ft(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ZC(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const u=s.fields||{},h=a.fields||{},f=u[hg]?.arrayValue,p=h[hg]?.arrayValue,m=Ke(f?.values?.length||0,p?.values?.length||0);return m!==0?m:ZC(f,p)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===um.mapValue&&a===um.mapValue)return 0;if(s===um.mapValue)return 1;if(a===um.mapValue)return-1;const u=s.fields||{},h=Object.keys(u),f=a.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let m=0;m<h.length&&m<p.length;++m){const v=UE(h[m],p[m]);if(v!==0)return v;const E=ac(u[h[m]],f[p[m]]);if(E!==0)return E}return Ke(h.length,p.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function JC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=sa(n),r=sa(e),i=Ke(t.seconds,r.seconds);return i!==0?i:Ke(t.nanos,r.nanos)}function ZC(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ac(t[i],r[i]);if(s)return s}return Ke(t.length,r.length)}function lc(n){return BE(n)}function BE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=sa(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return oa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=BE(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${BE(t.fields[a])}`;return i+"}"})(n.mapValue):we(61005,{value:n})}function Vm(n){switch(aa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ky(n);return e?16+Vm(e):16;case 5:return 2*n.stringValue.length;case 6:return oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Vm(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ba(r.fields,((s,a)=>{i+=s.length+Vm(a)})),i})(n.mapValue);default:throw we(13486,{value:n})}}function eR(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zE(n){return!!n&&"integerValue"in n}function C_(n){return!!n&&"arrayValue"in n}function tR(n){return!!n&&"nullValue"in n}function nR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Um(n){return!!n&&"mapValue"in n}function zF(n){return(n?.mapValue?.fields||{})[CN]?.stringValue===RN}function cf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ba(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=cf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cf(n.arrayValue.values[t]);return e}return{...n}}function jF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===BF}class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Um(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cf(t)}setAll(e){let t=In.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=cf(a):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Um(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Um(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ba(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new $n(cf(this.value))}}function kN(n){const e=[];return ba(n.fields,((t,r)=>{const i=new In([t]);if(Um(r)){const s=kN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Tr(e)}class mn{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new mn(e,0,Ce.min(),Ce.min(),Ce.min(),$n.empty(),0)}static newFoundDocument(e,t,r,i){return new mn(e,1,t,Ce.min(),r,i,0)}static newNoDocument(e,t){return new mn(e,2,t,Ce.min(),Ce.min(),$n.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Ce.min(),Ce.min(),$n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fg{constructor(e,t){this.position=e,this.inclusive=t}}function rR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=Te.comparator(Te.fromName(a.referenceValue),t.key):r=ac(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function iR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ns(n.position[t],e.position[t]))return!1;return!0}class Bf{constructor(e,t="asc"){this.field=e,this.dir=t}}function FF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class IN{}class en extends IN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qF(e,t,r):t==="array-contains"?new KF(e,r):t==="in"?new WF(e,r):t==="not-in"?new YF(e,r):t==="array-contains-any"?new QF(e,r):new en(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $F(e,r):new GF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ac(t,this.value)):t!==null&&aa(this.value)===aa(t)&&this.matchesComparison(ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends IN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ei(e,t)}matches(e){return MN(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function MN(n){return n.op==="and"}function DN(n){return HF(n)&&MN(n)}function HF(n){for(const e of n.filters)if(e instanceof Ei)return!1;return!0}function jE(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+lc(n.value);if(DN(n))return n.filters.map((e=>jE(e))).join(",");{const e=n.filters.map((t=>jE(t))).join(",");return`${n.op}(${e})`}}function NN(n,e){return n instanceof en?(function(r,i){return i instanceof en&&r.op===i.op&&r.field.isEqual(i.field)&&ns(r.value,i.value)})(n,e):n instanceof Ei?(function(r,i){return i instanceof Ei&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,u)=>s&&NN(a,i.filters[u])),!0):!1})(n,e):void we(19439)}function ON(n){return n instanceof en?(function(t){return`${t.field.canonicalString()} ${t.op} ${lc(t.value)}`})(n):n instanceof Ei?(function(t){return t.op.toString()+" {"+t.getFilters().map(ON).join(" ,")+"}"})(n):"Filter"}class qF extends en{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class $F extends en{constructor(e,t){super(e,"in",t),this.keys=PN("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GF extends en{constructor(e,t){super(e,"not-in",t),this.keys=PN("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function PN(n,e){return(e.arrayValue?.values||[]).map((t=>Te.fromName(t.referenceValue)))}class KF extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return C_(t)&&Uf(t.arrayValue,this.value)}}class WF extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uf(this.value.arrayValue,t)}}class YF extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uf(this.value.arrayValue,t)}}class QF extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!C_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Uf(this.value.arrayValue,r)))}}class XF{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function sR(n,e=null,t=[],r=[],i=null,s=null,a=null){return new XF(n,e,t,r,i,s,a)}function R_(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>jE(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),gd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>lc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>lc(r))).join(",")),e.Te=t}return e.Te}function k_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iR(n.startAt,e.startAt)&&iR(n.endAt,e.endAt)}function FE(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Ac{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function JF(n,e,t,r,i,s,a,u){return new Ac(n,e,t,r,i,s,a,u)}function I_(n){return new Ac(n)}function oR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ZF(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function LN(n){return n.collectionGroup!==null}function hf(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new un(In.comparator);return a.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Bf(s,r))})),t.has(In.keyField().canonicalString())||e.Ie.push(new Bf(In.keyField(),r))}return e.Ie}function Ji(n){const e=Me(n);return e.Ee||(e.Ee=e9(e,hf(n))),e.Ee}function e9(n,e){if(n.limitType==="F")return sR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Bf(i.field,s)}));const t=n.endAt?new fg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fg(n.startAt.position,n.startAt.inclusive):null;return sR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function HE(n,e){const t=n.filters.concat([e]);return new Ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function t9(n,e){const t=n.explicitOrderBy.concat([e]);return new Ac(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function dg(n,e,t){return new Ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Iy(n,e){return k_(Ji(n),Ji(e))&&n.limitType===e.limitType}function VN(n){return`${R_(Ji(n))}|lt:${n.limitType}`}function Vu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>ON(i))).join(", ")}]`),gd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>lc(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>lc(i))).join(",")),`Target(${r})`})(Ji(n))}; limitType=${n.limitType})`}function My(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of hf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,h){const f=rR(a,u,h);return a.inclusive?f<=0:f<0})(r.startAt,hf(r),i)||r.endAt&&!(function(a,u,h){const f=rR(a,u,h);return a.inclusive?f>=0:f>0})(r.endAt,hf(r),i))})(n,e)}function n9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UN(n){return(e,t)=>{let r=!1;for(const i of hf(n)){const s=r9(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function r9(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(s,a,u){const h=a.data.field(s),f=u.data.field(s);return h!==null&&f!==null?ac(h,f):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:n.dir})}}class zl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return TN(this.inner)}size(){return this.innerSize}}const i9=new Ct(Te.comparator);function $s(){return i9}const BN=new Ct(Te.comparator);function Jh(...n){let e=BN;for(const t of n)e=e.insert(t.key,t);return e}function zN(n){let e=BN;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function cl(){return ff()}function jN(){return ff()}function ff(){return new zl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const s9=new Ct(Te.comparator),o9=new un(Te.comparator);function We(...n){let e=o9;for(const t of n)e=e.add(t);return e}const a9=new un(Ke);function l9(){return a9}function M_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ug(e)?"-0":e}}function FN(n){return{integerValue:""+n}}function u9(n,e){return NF(e)?FN(e):M_(n,e)}class Dy{constructor(){this._=void 0}}function c9(n,e,t){return n instanceof zf?(function(i,s){const a={fields:{[wN]:{stringValue:SN},[xN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&x_(s)&&(s=ky(s)),s&&(a.fields[AN]=s),{mapValue:a}})(t,e):n instanceof jf?qN(n,e):n instanceof Ff?$N(n,e):(function(i,s){const a=HN(i,s),u=aR(a)+aR(i.Ae);return zE(a)&&zE(i.Ae)?FN(u):M_(i.serializer,u)})(n,e)}function h9(n,e,t){return n instanceof jf?qN(n,e):n instanceof Ff?$N(n,e):t}function HN(n,e){return n instanceof pg?(function(r){return zE(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class zf extends Dy{}class jf extends Dy{constructor(e){super(),this.elements=e}}function qN(n,e){const t=GN(e);for(const r of n.elements)t.some((i=>ns(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Ff extends Dy{constructor(e){super(),this.elements=e}}function $N(n,e){let t=GN(e);for(const r of n.elements)t=t.filter((i=>!ns(i,r)));return{arrayValue:{values:t}}}class pg extends Dy{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function aR(n){return Ft(n.integerValue||n.doubleValue)}function GN(n){return C_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class f9{constructor(e,t){this.field=e,this.transform=t}}function d9(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof jf&&i instanceof jf||r instanceof Ff&&i instanceof Ff?oc(r.elements,i.elements,ns):r instanceof pg&&i instanceof pg?ns(r.Ae,i.Ae):r instanceof zf&&i instanceof zf})(n.transform,e.transform)}class p9{constructor(e,t){this.version=e,this.transformResults=t}}class Gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ny{}function KN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new D_(n.key,Gn.none()):new yd(n.key,n.data,Gn.none());{const t=n.data,r=$n.empty();let i=new un(In.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ea(n.key,r,new Tr(i.toArray()),Gn.none())}}function m9(n,e,t){n instanceof yd?(function(i,s,a){const u=i.value.clone(),h=uR(i.fieldTransforms,s,a.transformResults);u.setAll(h),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Ea?(function(i,s,a){if(!Bm(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=uR(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(WN(i)),h.setAll(u),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function df(n,e,t,r){return n instanceof yd?(function(s,a,u,h){if(!Bm(s.precondition,a))return u;const f=s.value.clone(),p=cR(s.fieldTransforms,h,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ea?(function(s,a,u,h){if(!Bm(s.precondition,a))return u;const f=cR(s.fieldTransforms,h,a),p=a.data;return p.setAll(WN(s)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(n,e,t,r):(function(s,a,u){return Bm(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function g9(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=HN(r.transform,i||null);s!=null&&(t===null&&(t=$n.empty()),t.set(r.field,s))}return t||null}function lR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oc(r,i,((s,a)=>d9(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class yd extends Ny{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ea extends Ny{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function WN(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function uR(n,e,t){const r=new Map;Je(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,h9(a,u,t[i]))}return r}function cR(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,c9(s,a,e))}return r}class D_ extends Ny{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YN extends Ny{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class y9{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&m9(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=df(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=df(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jN();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const h=KN(a,u);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,((t,r)=>lR(t,r)))&&oc(this.baseMutations,e.baseMutations,((t,r)=>lR(t,r)))}}class N_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return s9})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new N_(e,t,r,i)}}class v9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class b9{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jt,Xe;function QN(n){switch(n){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function XN(n){if(n===void 0)return qs("GRPC error has no .code"),re.UNKNOWN;switch(n){case Jt.OK:return re.OK;case Jt.CANCELLED:return re.CANCELLED;case Jt.UNKNOWN:return re.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return re.INTERNAL;case Jt.UNAVAILABLE:return re.UNAVAILABLE;case Jt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Jt.NOT_FOUND:return re.NOT_FOUND;case Jt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Jt.ABORTED:return re.ABORTED;case Jt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Jt.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:n})}}(Xe=Jt||(Jt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function E9(){return new TextEncoder}const T9=new Qo([4294967295,4294967295],0);function hR(n){const e=E9().encode(n),t=new cN;return t.update(e),new Uint8Array(t.digest())}function fR(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qo([t,r],0),new Qo([i,s],0)]}class O_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zh(`Invalid padding: ${t}`);if(r<0)throw new Zh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Qo.fromNumber(r)));return i.compare(T9)===1&&(i=new Qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=hR(e),[r,i]=fR(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new O_(s,i,t);return r.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=hR(e),[r,i]=fR(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.be(a)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Oy{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Oy(Ce.min(),i,new Ct(Ke),$s(),We())}}class vd{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vd(r,t,We(),We(),We())}}class zm{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}}class JN{constructor(e,t){this.targetId=e,this.Ce=t}}class ZN{constructor(e,t,r=Dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class dR{constructor(){this.ve=0,this.Fe=pR(),this.Me=Dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),r=We();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:s})}})),new vd(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=pR()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class _9{constructor(e){this.Ge=e,this.ze=new Map,this.je=$s(),this.He=cm(),this.Je=cm(),this.Ze=new Ct(Ke)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(FE(s))if(r===0){const a=new Te(s.path);this.et(t,a,mn.newNoDocument(a,Ce.min()))}else Je(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=oa(r).toUint8Array()}catch(h){if(h instanceof _N)return Il("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new O_(a,i,s)}catch(h){return Il(h instanceof Zh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&FE(u.target)){const h=new Te(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,mn.newNoDocument(h,e))}s.Be&&(t.set(a,s.ke()),s.Ke())}}));let r=We();this.Je.forEach(((s,a)=>{let u=!0;a.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Oy(e,t,this.Ze,this.je,r);return this.je=$s(),this.He=cm(),this.Je=cm(),this.Ze=new Ct(Ke),i}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new dR,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new un(Ke),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new un(Ke),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dR),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cm(){return new Ct(Te.comparator)}function pR(){return new Ct(Te.comparator)}const S9={asc:"ASCENDING",desc:"DESCENDING"},w9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A9={and:"AND",or:"OR"};class x9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qE(n,e){return n.useProto3Json||gd(e)?e:{value:e}}function mg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function C9(n,e){return mg(n,e.toTimestamp())}function Sr(n){return Je(!!n,49232),Ce.fromTimestamp((function(t){const r=sa(t);return new ft(r.seconds,r.nanos)})(n))}function P_(n,e){return $E(n,e).canonicalString()}function $E(n,e){const t=(function(i){return new ht(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function tO(n){const e=ht.fromString(n);return Je(aO(e),10190,{key:e.toString()}),e}function gg(n,e){return P_(n.databaseId,e.path)}function pf(n,e){const t=tO(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(rO(t))}function nO(n,e){return P_(n.databaseId,e)}function R9(n){const e=tO(n);return e.length===4?ht.emptyPath():rO(e)}function GE(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rO(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mR(n,e,t){return{name:gg(n,e),fields:t.value.mapValue.fields}}function k9(n,e){return"found"in e?(function(r,i){Je(!!i.found,43571),i.found.name,i.found.updateTime;const s=pf(r,i.found.name),a=Sr(i.found.updateTime),u=i.found.createTime?Sr(i.found.createTime):Ce.min(),h=new $n({mapValue:{fields:i.found.fields}});return mn.newFoundDocument(s,a,u,h)})(n,e):"missing"in e?(function(r,i){Je(!!i.missing,3894),Je(!!i.readTime,22933);const s=pf(r,i.missing),a=Sr(i.readTime);return mn.newNoDocument(s,a)})(n,e):we(7234,{result:e})}function I9(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(f,p){return f.useProto3Json?(Je(p===void 0||typeof p=="string",58123),Dn.fromBase64String(p||"")):(Je(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Dn.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(f){const p=f.code===void 0?re.UNKNOWN:XN(f.code);return new fe(p,f.message||"")})(a);t=new ZN(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pf(n,r.document.name),s=Sr(r.document.updateTime),a=r.document.createTime?Sr(r.document.createTime):Ce.min(),u=new $n({mapValue:{fields:r.document.fields}}),h=mn.newFoundDocument(i,s,a,u),f=r.targetIds||[],p=r.removedTargetIds||[];t=new zm(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pf(n,r.document),s=r.readTime?Sr(r.readTime):Ce.min(),a=mn.newNoDocument(i,s),u=r.removedTargetIds||[];t=new zm([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pf(n,r.document),s=r.removedTargetIds||[];t=new zm([],s,i,null)}else{if(!("filter"in e))return we(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new b9(i,s),u=r.targetId;t=new JN(u,a)}}return t}function iO(n,e){let t;if(e instanceof yd)t={update:mR(n,e.key,e.value)};else if(e instanceof D_)t={delete:gg(n,e.key)};else if(e instanceof Ea)t={update:mR(n,e.key,e.data),updateMask:B9(e.fieldMask)};else{if(!(e instanceof YN))return we(16599,{dt:e.type});t={verify:gg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const u=a.transform;if(u instanceof zf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof jf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ff)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof pg)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:C9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we(27497)})(n,e.precondition)),t}function M9(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Sr(i.updateTime):Sr(s);return a.isEqual(Ce.min())&&(a=Sr(s)),new p9(a,i.transformResults||[])})(t,e)))):[]}function D9(n,e){return{documents:[nO(n,e.path)]}}function N9(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nO(n,i);const s=(function(f){if(f.length!==0)return oO(Ei.create(f,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(f){if(f.length!==0)return f.map((p=>(function(v){return{field:Uu(v.field),direction:L9(v.dir)}})(p)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=qE(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function O9(n){let e=R9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Je(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(m){const v=sO(m);return v instanceof Ei&&DN(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(m){return m.map((v=>(function(T){return new Bf(Bu(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(m){let v;return v=typeof m=="object"?m.value:m,gd(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(m){const v=!!m.before,E=m.values||[];return new fg(E,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(m){const v=!m.before,E=m.values||[];return new fg(E,v)})(t.endAt)),JF(e,i,a,s,u,"F",h,f)}function P9(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sO(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bu(t.unaryFilter.field);return en.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Bu(t.unaryFilter.field);return en.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bu(t.unaryFilter.field);return en.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bu(t.unaryFilter.field);return en.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return en.create(Bu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ei.create(t.compositeFilter.filters.map((r=>sO(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function L9(n){return S9[n]}function V9(n){return w9[n]}function U9(n){return A9[n]}function Uu(n){return{fieldPath:n.canonicalString()}}function Bu(n){return In.fromServerFormat(n.fieldPath)}function oO(n){return n instanceof en?(function(t){if(t.op==="=="){if(nR(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NAN"}};if(tR(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nR(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NOT_NAN"}};if(tR(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(t.field),op:V9(t.op),value:t.value}}})(n):n instanceof Ei?(function(t){const r=t.getFilters().map((i=>oO(i)));return r.length===1?r[0]:{compositeFilter:{op:U9(t.op),filters:r}}})(n):we(54877,{filter:n})}function B9(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function lO(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class Ho{constructor(e,t,r,i,s=Ce.min(),a=Ce.min(),u=Dn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class z9{constructor(e){this.yt=e}}function j9(n){const e=O9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dg(e,e.limit,"L"):e}class F9{constructor(){this.Sn=new H9}addToCollectionParentIndex(e,t){return this.Sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ia.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class H9{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new un(ht.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new un(ht.comparator)).toArray()}}const gR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uO=41943040;class sr{static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(uO,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);class uc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new uc(0)}static ar(){return new uc(-1)}}const yR="LruGarbageCollector",q9=1048576;function vR([n,e],[t,r]){const i=Ke(n,t);return i===0?Ke(e,r):i}class $9{constructor(e){this.Pr=e,this.buffer=new un(vR),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ge(yR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wc(t)?ge(yR,"Ignoring IndexedDB error during garbage collection: ",t):await Sc(t)}await this.Ar(3e5)}))}}class K9{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Ry.ce);const r=new $9(t);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(gR)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gR):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,s,a,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(r=m,u=Date.now(),this.removeTargets(e,r,t)))).next((m=>(s=m,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(f=Date.now(),Lu()<=Ge.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(h-u)+`ms
	Removed ${m} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m}))))}}function W9(n,e){return new K9(n,e)}class Y9{constructor(){this.changes=new zl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Q9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class X9{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&df(r.mutation,i,Tr.empty(),ft.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,We()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=We()){const i=cl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Jh();return s.forEach(((u,h)=>{a=a.insert(u,h.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=cl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,We())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let s=$s();const a=ff(),u=(function(){return ff()})();return t.forEach(((h,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof Ea)?s=s.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),df(p.mutation,f,p.mutation.getFieldMask(),ft.now())):a.set(f.key,Tr.empty())})),this.recalculateAndSaveOverlays(e,s).next((h=>(h.forEach(((f,p)=>a.set(f,p))),t.forEach(((f,p)=>u.set(f,new Q9(p,a.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=ff();let i=new Ct(((a,u)=>a-u)),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let p=r.get(h)||Tr.empty();p=u.applyToLocalView(f,p),r.set(h,p);const m=(i.get(u.batchId)||We()).add(h);i=i.insert(u.batchId,m)}))})).next((()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,m=jN();p.forEach((v=>{if(!s.has(v)){const E=KN(t.get(v),r.get(v));E!==null&&m.set(v,E),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,f,m))}return oe.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return ZF(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(cl());let u=Pf,h=s;return a.next((f=>oe.forEach(f,((p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),s.get(p)?oe.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{h=h.insert(p,v)}))))).next((()=>this.populateOverlays(e,f,s))).next((()=>this.computeViews(e,h,f,We()))).next((p=>({batchId:u,changes:zN(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((r=>{let i=Jh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Jh();return this.indexManager.getCollectionParents(e,s).next((u=>oe.forEach(u,(h=>{const f=(function(m,v){return new Ac(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((p=>{p.forEach(((m,v)=>{a=a.insert(m,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((h,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,mn.newInvalidDocument(p)))}));let u=Jh();return a.forEach(((h,f)=>{const p=s.get(h);p!==void 0&&df(p.mutation,f,Tr.empty(),ft.now()),My(t,f)&&(u=u.insert(h,f))})),u}))}}class J9{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return oe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Sr(i.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:j9(i.bundledQuery),readTime:Sr(i.readTime)}})(t)),oe.resolve()}}class Z9{constructor(){this.overlays=new Ct(Te.comparator),this.Lr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=cl();return oe.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.bt(e,t,s)})),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Lr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=cl(),s=t.length+1,a=new Te(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ct(((f,p)=>f-p));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=s.get(f.largestBatchId);p===null&&(p=cl(),s=s.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=cl(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=i)););return oe.resolve(u)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new v9(t,r));let s=this.Lr.get(t);s===void 0&&(s=We(),this.Lr.set(t,s)),this.Lr.set(t,s.add(r.key))}}class eH{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}class L_{constructor(){this.kr=new un(pn.Kr),this.qr=new un(pn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new pn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new pn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new Te(new ht([])),r=new pn(t,e),i=new pn(t,e+1),s=[];return this.qr.forEachInRange([r,i],(a=>{this.Wr(a),s.push(a.key)})),s}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Te(new ht([])),r=new pn(t,e),i=new pn(t,e+1);let s=We();return this.qr.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new pn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Te.comparator(e.key,t.key)||Ke(e.Hr,t.Hr)}static Ur(e,t){return Ke(e.Hr,t.Hr)||Te.comparator(e.key,t.key)}}class tH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new un(pn.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new y9(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.Jr=this.Jr.add(new pn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(a)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?A_:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pn(t,0),i=new pn(t,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],(a=>{const u=this.Zr(a.Hr);s.push(u)})),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(Ke);return t.forEach((i=>{const s=new pn(i,0),a=new pn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,a],(u=>{r=r.add(u.Hr)}))})),oe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Te.isDocumentKey(s)||(s=s.child(""));const a=new pn(new Te(s),0);let u=new un(Ke);return this.Jr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Hr)),!0)}),a),oe.resolve(this.Yr(u))}Yr(e){const t=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Je(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return oe.forEach(t.mutations,(i=>{const s=new pn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new pn(t,0),i=this.Jr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nH{constructor(e){this.ti=e,this.docs=(function(){return new Ct(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let r=$s();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mn.newInvalidDocument(i))})),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=$s();const a=t.path,u=new Te(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||kF(RF(p),r)<=0||(i.has(p.key)||My(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){we(9500)}ni(e,t){return oe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new rH(this)}getSize(e){return oe.resolve(this.size)}}class rH extends Y9{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),oe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class iH{constructor(e){this.persistence=e,this.ri=new zl((t=>R_(t)),k_),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new L_,this.targetCount=0,this.oi=uc._r()}forEachTarget(e,t){return this.ri.forEach(((r,i)=>t(i))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),oe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.lr(t),oe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ri.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ri.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),oe.waitFor(s).next((()=>i))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.si.containsKey(t))}}class cO{constructor(e,t){this._i={},this.overlays={},this.ai=new Ry(0),this.ui=!1,this.ui=!0,this.ci=new eH,this.referenceDelegate=e(this),this.li=new iH(this),this.indexManager=new F9,this.remoteDocumentCache=(function(i){return new nH(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new z9(t),this.Pi=new J9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Z9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new tH(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const i=new sH(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((s=>this.referenceDelegate.Ii(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ei(e,t){return oe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class sH extends MF{constructor(e){super(),this.currentSequenceNumber=e}}class V_{constructor(e){this.persistence=e,this.Ri=new L_,this.Ai=null}static Vi(e){return new V_(e)}get di(){if(this.Ai)return this.Ai;throw we(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.di.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(r=>{const i=Te.fromPath(r);return this.mi(e,i).next((s=>{s||t.removeEntry(i,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class yg{constructor(e,t){this.persistence=e,this.fi=new zl((r=>OF(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=W9(this,t)}static Vi(e,t){return new yg(e,t)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return oe.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((s=>s?oe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,(a=>this.wr(e,a,t).next((u=>{u||(r++,s.removeEntry(a,Ce.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vm(e.data.value)),t}wr(e,t,r){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class U_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=We(),i=We();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new U_(e,t.fromCache,r,i)}}class oH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class aH{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Pz()?8:DF(Un())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.gs(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ps(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new oH;return this.ys(e,t,a).next((u=>{if(s.result=u,this.As)return this.ws(e,t,a,u.size)}))})).next((()=>s.result))}ws(e,t,r,i){return r.documentReadCount<this.Vs?(Lu()<=Ge.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Vu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(Lu()<=Ge.DEBUG&&ge("QueryEngine","Query:",Vu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Lu()<=Ge.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Vu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(t))):oe.resolve())}gs(e,t){if(oR(t))return oe.resolve(null);let r=Ji(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=dg(t,null,"F"),r=Ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=We(...s);return this.fs.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.bs(t,u);return this.Ss(t,f,a,h.readTime)?this.gs(e,dg(t,null,"F")):this.Ds(e,f,t,h)}))))})))))}ps(e,t,r,i){return oR(t)||i.isEqual(Ce.min())?oe.resolve(null):this.fs.getDocuments(e,r).next((s=>{const a=this.bs(t,s);return this.Ss(t,a,r,i)?oe.resolve(null):(Lu()<=Ge.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vu(t)),this.Ds(e,a,t,CF(i,Pf)).next((u=>u)))}))}bs(e,t){let r=new un(UN(e));return t.forEach(((i,s)=>{My(e,s)&&(r=r.add(s))})),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,t,r){return Lu()<=Ge.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Vu(t)),this.fs.getDocumentsMatchingQuery(e,t,ia.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const B_="LocalStore",lH=3e8;class uH{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Ct(Ke),this.Fs=new zl((s=>R_(s)),k_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function cH(n,e,t,r){return new uH(n,e,t,r)}async function hO(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],u=[];let h=We();for(const f of i){a.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of s){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ns:f,removedBatchIds:a,addedBatchIds:u})))}))}))}function hH(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,p){const m=f.batch,v=m.keys();let E=oe.resolve();return v.forEach((T=>{E=E.next((()=>p.getEntry(h,T))).next((S=>{const w=f.docVersions.get(T);Je(w!==null,48541),S.version.compareTo(w)<0&&(m.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),p.addEntry(S)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(h,m)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=We();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function fO(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function fH(n,e){const t=Me(n),r=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const u=[];e.targetChanges.forEach(((p,m)=>{const v=i.get(m);if(!v)return;u.push(t.li.removeMatchingKeys(s,p.removedDocuments,m).next((()=>t.li.addMatchingKeys(s,p.addedDocuments,m))));let E=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(Dn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(m,E),(function(S,w,C){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=lH?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(v,E,p)&&u.push(t.li.updateTargetData(s,E))}));let h=$s(),f=We();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))})),u.push(dH(s,a,e.documentUpdates).next((p=>{h=p.Bs,f=p.Ls}))),!r.isEqual(Ce.min())){const p=t.li.getLastRemoteSnapshotVersion(s).next((m=>t.li.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(p)}return oe.waitFor(u).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,h,f))).next((()=>h))})).then((s=>(t.vs=i,s)))}function dH(n,e,t){let r=We(),i=We();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=$s();return t.forEach(((u,h)=>{const f=s.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Ce.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):ge(B_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{Bs:a,Ls:i}}))}function pH(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=A_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function mH(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.li.getTargetData(r,e).next((s=>s?(i=s,oe.resolve(i)):t.li.allocateTargetId(r).next((a=>(i=new Ho(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function KE(n,e,t){const r=Me(n),i=r.vs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!wc(a))throw a;ge(B_,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function bR(n,e,t){const r=Me(n);let i=Ce.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(h,f,p){const m=Me(h),v=m.Fs.get(p);return v!==void 0?oe.resolve(m.vs.get(v)):m.li.getTargetData(f,p)})(r,a,Ji(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,u.targetId).next((h=>{s=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:Ce.min(),t?s:We()))).next((u=>(gH(r,n9(e),u),{documents:u,ks:s})))))}function gH(n,e,t){let r=n.Ms.get(e)||Ce.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Ms.set(e,r)}class ER{constructor(){this.activeTargetIds=l9()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yH{constructor(){this.vo=new ER,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new ER,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vH{Mo(e){}shutdown(){}}const TR="ConnectivityMonitor";class _R{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ge(TR,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ge(TR,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let hm=null;function WE(){return hm===null?hm=(function(){return 268435456+Math.round(2147483648*Math.random())})():hm++,"0x"+hm.toString(16)}const Cb="RestConnection",bH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class EH{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===cg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){const a=WE(),u=this.Qo(e,t.toUriEncodedString());ge(Cb,`Sending RPC '${e}' ${a}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,s);const{host:f}=new URL(u),p=ma(f);return this.zo(e,u,h,r,p).then((m=>(ge(Cb,`Received RPC '${e}' ${a}: `,m),m)),(m=>{throw Il(Cb,`RPC '${e}' ${a} failed with error: `,m,"url: ",u,"request:",r),m}))}jo(e,t,r,i,s,a){return this.Wo(e,t,r,i,s)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_c})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}Qo(e,t){const r=bH[e];let i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class TH{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const On="WebChannelConnection",Bh=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class ec extends EH{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ec.c_){const e=pN();Bh(e,dN.STAT_EVENT,(t=>{t.stat===VE.PROXY?ge(On,"STAT_EVENT: detected buffering proxy"):t.stat===VE.NOPROXY&&ge(On,"STAT_EVENT: detected no buffering proxy")})),ec.c_=!0}}zo(e,t,r,i,s){const a=WE();return new Promise(((u,h)=>{const f=new hN;f.setWithCredentials(!0),f.listenOnce(fN.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Lm.NO_ERROR:const m=f.getResponseJson();ge(On,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),u(m);break;case Lm.TIMEOUT:ge(On,`RPC '${e}' ${a} timed out`),h(new fe(re.DEADLINE_EXCEEDED,"Request time out"));break;case Lm.HTTP_ERROR:const v=f.getStatus();if(ge(On,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const T=E?.error;if(T&&T.status&&T.message){const S=(function(C){const N=C.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(N)>=0?N:re.UNKNOWN})(T.status);h(new fe(S,T.message))}else h(new fe(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new fe(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ge(On,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(i);ge(On,`RPC '${e}' ${a} sending request:`,i),f.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=WE(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ge(On,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=a.createWebChannel(f,u);this.I_(p);let m=!1,v=!1;const E=new TH({Ho:T=>{v?ge(On,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(m||(ge(On,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),ge(On,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},Jo:()=>p.close()});return Bh(p,Xh.EventType.OPEN,(()=>{v||(ge(On,`RPC '${e}' stream ${i} transport opened.`),E.i_())})),Bh(p,Xh.EventType.CLOSE,(()=>{v||(v=!0,ge(On,`RPC '${e}' stream ${i} transport closed`),E.o_(),this.E_(p))})),Bh(p,Xh.EventType.ERROR,(T=>{v||(v=!0,Il(On,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),E.o_(new fe(re.UNAVAILABLE,"The operation could not be completed")))})),Bh(p,Xh.EventType.MESSAGE,(T=>{if(!v){const S=T.data[0];Je(!!S,16349);const w=S,C=w?.error||w[0]?.error;if(C){ge(On,`RPC '${e}' stream ${i} received error:`,C);const N=C.status;let V=(function(Z){const I=Jt[Z];if(I!==void 0)return XN(I)})(N),$=C.message;N==="NOT_FOUND"&&$.includes("database")&&$.includes("does not exist")&&$.includes(this.databaseId.database)&&Il(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),V===void 0&&(V=re.INTERNAL,$="Unknown error status: "+N+" with message "+C.message),v=!0,E.o_(new fe(V,$)),p.close()}else ge(On,`RPC '${e}' stream ${i} received:`,S),E.__(S)}})),ec.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return mN()}}function _H(n){return new ec(n)}function Rb(){return typeof document<"u"?document:null}function Py(n){return new x9(n,!0)}ec.c_=!1;class z_{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const SR="PersistentStream";class dO{constructor(e,t,r,i,s,a,u,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new z_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(qs(t.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new fe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(SR,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ge(SR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SH extends dO{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=I9(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ce.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ce.min():a.readTime?Sr(a.readTime):Ce.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=GE(this.serializer),t.addTarget=(function(s,a){let u;const h=a.target;if(u=FE(h)?{documents:D9(s,h)}:{query:N9(s,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=eO(s,a.resumeToken);const f=qE(s,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ce.min())>0){u.readTime=mg(s,a.snapshotVersion.toTimestamp());const f=qE(s,a.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=P9(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=GE(this.serializer),t.removeTarget=e,this.K_(t)}}class wH extends dO{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=M9(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=GE(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>iO(this.serializer,r)))};this.K_(t)}}class AH{}class xH extends AH{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Wo(e,$E(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(re.UNKNOWN,s.toString())}))}jo(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.jo(e,$E(t,r),i,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(re.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function CH(n,e,t,r){return new xH(n,e,t,r)}class RH{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qs(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ml="RemoteStore";class kH{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo((a=>{r.enqueueAndForget((async()=>{jl(this)&&(ge(Ml,"Restarting streams for network reachability change."),await(async function(h){const f=Me(h);f.Ea.add(4),await bd(f),f.Va.set("Unknown"),f.Ea.delete(4),await Ly(f)})(this))}))})),this.Va=new RH(r,i)}}async function Ly(n){if(jl(n))for(const e of n.Ra)await e(!0)}async function bd(n){for(const e of n.Ra)await e(!1)}function pO(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),q_(t)?H_(t):xc(t).O_()&&F_(t,e))}function j_(n,e){const t=Me(n),r=xc(t);t.Ia.delete(e),r.O_()&&mO(t,e),t.Ia.size===0&&(r.O_()?r.L_():jl(t)&&t.Va.set("Unknown"))}function F_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xc(n).Z_(e)}function mO(n,e){n.da.$e(e),xc(n).X_(e)}function H_(n){n.da=new _9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),xc(n).start(),n.Va.ua()}function q_(n){return jl(n)&&!xc(n).x_()&&n.Ia.size>0}function jl(n){return Me(n).Ea.size===0}function gO(n){n.da=void 0}async function IH(n){n.Va.set("Online")}async function MH(n){n.Ia.forEach(((e,t)=>{F_(n,e)}))}async function DH(n,e){gO(n),q_(n)?(n.Va.ha(e),H_(n)):n.Va.set("Unknown")}async function NH(n,e,t){if(n.Va.set("Online"),e instanceof ZN&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.da.removeTarget(u))})(n,e)}catch(r){ge(Ml,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vg(n,r)}else if(e instanceof zm?n.da.Xe(e):e instanceof JN?n.da.st(e):n.da.tt(e),!t.isEqual(Ce.min()))try{const r=await fO(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const u=s.da.Tt(a);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=s.Ia.get(f);p&&s.Ia.set(f,p.withResumeToken(h.resumeToken,a))}})),u.targetMismatches.forEach(((h,f)=>{const p=s.Ia.get(h);if(!p)return;s.Ia.set(h,p.withResumeToken(Dn.EMPTY_BYTE_STRING,p.snapshotVersion)),mO(s,h);const m=new Ho(p.target,h,f,p.sequenceNumber);F_(s,m)})),s.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){ge(Ml,"Failed to raise snapshot:",r),await vg(n,r)}}async function vg(n,e,t){if(!wc(e))throw e;n.Ea.add(1),await bd(n),n.Va.set("Offline"),t||(t=()=>fO(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(Ml,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ly(n)}))}function yO(n,e){return e().catch((t=>vg(n,t,e)))}async function Vy(n){const e=Me(n),t=la(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:A_;for(;OH(e);)try{const i=await pH(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,PH(e,i)}catch(i){await vg(e,i)}vO(e)&&bO(e)}function OH(n){return jl(n)&&n.Ta.length<10}function PH(n,e){n.Ta.push(e);const t=la(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function vO(n){return jl(n)&&!la(n).x_()&&n.Ta.length>0}function bO(n){la(n).start()}async function LH(n){la(n).ra()}async function VH(n){const e=la(n);for(const t of n.Ta)e.ea(t.mutations)}async function UH(n,e,t){const r=n.Ta.shift(),i=N_.from(r,e,t);await yO(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Vy(n)}async function BH(n,e){e&&la(n).Y_&&await(async function(r,i){if((function(a){return QN(a)&&a!==re.ABORTED})(i.code)){const s=r.Ta.shift();la(r).B_(),await yO(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Vy(r)}})(n,e),vO(n)&&bO(n)}async function wR(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),ge(Ml,"RemoteStore received new credentials");const r=jl(t);t.Ea.add(3),await bd(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ly(t)}async function zH(n,e){const t=Me(n);e?(t.Ea.delete(2),await Ly(t)):e||(t.Ea.add(2),await bd(t),t.Va.set("Unknown"))}function xc(n){return n.ma||(n.ma=(function(t,r,i){const s=Me(t);return s.sa(),new SH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:IH.bind(null,n),Yo:MH.bind(null,n),t_:DH.bind(null,n),J_:NH.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),q_(n)?H_(n):n.Va.set("Unknown")):(await n.ma.stop(),gO(n))}))),n.ma}function la(n){return n.fa||(n.fa=(function(t,r,i){const s=Me(t);return s.sa(),new wH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:LH.bind(null,n),t_:BH.bind(null,n),ta:VH.bind(null,n),na:UH.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Vy(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(Ml,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class $_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new $_(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G_(n,e){if(qs("AsyncQueue",`${e}: ${n}`),wc(n))return new fe(re.UNAVAILABLE,`${e}: ${n}`);throw n}class tc{static emptySet(e){return new tc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=Jh(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new tc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class AR{constructor(){this.ga=new Ct(Te.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class cc{constructor(e,t,r,i,s,a,u,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new cc(e,t,tc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Iy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class jH{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class FH{constructor(){this.queries=xR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Me(t),s=i.queries;i.queries=xR(),s.forEach(((a,u)=>{for(const h of u.ba)h.onError(r)}))})(this,new fe(re.ABORTED,"Firestore shutting down"))}}function xR(){return new zl((n=>VN(n)),Iy)}async function EO(n,e){const t=Me(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new jH,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=G_(a,`Initialization of query '${Vu(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.ba.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&K_(t)}async function TO(n,e){const t=Me(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.ba.indexOf(e);a>=0&&(s.ba.splice(a,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function HH(n,e){const t=Me(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.ba)u.Fa(i)&&(r=!0);a.wa=i}}r&&K_(t)}function qH(n,e,t){const r=Me(n),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(t);r.queries.delete(e)}function K_(n){n.Ca.forEach((e=>{e.next()}))}var YE,CR;(CR=YE||(YE={})).Ma="default",CR.Cache="cache";class _O{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new cc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==YE.Cache}}class SO{constructor(e){this.key=e}}class wO{constructor(e){this.key=e}}class $H{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.eu=UN(e),this.tu=new tc(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new AR,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,m)=>{const v=i.get(p),E=My(this.query,m)?m:null,T=!!v&&this.mutatedKeys.has(v.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let w=!1;v&&E?v.data.isEqual(E.data)?T!==S&&(r.track({type:3,doc:E}),w=!0):this.su(v,E)||(r.track({type:2,doc:E}),w=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(u=!0)):!v&&E?(r.track({type:0,doc:E}),w=!0):v&&!E&&(r.track({type:1,doc:v}),w=!0,(h||f)&&(u=!0)),w&&(E?(a=a.add(E),s=S?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Ss:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((p,m)=>(function(E,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Vt:w})}};return S(E)-S(T)})(p.type,m.type)||this.eu(p.doc,m.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,f=h!==this.Xa;return this.Xa=h,a.length!==0||f?{snapshot:new cc(this.query,e.tu,s,a,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AR,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new wO(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new SO(r))})),t}cu(e){this.Za=e.ks,this.Ya=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const W_="SyncEngine";class GH{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KH{constructor(e){this.key=e,this.hu=!1}}class WH{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new zl((u=>VN(u)),Iy),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ct(Te.comparator),this.Au=new Map,this.Vu=new L_,this.du={},this.mu=new Map,this.fu=uc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YH(n,e,t=!0){const r=IO(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await AO(r,e,t,!0),i}async function QH(n,e){const t=IO(n);await AO(t,e,!0,!1)}async function AO(n,e,t,r){const i=await mH(n.localStore,Ji(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await XH(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&pO(n.remoteStore,i),u}async function XH(n,e,t,r,i){n.pu=(m,v,E)=>(async function(S,w,C,N){let V=w.view.ru(C);V.Ss&&(V=await bR(S.localStore,w.query,!1).then((({documents:I})=>w.view.ru(I,V))));const $=N&&N.targetChanges.get(w.targetId),F=N&&N.targetMismatches.get(w.targetId)!=null,Z=w.view.applyChanges(V,S.isPrimaryClient,$,F);return kR(S,w.targetId,Z.au),Z.snapshot})(n,m,v,E);const s=await bR(n.localStore,e,!0),a=new $H(e,s.ks),u=a.ru(s.documents),h=vd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(u,n.isPrimaryClient,h);kR(n,t,f.au);const p=new GH(e,t,a);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function JH(n,e,t){const r=Me(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Iy(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await KE(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&j_(r.remoteStore,i.targetId),QE(r,i.targetId)})).catch(Sc)):(QE(r,i.targetId),await KE(r.localStore,i.targetId,!0))}async function ZH(n,e){const t=Me(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),j_(t.remoteStore,r.targetId))}async function eq(n,e,t){const r=aq(n);try{const i=await(function(a,u){const h=Me(a),f=ft.now(),p=u.reduce(((E,T)=>E.add(T.key)),We());let m,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let T=$s(),S=We();return h.xs.getEntries(E,p).next((w=>{T=w,T.forEach(((C,N)=>{N.isValidDocument()||(S=S.add(C))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,T))).next((w=>{m=w;const C=[];for(const N of u){const V=g9(N,m.get(N.key).overlayedDocument);V!=null&&C.push(new Ea(N.key,V,kN(V.value.mapValue),Gn.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,C,u)})).next((w=>{v=w;const C=w.applyToLocalDocumentSet(m,S);return h.documentOverlayCache.saveOverlays(E,w.batchId,C)}))})).then((()=>({batchId:v.batchId,changes:zN(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,h){let f=a.du[a.currentUser.toKey()];f||(f=new Ct(Ke)),f=f.insert(u,h),a.du[a.currentUser.toKey()]=f})(r,i.batchId,t),await Ed(r,i.changes),await Vy(r.remoteStore)}catch(i){const s=G_(i,"Failed to persist write");t.reject(s)}}async function xO(n,e){const t=Me(n);try{const r=await fH(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Je(a.hu,14607):i.removedDocuments.size>0&&(Je(a.hu,42227),a.hu=!1))})),await Ed(t,r,e)}catch(r){await Sc(r)}}function RR(n,e,t){const r=Me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){const h=Me(a);h.onlineState=u;let f=!1;h.queries.forEach(((p,m)=>{for(const v of m.ba)v.va(u)&&(f=!0)})),f&&K_(h)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tq(n,e,t){const r=Me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Ct(Te.comparator);a=a.insert(s,mn.newNoDocument(s,Ce.min()));const u=We().add(s),h=new Oy(Ce.min(),new Map,new Ct(Ke),a,u);await xO(r,h),r.Ru=r.Ru.remove(s),r.Au.delete(e),Y_(r)}else await KE(r.localStore,e,!1).then((()=>QE(r,e,t))).catch(Sc)}async function nq(n,e){const t=Me(n),r=e.batch.batchId;try{const i=await hH(t.localStore,e);RO(t,r,null),CO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ed(t,i)}catch(i){await Sc(i)}}async function rq(n,e,t){const r=Me(n);try{const i=await(function(a,u){const h=Me(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next((m=>(Je(m!==null,37113),p=m.keys(),h.mutationQueue.removeMutationBatch(f,m)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);RO(r,e,t),CO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ed(r,i)}catch(i){await Sc(i)}}function CO(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function RO(n,e,t){const r=Me(n);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function QE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||kO(n,r)}))}function kO(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(j_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Y_(n))}function kR(n,e,t){for(const r of t)r instanceof SO?(n.Vu.addReference(r.key,e),iq(n,r)):r instanceof wO?(ge(W_,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||kO(n,r.key)):we(19791,{wu:r})}function iq(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(ge(W_,"New document in limbo: "+t),n.Eu.add(r),Y_(n))}function Y_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(ht.fromString(e)),r=n.fu.next();n.Au.set(r,new KH(t)),n.Ru=n.Ru.insert(t,r),pO(n.remoteStore,new Ho(Ji(I_(t.path)),r,"TargetPurposeLimboResolution",Ry.ce))}}async function Ed(n,e,t){const r=Me(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{a.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(f){i.push(f);const p=U_.Es(h.targetId,f);s.push(p)}})))})),await Promise.all(a),r.Pu.J_(i),await(async function(h,f){const p=Me(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>oe.forEach(f,(v=>oe.forEach(v.Ts,(E=>p.persistence.referenceDelegate.addReference(m,v.targetId,E))).next((()=>oe.forEach(v.Is,(E=>p.persistence.referenceDelegate.removeReference(m,v.targetId,E)))))))))}catch(m){if(!wc(m))throw m;ge(B_,"Failed to update sequence numbers: "+m)}for(const m of f){const v=m.targetId;if(!m.fromCache){const E=p.vs.get(v),T=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(T);p.vs=p.vs.insert(v,S)}}})(r.localStore,s))}async function sq(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){ge(W_,"User change. New user:",e.toKey());const r=await hO(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((h=>{h.reject(new fe(re.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ed(t,r.Ns)}}function oq(n,e){const t=Me(n),r=t.Au.get(e);if(r&&r.hu)return We().add(r.key);{let i=We();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}function IO(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tq.bind(null,e),e.Pu.J_=HH.bind(null,e.eventManager),e.Pu.yu=qH.bind(null,e.eventManager),e}function aq(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rq.bind(null,e),e}class bg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Py(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return cH(this.persistence,new aH,e.initialUser,this.serializer)}Cu(e){return new cO(V_.Vi,this.serializer)}Du(e){return new yH}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bg.provider={build:()=>new bg};class lq extends bg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof yg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new G9(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new cO((r=>yg.Vi(r,t)),this.serializer)}}class XE{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sq.bind(null,this.syncEngine),await zH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FH})()}createDatastore(e){const t=Py(e.databaseInfo.databaseId),r=_H(e.databaseInfo);return CH(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,u){return new kH(r,i,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>RR(this.syncEngine,t,0)),(function(){return _R.v()?new _R:new vH})())}createSyncEngine(e,t){return(function(i,s,a,u,h,f,p){const m=new WH(i,s,a,u,h,f);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Me(t);ge(Ml,"RemoteStore shutting down."),r.Ea.add(5),await bd(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}XE.provider={build:()=>new XE};class MO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}let uq=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new fe(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,s){const a=Me(i),u={documents:s.map((m=>gg(a.serializer,m)))},h=await a.jo("BatchGetDocuments",a.serializer.databaseId,ht.emptyPath(),u,s.length),f=new Map;h.forEach((m=>{const v=k9(a.serializer,m);f.set(v.key.toString(),v)}));const p=[];return s.forEach((m=>{const v=f.get(m.toString());Je(!!v,55234,{key:m}),p.push(v)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new D_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Te.fromPath(r);this.mutations.push(new YN(i,this.precondition(i)))})),await(async function(r,i){const s=Me(r),a={writes:i.map((u=>iO(s.serializer,u)))};await s.Wo("Commit",s.serializer.databaseId,ht.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw we(50498,{Gu:e.constructor.name});t=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new fe(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ce.min())?Gn.exists(!1):Gn.updateTime(t):Gn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ce.min()))throw new fe(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gn.updateTime(t)}return Gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class cq{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new z_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new uq(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Zu(i)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!gd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!QN(t)}return!1}}const ua="FirestoreClient";class hq{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=Ln.UNAUTHENTICATED,this.clientId=w_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{ge(ua,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ge(ua,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=G_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function kb(n,e){n.asyncQueue.verifyOperationInProgress(),ge(ua,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await hO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function IR(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fq(n);ge(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>wR(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>wR(e.remoteStore,i))),n._onlineComponents=e}async function fq(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(ua,"Using user provided OfflineComponentProvider");try{await kb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Il("Error using user provided cache. Falling back to memory cache: "+t),await kb(n,new bg)}}else ge(ua,"Using default OfflineComponentProvider"),await kb(n,new lq(void 0));return n._offlineComponents}async function Q_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(ua,"Using user provided OnlineComponentProvider"),await IR(n,n._uninitializedComponentsProvider._online)):(ge(ua,"Using default OnlineComponentProvider"),await IR(n,new XE))),n._onlineComponents}function dq(n){return Q_(n).then((e=>e.syncEngine))}function pq(n){return Q_(n).then((e=>e.datastore))}async function DO(n){const e=await Q_(n),t=e.eventManager;return t.onListen=YH.bind(null,e.syncEngine),t.onUnlisten=JH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZH.bind(null,e.syncEngine),t}function mq(n,e,t={}){const r=new Xi;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,h,f){const p=new MO({next:v=>{p.Nu(),a.enqueueAndForget((()=>TO(s,m)));const E=v.docs.has(u);!E&&v.fromCache?f.reject(new fe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&h&&h.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),m=new _O(I_(u.path),p,{includeMetadataChanges:!0,Ka:!0});return EO(s,m)})(await DO(n),n.asyncQueue,e,t,r))),r.promise}function gq(n,e,t={}){const r=new Xi;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,h,f){const p=new MO({next:v=>{p.Nu(),a.enqueueAndForget((()=>TO(s,m))),v.fromCache&&h.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),m=new _O(u,p,{includeMetadataChanges:!0,Ka:!0});return EO(s,m)})(await DO(n),n.asyncQueue,e,t,r))),r.promise}function yq(n,e){const t=new Xi;return n.asyncQueue.enqueueAndForget((async()=>eq(await dq(n),e,t))),t.promise}function vq(n,e,t){const r=new Xi;return n.asyncQueue.enqueueAndForget((async()=>{const i=await pq(n);new cq(n.asyncQueue,i,t,e,r).ju()})),r.promise}function NO(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const bq="ComponentProvider",MR=new Map;function Eq(n,e,t,r,i){return new VF(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,NO(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const OO="firestore.googleapis.com",DR=!0;class NR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OO,this.ssl=DR}else this.host=e.host,this.ssl=e.ssl??DR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<q9)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NO(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uy{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new gF;switch(r.type){case"firstParty":return new EF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=MR.get(t);r&&(ge(bq,"Removing Datastore"),MR.delete(t),r.terminate())})(this),Promise.resolve()}}function Tq(n,e,t,r={}){n=ts(n,Uy);const i=ma(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(l_(`https://${u}`),u_("Firestore",!0)),s.host!==OO&&s.host!==u&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...s,host:u,ssl:i,emulatorOptions:r};if(!Al(h,a)&&(n._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Ln.MOCK_USER;else{f=AD(r.mockUserToken,n._app?.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new fe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ln(m)}n._authCredentials=new yF(new yN(f,p))}}class Ta{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ta(this.firestore,e,this._query)}}class Ot{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(md(t,Ot._jsonSchema))return new Ot(e,r||null,new Te(ht.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:tn("string",Ot._jsonSchemaVersion),referencePath:tn("string")};class Xo extends Ta{constructor(e,t,r){super(e,t,I_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Te(e))}withConverter(e){return new Xo(this.firestore,e,this._path)}}function PO(n,e,...t){if(n=wt(n),vN("collection","path",e),n instanceof Uy){const r=ht.fromString(e,...t);return GC(r),new Xo(n,null,r)}{if(!(n instanceof Ot||n instanceof Xo))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return GC(r),new Xo(n.firestore,null,r)}}function Us(n,e,...t){if(n=wt(n),arguments.length===1&&(e=w_.newId()),vN("doc","path",e),n instanceof Uy){const r=ht.fromString(e,...t);return $C(r),new Ot(n,null,new Te(r))}{if(!(n instanceof Ot||n instanceof Xo))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return $C(r),new Ot(n.firestore,n instanceof Xo?n.converter:null,new Te(r))}}const OR="AsyncQueue";class PR{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new z_(this,"async_queue_retry"),this._c=()=>{const r=Rb();r&&ge(OR,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Rb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!wc(e))throw e;ge(OR,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,qs("INTERNAL UNHANDLED ERROR: ",LR(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=$_.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&we(47125,{Pc:LR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function LR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Cc extends Uy{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new PR,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PR(e),this._firestoreClient=void 0,await e}}}function _q(n,e){const t=typeof n=="object"?n:f_(),r=typeof n=="string"?n:cg,i=Sy(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=_D("firestore");s&&Tq(i,...s)}return i}function By(n){if(n._terminated)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Sq(n),n._firestoreClient}function Sq(n){const e=n._freezeSettings(),t=Eq(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new hq(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}class br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new br(Dn.fromBase64String(e))}catch(t){throw new fe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new br(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:br._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(md(e,br._jsonSchema))return br.fromBase64String(e.bytes)}}br._jsonSchemaVersion="firestore/bytes/1.0",br._jsonSchema={type:tn("string",br._jsonSchemaVersion),bytes:tn("string")};class zy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jy{constructor(e){this._methodName=e}}class Zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(e){if(md(e,Zi._jsonSchema))return new Zi(e.latitude,e.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:tn("string",Zi._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};class mi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(md(e,mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new mi(e.vectorValues);throw new fe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:tn("string",mi._jsonSchemaVersion),vectorValues:tn("object")};const wq=/^__.*__$/;class Aq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ea(e,this.data,this.fieldMask,t,this.fieldTransforms):new yd(e,this.data,t,this.fieldTransforms)}}class LO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ea(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{dataSource:n})}}class X_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new X_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Eg(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(VO(this.dataSource)&&wq.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class xq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Py(e)}createContext(e,t,r,i=!1){return new X_({dataSource:e,methodName:t,targetDoc:r,path:In.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fy(n){const e=n._freezeSettings(),t=Py(n._databaseId);return new xq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function UO(n,e,t,r,i,s={}){const a=n.createContext(s.merge||s.mergeFields?2:0,e,t,i);Z_("Data must be an object, but it was:",a,r);const u=jO(r,a);let h,f;if(s.merge)h=new Tr(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const v=Dl(e,m,t);if(!a.contains(v))throw new fe(re.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);qO(p,v)||p.push(v)}h=new Tr(p),f=a.fieldTransforms.filter((m=>h.covers(m.field)))}else h=null,f=a.fieldTransforms;return new Aq(new $n(u),h,f)}class Hy extends jy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hy}}class J_ extends jy{_toFieldTransform(e){return new f9(e.path,new zf)}isEqual(e){return e instanceof J_}}function BO(n,e,t,r){const i=n.createContext(1,e,t);Z_("Data must be an object, but it was:",i,r);const s=[],a=$n.empty();ba(r,((h,f)=>{const p=HO(e,h,t);f=wt(f);const m=i.childContextForFieldPath(p);if(f instanceof Hy)s.push(p);else{const v=Td(f,m);v!=null&&(s.push(p),a.set(p,v))}}));const u=new Tr(s);return new LO(a,u,i.fieldTransforms)}function zO(n,e,t,r,i,s){const a=n.createContext(1,e,t),u=[Dl(e,r,t)],h=[i];if(s.length%2!=0)throw new fe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)u.push(Dl(e,s[v])),h.push(s[v+1]);const f=[],p=$n.empty();for(let v=u.length-1;v>=0;--v)if(!qO(f,u[v])){const E=u[v];let T=h[v];T=wt(T);const S=a.childContextForFieldPath(E);if(T instanceof Hy)f.push(E);else{const w=Td(T,S);w!=null&&(f.push(E),p.set(E,w))}}const m=new Tr(f);return new LO(p,m,a.fieldTransforms)}function Cq(n,e,t,r=!1){return Td(t,n.createContext(r?4:3,e))}function Td(n,e){if(FO(n=wt(n)))return Z_("Unsupported field value:",e,n),jO(n,e);if(n instanceof jy)return(function(r,i){if(!VO(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const u of r){let h=Td(u,i.childContextForArray(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return u9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ft.fromDate(r);return{timestampValue:mg(i.serializer,s)}}if(r instanceof ft){const s=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mg(i.serializer,s)}}if(r instanceof Zi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof br)return{bytesValue:eO(i.serializer,r._byteString)};if(r instanceof Ot){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:P_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mi)return(function(a,u){const h=a instanceof mi?a.toArray():a;return{mapValue:{fields:{[CN]:{stringValue:RN},[hg]:{arrayValue:{values:h.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return M_(u.serializer,p)}))}}}}}})(r,i);if(lO(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Cy(r)}`)})(n,e)}function jO(n,e){const t={};return TN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(n,((r,i)=>{const s=Td(i,e.childContextForField(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function FO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Zi||n instanceof br||n instanceof Ot||n instanceof jy||n instanceof mi||lO(n))}function Z_(n,e,t){if(!FO(t)||!bN(t)){const r=Cy(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Dl(n,e,t){if((e=wt(e))instanceof zy)return e._internalPath;if(typeof e=="string")return HO(n,e);throw Eg("Field path arguments must be of type string or ",n,!1,void 0,t)}const Rq=new RegExp("[~\\*/\\[\\]]");function HO(n,e,t){if(e.search(Rq)>=0)throw Eg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zy(...e.split("."))._internalPath}catch{throw Eg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Eg(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new fe(re.INVALID_ARGUMENT,u+n+h)}function qO(n,e){return n.some((t=>t.isEqual(e)))}class $O{convertValue(e,t="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ba(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[hg].arrayValue?.values?.map((r=>Ft(r.doubleValue)));return new mi(t)}convertGeoPoint(e){return new Zi(Ft(e.latitude),Ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ky(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lf(e));default:return null}}convertTimestamp(e){const t=sa(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);Je(aO(r),9688,{name:e});const i=new Vf(r.get(1),r.get(3)),s=new Te(r.popFirst(5));return i.isEqual(t)||qs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class eS extends $O{constructor(e){super(),this.firestore=e}convertBytes(e){return new br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function GO(){return new J_("serverTimestamp")}const VR="@firebase/firestore",UR="4.11.0";class Tg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Dl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kq extends Tg{data(){return super.data()}}function Iq(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tS{}class nS extends tS{}function Mq(n,e,...t){let r=[];e instanceof tS&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((h=>h instanceof rS)).length,u=s.filter((h=>h instanceof qy)).length;if(a>1||a>0&&u>0)throw new fe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class qy extends nS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new qy(e,t,r)}_apply(e){const t=this._parse(e);return KO(e._query,t),new Ta(e.firestore,e.converter,HE(e._query,t))}_parse(e){const t=Fy(e.firestore);return(function(s,a,u,h,f,p,m){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new fe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){zR(m,p);const T=[];for(const S of m)T.push(BR(h,s,S));v={arrayValue:{values:T}}}else v=BR(h,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||zR(m,p),v=Cq(u,a,m,p==="in"||p==="not-in");return en.create(f,p,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Dq(n,e,t){const r=e,i=Dl("where",n);return qy._create(i,r,t)}class rS extends tS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rS(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const u=s.getFlattenedFilters();for(const h of u)KO(a,h),a=HE(a,h)})(e._query,t),new Ta(e.firestore,e.converter,HE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iS extends nS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new iS(e,t)}_apply(e){const t=(function(i,s,a){if(i.startAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bf(s,a)})(e._query,this._field,this._direction);return new Ta(e.firestore,e.converter,t9(e._query,t))}}function Nq(n,e="asc"){const t=e,r=Dl("orderBy",n);return iS._create(r,t)}class sS extends nS{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new sS(e,t,r)}_apply(e){return new Ta(e.firestore,e.converter,dg(e._query,this._limit,this._limitType))}}function Oq(n){return sS._create("limit",n,"F")}function BR(n,e,t){if(typeof(t=wt(t))=="string"){if(t==="")throw new fe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LN(e)&&t.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ht.fromString(t));if(!Te.isDocumentKey(r))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eR(n,new Te(r))}if(t instanceof Ot)return eR(n,t._key);throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cy(t)}.`)}function zR(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KO(n,e){const t=(function(i,s){for(const a of i)for(const u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function WO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Pq extends $O{constructor(e){super(),this.firestore=e}convertBytes(e){return new br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}class qu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends Tg{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Dl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Jo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jo._jsonSchema={type:tn("string",Jo._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class jm extends Jo{data(e={}){return super.data(e)}}class nc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new jm(this._firestore,this._userDataWriter,r.key,r,new qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{const h=new jm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new qu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const h=new jm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new qu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:Lq(u.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=w_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Lq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}nc._jsonSchemaVersion="firestore/querySnapshot/1.0",nc._jsonSchema={type:tn("string",nc._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};const Vq={maxAttempts:5};function ef(n,e){if((n=wt(n)).firestore!==e)throw new fe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Uq{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fy(e)}get(e){const t=ef(e,this._firestore),r=new Pq(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return we(24041);const s=i[0];if(s.isFoundDocument())return new Tg(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Tg(this._firestore,r,t._key,null,t.converter);throw we(18433,{doc:s})}))}set(e,t,r){const i=ef(e,this._firestore),s=WO(i.converter,t,r),a=UO(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this}update(e,t,r,...i){const s=ef(e,this._firestore);let a;return a=typeof(t=wt(t))=="string"||t instanceof zy?zO(this._dataReader,"Transaction.update",s._key,t,r,i):BO(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this}delete(e){const t=ef(e,this._firestore);return this._transaction.delete(t._key),this}}let Bq=class extends Uq{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ef(e,this._firestore),r=new eS(this._firestore);return super.get(e).then((i=>new Jo(this._firestore,r,t._key,i._document,new qu(!1,!1),t.converter)))}};function zq(n,e,t){n=ts(n,Cc);const r={...Vq,...t};(function(a){if(a.maxAttempts<1)throw new fe(re.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=By(n);return vq(i,(s=>e(new Bq(n,s))),r)}function $y(n){n=ts(n,Ot);const e=ts(n.firestore,Cc),t=By(e);return mq(t,n._key).then((r=>Hq(e,n,r)))}function jq(n){n=ts(n,Ta);const e=ts(n.firestore,Cc),t=By(e),r=new eS(e);return Iq(n._query),gq(t,n._query).then((i=>new nc(e,r,n,i)))}function YO(n,e,t){n=ts(n,Ot);const r=ts(n.firestore,Cc),i=WO(n.converter,e,t),s=Fy(r);return QO(r,[UO(s,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Gn.none())])}function Fq(n,e,t,...r){n=ts(n,Ot);const i=ts(n.firestore,Cc),s=Fy(i);let a;return a=typeof(e=wt(e))=="string"||e instanceof zy?zO(s,"updateDoc",n._key,e,t,r):BO(s,"updateDoc",n._key,e),QO(i,[a.toMutation(n._key,Gn.exists(!0))])}function QO(n,e){const t=By(n);return yq(t,e)}function Hq(n,e,t){const r=t.docs.get(e._key),i=new eS(n);return new Jo(n,i,e._key,r,new qu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){mF(Bl),xl(new ra("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new Cc(new vF(r.getProvider("auth-internal")),new TF(a,r.getProvider("app-check-internal")),UF(a,i),a);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),Yi(VR,UR,e),Yi(VR,UR,"esm2020")})();var qq="firebase",$q="12.9.0";Yi(qq,$q,"app");const XO="firebasestorage.googleapis.com",JO="storageBucket",Gq=120*1e3,Kq=600*1e3;class Vt extends as{constructor(e,t,r=0){super(Ib(e),`Firebase Storage: ${t} (${Ib(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ib(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pt||(Pt={}));function Ib(n){return"storage/"+n}function oS(){const n="An unknown error occurred, please check the error payload for server response.";return new Vt(Pt.UNKNOWN,n)}function Wq(n){return new Vt(Pt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Yq(n){return new Vt(Pt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Qq(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Vt(Pt.UNAUTHENTICATED,n)}function Xq(){return new Vt(Pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Jq(n){return new Vt(Pt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Zq(){return new Vt(Pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e8(){return new Vt(Pt.CANCELED,"User canceled the upload/download.")}function t8(n){return new Vt(Pt.INVALID_URL,"Invalid URL '"+n+"'.")}function n8(n){return new Vt(Pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function r8(){return new Vt(Pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JO+"' property when initializing the app?")}function i8(){return new Vt(Pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function s8(){return new Vt(Pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function o8(n){return new Vt(Pt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function JE(n){return new Vt(Pt.INVALID_ARGUMENT,n)}function ZO(){return new Vt(Pt.APP_DELETED,"The Firebase app was deleted.")}function a8(n){return new Vt(Pt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mf(n,e){return new Vt(Pt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function zh(n){throw new Vt(Pt.INTERNAL_ERROR,"Internal error: "+n)}class _r{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_r.makeFromUrl(e,t)}catch{return new _r(e,"")}if(r.path==="")return r;throw n8(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),h={bucket:1,path:3};function f($){$.path_=decodeURIComponent($.path)}const p="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",E=new RegExp(`^https?://${m}/${p}/b/${i}/o${v}`,"i"),T={bucket:1,path:3},S=t===XO?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",C=new RegExp(`^https?://${S}/${i}/${w}`,"i"),V=[{regex:u,indices:h,postModify:s},{regex:E,indices:T,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let $=0;$<V.length;$++){const F=V[$],Z=F.regex.exec(e);if(Z){const I=Z[F.indices.bucket];let k=Z[F.indices.path];k||(k=""),r=new _r(I,k),F.postModify(r);break}}if(r==null)throw t8(e);return r}}class l8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function u8(n,e,t){let r=1,i=null,s=null,a=!1,u=0;function h(){return u===2}let f=!1;function p(...w){f||(f=!0,e.apply(null,w))}function m(w){i=setTimeout(()=>{i=null,n(E,h())},w)}function v(){s&&clearTimeout(s)}function E(w,...C){if(f){v();return}if(w){v(),p.call(null,w,...C);return}if(h()||a){v(),p.call(null,w,...C);return}r<64&&(r*=2);let V;u===1?(u=2,V=0):V=(r+Math.random())*1e3,m(V)}let T=!1;function S(w){T||(T=!0,v(),!f&&(i!==null?(w||(u=2),clearTimeout(i),m(0)):w||(u=1)))}return m(0),s=setTimeout(()=>{a=!0,S(!0)},t),S}function c8(n){n(!1)}function h8(n){return n!==void 0}function f8(n){return typeof n=="object"&&!Array.isArray(n)}function aS(n){return typeof n=="string"||n instanceof String}function jR(n){return lS()&&n instanceof Blob}function lS(){return typeof Blob<"u"}function FR(n,e,t,r){if(r<e)throw JE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw JE(`Invalid value for '${n}'. Expected ${t} or less.`)}function uS(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function e2(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var yl;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(yl||(yl={}));function d8(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class p8{constructor(e,t,r,i,s,a,u,h,f,p,m,v=!0,E=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=m,this.retry=v,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,S)=>{this.resolve_=T,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new fm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===yl.NO_ERROR,h=s.getStatus();if(!u||d8(h,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===yl.ABORT;r(!1,new fm(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new fm(f,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());h8(h)?s(h):s()}catch(h){a(h)}else if(u!==null){const h=oS();h.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,h)):a(h)}else if(i.canceled){const h=this.appDelete_?ZO():e8();a(h)}else{const h=Zq();a(h)}};this.canceled_?t(!1,new fm(!1,null,!0)):this.backoffId_=u8(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&c8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function m8(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function g8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function y8(n,e){e&&(n["X-Firebase-GMPID"]=e)}function v8(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function b8(n,e,t,r,i,s,a=!0,u=!1){const h=e2(n.urlParams),f=n.url+h,p=Object.assign({},n.headers);return y8(p,e),m8(p,t),g8(p,s),v8(p,r),new p8(f,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,u)}function E8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function T8(...n){const e=E8();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(lS())return new Blob(n);throw new Vt(Pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _8(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function S8(n){if(typeof atob>"u")throw o8("base-64");return atob(n)}const Wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mb{constructor(e,t){this.data=e,this.contentType=t||null}}function w8(n,e){switch(n){case Wi.RAW:return new Mb(t2(e));case Wi.BASE64:case Wi.BASE64URL:return new Mb(n2(n,e));case Wi.DATA_URL:return new Mb(x8(e),C8(e))}throw oS()}function t2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function A8(n){let e;try{e=decodeURIComponent(n)}catch{throw mf(Wi.DATA_URL,"Malformed data URL.")}return t2(e)}function n2(n,e){switch(n){case Wi.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw mf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wi.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw mf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=S8(e)}catch(i){throw i.message.includes("polyfill")?i:mf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class r2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw mf(Wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=R8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function x8(n){const e=new r2(n);return e.base64?n2(Wi.BASE64,e.rest):A8(e.rest)}function C8(n){return new r2(n).contentType}function R8(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class zo{constructor(e,t){let r=0,i="";jR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(jR(this.data_)){const r=this.data_,i=_8(r,e,t);return i===null?null:new zo(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new zo(r,!0)}}static getBlob(...e){if(lS()){const t=e.map(r=>r instanceof zo?r.data_:r);return new zo(T8.apply(null,t))}else{const t=e.map(a=>aS(a)?w8(Wi.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let u=0;u<a.length;u++)i[s++]=a[u]}),new zo(i,!0)}}uploadData(){return this.data_}}function i2(n){let e;try{e=JSON.parse(n)}catch{return null}return f8(e)?e:null}function k8(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function I8(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function s2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function M8(n,e){return e}let qn=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||M8}},dm=null;function D8(n){return!aS(n)||n.length<2?n:s2(n)}function o2(){if(dm)return dm;const n=[];n.push(new qn("bucket")),n.push(new qn("generation")),n.push(new qn("metageneration")),n.push(new qn("name","fullPath",!0));function e(s,a){return D8(a)}const t=new qn("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new qn("size");return i.xform=r,n.push(i),n.push(new qn("timeCreated")),n.push(new qn("updated")),n.push(new qn("md5Hash",null,!0)),n.push(new qn("cacheControl",null,!0)),n.push(new qn("contentDisposition",null,!0)),n.push(new qn("contentEncoding",null,!0)),n.push(new qn("contentLanguage",null,!0)),n.push(new qn("contentType",null,!0)),n.push(new qn("metadata","customMetadata",!0)),dm=n,dm}function N8(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new _r(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function O8(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return N8(r,n),r}function a2(n,e,t){const r=i2(e);return r===null?null:O8(n,r,t)}function P8(n,e,t,r){const i=i2(e);if(i===null||!aS(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(f=>{const p=n.bucket,m=n.fullPath,v="/b/"+a(p)+"/o/"+a(m),E=uS(v,t,r),T=e2({alt:"media",token:f});return E+T})[0]}function L8(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class l2{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function u2(n){if(!n)throw oS()}function V8(n,e){function t(r,i){const s=a2(n,i,e);return u2(s!==null),s}return t}function U8(n,e){function t(r,i){const s=a2(n,i,e);return u2(s!==null),P8(s,i,n.host,n._protocol)}return t}function c2(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Xq():i=Qq():t.getStatus()===402?i=Yq(n.bucket):t.getStatus()===403?i=Jq(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function B8(n){const e=c2(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Wq(n.path)),s.serverResponse=i.serverResponse,s}return t}function z8(n,e,t){const r=e.fullServerUrl(),i=uS(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,u=new l2(i,s,U8(n,t),a);return u.errorHandler=B8(e),u}function j8(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function F8(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=j8(null,e)),r}function H8(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let V="";for(let $=0;$<2;$++)V=V+Math.random().toString().slice(2);return V}const h=u();a["Content-Type"]="multipart/related; boundary="+h;const f=F8(e,r,i),p=L8(f,t),m="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",E=zo.getBlob(m,r,v);if(E===null)throw i8();const T={name:f.fullPath},S=uS(s,n.host,n._protocol),w="POST",C=n.maxUploadRetryTime,N=new l2(S,w,V8(n,t),C);return N.urlParams=T,N.headers=a,N.body=E.uploadData(),N.errorHandler=c2(e),N}class q8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,s){if(this.sent_)throw zh("cannot .send() more than once");if(ma(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $8 extends q8{initXhr(){this.xhr_.responseType="text"}}function h2(){return new $8}class Nl{constructor(e,t){this._service=e,t instanceof _r?this._location=t:this._location=_r.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Nl(e,t)}get root(){const e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s2(this._location.path)}get storage(){return this._service}get parent(){const e=k8(this._location.path);if(e===null)return null;const t=new _r(this._location.bucket,e);return new Nl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw a8(e)}}function G8(n,e,t){n._throwIfRoot("uploadBytes");const r=H8(n.storage,n._location,o2(),new zo(e,!0),t);return n.storage.makeRequestWithTokens(r,h2).then(i=>({metadata:i,ref:n}))}function K8(n){n._throwIfRoot("getDownloadURL");const e=z8(n.storage,n._location,o2());return n.storage.makeRequestWithTokens(e,h2).then(t=>{if(t===null)throw s8();return t})}function W8(n,e){const t=I8(n._location.path,e),r=new _r(n._location.bucket,t);return new Nl(n.storage,r)}function Y8(n){return/^[A-Za-z]+:\/\//.test(n)}function Q8(n,e){return new Nl(n,e)}function f2(n,e){if(n instanceof cS){const t=n;if(t._bucket==null)throw r8();const r=new Nl(t,t._bucket);return e!=null?f2(r,e):r}else return e!==void 0?W8(n,e):n}function X8(n,e){if(e&&Y8(e)){if(n instanceof cS)return Q8(n,e);throw JE("To use ref(service, url), the first argument must be a Storage instance.")}else return f2(n,e)}function HR(n,e){const t=e?.[JO];return t==null?null:_r.makeFromBucketSpec(t,n)}function J8(n,e,t,r={}){n.host=`${e}:${t}`;const i=ma(e);i&&(l_(`https://${n.host}/b`),u_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:AD(s,n.app.options.projectId))}class cS{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=XO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Gq,this._maxUploadRetryTime=Kq,this._requests=new Set,i!=null?this._bucket=_r.makeFromBucketSpec(i,this._host):this._bucket=HR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_r.makeFromBucketSpec(this._url,e):this._bucket=HR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nl(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new l8(ZO());{const a=b8(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const qR="@firebase/storage",$R="0.14.0";const d2="storage";function Z8(n,e,t){return n=wt(n),G8(n,e,t)}function e7(n){return n=wt(n),K8(n)}function t7(n,e){return n=wt(n),X8(n,e)}function n7(n=f_(),e){n=wt(n);const r=Sy(n,d2).getImmediate({identifier:e}),i=_D("storage");return i&&r7(r,...i),r}function r7(n,e,t,r={}){J8(n,e,t,r)}function i7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cS(t,r,i,e,Bl)}function s7(){xl(new ra(d2,i7,"PUBLIC").setMultipleInstances(!0)),Yi(qR,$R,""),Yi(qR,$R,"esm2020")}s7();const o7={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},hS=RD(o7),jh=dF(hS),fi=_q(hS),a7=n7(hS),p2=O.createContext(null),l7=new Ds;async function GR(n){const e=Us(fi,"users",n.uid);(await $y(e)).exists()||await YO(e,{name:n.displayName||"",email:n.email||"",streak:0,longestStreak:0,theme:"pastel-pink",darkMode:!1,pinHash:null,lastEntryDate:null,createdAt:GO()})}function u7({children:n}){const[e,t]=O.useState(null),[r,i]=O.useState(!0);O.useEffect(()=>tj(jh,async E=>{E?(await GR(E),t(E)):t(null),i(!1)}),[]);const m={user:e,loading:r,signInWithGoogle:async()=>{const v=await _j(jh,l7);await GR(v.user)},signInWithEmail:async(v,E)=>{await J5(jh,v,E)},signUp:async(v,E,T)=>{const S=await X5(jh,v,E),w=Us(fi,"users",S.user.uid);await YO(w,{name:T||"",email:S.user.email||"",streak:0,longestStreak:0,theme:"pastel-pink",darkMode:!1,pinHash:null,lastEntryDate:null,createdAt:GO()})},signOut:async()=>{await nj(jh)},verifyPin:async v=>{if(!e)return!1;const E=Us(fi,"users",e.uid),T=await $y(E);if(!T.exists())return!1;const S=T.data();return S.pinHash?S.pinHash===btoa(v):!1},setPin:async v=>{if(!e)return;const E=Us(fi,"users",e.uid);await Fq(E,{pinHash:btoa(v)})}};return q.jsx(p2.Provider,{value:m,children:n})}function Gy(){const n=O.useContext(p2);if(n===null)throw new Error("useAuth must be used within an AuthProvider");return n}const c7=[{to:"/dashboard",label:"Dashboard",icon:""},{to:"/editor",label:"New Entry",icon:""},{to:"/calendar",label:"Calendar",icon:""}];function h7(){return q.jsxs("div",{className:"min-h-screen flex bg-[var(--color-background)]",children:[q.jsxs("aside",{className:"w-56 bg-[var(--color-surface)] border-r border-pink-100 flex flex-col shadow-sm",children:[q.jsx("div",{className:"p-5 border-b border-pink-100",children:q.jsx("h1",{className:"font-['Pacifico'] text-2xl text-pink-300",children:"DearMe "})}),q.jsx("nav",{className:"flex-1 p-3 flex flex-col gap-1",children:c7.map(({to:n,label:e,icon:t})=>q.jsxs(gD,{to:n,className:({isActive:r})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-['Poppins'] text-sm transition-colors ${r?"bg-pink-100 text-pink-600 font-medium":"text-[var(--color-text)] hover:bg-pink-50"}`,children:[q.jsx("span",{className:"text-lg",children:t}),e]},n))}),q.jsx("div",{className:"p-3 border-t border-pink-100",children:q.jsxs("button",{className:"flex items-center gap-3 w-full px-4 py-3 rounded-xl font-['Poppins'] text-sm text-[var(--color-text)] hover:bg-red-50 hover:text-red-400 transition-colors cursor-pointer",children:[q.jsx("span",{className:"text-lg",children:""}),"Sign Out"]})})]}),q.jsx("main",{className:"flex-1 overflow-y-auto",children:q.jsx(fD,{})})]})}function f7(){const{user:n,loading:e}=Gy();return e?q.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[var(--color-background)]",children:q.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-3",children:[q.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-200"}),q.jsx("p",{className:"font-['Poppins'] text-sm text-pink-300",children:"Loading..."})]})}):n?q.jsx(fD,{}):q.jsx(hD,{to:"/login",replace:!0})}const fS=O.createContext({});function dS(n){const e=O.useRef(null);return e.current===null&&(e.current=n()),e.current}const m2=typeof window<"u",g2=m2?O.useLayoutEffect:O.useEffect,Ky=O.createContext(null);function pS(n,e){n.indexOf(e)===-1&&n.push(e)}function _g(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const rs=(n,e,t)=>t>e?e:t<n?n:t;let mS=()=>{};const Gs={},y2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function v2(n){return typeof n=="object"&&n!==null}const b2=n=>/^0[^.\s]+$/u.test(n);function E2(n){let e;return()=>(e===void 0&&(e=n()),e)}const $r=n=>n,d7=(n,e)=>t=>e(n(t)),_d=(...n)=>n.reduce(d7),Hf=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class gS{constructor(){this.subscriptions=[]}add(e){return pS(this.subscriptions,e),()=>_g(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gi=n=>n*1e3,qr=n=>n/1e3;function T2(n,e){return e?n*(1e3/e):0}const _2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,p7=1e-7,m7=12;function g7(n,e,t,r,i){let s,a,u=0;do a=e+(t-e)/2,s=_2(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>p7&&++u<m7);return a}function Sd(n,e,t,r){if(n===e&&t===r)return $r;const i=s=>g7(s,0,1,n,t);return s=>s===0||s===1?s:_2(i(s),e,r)}const S2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,w2=n=>e=>1-n(1-e),A2=Sd(.33,1.53,.69,.99),yS=w2(A2),x2=S2(yS),C2=n=>(n*=2)<1?.5*yS(n):.5*(2-Math.pow(2,-10*(n-1))),vS=n=>1-Math.sin(Math.acos(n)),R2=w2(vS),k2=S2(vS),y7=Sd(.42,0,1,1),v7=Sd(0,0,.58,1),I2=Sd(.42,0,.58,1),b7=n=>Array.isArray(n)&&typeof n[0]!="number",M2=n=>Array.isArray(n)&&typeof n[0]=="number",E7={linear:$r,easeIn:y7,easeInOut:I2,easeOut:v7,circIn:vS,circInOut:k2,circOut:R2,backIn:yS,backInOut:x2,backOut:A2,anticipate:C2},T7=n=>typeof n=="string",KR=n=>{if(M2(n)){mS(n.length===4);const[e,t,r,i]=n;return Sd(e,t,r,i)}else if(T7(n))return E7[n];return n},pm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function _7(n,e){let t=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){a.has(p)&&(f.schedule(p),n()),p(u)}const f={schedule:(p,m=!1,v=!1)=>{const T=v&&i?t:r;return m&&a.add(p),T.has(p)||T.add(p),p},cancel:p=>{r.delete(p),a.delete(p)},process:p=>{if(u=p,i){s=!0;return}i=!0,[t,r]=[r,t],t.forEach(h),t.clear(),i=!1,s&&(s=!1,f.process(p))}};return f}const S7=40;function D2(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=pm.reduce((V,$)=>(V[$]=_7(s),V),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:p,update:m,preRender:v,render:E,postRender:T}=a,S=()=>{const V=Gs.useManualTiming?i.timestamp:performance.now();t=!1,Gs.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(V-i.timestamp,S7),1)),i.timestamp=V,i.isProcessing=!0,u.process(i),h.process(i),f.process(i),p.process(i),m.process(i),v.process(i),E.process(i),T.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(S))},w=()=>{t=!0,r=!0,i.isProcessing||n(S)};return{schedule:pm.reduce((V,$)=>{const F=a[$];return V[$]=(Z,I=!1,k=!1)=>(t||w(),F.schedule(Z,I,k)),V},{}),cancel:V=>{for(let $=0;$<pm.length;$++)a[pm[$]].cancel(V)},state:i,steps:a}}const{schedule:gt,cancel:ca,state:xn,steps:Db}=D2(typeof requestAnimationFrame<"u"?requestAnimationFrame:$r,!0);let Fm;function w7(){Fm=void 0}const Kn={now:()=>(Fm===void 0&&Kn.set(xn.isProcessing||Gs.useManualTiming?xn.timestamp:performance.now()),Fm),set:n=>{Fm=n,queueMicrotask(w7)}},N2=n=>e=>typeof e=="string"&&e.startsWith(n),O2=N2("--"),A7=N2("var(--"),bS=n=>A7(n)?x7.test(n.split("/*")[0].trim()):!1,x7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function WR(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Rc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},qf={...Rc,transform:n=>rs(0,1,n)},mm={...Rc,default:1},gf=n=>Math.round(n*1e5)/1e5,ES=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function C7(n){return n==null}const R7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,TS=(n,e)=>t=>!!(typeof t=="string"&&R7.test(t)&&t.startsWith(n)||e&&!C7(t)&&Object.prototype.hasOwnProperty.call(t,e)),P2=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,u]=r.match(ES);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},k7=n=>rs(0,255,n),Nb={...Rc,transform:n=>Math.round(k7(n))},hl={test:TS("rgb","red"),parse:P2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Nb.transform(n)+", "+Nb.transform(e)+", "+Nb.transform(t)+", "+gf(qf.transform(r))+")"};function I7(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ZE={test:TS("#"),parse:I7,transform:hl.transform},wd=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Do=wd("deg"),es=wd("%"),ve=wd("px"),M7=wd("vh"),D7=wd("vw"),YR={...es,parse:n=>es.parse(n)/100,transform:n=>es.transform(n*100)},$u={test:TS("hsl","hue"),parse:P2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+es.transform(gf(e))+", "+es.transform(gf(t))+", "+gf(qf.transform(r))+")"},Zt={test:n=>hl.test(n)||ZE.test(n)||$u.test(n),parse:n=>hl.test(n)?hl.parse(n):$u.test(n)?$u.parse(n):ZE.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?hl.transform(n):$u.transform(n),getAnimatableNone:n=>{const e=Zt.parse(n);return e.alpha=0,Zt.transform(e)}},N7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function O7(n){return isNaN(n)&&typeof n=="string"&&(n.match(ES)?.length||0)+(n.match(N7)?.length||0)>0}const L2="number",V2="color",P7="var",L7="var(",QR="${}",V7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $f(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const u=e.replace(V7,h=>(Zt.test(h)?(r.color.push(s),i.push(V2),t.push(Zt.parse(h))):h.startsWith(L7)?(r.var.push(s),i.push(P7),t.push(h)):(r.number.push(s),i.push(L2),t.push(parseFloat(h))),++s,QR)).split(QR);return{values:t,split:u,indexes:r,types:i}}function U2(n){return $f(n).values}function B2(n){const{split:e,types:t}=$f(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const u=t[a];u===L2?s+=gf(i[a]):u===V2?s+=Zt.transform(i[a]):s+=i[a]}return s}}const U7=n=>typeof n=="number"?0:Zt.test(n)?Zt.getAnimatableNone(n):n;function B7(n){const e=U2(n);return B2(n)(e.map(U7))}const yi={test:O7,parse:U2,createTransformer:B2,getAnimatableNone:B7};function Ob(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function z7({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,h=2*t-u;i=Ob(h,u,n+1/3),s=Ob(h,u,n),a=Ob(h,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Sg(n,e){return t=>t>0?e:n}const xt=(n,e,t)=>n+(e-n)*t,Pb=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},j7=[ZE,hl,$u],F7=n=>j7.find(e=>e.test(n));function XR(n){const e=F7(n);if(!e)return!1;let t=e.parse(n);return e===$u&&(t=z7(t)),t}const JR=(n,e)=>{const t=XR(n),r=XR(e);if(!t||!r)return Sg(n,e);const i={...t};return s=>(i.red=Pb(t.red,r.red,s),i.green=Pb(t.green,r.green,s),i.blue=Pb(t.blue,r.blue,s),i.alpha=xt(t.alpha,r.alpha,s),hl.transform(i))},eT=new Set(["none","hidden"]);function H7(n,e){return eT.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function q7(n,e){return t=>xt(n,e,t)}function _S(n){return typeof n=="number"?q7:typeof n=="string"?bS(n)?Sg:Zt.test(n)?JR:K7:Array.isArray(n)?z2:typeof n=="object"?Zt.test(n)?JR:$7:Sg}function z2(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>_S(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function $7(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=_S(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function G7(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=n.indexes[s][r[s]],u=n.values[a]??0;t[i]=u,r[s]++}return t}const K7=(n,e)=>{const t=yi.createTransformer(e),r=$f(n),i=$f(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?eT.has(n)&&!i.values.length||eT.has(e)&&!r.values.length?H7(n,e):_d(z2(G7(r,i),i.values),t):Sg(n,e)};function j2(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?xt(n,e,t):_S(n)(n,e)}const W7=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>gt.update(e,t),stop:()=>ca(e),now:()=>xn.isProcessing?xn.timestamp:Kn.now()}},F2=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},wg=2e4;function SS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<wg;)e+=t,r=n.next(e);return e>=wg?1/0:e}function Y7(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(SS(r),wg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:qr(i)}}const Q7=5;function H2(n,e,t){const r=Math.max(e-Q7,0);return T2(t-n(r),e-r)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lb=.001;function X7({duration:n=Dt.duration,bounce:e=Dt.bounce,velocity:t=Dt.velocity,mass:r=Dt.mass}){let i,s,a=1-e;a=rs(Dt.minDamping,Dt.maxDamping,a),n=rs(Dt.minDuration,Dt.maxDuration,qr(n)),a<1?(i=f=>{const p=f*a,m=p*n,v=p-t,E=tT(f,a),T=Math.exp(-m);return Lb-v/E*T},s=f=>{const m=f*a*n,v=m*t+t,E=Math.pow(a,2)*Math.pow(f,2)*n,T=Math.exp(-m),S=tT(Math.pow(f,2),a);return(-i(f)+Lb>0?-1:1)*((v-E)*T)/S}):(i=f=>{const p=Math.exp(-f*n),m=(f-t)*n+1;return-Lb+p*m},s=f=>{const p=Math.exp(-f*n),m=(t-f)*(n*n);return p*m});const u=5/n,h=Z7(i,s,u);if(n=gi(n),isNaN(h))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:n};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:a*2*Math.sqrt(r*f),duration:n}}}const J7=12;function Z7(n,e,t){let r=t;for(let i=1;i<J7;i++)r=r-n(r)/e(r);return r}function tT(n,e){return n*Math.sqrt(1-e*e)}const e$=["duration","bounce"],t$=["stiffness","damping","mass"];function ZR(n,e){return e.some(t=>n[t]!==void 0)}function n$(n){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...n};if(!ZR(n,t$)&&ZR(n,e$))if(e.velocity=0,n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*rs(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Dt.mass,stiffness:i,damping:s}}else{const t=X7({...n,velocity:0});e={...e,...t,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function Ag(n=Dt.visualDuration,e=Dt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],u={done:!1,value:s},{stiffness:h,damping:f,mass:p,duration:m,velocity:v,isResolvedFromDuration:E}=n$({...t,velocity:-qr(t.velocity||0)}),T=v||0,S=f/(2*Math.sqrt(h*p)),w=a-s,C=qr(Math.sqrt(h/p)),N=Math.abs(w)<5;r||(r=N?Dt.restSpeed.granular:Dt.restSpeed.default),i||(i=N?Dt.restDelta.granular:Dt.restDelta.default);let V;if(S<1){const F=tT(C,S);V=Z=>{const I=Math.exp(-S*C*Z);return a-I*((T+S*C*w)/F*Math.sin(F*Z)+w*Math.cos(F*Z))}}else if(S===1)V=F=>a-Math.exp(-C*F)*(w+(T+C*w)*F);else{const F=C*Math.sqrt(S*S-1);V=Z=>{const I=Math.exp(-S*C*Z),k=Math.min(F*Z,300);return a-I*((T+S*C*w)*Math.sinh(k)+F*w*Math.cosh(k))/F}}const $={calculatedDuration:E&&m||null,next:F=>{const Z=V(F);if(E)u.done=F>=m;else{let I=F===0?T:0;S<1&&(I=F===0?gi(T):H2(V,F,Z));const k=Math.abs(I)<=r,D=Math.abs(a-Z)<=i;u.done=k&&D}return u.value=u.done?a:Z,u},toString:()=>{const F=Math.min(SS($),wg),Z=F2(I=>$.next(F*I).value,F,30);return F+"ms "+Z},toTransition:()=>{}};return $}Ag.applyToOptions=n=>{const e=Y7(n,100,Ag);return n.ease=e.ease,n.duration=gi(e.duration),n.type="keyframes",n};function nT({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:p}){const m=n[0],v={done:!1,value:m},E=k=>u!==void 0&&k<u||h!==void 0&&k>h,T=k=>u===void 0?h:h===void 0||Math.abs(u-k)<Math.abs(h-k)?u:h;let S=t*e;const w=m+S,C=a===void 0?w:a(w);C!==w&&(S=C-m);const N=k=>-S*Math.exp(-k/r),V=k=>C+N(k),$=k=>{const D=N(k),B=V(k);v.done=Math.abs(D)<=f,v.value=v.done?C:B};let F,Z;const I=k=>{E(v.value)&&(F=k,Z=Ag({keyframes:[v.value,T(v.value)],velocity:H2(V,k,v.value),damping:i,stiffness:s,restDelta:f,restSpeed:p}))};return I(0),{calculatedDuration:null,next:k=>{let D=!1;return!Z&&F===void 0&&(D=!0,$(k),I(k)),F!==void 0&&k>=F?Z.next(k-F):(!D&&$(k),v)}}}function r$(n,e,t){const r=[],i=t||Gs.mix||j2,s=n.length-1;for(let a=0;a<s;a++){let u=i(n[a],n[a+1]);if(e){const h=Array.isArray(e)?e[a]||$r:e;u=_d(h,u)}r.push(u)}return r}function i$(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(mS(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=r$(e,r,i),h=u.length,f=p=>{if(a&&p<n[0])return e[0];let m=0;if(h>1)for(;m<n.length-2&&!(p<n[m+1]);m++);const v=Hf(n[m],n[m+1],p);return u[m](v)};return t?p=>f(rs(n[0],n[s-1],p)):f}function s$(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Hf(0,e,r);n.push(xt(t,1,i))}}function o$(n){const e=[0];return s$(e,n.length-1),e}function a$(n,e){return n.map(t=>t*e)}function l$(n,e){return n.map(()=>e||I2).splice(0,n.length-1)}function yf({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=b7(r)?r.map(KR):KR(r),s={done:!1,value:e[0]},a=a$(t&&t.length===e.length?t:o$(e),n),u=i$(a,e,{ease:Array.isArray(i)?i:l$(e,i)});return{calculatedDuration:n,next:h=>(s.value=u(h),s.done=h>=n,s)}}const u$=n=>n!==null;function wS(n,{repeat:e,repeatType:t="loop"},r,i=1){const s=n.filter(u$),u=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!u||r===void 0?s[u]:r}const c$={decay:nT,inertia:nT,tween:yf,keyframes:yf,spring:Ag};function q2(n){typeof n.type=="string"&&(n.type=c$[n.type])}class AS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const h$=n=>n/100;class xS extends AS{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Kn.now()&&this.tick(Kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;q2(e);const{type:t=yf,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:u}=e;const h=t||yf;h!==yf&&typeof u[0]!="number"&&(this.mixKeyframes=_d(h$,j2(u[0],u[1])),u=[0,100]);const f=h({...e,keyframes:u});s==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...u].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=SS(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:m,repeatType:v,repeatDelay:E,type:T,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const C=this.currentTime-f*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let V=this.currentTime,$=r;if(m){const k=Math.min(this.currentTime,i)/u;let D=Math.floor(k),B=k%1;!B&&k>=1&&(B=1),B===1&&D--,D=Math.min(D,m+1),D%2&&(v==="reverse"?(B=1-B,E&&(B-=E/u)):v==="mirror"&&($=a)),V=rs(0,1,B)*u}const F=N?{done:!1,value:p[0]}:$.next(V);s&&(F.value=s(F.value));let{done:Z}=F;!N&&h!==null&&(Z=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return I&&T!==nT&&(F.value=wS(p,this.options,w,this.speed)),S&&S(F.value),I&&this.finish(),F}then(e,t){return this.finished.then(e,t)}get duration(){return qr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qr(e)}get time(){return qr(this.currentTime)}set time(e){e=gi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Kn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=qr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=W7,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function f$(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const fl=n=>n*180/Math.PI,rT=n=>{const e=fl(Math.atan2(n[1],n[0]));return iT(e)},d$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:rT,rotateZ:rT,skewX:n=>fl(Math.atan(n[1])),skewY:n=>fl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},iT=n=>(n=n%360,n<0&&(n+=360),n),ek=rT,tk=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),nk=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),p$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tk,scaleY:nk,scale:n=>(tk(n)+nk(n))/2,rotateX:n=>iT(fl(Math.atan2(n[6],n[5]))),rotateY:n=>iT(fl(Math.atan2(-n[2],n[0]))),rotateZ:ek,rotate:ek,skewX:n=>fl(Math.atan(n[4])),skewY:n=>fl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function sT(n){return n.includes("scale")?1:0}function oT(n,e){if(!n||n==="none")return sT(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=p$,i=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=d$,i=u}if(!i)return sT(e);const s=r[e],a=i[1].split(",").map(g$);return typeof s=="function"?s(a):a[s]}const m$=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return oT(t,e)};function g$(n){return parseFloat(n.trim())}const kc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ic=new Set(kc),rk=n=>n===Rc||n===ve,y$=new Set(["x","y","z"]),v$=kc.filter(n=>!y$.has(n));function b$(n){const e=[];return v$.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const qo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>oT(e,"x"),y:(n,{transform:e})=>oT(e,"y")};qo.translateX=qo.x;qo.translateY=qo.y;const vl=new Set;let aT=!1,lT=!1,uT=!1;function $2(){if(lT){const n=Array.from(vl).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=b$(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{r.getValue(s)?.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}lT=!1,aT=!1,vl.forEach(n=>n.complete(uT)),vl.clear()}function G2(){vl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(lT=!0)})}function E$(){uT=!0,G2(),$2(),uT=!1}class CS{constructor(e,t,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(vl.add(this),aT||(aT=!0,gt.read(G2),gt.resolveKeyframes($2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&t){const u=r.readValue(t,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}f$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),vl.delete(this)}cancel(){this.state==="scheduled"&&(vl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const T$=n=>n.startsWith("--");function _$(n,e,t){T$(e)?n.style.setProperty(e,t):n.style[e]=t}const S$={};function K2(n,e){const t=E2(n);return()=>S$[e]??t()}const w$=K2(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),W2=K2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),tf=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,ik={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tf([0,.65,.55,1]),circOut:tf([.55,0,1,.45]),backIn:tf([.31,.01,.66,-.59]),backOut:tf([.33,1.53,.69,.99])};function Y2(n,e){if(n)return typeof n=="function"?W2()?F2(n,e):"ease-out":M2(n)?tf(n):Array.isArray(n)?n.map(t=>Y2(t,e)||ik.easeOut):ik[n]}function A$(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:u="easeOut",times:h}={},f=void 0){const p={[e]:t};h&&(p.offset=h);const m=Y2(u,i);Array.isArray(m)&&(p.easing=m);const v={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(p,v)}function Q2(n){return typeof n=="function"&&"applyToOptions"in n}function x$({type:n,...e}){return Q2(n)&&W2()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class X2 extends AS{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:u,onComplete:h}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,mS(typeof e.type!="string");const f=x$(e);this.animation=A$(t,r,i,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const p=wS(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):_$(t,r,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return qr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qr(e)}get time(){return qr(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=gi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&w$()?(this.animation.timeline=e,$r):t(this)}}const J2={anticipate:C2,backInOut:x2,circInOut:k2};function C$(n){return n in J2}function R$(n){typeof n.ease=="string"&&C$(n.ease)&&(n.ease=J2[n.ease])}const Vb=10;class k$ extends X2{constructor(e){R$(e),q2(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const u=new xS({...a,autoplay:!1}),h=Math.max(Vb,Kn.now()-this.startTime),f=rs(0,Vb,h-Vb);t.setWithVelocity(u.sample(Math.max(0,h-f)).value,u.sample(h).value,f),u.stop()}}const sk=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(yi.test(n)||n==="0")&&!n.startsWith("url("));function I$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function M$(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=sk(i,e),u=sk(s,e);return!a||!u?!1:I$(n)||(t==="spring"||Q2(t))&&r}function cT(n){n.duration=0,n.type="keyframes"}const D$=new Set(["opacity","clipPath","filter","transform"]),N$=E2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function O$(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:s,type:a}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return N$()&&t&&D$.has(t)&&(t!=="transform"||!f)&&!h&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const P$=40;class L$ extends AS{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:u,name:h,motionValue:f,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Kn.now();const v={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,name:h,motionValue:f,element:p,...m},E=p?.KeyframeResolver||CS;this.keyframeResolver=new E(u,(T,S,w)=>this.onKeyframesResolved(T,S,v,!w),h,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:u,delay:h,isHandoff:f,onUpdate:p}=r;this.resolvedAt=Kn.now(),M$(e,s,a,u)||((Gs.instantAnimations||!h)&&p?.(wS(e,r,t)),e[0]=e[e.length-1],cT(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>P$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},E=!f&&O$(v),T=v.motionValue?.owner?.current,S=E?new k$({...v,element:T}):new xS(v);S.finished.then(()=>{this.notifyFinished()}).catch($r),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),E$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function Z2(n,e,t,r=0,i=1){const s=Array.from(n).sort((f,p)=>f.sortNodePosition(p)).indexOf(e),a=n.size,u=(a-1)*r;return typeof t=="function"?t(s,a):i===1?s*r:u-s*r}const V$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function U$(n){const e=V$.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function eP(n,e,t=1){const[r,i]=U$(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return y2(a)?parseFloat(a):a}return bS(i)?eP(i,e,t+1):i}const B$={type:"spring",stiffness:500,damping:25,restSpeed:10},z$=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),j$={type:"keyframes",duration:.8},F$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},H$=(n,{keyframes:e})=>e.length>2?j$:Ic.has(n)?n.startsWith("scale")?z$(e[1]):B$:F$,q$=n=>n!==null;function $$(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(q$),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}function tP(n,e){if(n?.inherit&&e){const{inherit:t,...r}=n;return{...e,...r}}return n}function RS(n,e){const t=n?.[e]??n?.default??n;return t!==n?tP(t,n):t}function G$({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const kS=(n,e,t,r={},i,s)=>a=>{const u=RS(r,n)||{},h=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-gi(h);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:s?void 0:i};G$(u)||Object.assign(p,H$(n,p)),p.duration&&(p.duration=gi(p.duration)),p.repeatDelay&&(p.repeatDelay=gi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(cT(p),p.delay===0&&(m=!0)),(Gs.instantAnimations||Gs.skipAnimations||i?.shouldSkipAnimations)&&(m=!0,cT(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,m&&!s&&e.get()!==void 0){const v=$$(p.keyframes,u);if(v!==void 0){gt.update(()=>{p.onUpdate(v),p.onComplete()});return}}return u.isSync?new xS(p):new L$(p)};function ok(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function IS(n,e,t,r){if(typeof e=="function"){const[i,s]=ok(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=ok(r);e=e(t!==void 0?t:n.custom,i,s)}return e}function rc(n,e,t){const r=n.getProps();return IS(r,e,t!==void 0?t:r.custom,n)}const nP=new Set(["width","height","top","left","right","bottom",...kc]),ak=30,K$=n=>!isNaN(parseFloat(n));class W${constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Kn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Kn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=K$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new gS);const r=this.events[e].add(t);return e==="change"?()=>{r(),gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ak)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,ak);return T2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hc(n,e){return new W$(n,e)}const hT=n=>Array.isArray(n);function Y$(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,hc(t))}function Q$(n){return hT(n)?n[n.length-1]||0:n}function X$(n,e){const t=rc(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const u=Q$(s[a]);Y$(n,a,u)}}const Vn=n=>!!(n&&n.getVelocity);function J$(n){return!!(Vn(n)&&n.add)}function fT(n,e){const t=n.getValue("willChange");if(J$(t))return t.add(e);if(!t&&Gs.WillChange){const r=new Gs.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function MS(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Z$="framerAppearId",rP="data-"+MS(Z$);function iP(n){return n.props[rP]}function eG({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function sP(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s,transitionEnd:a,...u}=e;const h=n.getDefaultTransition();s=s?tP(s,h):h;const f=s?.reduceMotion;r&&(s=r);const p=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const v in u){const E=n.getValue(v,n.latestValues[v]??null),T=u[v];if(T===void 0||m&&eG(m,v))continue;const S={delay:t,...RS(s||{},v)},w=E.get();if(w!==void 0&&!E.isAnimating&&!Array.isArray(T)&&T===w&&!S.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const $=iP(n);if($){const F=window.MotionHandoffAnimation($,v,gt);F!==null&&(S.startTime=F,C=!0)}}fT(n,v);const N=f??n.shouldReduceMotion;E.start(kS(v,E,T,N&&nP.has(v)?{type:!1}:S,n,C));const V=E.animation;V&&p.push(V)}if(a){const v=()=>gt.update(()=>{a&&X$(n,a)});p.length?Promise.all(p).then(v):v()}return p}function dT(n,e,t={}){const r=rc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(sP(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=i;return tG(n,e,h,f,p,m,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[h,f]=u==="beforeChildren"?[s,a]:[a,s];return h().then(()=>f())}else return Promise.all([s(),a(t.delay)])}function tG(n,e,t=0,r=0,i=0,s=1,a){const u=[];for(const h of n.variantChildren)h.notify("AnimationStart",e),u.push(dT(h,e,{...a,delay:t+(typeof r=="function"?0:r)+Z2(n.variantChildren,h,r,i,s)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(u)}function nG(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>dT(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=dT(n,e,t);else{const i=typeof e=="function"?rc(n,e,t.custom):e;r=Promise.all(sP(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const rG={test:n=>n==="auto",parse:n=>n},oP=n=>e=>e.test(n),aP=[Rc,ve,es,Do,D7,M7,rG],lk=n=>aP.find(oP(n));function iG(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||b2(n):!0}const sG=new Set(["brightness","contrast","saturate","opacity"]);function oG(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(ES)||[];if(!r)return n;const i=t.replace(r,"");let s=sG.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const aG=/\b([a-z-]*)\(.*?\)/gu,pT={...yi,getAnimatableNone:n=>{const e=n.match(aG);return e?e.map(oG).join(" "):n}},mT={...yi,getAnimatableNone:n=>{const e=yi.parse(n);return yi.createTransformer(n)(e.map(r=>typeof r=="number"?0:typeof r=="object"?{...r,alpha:1}:r))}},uk={...Rc,transform:Math.round},lG={rotate:Do,rotateX:Do,rotateY:Do,rotateZ:Do,scale:mm,scaleX:mm,scaleY:mm,scaleZ:mm,skew:Do,skewX:Do,skewY:Do,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:qf,originX:YR,originY:YR,originZ:ve},DS={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,top:ve,right:ve,bottom:ve,left:ve,inset:ve,insetBlock:ve,insetBlockStart:ve,insetBlockEnd:ve,insetInline:ve,insetInlineStart:ve,insetInlineEnd:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,paddingBlock:ve,paddingBlockStart:ve,paddingBlockEnd:ve,paddingInline:ve,paddingInlineStart:ve,paddingInlineEnd:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,marginBlock:ve,marginBlockStart:ve,marginBlockEnd:ve,marginInline:ve,marginInlineStart:ve,marginInlineEnd:ve,fontSize:ve,backgroundPositionX:ve,backgroundPositionY:ve,...lG,zIndex:uk,fillOpacity:qf,strokeOpacity:qf,numOctaves:uk},uG={...DS,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:pT,WebkitFilter:pT,mask:mT,WebkitMask:mT},lP=n=>uG[n],cG=new Set([pT,mT]);function uP(n,e){let t=lP(n);return cG.has(t)||(t=yi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const hG=new Set(["auto","none","0"]);function fG(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!hG.has(s)&&$f(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=uP(t,i)}class dG extends CS{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let m=e[p];if(typeof m=="string"&&(m=m.trim(),bS(m))){const v=eP(m,t.current);v!==void 0&&(e[p]=v),p===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!nP.has(r)||e.length!==2)return;const[i,s]=e,a=lk(i),u=lk(s),h=WR(i),f=WR(s);if(h!==f&&qo[r]){this.needsMeasurement=!0;return}if(a!==u)if(rk(a)&&rk(u))for(let p=0;p<e.length;p++){const m=e[p];typeof m=="string"&&(e[p]=parseFloat(m))}else qo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||iG(e[i]))&&r.push(i);r.length&&fG(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=qo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const pG=new Set(["opacity","clipPath","filter","transform"]);function cP(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n).filter(r=>r!=null)}const hP=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function gT(n){return v2(n)&&"offsetHeight"in n}const{schedule:NS}=D2(queueMicrotask,!1),ui={x:!1,y:!1};function fP(){return ui.x||ui.y}function mG(n){return n==="x"||n==="y"?ui[n]?null:(ui[n]=!0,()=>{ui[n]=!1}):ui.x||ui.y?null:(ui.x=ui.y=!0,()=>{ui.x=ui.y=!1})}function dP(n,e){const t=cP(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function gG(n){return!(n.pointerType==="touch"||fP())}function yG(n,e,t={}){const[r,i,s]=dP(n,t);return r.forEach(a=>{let u=!1,h=!1,f;const p=()=>{a.removeEventListener("pointerleave",T)},m=w=>{f&&(f(w),f=void 0),p()},v=w=>{u=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),h&&(h=!1,m(w))},E=()=>{u=!0,window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",v,i)},T=w=>{if(w.pointerType!=="touch"){if(u){h=!0;return}m(w)}},S=w=>{if(!gG(w))return;h=!1;const C=e(a,w);typeof C=="function"&&(f=C,a.addEventListener("pointerleave",T,i))};a.addEventListener("pointerenter",S,i),a.addEventListener("pointerdown",E,i)}),s}const pP=(n,e)=>e?n===e?!0:pP(n,e.parentElement):!1,OS=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,vG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function bG(n){return vG.has(n.tagName)||n.isContentEditable===!0}const EG=new Set(["INPUT","SELECT","TEXTAREA"]);function TG(n){return EG.has(n.tagName)||n.isContentEditable===!0}const Hm=new WeakSet;function ck(n){return e=>{e.key==="Enter"&&n(e)}}function Ub(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _G=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=ck(()=>{if(Hm.has(t))return;Ub(t,"down");const i=ck(()=>{Ub(t,"up")}),s=()=>Ub(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function hk(n){return OS(n)&&!fP()}const fk=new WeakSet;function SG(n,e,t={}){const[r,i,s]=dP(n,t),a=u=>{const h=u.currentTarget;if(!hk(u)||fk.has(u))return;Hm.add(h),t.stopPropagation&&fk.add(u);const f=e(h,u),p=(E,T)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),Hm.has(h)&&Hm.delete(h),hk(E)&&typeof f=="function"&&f(E,{success:T})},m=E=>{p(E,h===window||h===document||t.useGlobalTarget||pP(h,E.target))},v=E=>{p(E,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",v,i)};return r.forEach(u=>{(t.useGlobalTarget?window:u).addEventListener("pointerdown",a,i),gT(u)&&(u.addEventListener("focus",f=>_G(f,i)),!bG(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),s}function PS(n){return v2(n)&&"ownerSVGElement"in n}const qm=new WeakMap;let $m;const mP=(n,e,t)=>(r,i)=>i&&i[0]?i[0][n+"Size"]:PS(r)&&"getBBox"in r?r.getBBox()[e]:r[t],wG=mP("inline","width","offsetWidth"),AG=mP("block","height","offsetHeight");function xG({target:n,borderBoxSize:e}){qm.get(n)?.forEach(t=>{t(n,{get width(){return wG(n,e)},get height(){return AG(n,e)}})})}function CG(n){n.forEach(xG)}function RG(){typeof ResizeObserver>"u"||($m=new ResizeObserver(CG))}function kG(n,e){$m||RG();const t=cP(n);return t.forEach(r=>{let i=qm.get(r);i||(i=new Set,qm.set(r,i)),i.add(e),$m?.observe(r)}),()=>{t.forEach(r=>{const i=qm.get(r);i?.delete(e),i?.size||$m?.unobserve(r)})}}const Gm=new Set;let Gu;function IG(){Gu=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};Gm.forEach(e=>e(n))},window.addEventListener("resize",Gu)}function MG(n){return Gm.add(n),Gu||IG(),()=>{Gm.delete(n),!Gm.size&&typeof Gu=="function"&&(window.removeEventListener("resize",Gu),Gu=void 0)}}function dk(n,e){return typeof n=="function"?MG(n):kG(n,e)}function DG(n){return PS(n)&&n.tagName==="svg"}const NG=[...aP,Zt,yi],OG=n=>NG.find(oP(n)),pk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ku=()=>({x:pk(),y:pk()}),mk=()=>({min:0,max:0}),ln=()=>({x:mk(),y:mk()}),PG=new WeakMap;function Wy(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Gf(n){return typeof n=="string"||Array.isArray(n)}const LS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],VS=["initial",...LS];function Yy(n){return Wy(n.animate)||VS.some(e=>Gf(n[e]))}function gP(n){return!!(Yy(n)||n.variants)}function LG(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Vn(i))n.addValue(r,i);else if(Vn(s))n.addValue(r,hc(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,hc(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const yT={current:null},yP={current:!1},VG=typeof window<"u";function UG(){if(yP.current=!0,!!VG)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>yT.current=n.matches;n.addEventListener("change",e),e()}else yT.current=!1}const gk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let xg={};function vP(n){xg=n}function BG(){return xg}class zG{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,skipAnimations:s,blockInitialAnimation:a,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=CS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Kn.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,gt.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=s,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=Yy(t),this.isVariantNode=gP(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const E in v){const T=v[E];f[E]!==void 0&&Vn(T)&&T.set(f[E])}}mount(e){if(this.hasBeenMounted)for(const t in this.initialValues)this.values.get(t)?.jump(this.initialValues[t]),this.latestValues[t]=this.initialValues[t];this.current=e,PG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(yP.current||UG(),this.shouldReduceMotion=yT.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),ca(this.notifyUpdate),ca(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&pG.has(e)&&this.current instanceof HTMLElement){const{factory:a,keyframes:u,times:h,ease:f,duration:p}=t.accelerate,m=new X2({element:this.current,name:e,keyframes:u,times:h,ease:f,duration:gi(p)}),v=a(m);this.valueSubscriptions.set(e,()=>{v(),m.cancel()});return}const r=Ic.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xg){const t=xg[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<gk.length;r++){const i=gk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=LG(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=hc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(y2(r)||b2(r))?r=parseFloat(r):!OG(r)&&yi.test(t)&&(r=uP(e,t)),this.setBaseTarget(e,Vn(r)?r.get():r)),Vn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const s=IS(this.props,t,this.presenceContext?.custom);s&&(r=s[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Vn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new gS),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){NS.render(this.render)}}class bP extends zG{constructor(){super(...arguments),this.KeyframeResolver=dG}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class _a{constructor(e){this.isMounted=!1,this.node=e}update(){}}function EP({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function jG({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function FG(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Bb(n){return n===void 0||n===1}function vT({scale:n,scaleX:e,scaleY:t}){return!Bb(n)||!Bb(e)||!Bb(t)}function ol(n){return vT(n)||TP(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function TP(n){return yk(n.x)||yk(n.y)}function yk(n){return n&&n!=="0%"}function Cg(n,e,t){const r=n-t,i=e*r;return t+i}function vk(n,e,t,r,i){return i!==void 0&&(n=Cg(n,i,r)),Cg(n,t,r)+e}function bT(n,e=0,t=1,r,i){n.min=vk(n.min,e,t,r,i),n.max=vk(n.max,e,t,r,i)}function _P(n,{x:e,y:t}){bT(n.x,e.translate,e.scale,e.originPoint),bT(n.y,t.translate,t.scale,t.originPoint)}const bk=.999999999999,Ek=1.0000000000001;function HG(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=t[u],a=s.projectionDelta;const{visualElement:h}=s.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Yu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,_P(n,a)),r&&ol(s.latestValues)&&Yu(n,s.latestValues))}e.x<Ek&&e.x>bk&&(e.x=1),e.y<Ek&&e.y>bk&&(e.y=1)}function Wu(n,e){n.min=n.min+e,n.max=n.max+e}function Tk(n,e,t,r,i=.5){const s=xt(n.min,n.max,i);bT(n,e,t,s,r)}function Yu(n,e){Tk(n.x,e.x,e.scaleX,e.scale,e.originX),Tk(n.y,e.y,e.scaleY,e.scale,e.originY)}function SP(n,e){return EP(FG(n.getBoundingClientRect(),e))}function qG(n,e,t){const r=SP(n,t),{scroll:i}=e;return i&&(Wu(r.x,i.offset.x),Wu(r.y,i.offset.y)),r}const $G={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GG=kc.length;function KG(n,e,t){let r="",i=!0;for(let s=0;s<GG;s++){const a=kc[s],u=n[a];if(u===void 0)continue;let h=!0;if(typeof u=="number")h=u===(a.startsWith("scale")?1:0);else{const f=parseFloat(u);h=a.startsWith("scale")?f===1:f===0}if(!h||t){const f=hP(u,DS[a]);if(!h){i=!1;const p=$G[a]||a;r+=`${p}(${f}) `}t&&(e[a]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function US(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,u=!1;for(const h in e){const f=e[h];if(Ic.has(h)){a=!0;continue}else if(O2(h)){i[h]=f;continue}else{const p=hP(f,DS[h]);h.startsWith("origin")?(u=!0,s[h]=p):r[h]=p}}if(e.transform||(a||t?r.transform=KG(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=s;r.transformOrigin=`${h} ${f} ${p}`}}function wP(n,{style:e,vars:t},r,i){const s=n.style;let a;for(a in e)s[a]=e[a];i?.applyProjectionStyles(s,r);for(a in t)s.setProperty(a,t[a])}function _k(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Fh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ve.test(n))n=parseFloat(n);else return n;const t=_k(n,e.target.x),r=_k(n,e.target.y);return`${t}% ${r}%`}},WG={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=yi.parse(n);if(i.length>5)return r;const s=yi.createTransformer(n),a=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,h=t.y.scale*e.y;i[0+a]/=u,i[1+a]/=h;const f=xt(u,h,.5);return typeof i[2+a]=="number"&&(i[2+a]/=f),typeof i[3+a]=="number"&&(i[3+a]/=f),s(i)}},ET={borderRadius:{...Fh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fh,borderTopRightRadius:Fh,borderBottomLeftRadius:Fh,borderBottomRightRadius:Fh,boxShadow:WG};function AP(n,{layout:e,layoutId:t}){return Ic.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!ET[n]||n==="opacity")}function BS(n,e,t){const r=n.style,i=e?.style,s={};if(!r)return s;for(const a in r)(Vn(r[a])||i&&Vn(i[a])||AP(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}function YG(n){return window.getComputedStyle(n)}class QG extends bP{constructor(){super(...arguments),this.type="html",this.renderInstance=wP}readValueFromInstance(e,t){if(Ic.has(t))return this.projection?.isProjecting?sT(t):m$(e,t);{const r=YG(e),i=(O2(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return SP(e,t)}build(e,t,r){US(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return BS(e,t,r)}}const XG={offset:"stroke-dashoffset",array:"stroke-dasharray"},JG={offset:"strokeDashoffset",array:"strokeDasharray"};function ZG(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?XG:JG;n[s.offset]=`${-r}`,n[s.array]=`${e} ${t}`}const eK=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function xP(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...u},h,f,p){if(US(n,u,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v}=n;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete m.transformBox);for(const E of eK)m[E]!==void 0&&(v[E]=m[E],delete m[E]);e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),i!==void 0&&ZG(m,i,s,a,!1)}const CP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),RP=n=>typeof n=="string"&&n.toLowerCase()==="svg";function tK(n,e,t,r){wP(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(CP.has(i)?i:MS(i),e.attrs[i])}function kP(n,e,t){const r=BS(n,e,t);for(const i in n)if(Vn(n[i])||Vn(e[i])){const s=kc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}class nK extends bP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ic.has(t)){const r=lP(t);return r&&r.default||0}return t=CP.has(t)?t:MS(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return kP(e,t,r)}build(e,t,r){xP(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){tK(e,t,r,i)}mount(e){this.isSVGTag=RP(e.tagName),super.mount(e)}}const rK=VS.length;function IP(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?IP(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<rK;t++){const r=VS[t],i=n.props[r];(Gf(i)||i===!1)&&(e[r]=i)}return e}function MP(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const iK=[...LS].reverse(),sK=LS.length;function oK(n){return e=>Promise.all(e.map(({animation:t,options:r})=>nG(n,t,r)))}function aK(n){let e=oK(n),t=Sk(),r=!0;const i=h=>(f,p)=>{const m=rc(n,p,h==="exit"?n.presenceContext?.custom:void 0);if(m){const{transition:v,transitionEnd:E,...T}=m;f={...f,...T,...E}}return f};function s(h){e=h(n)}function a(h){const{props:f}=n,p=IP(n.parent)||{},m=[],v=new Set;let E={},T=1/0;for(let w=0;w<sK;w++){const C=iK[w],N=t[C],V=f[C]!==void 0?f[C]:p[C],$=Gf(V),F=C===h?N.isActive:null;F===!1&&(T=w);let Z=V===p[C]&&V!==f[C]&&$;if(Z&&r&&n.manuallyAnimateOnMount&&(Z=!1),N.protectedKeys={...E},!N.isActive&&F===null||!V&&!N.prevProp||Wy(V)||typeof V=="boolean")continue;if(C==="exit"&&N.isActive&&F!==!0){N.prevResolvedValues&&(E={...E,...N.prevResolvedValues});continue}const I=lK(N.prevProp,V);let k=I||C===h&&N.isActive&&!Z&&$||w>T&&$,D=!1;const B=Array.isArray(V)?V:[V];let z=B.reduce(i(C),{});F===!1&&(z={});const{prevResolvedValues:H={}}=N,P={...H,...z},Oe=ae=>{k=!0,v.has(ae)&&(D=!0,v.delete(ae)),N.needsAnimating[ae]=!0;const me=n.getValue(ae);me&&(me.liveStyle=!1)};for(const ae in P){const me=z[ae],Ne=H[ae];if(E.hasOwnProperty(ae))continue;let je=!1;hT(me)&&hT(Ne)?je=!MP(me,Ne):je=me!==Ne,je?me!=null?Oe(ae):v.add(ae):me!==void 0&&v.has(ae)?Oe(ae):N.protectedKeys[ae]=!0}N.prevProp=V,N.prevResolvedValues=z,N.isActive&&(E={...E,...z}),r&&n.blockInitialAnimation&&(k=!1);const Ae=Z&&I;k&&(!Ae||D)&&m.push(...B.map(ae=>{const me={type:C};if(typeof ae=="string"&&r&&!Ae&&n.manuallyAnimateOnMount&&n.parent){const{parent:Ne}=n,je=rc(Ne,ae);if(Ne.enteringChildren&&je){const{delayChildren:L}=je.transition||{};me.delay=Z2(Ne.enteringChildren,n,L)}}return{animation:ae,options:me}}))}if(v.size){const w={};if(typeof f.initial!="boolean"){const C=rc(n,Array.isArray(f.initial)?f.initial[0]:f.initial);C&&C.transition&&(w.transition=C.transition)}v.forEach(C=>{const N=n.getBaseTarget(C),V=n.getValue(C);V&&(V.liveStyle=!0),w[C]=N??null}),m.push({animation:w})}let S=!!m.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(m):Promise.resolve()}function u(h,f){if(t[h].isActive===f)return Promise.resolve();n.variantChildren?.forEach(m=>m.animationState?.setActive(h,f)),t[h].isActive=f;const p=a(h);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>t,reset:()=>{t=Sk()}}}function lK(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!MP(e,n):!1}function rl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Sk(){return{animate:rl(!0),whileInView:rl(),whileHover:rl(),whileTap:rl(),whileDrag:rl(),whileFocus:rl(),exit:rl()}}function wk(n,e){n.min=e.min,n.max=e.max}function li(n,e){wk(n.x,e.x),wk(n.y,e.y)}function Ak(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const DP=1e-4,uK=1-DP,cK=1+DP,NP=.01,hK=0-NP,fK=0+NP;function Wn(n){return n.max-n.min}function dK(n,e,t){return Math.abs(n-e)<=t}function xk(n,e,t,r=.5){n.origin=r,n.originPoint=xt(e.min,e.max,n.origin),n.scale=Wn(t)/Wn(e),n.translate=xt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=uK&&n.scale<=cK||isNaN(n.scale))&&(n.scale=1),(n.translate>=hK&&n.translate<=fK||isNaN(n.translate))&&(n.translate=0)}function vf(n,e,t,r){xk(n.x,e.x,t.x,r?r.originX:void 0),xk(n.y,e.y,t.y,r?r.originY:void 0)}function Ck(n,e,t){n.min=t.min+e.min,n.max=n.min+Wn(e)}function pK(n,e,t){Ck(n.x,e.x,t.x),Ck(n.y,e.y,t.y)}function Rk(n,e,t){n.min=e.min-t.min,n.max=n.min+Wn(e)}function Rg(n,e,t){Rk(n.x,e.x,t.x),Rk(n.y,e.y,t.y)}function kk(n,e,t,r,i){return n-=e,n=Cg(n,1/t,r),i!==void 0&&(n=Cg(n,1/i,r)),n}function mK(n,e=0,t=1,r=.5,i,s=n,a=n){if(es.test(e)&&(e=parseFloat(e),e=xt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=xt(s.min,s.max,r);n===s&&(u-=e),n.min=kk(n.min,e,t,u,i),n.max=kk(n.max,e,t,u,i)}function Ik(n,e,[t,r,i],s,a){mK(n,e[t],e[r],e[i],e.scale,s,a)}const gK=["x","scaleX","originX"],yK=["y","scaleY","originY"];function Mk(n,e,t,r){Ik(n.x,e,gK,t?t.x:void 0,r?r.x:void 0),Ik(n.y,e,yK,t?t.y:void 0,r?r.y:void 0)}function Dk(n){return n.translate===0&&n.scale===1}function OP(n){return Dk(n.x)&&Dk(n.y)}function Nk(n,e){return n.min===e.min&&n.max===e.max}function vK(n,e){return Nk(n.x,e.x)&&Nk(n.y,e.y)}function Ok(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function PP(n,e){return Ok(n.x,e.x)&&Ok(n.y,e.y)}function Pk(n){return Wn(n.x)/Wn(n.y)}function Lk(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Hi(n){return[n("x"),n("y")]}function bK(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:p,rotateX:m,rotateY:v,skewX:E,skewY:T}=t;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `),E&&(r+=`skewX(${E}deg) `),T&&(r+=`skewY(${T}deg) `)}const u=n.x.scale*e.x,h=n.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const LP=["TopLeft","TopRight","BottomLeft","BottomRight"],EK=LP.length,Vk=n=>typeof n=="string"?parseFloat(n):n,Uk=n=>typeof n=="number"||ve.test(n);function TK(n,e,t,r,i,s){i?(n.opacity=xt(0,t.opacity??1,_K(r)),n.opacityExit=xt(e.opacity??1,0,SK(r))):s&&(n.opacity=xt(e.opacity??1,t.opacity??1,r));for(let a=0;a<EK;a++){const u=`border${LP[a]}Radius`;let h=Bk(e,u),f=Bk(t,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Uk(h)===Uk(f)?(n[u]=Math.max(xt(Vk(h),Vk(f),r),0),(es.test(f)||es.test(h))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=xt(e.rotate||0,t.rotate||0,r))}function Bk(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const _K=VP(0,.5,R2),SK=VP(.5,.95,$r);function VP(n,e,t){return r=>r<n?0:r>e?1:t(Hf(n,e,r))}function wK(n,e,t){const r=Vn(n)?n:hc(n);return r.start(kS("",r,e,t)),r.animation}function Kf(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const AK=(n,e)=>n.depth-e.depth;class xK{constructor(){this.children=[],this.isDirty=!1}add(e){pS(this.children,e),this.isDirty=!0}remove(e){_g(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(AK),this.isDirty=!1,this.children.forEach(e)}}function CK(n,e){const t=Kn.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(ca(r),n(s-e))};return gt.setup(r,!0),()=>ca(r)}function Km(n){return Vn(n)?n.get():n}class RK{constructor(){this.members=[]}add(e){pS(this.members,e);for(let t=this.members.length-1;t>=0;t--){const r=this.members[t];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&_g(this.members,r)}e.scheduleRender()}remove(e){if(_g(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i],a=s.instance;if(s.isPresent!==!1&&(!a||a.isConnected!==!1)){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,s=e.options.layoutDependency;if(!(i!==void 0&&s!==void 0&&i===s)){const h=r.instance;h&&h.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:u}=e.options;u===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Wm={hasAnimatedSinceResize:!0,hasEverUpdated:!1},zb=["","X","Y","Z"],kK=1e3;let IK=0;function jb(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function UP(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=iP(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",gt,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&UP(r)}function BP({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e?.()){this.id=IK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(NK),this.nodes.forEach(VK),this.nodes.forEach(UK),this.nodes.forEach(OK)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new xK)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new gS),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=PS(a)&&!DG(a),this.instance=a;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),n){let p,m=0;const v=()=>this.root.updateBlockedByResize=!1;gt.read(()=>{m=window.innerWidth}),n(a,()=>{const E=window.innerWidth;E!==m&&(m=E,this.root.updateBlockedByResize=!0,p&&p(),p=CK(v,250),Wm.hasAnimatedSinceResize&&(Wm.hasAnimatedSinceResize=!1,this.nodes.forEach(Fk)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||f.getDefaultTransition()||HK,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=f.getProps(),C=!this.targetLayout||!PP(this.targetLayout,E),N=!m&&v;if(this.options.layoutRoot||this.resumeFrom||N||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...RS(T,"layout"),onPlay:S,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(p,N)}else m||Fk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ca(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BK),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&UP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(jk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(LK),this.nodes.forEach(MK),this.nodes.forEach(DK)):this.nodes.forEach(jk),this.clearAllSnapshots();const u=Kn.now();xn.delta=rs(0,1e3/60,u-xn.timestamp),xn.timestamp=u,xn.isProcessing=!0,Db.update.process(xn),Db.preRender.process(xn),Db.render.process(xn),xn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,NS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(PK),this.sharedNodes.forEach(zK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Wn(this.snapshot.measuredBox.x)&&!Wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!OP(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&this.instance&&(u||ol(this.latestValues)||p)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),qK(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ln();const u=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some($K))){const{scroll:f}=this.root;f&&(Wu(u.x,f.offset.x),Wu(u.y,f.offset.y))}return u}removeElementScroll(a){const u=ln();if(li(u,a),this.scroll?.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&li(u,a),Wu(u.x,p.offset.x),Wu(u.y,p.offset.y))}return u}applyTransform(a,u=!1){const h=ln();li(h,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Yu(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ol(p.latestValues)&&Yu(h,p.latestValues)}return ol(this.latestValues)&&Yu(h,this.latestValues),h}removeTransform(a){const u=ln();li(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!ol(f.latestValues))continue;vT(f.latestValues)&&f.updateSnapshot();const p=ln(),m=f.measurePageBox();li(p,m),Mk(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return ol(this.latestValues)&&Mk(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!this.layout||!(p||m))return;this.resolvedRelativeTargetAt=xn.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):li(this.target,this.layout.layoutBox),_P(this.target,this.targetDelta)):li(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||vT(this.parent.latestValues)||TP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,u,h){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),Rg(this.relativeTargetOrigin,u,h),li(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const a=this.getLead(),u=!!this.resumingFrom||this!==a;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===xn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;li(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;HG(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ln());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ak(this.prevProjectionDelta.x,this.projectionDelta.x),Ak(this.prevProjectionDelta.y,this.projectionDelta.y)),vf(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!Lk(this.projectionDelta.x,this.prevProjectionDelta.x)||!Lk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ku(),this.projectionDelta=Ku(),this.projectionDeltaWithTransform=Ku()}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},m=Ku();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=ln(),E=h?h.source:void 0,T=this.layout?this.layout.source:void 0,S=E!==T,w=this.getStack(),C=!w||w.members.length<=1,N=!!(S&&!C&&this.options.crossfade===!0&&!this.path.some(FK));this.animationProgress=0;let V;this.mixTargetDelta=$=>{const F=$/1e3;Hk(m.x,a.x,F),Hk(m.y,a.y,F),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rg(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jK(this.relativeTarget,this.relativeTargetOrigin,v,F),V&&vK(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=ln()),li(V,this.relativeTarget)),S&&(this.animationValues=p,TK(p,f,this.latestValues,F,N,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ca(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gt.update(()=>{Wm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hc(0)),this.motionValue.jump(0,!1),this.currentAnimation=wK(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&zP(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||ln();const m=Wn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+m;const v=Wn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}li(u,h),Yu(u,p),vf(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new RK),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&jb("z",a,f,this.animationValues);for(let p=0;p<zb.length;p++)jb(`rotate${zb[p]}`,a,f,this.animationValues),jb(`skew${zb[p]}`,a,f,this.animationValues);a.render();for(const p in f)a.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);a.scheduleRender()}applyProjectionStyles(a,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Km(u?.pointerEvents)||"",a.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Km(u?.pointerEvents)||""),this.hasProjected&&!ol(this.latestValues)&&(a.transform=h?h({},""):"none",this.hasProjected=!1);return}a.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=bK(this.projectionDeltaWithTransform,this.treeScale,p);h&&(m=h(p,m)),a.transform=m;const{x:v,y:E}=this.projectionDelta;a.transformOrigin=`${v.origin*100}% ${E.origin*100}% 0`,f.animationValues?a.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:a.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const T in ET){if(p[T]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:C}=ET[T],N=m==="none"?p[T]:S(p[T],f);if(w){const V=w.length;for(let $=0;$<V;$++)a[w[$]]=N}else C?this.options.visualElement.renderState.vars[T]=N:a[T]=N}this.options.layoutId&&(a.pointerEvents=f===this?Km(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(zk),this.root.sharedNodes.clear()}}}function MK(n){n.updateLayout()}function DK(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,s=e.source!==n.layout.source;i==="size"?Hi(p=>{const m=s?e.measuredBox[p]:e.layoutBox[p],v=Wn(m);m.min=t[p].min,m.max=m.min+v}):zP(i,e.layoutBox,t)&&Hi(p=>{const m=s?e.measuredBox[p]:e.layoutBox[p],v=Wn(t[p]);m.max=m.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+v)});const a=Ku();vf(a,t,e.layoutBox);const u=Ku();s?vf(u,n.applyTransform(r,!0),e.measuredBox):vf(u,t,e.layoutBox);const h=!OP(a);let f=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:v}=p;if(m&&v){const E=ln();Rg(E,e.layoutBox,m.layoutBox);const T=ln();Rg(T,t,v.layoutBox),PP(E,T)||(f=!0),p.options.layoutRoot&&(n.relativeTarget=T,n.relativeTargetOrigin=E,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:u,layoutDelta:a,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function NK(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function OK(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function PK(n){n.clearSnapshot()}function zk(n){n.clearMeasurements()}function jk(n){n.isLayoutDirty=!1}function LK(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Fk(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function VK(n){n.resolveTargetDelta()}function UK(n){n.calcProjection()}function BK(n){n.resetSkewAndRotation()}function zK(n){n.removeLeadSnapshot()}function Hk(n,e,t){n.translate=xt(e.translate,0,t),n.scale=xt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function qk(n,e,t,r){n.min=xt(e.min,t.min,r),n.max=xt(e.max,t.max,r)}function jK(n,e,t,r){qk(n.x,e.x,t.x,r),qk(n.y,e.y,t.y,r)}function FK(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const HK={duration:.45,ease:[.4,0,.1,1]},$k=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Gk=$k("applewebkit/")&&!$k("chrome/")?Math.round:$r;function Kk(n){n.min=Gk(n.min),n.max=Gk(n.max)}function qK(n){Kk(n.x),Kk(n.y)}function zP(n,e,t){return n==="position"||n==="preserve-aspect"&&!dK(Pk(e),Pk(t),.2)}function $K(n){return n!==n.root&&n.scroll?.wasRoot}const GK=BP({attachResizeListener:(n,e)=>Kf(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Fb={current:void 0},jP=BP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Fb.current){const n=new GK({});n.mount(window),n.setOptions({layoutScroll:!0}),Fb.current=n}return Fb.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),zS=O.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Wk(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function KK(...n){return e=>{let t=!1;const r=n.map(i=>{const s=Wk(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Wk(n[i],null)}}}}function WK(...n){return O.useCallback(KK(...n),n)}class YK extends O.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=t.offsetParent,i=gT(r)&&r.offsetWidth||0,s=gT(r)&&r.offsetHeight||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left,a.bottom=s-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function QK({children:n,isPresent:e,anchorX:t,anchorY:r,root:i,pop:s}){const a=O.useId(),u=O.useRef(null),h=O.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=O.useContext(zS),p=n.props?.ref??n?.ref,m=WK(u,p);return O.useInsertionEffect(()=>{const{width:v,height:E,top:T,left:S,right:w,bottom:C}=h.current;if(e||s===!1||!u.current||!v||!E)return;const N=t==="left"?`left: ${S}`:`right: ${w}`,V=r==="bottom"?`bottom: ${C}`:`top: ${T}`;u.current.dataset.motionPopId=a;const $=document.createElement("style");f&&($.nonce=f);const F=i??document.head;return F.appendChild($),$.sheet&&$.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${E}px !important;
            ${N}px !important;
            ${V}px !important;
          }
        `),()=>{F.contains($)&&F.removeChild($)}},[e]),q.jsx(YK,{isPresent:e,childRef:u,sizeRef:h,pop:s,children:s===!1?n:O.cloneElement(n,{ref:m})})}const XK=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:u,anchorY:h,root:f})=>{const p=dS(JK),m=O.useId();let v=!0,E=O.useMemo(()=>(v=!1,{id:m,initial:e,isPresent:t,custom:i,onExitComplete:T=>{p.set(T,!0);for(const S of p.values())if(!S)return;r&&r()},register:T=>(p.set(T,!1),()=>p.delete(T))}),[t,p,r]);return s&&v&&(E={...E}),O.useMemo(()=>{p.forEach((T,S)=>p.set(S,!1))},[t]),O.useEffect(()=>{!t&&!p.size&&r&&r()},[t]),n=q.jsx(QK,{pop:a==="popLayout",isPresent:t,anchorX:u,anchorY:h,root:f,children:n}),q.jsx(Ky.Provider,{value:E,children:n})};function JK(){return new Map}function FP(n=!0){const e=O.useContext(Ky);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=O.useId();O.useEffect(()=>{if(n)return i(s)},[n]);const a=O.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const gm=n=>n.key||"";function Yk(n){const e=[];return O.Children.forEach(n,t=>{O.isValidElement(t)&&e.push(t)}),e}const Qk=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:u="left",anchorY:h="top",root:f})=>{const[p,m]=FP(a),v=O.useMemo(()=>Yk(n),[n]),E=a&&!p?[]:v.map(gm),T=O.useRef(!0),S=O.useRef(v),w=dS(()=>new Map),C=O.useRef(new Set),[N,V]=O.useState(v),[$,F]=O.useState(v);g2(()=>{T.current=!1,S.current=v;for(let k=0;k<$.length;k++){const D=gm($[k]);E.includes(D)?(w.delete(D),C.current.delete(D)):w.get(D)!==!0&&w.set(D,!1)}},[$,E.length,E.join("-")]);const Z=[];if(v!==N){let k=[...v];for(let D=0;D<$.length;D++){const B=$[D],z=gm(B);E.includes(z)||(k.splice(D,0,B),Z.push(B))}return s==="wait"&&Z.length&&(k=Z),F(Yk(k)),V(v),null}const{forceRender:I}=O.useContext(fS);return q.jsx(q.Fragment,{children:$.map(k=>{const D=gm(k),B=a&&!p?!1:v===$||E.includes(D),z=()=>{if(C.current.has(D))return;if(C.current.add(D),w.has(D))w.set(D,!0);else return;let H=!0;w.forEach(P=>{P||(H=!1)}),H&&(I?.(),F(S.current),a&&m?.(),r&&r())};return q.jsx(XK,{isPresent:B,initial:!T.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:f,onExitComplete:B?void 0:z,anchorX:u,anchorY:h,children:k},D)})})},HP=O.createContext({strict:!1}),Xk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Jk=!1;function ZK(){if(Jk)return;const n={};for(const e in Xk)n[e]={isEnabled:t=>Xk[e].some(r=>!!t[r])};vP(n),Jk=!0}function qP(){return ZK(),BG()}function eW(n){const e=qP();for(const t in n)e[t]={...e[t],...n[t]};vP(e)}const tW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function kg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||tW.has(n)}let $P=n=>!kg(n);function nW(n){typeof n=="function"&&($P=e=>e.startsWith("on")?!kg(e):n(e))}try{nW(require("@emotion/is-prop-valid").default)}catch{}function rW(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||($P(i)||t===!0&&kg(i)||!e&&!kg(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Qy=O.createContext({});function iW(n,e){if(Yy(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Gf(t)?t:void 0,animate:Gf(r)?r:void 0}}return n.inherit!==!1?e:{}}function sW(n){const{initial:e,animate:t}=iW(n,O.useContext(Qy));return O.useMemo(()=>({initial:e,animate:t}),[Zk(e),Zk(t)])}function Zk(n){return Array.isArray(n)?n.join(" "):n}const jS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GP(n,e,t){for(const r in e)!Vn(e[r])&&!AP(r,t)&&(n[r]=e[r])}function oW({transformTemplate:n},e){return O.useMemo(()=>{const t=jS();return US(t,e,n),Object.assign({},t.vars,t.style)},[e])}function aW(n,e){const t=n.style||{},r={};return GP(r,t,n),Object.assign(r,oW(n,e)),r}function lW(n,e){const t={},r=aW(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const KP=()=>({...jS(),attrs:{}});function uW(n,e,t,r){const i=O.useMemo(()=>{const s=KP();return xP(s,e,RP(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};GP(s,n.style,n),i.style={...s,...i.style}}return i}const cW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function FS(n){return typeof n!="string"||n.includes("-")?!1:!!(cW.indexOf(n)>-1||/[A-Z]/u.test(n))}function hW(n,e,t,{latestValues:r},i,s=!1,a){const h=(a??FS(n)?uW:lW)(e,r,i,n),f=rW(e,typeof n=="string",s),p=n!==O.Fragment?{...f,...h,ref:t}:{},{children:m}=e,v=O.useMemo(()=>Vn(m)?m.get():m,[m]);return O.createElement(n,{...p,children:v})}function fW({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:dW(t,r,i,n),renderState:e()}}function dW(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=Km(s[v]);let{initial:a,animate:u}=n;const h=Yy(n),f=gP(n);e&&f&&!h&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let p=t?t.initial===!1:!1;p=p||a===!1;const m=p?u:a;if(m&&typeof m!="boolean"&&!Wy(m)){const v=Array.isArray(m)?m:[m];for(let E=0;E<v.length;E++){const T=IS(n,v[E]);if(T){const{transitionEnd:S,transition:w,...C}=T;for(const N in C){let V=C[N];if(Array.isArray(V)){const $=p?V.length-1:0;V=V[$]}V!==null&&(i[N]=V)}for(const N in S)i[N]=S[N]}}}return i}const WP=n=>(e,t)=>{const r=O.useContext(Qy),i=O.useContext(Ky),s=()=>fW(n,e,r,i);return t?s():dS(s)},pW=WP({scrapeMotionValuesFromProps:BS,createRenderState:jS}),mW=WP({scrapeMotionValuesFromProps:kP,createRenderState:KP}),gW=Symbol.for("motionComponentSymbol");function yW(n,e,t){const r=O.useRef(t);O.useInsertionEffect(()=>{r.current=t});const i=O.useRef(null);return O.useCallback(s=>{s&&n.onMount?.(s),e&&(s?e.mount(s):e.unmount());const a=r.current;if(typeof a=="function")if(s){const u=a(s);typeof u=="function"&&(i.current=u)}else i.current?(i.current(),i.current=null):a(s);else a&&(a.current=s)},[e])}const YP=O.createContext({});function zu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function vW(n,e,t,r,i,s){const{visualElement:a}=O.useContext(Qy),u=O.useContext(HP),h=O.useContext(Ky),f=O.useContext(zS),p=f.reducedMotion,m=f.skipAnimations,v=O.useRef(null),E=O.useRef(!1);r=r||u.renderer,!v.current&&r&&(v.current=r(n,{visualState:e,parent:a,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p,skipAnimations:m,isSVG:s}),E.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const T=v.current,S=O.useContext(YP);T&&!T.projection&&i&&(T.type==="html"||T.type==="svg")&&bW(v.current,t,i,S);const w=O.useRef(!1);O.useInsertionEffect(()=>{T&&w.current&&T.update(t,h)});const C=t[rP],N=O.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return g2(()=>{E.current=!0,T&&(w.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),T.scheduleRenderMicrotask(),N.current&&T.animationState&&T.animationState.animateChanges())}),O.useEffect(()=>{T&&(!N.current&&T.animationState&&T.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),N.current=!1),T.enteringChildren=void 0)}),T}function bW(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:QP(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||u&&zu(u),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:h,layoutRoot:f})}function QP(n){if(n)return n.options.allowProjection!==!1?n.projection:QP(n.parent)}function Hb(n,{forwardMotionProps:e=!1,type:t}={},r,i){r&&eW(r);const s=t?t==="svg":FS(n),a=s?mW:pW;function u(f,p){let m;const v={...O.useContext(zS),...f,layoutId:EW(f)},{isStatic:E}=v,T=sW(f),S=a(f,E);if(!E&&m2){TW();const w=_W(v);m=w.MeasureLayout,T.visualElement=vW(n,S,v,i,w.ProjectionNode,s)}return q.jsxs(Qy.Provider,{value:T,children:[m&&T.visualElement?q.jsx(m,{visualElement:T.visualElement,...v}):null,hW(n,f,yW(S,T.visualElement,p),S,E,e,s)]})}u.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const h=O.forwardRef(u);return h[gW]=n,h}function EW({layoutId:n}){const e=O.useContext(fS).id;return e&&n!==void 0?e+"-"+n:n}function TW(n,e){O.useContext(HP).strict}function _W(n){const e=qP(),{drag:t,layout:r}=e;if(!t&&!r)return{};const i={...t,...r};return{MeasureLayout:t?.isEnabled(n)||r?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function SW(n,e){if(typeof Proxy>"u")return Hb;const t=new Map,r=(s,a)=>Hb(s,a,n,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(t.has(a)||t.set(a,Hb(a,void 0,n,e)),t.get(a))})}const wW=(n,e)=>e.isSVG??FS(n)?new nK(e):new QG(e,{allowProjection:n!==O.Fragment});class AW extends _a{constructor(e){super(e),e.animationState||(e.animationState=aK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Wy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let xW=0;class CW extends _a{constructor(){super(...arguments),this.id=xW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const RW={animation:{Feature:AW},exit:{Feature:CW}};function Ad(n){return{point:{x:n.pageX,y:n.pageY}}}const kW=n=>e=>OS(e)&&n(e,Ad(e));function bf(n,e,t,r){return Kf(n,e,kW(t),r)}const XP=({current:n})=>n?n.ownerDocument.defaultView:null,eI=(n,e)=>Math.abs(n-e);function IW(n,e){const t=eI(n.x,e.x),r=eI(n.y,e.y);return Math.sqrt(t**2+r**2)}const tI=new Set(["auto","scroll"]);class JP{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=$b(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,S=IW(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!S)return;const{point:w}=E,{timestamp:C}=xn;this.history.push({...w,timestamp:C});const{onStart:N,onMove:V}=this.handlers;T||(N&&N(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,E)},this.handlePointerMove=(E,T)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=qb(T,this.transformPagePoint),gt.update(this.updatePoint,!0)},this.handlePointerUp=(E,T)=>{this.end();const{onEnd:S,onSessionEnd:w,resumeAnimation:C}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=$b(E.type==="pointercancel"?this.lastMoveEventInfo:qb(T,this.transformPagePoint),this.history);this.startEvent&&S&&S(E,N),w&&w(E,N)},!OS(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const h=Ad(e),f=qb(h,this.transformPagePoint),{point:p}=f,{timestamp:m}=xn;this.history=[{...p,timestamp:m}];const{onSessionStart:v}=t;v&&v(e,$b(f,this.history)),this.removeListeners=_d(bf(this.contextWindow,"pointermove",this.handlePointerMove),bf(this.contextWindow,"pointerup",this.handlePointerUp),bf(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(tI.has(r.overflowX)||tI.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-t.x,y:i.y-t.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),gt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ca(this.updatePoint)}}function qb(n,e){return e?{point:e(n.point)}:n}function nI(n,e){return{x:n.x-e.x,y:n.y-e.y}}function $b({point:n},e){return{point:n,delta:nI(n,ZP(e)),offset:nI(n,MW(e)),velocity:DW(e,.1)}}function MW(n){return n[0]}function ZP(n){return n[n.length-1]}function DW(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=ZP(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>gi(e)));)t--;if(!r)return{x:0,y:0};r===n[0]&&n.length>2&&i.timestamp-r.timestamp>gi(e)*2&&(r=n[1]);const s=qr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function NW(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?xt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?xt(t,n,r.max):Math.min(n,t)),n}function rI(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function OW(n,{top:e,left:t,bottom:r,right:i}){return{x:rI(n.x,t,i),y:rI(n.y,e,r)}}function iI(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function PW(n,e){return{x:iI(n.x,e.x),y:iI(n.y,e.y)}}function LW(n,e){let t=.5;const r=Wn(n),i=Wn(e);return i>r?t=Hf(e.min,e.max-r,n.min):r>i&&(t=Hf(n.min,n.max-i,e.min)),rs(0,1,t)}function VW(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const TT=.35;function UW(n=TT){return n===!1?n=0:n===!0&&(n=TT),{x:sI(n,"left","right"),y:sI(n,"top","bottom")}}function sI(n,e,t){return{min:oI(n,e),max:oI(n,t)}}function oI(n,e){return typeof n=="number"?n:n[e]||0}const BW=new WeakMap;class zW{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=m=>{t&&this.snapToCursor(Ad(m).point),this.stopAnimation()},a=(m,v)=>{const{drag:E,dragPropagation:T,onDragStart:S}=this.getProps();if(E&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mG(E),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hi(C=>{let N=this.getAxisMotionValue(C).get()||0;if(es.test(N)){const{projection:V}=this.visualElement;if(V&&V.layout){const $=V.layout.layoutBox[C];$&&(N=Wn($)*(parseFloat(N)/100))}}this.originPoint[C]=N}),S&&gt.update(()=>S(m,v),!1,!0),fT(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},u=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:E,dragDirectionLock:T,onDirectionLock:S,onDrag:w}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:C}=v;if(T&&this.currentDirection===null){this.currentDirection=FW(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,C),this.updateAxis("y",v.point,C),this.visualElement.render(),w&&gt.update(()=>w(m,v),!1,!0)},h=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>{const{dragSnapToOrigin:m}=this.getProps();(m||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new JP(e,{onSessionStart:s,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:XP(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:u}=this.getProps();u&&gt.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!ym(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=NW(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&zu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=OW(r.layoutBox,e):this.constraints=!1,this.elastic=UW(t),i!==this.constraints&&!zu(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&Hi(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=VW(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!zu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=qG(r,i.root,this.visualElement.getTransformPagePoint());let a=PW(i.layout.layoutBox,s);if(t){const u=t(jG(a));this.hasMutatedConstraints=!!u,u&&(a=EP(u))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Hi(p=>{if(!ym(p,t,this.currentDirection))return;let m=h&&h[p]||{};a&&(m={min:0,max:0});const v=i?200:1e6,E=i?40:1e7,T={type:"inertia",velocity:r?e[p]:0,bounceStiffness:v,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(p,T)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return fT(this.visualElement,e),r.start(kS(e,r,0,t,this.visualElement,!1))}stopAnimation(){Hi(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Hi(t=>{const{drag:r}=this.getProps();if(!ym(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[t],h=s.get()||0;s.set(e[t]-xt(a,u,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!zu(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Hi(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const h=u.get();i[a]=LW({min:h,max:h},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),Hi(a=>{if(!ym(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(xt(h,f,i[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;BW.set(this.visualElement,this);const e=this.visualElement.current,t=bf(e,"pointerdown",f=>{const{drag:p,dragListener:m=!0}=this.getProps(),v=f.target,E=v!==e&&TG(v);p&&m&&!E&&this.start(f)});let r;const i=()=>{const{dragConstraints:f}=this.getProps();zu(f)&&f.current&&(this.constraints=this.resolveRefConstraints(),r||(r=jW(e,f.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,a=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),gt.read(i);const u=Kf(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Hi(m=>{const v=this.getAxisMotionValue(m);v&&(this.originPoint[m]+=f[m].translate,v.set(v.get()+f[m].translate))}),this.visualElement.render())}));return()=>{u(),t(),a(),h&&h(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=TT,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function aI(n){let e=!0;return()=>{if(e){e=!1;return}n()}}function jW(n,e,t){const r=dk(n,aI(t)),i=dk(e,aI(t));return()=>{r(),i()}}function ym(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function FW(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class HW extends _a{constructor(e){super(e),this.removeGroupControls=$r,this.removeListeners=$r,this.controls=new zW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$r}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Gb=n=>(e,t)=>{n&&gt.update(()=>n(e,t),!1,!0)};class qW extends _a{constructor(){super(...arguments),this.removePointerDownListener=$r}onPointerDown(e){this.session=new JP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:XP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Gb(e),onStart:Gb(t),onMove:Gb(r),onEnd:(s,a)=>{delete this.session,i&&gt.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=bf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Kb=!1;class $W extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),Kb&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Wm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,e.layoutDependency!==t&&a.setOptions({...a.options,layoutDependency:t}),Kb=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||gt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),NS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;Kb=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eL(n){const[e,t]=FP(),r=O.useContext(fS);return q.jsx($W,{...n,layoutGroup:r,switchLayoutGroup:O.useContext(YP),isPresent:e,safeToRemove:t})}const GW={pan:{Feature:qW},drag:{Feature:HW,ProjectionNode:jP,MeasureLayout:eL}};function lI(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&gt.postRender(()=>s(e,Ad(e)))}class KW extends _a{mount(){const{current:e}=this.node;e&&(this.unmount=yG(e,(t,r)=>(lI(this.node,r,"Start"),i=>lI(this.node,i,"End"))))}unmount(){}}class WW extends _a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_d(Kf(this.node.current,"focus",()=>this.onFocus()),Kf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uI(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&gt.postRender(()=>s(e,Ad(e)))}class YW extends _a{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:r}=this.node.props;this.unmount=SG(e,(i,s)=>(uI(this.node,s,"Start"),(a,{success:u})=>uI(this.node,a,u?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:r?.tap===!1})}unmount(){}}const _T=new WeakMap,Wb=new WeakMap,QW=n=>{const e=_T.get(n.target);e&&e(n)},XW=n=>{n.forEach(QW)};function JW({root:n,...e}){const t=n||document;Wb.has(t)||Wb.set(t,{});const r=Wb.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(XW,{root:n,...e})),r[i]}function ZW(n,e,t){const r=JW(e);return _T.set(n,t),r.observe(n),()=>{_T.delete(n),r.unobserve(n)}}const eY={some:0,all:1};class tY extends _a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:eY[i]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),v=f?p:m;v&&v(h)};return ZW(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(nY(e,t))&&this.startObserver()}unmount(){}}function nY({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const rY={inView:{Feature:tY},tap:{Feature:YW},focus:{Feature:WW},hover:{Feature:KW}},iY={layout:{ProjectionNode:jP,MeasureLayout:eL}},sY={...RW,...rY,...GW,...iY},vr=SW(sY,wW);function oY(){const{user:n,loading:e,signInWithGoogle:t,signInWithEmail:r,signUp:i}=Gy(),s=ad(),[a,u]=O.useState(!1),[h,f]=O.useState(""),[p,m]=O.useState(""),[v,E]=O.useState(""),[T,S]=O.useState(""),[w,C]=O.useState(!1);O.useEffect(()=>{!e&&n&&s("/dashboard",{replace:!0})},[n,e,s]);const N=async()=>{S(""),C(!0);try{await t(),s("/dashboard",{replace:!0})}catch($){S($.message||"Google sign-in failed. Please try again.")}finally{C(!1)}},V=async $=>{$.preventDefault(),S(""),C(!0);try{a?await i(p,v,h):await r(p,v),s("/dashboard",{replace:!0})}catch(F){S(F.message||"Authentication failed. Please try again.")}finally{C(!1)}};return e?q.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-100 via-pink-50 to-rose-100",children:q.jsx("div",{className:"animate-pulse font-['Pacifico'] text-3xl text-pink-400",children:"DearMe "})}):q.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-100 via-pink-50 to-rose-100 px-4",children:q.jsxs(vr.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full max-w-md bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl shadow-pink-200/40 p-8",children:[q.jsx("h1",{className:"font-['Pacifico'] text-4xl text-pink-400 text-center mb-2",children:"DearMe "}),q.jsx("p",{className:"font-['Poppins'] text-sm text-pink-300 text-center mb-8",children:"Your safe, beautiful diary"}),T&&q.jsx(vr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 rounded-xl bg-red-50 border border-red-200 text-red-600 text-sm font-['Poppins'] text-center",children:T}),q.jsxs("button",{type:"button",onClick:N,disabled:w,className:"w-full flex items-center justify-center gap-3 py-3 px-4 rounded-xl border border-pink-200 bg-white hover:bg-pink-50 transition-colors font-['Poppins'] text-sm text-gray-700 mb-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[q.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[q.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),q.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),q.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),q.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]}),q.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[q.jsx("div",{className:"flex-1 h-px bg-pink-200"}),q.jsx("span",{className:"font-['Poppins'] text-xs text-pink-300",children:"or"}),q.jsx("div",{className:"flex-1 h-px bg-pink-200"})]}),q.jsxs("form",{onSubmit:V,className:"space-y-4",children:[a&&q.jsx(vr.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:q.jsx("input",{type:"text",placeholder:"Your name",value:h,onChange:$=>f($.target.value),className:"w-full px-4 py-3 rounded-xl border border-pink-200 bg-white/70 font-['Poppins'] text-sm text-gray-700 placeholder-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-transparent transition-all"})}),q.jsx("input",{type:"email",placeholder:"Email",value:p,onChange:$=>m($.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-pink-200 bg-white/70 font-['Poppins'] text-sm text-gray-700 placeholder-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-transparent transition-all"}),q.jsx("input",{type:"password",placeholder:"Password",value:v,onChange:$=>E($.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-pink-200 bg-white/70 font-['Poppins'] text-sm text-gray-700 placeholder-pink-300 focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-transparent transition-all"}),q.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 rounded-xl bg-pink-400 hover:bg-pink-500 text-white font-['Poppins'] text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Please wait...":a?"Create Account":"Sign In"})]}),q.jsxs("p",{className:"mt-6 text-center font-['Poppins'] text-sm text-gray-500",children:[a?"Already have an account?":"Don't have an account?"," ",q.jsx("button",{type:"button",onClick:()=>{u(!a),S("")},className:"text-pink-400 hover:text-pink-500 font-medium transition-colors",children:a?"Sign In":"Sign Up"})]})]})})}const cI=["#FFE4E1","#E8F5E9","#FFF3E0","#E3F2FD","#F3E5F5","#FFF9C4","#E0F7FA","#FCE4EC"];function aY(n,e){if(!n||n.length===0)return null;let t=n;n.length>1&&e&&(t=n.filter(s=>s.id!==e));const r=Math.floor(Math.random()*t.length),i=Math.floor(Math.random()*cI.length);return{...t[r],backgroundColor:cI[i]}}const lY=[{id:"q1",text:"You survived today. That's enough ",author:"Unknown",category:"self-care"},{id:"q2",text:"Healing is not linear ",author:"Unknown",category:"self-care"},{id:"q3",text:"Little steps count.",author:"Unknown",category:"motivation"},{id:"q4",text:"Be gentle with yourself. You're doing the best you can ",author:"Unknown",category:"self-care"},{id:"q5",text:"You are allowed to take up space in this world ",author:"Unknown",category:"motivation"},{id:"q6",text:"Rest is productive too ",author:"Unknown",category:"productivity"},{id:"q7",text:"Your feelings are valid, always ",author:"Unknown",category:"self-care"},{id:"q8",text:"You don't have to be perfect to be worthy of love ",author:"Unknown",category:"love"},{id:"q9",text:"Progress, not perfection ",author:"Unknown",category:"motivation"},{id:"q10",text:"The sun will rise and we will try again ",author:"Unknown",category:"general"},{id:"q11",text:"You are enough, just as you are ",author:"Unknown",category:"self-care"},{id:"q12",text:"One day at a time, one breath at a time ",author:"Unknown",category:"general"},{id:"q13",text:"Your story isn't over yet ",author:"Unknown",category:"motivation"},{id:"q14",text:"It's okay to not have all the answers right now ",author:"Unknown",category:"general"},{id:"q15",text:"You are someone's reason to smile ",author:"Unknown",category:"love"},{id:"q16",text:"Small progress is still progress ",author:"Unknown",category:"productivity"},{id:"q17",text:"Let yourself bloom at your own pace ",author:"Unknown",category:"self-care"},{id:"q18",text:"You carry so much love in your heart. Give some to yourself ",author:"Unknown",category:"love"},{id:"q19",text:"Done is better than perfect ",author:"Unknown",category:"productivity"},{id:"q20",text:"Breathe. You're going to be okay ",author:"Unknown",category:"general"},{id:"q21",text:"Every day is a fresh start ",author:"Unknown",category:"motivation"},{id:"q22",text:"You deserve the love you keep giving to others ",author:"Unknown",category:"love"},{id:"q23",text:"Celebrate the tiny victories today ",author:"Unknown",category:"productivity"},{id:"q24",text:"Soft days are still good days ",author:"Unknown",category:"general"}],ST=["happy","sad","productive","romantic","anxious","calm","neutral"],tL={happy:"",sad:"",productive:"",romantic:"",anxious:"",calm:"",neutral:""},al=10,hI=200,nL=5*1024*1024,rL=["image/jpeg","image/png","image/gif","image/webp"],uY={happy:{bg:"bg-yellow-100",border:"border-yellow-400",hover:"hover:bg-yellow-50"},sad:{bg:"bg-blue-100",border:"border-blue-400",hover:"hover:bg-blue-50"},productive:{bg:"bg-green-100",border:"border-green-400",hover:"hover:bg-green-50"},romantic:{bg:"bg-pink-100",border:"border-pink-400",hover:"hover:bg-pink-50"},anxious:{bg:"bg-orange-100",border:"border-orange-400",hover:"hover:bg-orange-50"},calm:{bg:"bg-teal-100",border:"border-teal-400",hover:"hover:bg-teal-50"},neutral:{bg:"bg-gray-100",border:"border-gray-400",hover:"hover:bg-gray-50"}};function iL({value:n,onChange:e}){return q.jsx("div",{className:"flex flex-wrap gap-3",role:"group","aria-label":"Select your mood",children:ST.map(t=>{const r=n===t,i=uY[t];return q.jsxs("button",{type:"button",onClick:()=>e(t),"aria-label":`${t} mood`,"aria-pressed":r,className:`flex flex-col items-center gap-1 px-4 py-3 rounded-2xl border-2 transition-all cursor-pointer font-['Poppins'] text-sm capitalize ${r?`${i.bg} ${i.border} shadow-md scale-105`:`bg-white border-transparent ${i.hover} hover:shadow-sm`}`,children:[q.jsx("span",{className:"text-2xl",role:"img","aria-hidden":"true",children:tL[t]}),q.jsx("span",{className:r?"font-medium":"text-gray-500",children:t})]},t)})})}function cY(){const n=new Date().getHours();return n<12?{text:"Good Morning",emoji:""}:n<18?{text:"Good Afternoon",emoji:""}:{text:"Good Evening",emoji:""}}function hY(n){return n?(n.toDate?n.toDate():new Date(n)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function fY(n){if(!n)return"";if(typeof n=="string")return n.slice(0,100);try{const e=[],t=i=>{i.text&&e.push(i.text),i.content&&i.content.forEach(t)};t(n);const r=e.join(" ");return r.length>100?r.slice(0,100)+"":r}catch{return""}}function Hh({className:n=""}){return q.jsx("div",{className:`animate-pulse rounded-2xl bg-pink-100/50 ${n}`,children:q.jsxs("div",{className:"p-5 space-y-3",children:[q.jsx("div",{className:"h-4 bg-pink-200/60 rounded w-3/4"}),q.jsx("div",{className:"h-3 bg-pink-200/40 rounded w-full"}),q.jsx("div",{className:"h-3 bg-pink-200/40 rounded w-1/2"})]})})}const dY={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},qh={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.45,ease:"easeOut"}}};function pY(){const{user:n}=Gy(),e=ad(),[t,r]=O.useState(null),[i,s]=O.useState([]),[a,u]=O.useState(!0),[h,f]=O.useState(null),p=O.useMemo(()=>cY(),[]),m=O.useMemo(()=>aY(lY),[]);O.useEffect(()=>{if(!n)return;let E=!1;async function T(){try{const S=await $y(Us(fi,"users",n.uid));!E&&S.exists()&&r(S.data());const w=Mq(PO(fi,"entries"),Dq("userId","==",n.uid),Nq("date","desc"),Oq(5)),C=await jq(w);E||s(C.docs.map(N=>({id:N.id,...N.data()})))}catch(S){console.error("Dashboard fetch error:",S)}finally{E||u(!1)}}return T(),()=>{E=!0}},[n]);const v=t?.name||n?.displayName||"Friend";return a?q.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[q.jsx("div",{className:"animate-pulse h-10 bg-pink-200/40 rounded w-2/3"}),q.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[q.jsx(Hh,{className:"h-28"}),q.jsx(Hh,{className:"h-28"})]}),q.jsx(Hh,{className:"h-32"}),q.jsx(Hh,{className:"h-24"}),q.jsx(Hh,{className:"h-24"})]}):q.jsxs(vr.div,{className:"max-w-3xl mx-auto px-4 py-8 space-y-8",variants:dY,initial:"hidden",animate:"visible",children:[q.jsxs(vr.h1,{variants:qh,className:"font-['Pacifico'] text-3xl sm:text-4xl text-[var(--color-text,#4A2040)]",children:[p.text,", ",v," ",p.emoji]}),q.jsxs(vr.div,{variants:qh,className:"flex flex-wrap items-center gap-4",children:[q.jsxs("div",{className:"flex items-center gap-2 bg-white/80 backdrop-blur rounded-2xl px-5 py-3 shadow-sm border border-pink-100",children:[q.jsx("span",{className:"text-2xl",children:""}),q.jsxs("span",{className:"font-['Poppins'] text-lg font-semibold text-[var(--color-text,#4A2040)]",children:[t?.streak??0," day streak"]})]}),q.jsx("button",{onClick:()=>e("/editor"),className:"ml-auto bg-gradient-to-r from-pink-400 to-rose-400 hover:from-pink-500 hover:to-rose-500 text-white font-['Poppins'] font-medium px-6 py-3 rounded-2xl shadow-md hover:shadow-lg transition-all cursor-pointer",children:" Write Today's Entry"})]}),m&&q.jsxs(vr.div,{variants:qh,className:"rounded-2xl p-6 shadow-sm",style:{backgroundColor:m.backgroundColor},children:[q.jsxs("p",{className:"font-['Caveat'] text-xl sm:text-2xl text-gray-800 leading-relaxed",children:['"',m.text,'"']}),q.jsxs("p",{className:"font-['Poppins'] text-sm text-gray-600 mt-2",children:[" ",m.author]})]}),q.jsxs(vr.div,{variants:qh,className:"bg-white/80 backdrop-blur rounded-2xl p-5 shadow-sm border border-pink-100",children:[q.jsx("h2",{className:"font-['Caveat'] text-xl text-[var(--color-text,#4A2040)] mb-3",children:"How are you feeling right now?"}),q.jsx(iL,{value:h,onChange:f})]}),q.jsxs(vr.section,{variants:qh,children:[q.jsx("h2",{className:"font-['Caveat'] text-2xl text-[var(--color-text,#4A2040)] mb-4",children:"Recent Entries "}),i.length===0?q.jsx("p",{className:"font-['Poppins'] text-gray-400 text-sm",children:"No entries yet. Start writing your first diary entry!"}):q.jsx("div",{className:"space-y-3",children:i.map(E=>q.jsx(a_,{to:`/editor/${E.id}`,className:"block bg-white/80 backdrop-blur rounded-2xl p-4 shadow-sm border border-pink-100 hover:shadow-md hover:scale-[1.01] transition-all",children:q.jsxs("div",{className:"flex items-start justify-between gap-3",children:[q.jsxs("div",{className:"min-w-0 flex-1",children:[q.jsx("h3",{className:"font-['Poppins'] font-medium text-[var(--color-text,#4A2040)] truncate",children:E.title||"Untitled"}),q.jsx("p",{className:"font-['Poppins'] text-sm text-gray-500 mt-1 line-clamp-2",children:fY(E.content)}),q.jsx("span",{className:"font-['Poppins'] text-xs text-gray-400 mt-2 inline-block",children:hY(E.date)})]}),E.mood&&q.jsx("span",{className:"text-2xl flex-shrink-0",title:E.mood,children:tL[E.mood]||""})]})},E.id))})]})]})}var Yb={exports:{}},Qb={};var fI;function mY(){if(fI)return Qb;fI=1;var n=sd();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function u(m,v){var E=v(),T=r({inst:{value:E,getSnapshot:v}}),S=T[0].inst,w=T[1];return s(function(){S.value=E,S.getSnapshot=v,h(S)&&w({inst:S})},[m,E,v]),i(function(){return h(S)&&w({inst:S}),m(function(){h(S)&&w({inst:S})})},[m]),a(E),E}function h(m){var v=m.getSnapshot;m=m.value;try{var E=v();return!t(m,E)}catch{return!0}}function f(m,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Qb.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Qb}var dI;function sL(){return dI||(dI=1,Yb.exports=mY()),Yb.exports}var oL=sL();function An(n){this.content=n}An.prototype={constructor:An,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new An(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new An(t)},addToStart:function(n,e){return new An([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new An(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new An(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=An.from(n),n.size?new An(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=An.from(n),n.size?new An(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=An.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};An.from=function(n){if(n instanceof An)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new An(e)};function aL(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=aL(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function lL(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),u=e.child(--s),h=a.nodeSize;if(a==u){t-=h,r-=h;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let f=0,p=Math.min(a.text.length,u.text.length);for(;f<p&&a.text[a.text.length-f-1]==u.text[u.text.length-f-1];)f++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let f=lL(a.content,u.content,t-1,r-1);if(f)return f}t-=h,r-=h}}class le{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,u=0;u<t;a++){let h=this.content[a],f=u+h.nodeSize;if(f>e&&r(h,i+u,s||null,a)!==!1&&h.content.size){let p=u+1;h.nodesBetween(Math.max(0,e-p),Math.min(h.content.size,t-p),r,i+p)}u=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(u,h)=>{let f=u.isText?u.text.slice(Math.max(e,h)-h,t-h):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&f||u.isTextblock)&&r&&(a?a=!1:s+=r),s+=f},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new le(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let u=this.content[s],h=a+u.nodeSize;h>e&&((a<e||h>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=h}return new le(r,i)}cutByIndex(e,t){return e==t?le.empty:e==0&&t==this.content.length?this:new le(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new le(i,s)}addToStart(e){return new le([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new le(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return aL(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return lL(this,e,t,r)}findIndex(e){if(e==0)return vm(0,e);if(e==this.size)return vm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let i=this.child(t),s=r+i.nodeSize;if(s>=e)return s==e?vm(t+1,s):vm(t,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return le.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new le(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return le.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new le(t||e,r)}static from(e){if(!e)return le.empty;if(e instanceof le)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new le([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}le.empty=new le([],0);const Xb={index:0,offset:0};function vm(n,e){return Xb.index=n,Xb.offset=e,Xb}function Ig(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Ig(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Ig(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let pt=class wT{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ig(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return wT.none;if(e instanceof wT)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};pt.none=[];class Mg extends Error{}class pe{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=cL(this.content,e+this.openStart,t);return r&&new pe(r,this.openStart,this.openEnd)}removeBetween(e,t){return new pe(uL(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return pe.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pe(le.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new pe(e,r,i)}}pe.empty=new pe(le.empty,0,0);function uL(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||s.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(uL(s.content,e-i-1,t-i-1)))}function cL(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=cL(a.content,e-s-1,t,a);return u&&n.replaceChild(i,a.copy(u))}function gY(n,e,t){if(t.openStart>n.depth)throw new Mg("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Mg("Inconsistent open depths");return hL(n,e,t,0)}function hL(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=hL(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return El(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=yY(t,n);return El(s,dL(n,a,u,e,r))}else return El(s,Dg(n,e,r))}function fL(n,e){if(!e.type.compatibleContent(n.type))throw new Mg("Cannot join "+e.type.name+" onto "+n.type.name)}function AT(n,e,t){let r=n.node(t);return fL(r,e.node(t)),r}function bl(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Ef(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(bl(n.nodeAfter,r),s++));for(let u=s;u<a;u++)bl(i.child(u),r);e&&e.depth==t&&e.textOffset&&bl(e.nodeBefore,r)}function El(n,e){return n.type.checkContent(e),n.copy(e)}function dL(n,e,t,r,i){let s=n.depth>i&&AT(n,e,i+1),a=r.depth>i&&AT(t,r,i+1),u=[];return Ef(null,n,i,u),s&&a&&e.index(i)==t.index(i)?(fL(s,a),bl(El(s,dL(n,e,t,r,i+1)),u)):(s&&bl(El(s,Dg(n,e,i+1)),u),Ef(e,t,i,u),a&&bl(El(a,Dg(t,r,i+1)),u)),Ef(r,null,i,u),new le(u)}function Dg(n,e,t){let r=[];if(Ef(null,n,t,r),n.depth>t){let i=AT(n,e,t+1);bl(El(i,Dg(n,e,t+1)),r)}return Ef(e,null,t,r),new le(r)}function yY(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(le.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Wf{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return pt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Ng(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:u,offset:h}=a.content.findIndex(s),f=s-h;if(r.push(a,u,i+h),!f||(a=a.child(u),a.isText))break;s=f-1,i+=h+1}return new Wf(t,r,s)}static resolveCached(e,t){let r=pI.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else pI.set(e,r=new vY);let i=r.elts[r.i]=Wf.resolve(e,t);return r.i=(r.i+1)%bY,i}}class vY{constructor(){this.elts=[],this.i=0}}const bY=12,pI=new WeakMap;class Ng{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const EY=Object.create(null);class vi{constructor(e,t,r,i=pt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||le.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Ig(this.attrs,t||e.defaultAttrs||EY)&&pt.sameSet(this.marks,r||pt.none)}copy(e=null){return e==this.content?this:new vi(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new vi(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return pe.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),f=i.node(a).content.cut(i.pos-u,s.pos-u);return new pe(f,i.depth-a,s.depth-a)}replace(e,t,r){return gY(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Wf.resolveCached(this,e)}resolveNoCache(e){return Wf.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),pL(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=le.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let h=i;h<s;h++)if(!this.type.allowsMarks(r.child(h).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=pt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!pt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=le.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}vi.prototype.text=void 0;class Og extends vi{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):pL(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Og(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Og(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function pL(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ol{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new TY(e,t);if(r.next==null)return Ol.empty;let i=mL(r);r.next&&r.err("Unexpected trailing text");let s=RY(CY(i));return kY(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,u){let h=a.matchFragment(e,r);if(h&&(!t||h.validEnd))return le.from(u.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:p,next:m}=a.next[f];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let v=s(m,u.concat(p));if(v)return v}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:u,next:h}=s.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||h.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}Ol.empty=new Ol(!0);class TY{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function mL(n){let e=[];do e.push(_Y(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function _Y(n){let e=[];do e.push(SY(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function SY(n){let e=xY(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=wY(n,e);else break;return e}function mI(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function wY(n,e){let t=mI(n),r=t;return n.eat(",")&&(n.next!="}"?r=mI(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function AY(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function xY(n){if(n.eat("(")){let e=mL(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=AY(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function CY(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,h){let f={term:h,to:u};return e[a].push(f),f}function i(a,u){a.forEach(h=>h.to=u)}function s(a,u){if(a.type=="choice")return a.exprs.reduce((h,f)=>h.concat(s(f,u)),[]);if(a.type=="seq")for(let h=0;;h++){let f=s(a.exprs[h],u);if(h==a.exprs.length-1)return f;i(f,u=t())}else if(a.type=="star"){let h=t();return r(u,h),i(s(a.expr,h),h),[r(h)]}else if(a.type=="plus"){let h=t();return i(s(a.expr,u),h),i(s(a.expr,h),h),[r(h)]}else{if(a.type=="opt")return[r(u)].concat(s(a.expr,u));if(a.type=="range"){let h=u;for(let f=0;f<a.min;f++){let p=t();i(s(a.expr,h),p),h=p}if(a.max==-1)i(s(a.expr,h),h);else for(let f=a.min;f<a.max;f++){let p=t();r(h,p),i(s(a.expr,h),p),h=p}return[r(h)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function gL(n,e){return e-n}function gI(n,e){let t=[];return r(e),t.sort(gL);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:u,to:h}=s[a];!u&&t.indexOf(h)==-1&&r(h)}}}function RY(n){let e=Object.create(null);return t(gI(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:h})=>{if(!u)return;let f;for(let p=0;p<i.length;p++)i[p][0]==u&&(f=i[p][1]);gI(n,h).forEach(p=>{f||i.push([u,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let s=e[r.join(",")]=new Ol(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(gL);s.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return s}}function kY(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:h,next:f}=i.next[u];a.push(h.name),s&&!(h.isText||h.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function yL(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function vL(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function bL(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function EL(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new MY(n,r,e[r]);return t}let yI=class TL{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=EL(e,r.attrs),this.defaultAttrs=yL(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ol.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:vL(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new vi(this,this.computeAttrs(e),le.from(t),pt.setFrom(r))}createChecked(e=null,t,r){return t=le.from(t),this.checkContent(t),new vi(this,this.computeAttrs(e),t,pt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=le.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(le.empty,!0);return s?new vi(this,e,t.append(s),pt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){bL(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:pt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new TL(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function IY(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class MY{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?IY(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Xy{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=EL(e,i.attrs),this.excluded=null;let s=yL(this.attrs);this.instance=s?new pt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new pt(this,vL(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new Xy(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){bL(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class _L{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=An.from(e.nodes),t.marks=An.from(e.marks||{}),this.nodes=yI.compile(this.spec.nodes,this),this.marks=Xy.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=Ol.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?vI(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:vI(this,a.split(" "))}this.nodeFromJSON=i=>vi.fromJSON(this,i),this.markFromJSON=i=>pt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof yI){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Og(r,r.defaultAttrs,e,pt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function vI(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let u in n.marks){let h=n.marks[u];(i=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=h)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function DY(n){return n.tag!=null}function NY(n){return n.style!=null}class Zo{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(DY(i))this.tags.push(i);else if(NY(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new EI(this,t,!1);return r.addAll(e,pt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new EI(this,t,!0);return r.addAll(e,pt.none,t.from,t.to),pe.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(LY(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let h=a.getAttrs(t);if(h===!1)continue;a.attrs=h||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=TI(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=TI(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Zo(e,Zo.schemaRules(e)))}}const SL={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},OY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},wL={ol:!0,ul:!0},Yf=1,xT=2,Tf=4;function bI(n,e,t){return e!=null?(e?Yf:0)|(e==="full"?xT:0):n&&n.whitespace=="pre"?Yf|xT:t&~Tf}class bm{constructor(e,t,r,i,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=pt.none,this.match=s||(a&Tf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(le.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Yf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=le.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(le.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!SL.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class EI{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,a=bI(null,t.preserveWhitespace,0)|(r?Tf:0);i?s=new bm(i.type,i.attrs,pt.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new bm(null,null,pt.none,!0,null,a):s=new bm(e.schema.topNodeType,null,pt.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&xT?"full":this.localPreserveWS||(i.options&Yf)>0,{schema:a}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let h=0;h<u.length;h++)h&&this.insertNode(a.linebreakReplacement.create(),t,!0),u[h]&&this.insertNode(a.text(u[h]),t,!/\S/.test(u[h]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=i.content[i.content.length-1],h=e.previousSibling;(!u||h&&h.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;wL.hasOwnProperty(a)&&this.parser.normalizeLists&&PY(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(h?h.ignore:OY.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let f,p=this.needsBlock;if(SL.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=h&&h.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),f&&this.sync(s),this.needsBlock=p}else{let f=this.readStyles(e,t);f&&this.addElementByRule(e,h,f,h.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let u=void 0;;){let h=this.parser.matchStyle(s,a,this,u);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(f=>!h.clearMark(f)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)u=h;else break}}return t}addElementByRule(e,t,r,i){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let h=this.enter(a,t.attrs||null,r,t.preserveWhitespace);h&&(s=!0,r=h)}else{let h=this.parser.schema.marks[t.mark];r=r.concat(h.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,r,!1));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,r),this.findAround(e,h,!1)}s&&this.sync(u)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];a!=u;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let a=this.open,u=0;a>=0;a--){let h=this.nodes[a],f=h.findWrapping(e);if(f&&(!i||i.length>f.length+u)&&(i=f,s=h,!f.length))break;if(h.solid){if(r)break;u+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)t=this.enterInner(i[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=pt.none;for(let u of i.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):_I(u.type,e.type))&&(a=u.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=bI(e,s,a.options);a.options&Tf&&a.content.length==0&&(u|=Tf);let h=pt.none;return r=r.filter(f=>(a.type?a.type.allowsMarkType(f.type):_I(f.type,e))?(h=f.addToSet(h),!1):!0),this.nodes.push(new bm(e,t,h,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Yf)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(u,h)=>{for(;u>=0;u--){let f=t[u];if(f==""){if(u==t.length-1||u==0)continue;for(;h>=s;h--)if(a(u-1,h))return!0;return!1}else{let p=h>0||h==0&&i?this.nodes[h].type:r&&h>=s?r.node(h-s).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;h--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function PY(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&wL.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function LY(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function TI(n){let e={};for(let t in n)e[t]=n[t];return e}function _I(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=u=>{s.push(u);for(let h=0;h<u.edgeCount;h++){let{type:f,next:p}=u.edge(h);if(f==e||s.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class Fl{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Jb(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let u=0,h=0;for(;u<s.length&&h<a.marks.length;){let f=a.marks[h];if(!this.marks[f.type.name]){h++;continue}if(!f.eq(s[u][0])||f.type.spec.spanning===!1)break;u++,h++}for(;u<s.length;)i=s.pop()[1];for(;h<a.marks.length;){let f=a.marks[h++],p=this.serializeMark(f,a.isInline,t);p&&(s.push([f,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Ym(Jb(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Ym(Jb(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Ym(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Fl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=SI(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return SI(e.marks)}}function SI(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Jb(n){return n.document||window.document}const wI=new WeakMap;function VY(n){let e=wI.get(n);return e===void 0&&wI.set(n,e=UY(n)),e}function UY(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Ym(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=VY(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let u,h=t?n.createElementNS(t,i):n.createElement(i),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let m in f)if(f[m]!=null){let v=m.indexOf(" ");v>0?h.setAttributeNS(m.slice(0,v),m.slice(v+1),f[m]):m=="style"&&h.style?h.style.cssText=f[m]:h.setAttribute(m,f[m])}}for(let m=p;m<e.length;m++){let v=e[m];if(v===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:E,contentDOM:T}=Ym(n,v,t,r);if(h.appendChild(E),T){if(u)throw new RangeError("Multiple content holes");u=T}}}return{dom:h,contentDOM:u}}const AL=65535,xL=Math.pow(2,16);function BY(n,e){return n+e*xL}function AI(n){return n&AL}function zY(n){return(n-(n&AL))/xL}const CL=1,RL=2,Qm=4,kL=8;class CT{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&kL)>0}get deletedBefore(){return(this.delInfo&(CL|Qm))>0}get deletedAfter(){return(this.delInfo&(RL|Qm))>0}get deletedAcross(){return(this.delInfo&Qm)>0}}class Er{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Er.empty)return Er.empty}recover(e){let t=0,r=AI(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+zY(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let h=this.ranges[u]-(this.inverted?i:0);if(h>e)break;let f=this.ranges[u+s],p=this.ranges[u+a],m=h+f;if(e<=m){let v=f?e==h?-1:e==m?1:t:t,E=h+i+(v<0?0:p);if(r)return E;let T=e==(t<0?h:m)?null:BY(u/3,e-h),S=e==h?RL:e==m?CL:Qm;return(t<0?e!=h:e!=m)&&(S|=kL),new CT(E,S,T)}i+=p-f}return r?e+i:new CT(e+i,0,null)}touches(e,t){let r=0,i=AI(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let h=this.ranges[u]-(this.inverted?r:0);if(h>e)break;let f=this.ranges[u+s],p=h+f;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+a]-f}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?s:0),h=a+(this.inverted?0:s),f=this.ranges[i+t],p=this.ranges[i+r];e(u,u+f,h,h+p),s+=p-f}}invert(){return new Er(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Er.empty:new Er(e<0?[0,-e,0]:[0,0,e])}}Er.empty=new Er([]);class Qf{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Qf(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Qf;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],u=a.mapResult(e,t);if(u.recover!=null){let h=this.getMirror(s);if(h!=null&&h>s&&h<this.to){s=h,e=this._maps[h].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new CT(e,i,null)}}const Zb=Object.create(null);class zn{getMap(){return Er.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Zb[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Zb)throw new RangeError("Duplicate use of step JSON ID "+e);return Zb[e]=t,t.prototype.jsonID=e,t}}class nn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new nn(e,null)}static fail(e){return new nn(null,e)}static fromReplace(e,t,r,i){try{return nn.ok(e.replace(t,r,i))}catch(s){if(s instanceof Mg)return nn.fail(s.message);throw s}}}function HS(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(HS(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return le.fromArray(r)}class $o extends zn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new pe(HS(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return nn.fromReplace(e,this.from,this.to,s)}invert(){return new di(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new $o(t.pos,r.pos,this.mark)}merge(e){return e instanceof $o&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new $o(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new $o(t.from,t.to,e.markFromJSON(t.mark))}}zn.jsonID("addMark",$o);class di extends zn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new pe(HS(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return nn.fromReplace(e,this.from,this.to,r)}invert(){return new $o(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new di(t.pos,r.pos,this.mark)}merge(e){return e instanceof di&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new di(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new di(t.from,t.to,e.markFromJSON(t.mark))}}zn.jsonID("removeMark",di);class Go extends zn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return nn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return nn.fromReplace(e,this.pos,this.pos+1,new pe(le.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Go(this.pos,t.marks[i]);return new Go(this.pos,this.mark)}}return new Pl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Go(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Go(t.pos,e.markFromJSON(t.mark))}}zn.jsonID("addNodeMark",Go);class Pl extends zn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return nn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return nn.fromReplace(e,this.pos,this.pos+1,new pe(le.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Go(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Pl(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Pl(t.pos,e.markFromJSON(t.mark))}}zn.jsonID("removeNodeMark",Pl);class gn extends zn{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&RT(e,this.from,this.to)?nn.fail("Structure replace would overwrite content"):nn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Er([this.from,this.to-this.from,this.slice.size])}invert(e){return new gn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new gn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof gn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?pe.empty:new pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new gn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?pe.empty:new pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new gn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new gn(t.from,t.to,pe.fromJSON(e,t.slice),!!t.structure)}}zn.jsonID("replace",gn);class yn extends zn{constructor(e,t,r,i,s,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=u}apply(e){if(this.structure&&(RT(e,this.from,this.gapFrom)||RT(e,this.gapTo,this.to)))return nn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return nn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?nn.fromReplace(e,this.from,this.to,r):nn.fail("Content does not fit in gap")}getMap(){return new Er([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new yn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new yn(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new yn(t.from,t.to,t.gapFrom,t.gapTo,pe.fromJSON(e,t.slice),t.insert,!!t.structure)}}zn.jsonID("replaceAround",yn);function RT(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function jY(n,e,t,r){let i=[],s=[],a,u;n.doc.nodesBetween(e,t,(h,f,p)=>{if(!h.isInline)return;let m=h.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let v=Math.max(f,e),E=Math.min(f+h.nodeSize,t),T=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(T)||(a&&a.to==v&&a.mark.eq(m[S])?a.to=E:i.push(a=new di(v,E,m[S])));u&&u.to==v?u.to=E:s.push(u=new $o(v,E,r))}}),i.forEach(h=>n.step(h)),s.forEach(h=>n.step(h))}function FY(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;s++;let h=null;if(r instanceof Xy){let f=a.marks,p;for(;p=r.isInSet(f);)(h||(h=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(a.marks)&&(h=[r]):h=a.marks;if(h&&h.length){let f=Math.min(u+a.nodeSize,t);for(let p=0;p<h.length;p++){let m=h[p],v;for(let E=0;E<i.length;E++){let T=i[E];T.step==s-1&&m.eq(i[E].style)&&(v=T)}v?(v.to=f,v.step=s):i.push({style:m,from:Math.max(u,e),to:f,step:s})}}}),i.forEach(a=>n.step(new di(a.from,a.to,a.style)))}function qS(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],u=e+1;for(let h=0;h<s.childCount;h++){let f=s.child(h),p=u+f.nodeSize,m=r.matchType(f.type);if(!m)a.push(new gn(u,p,pe.empty));else{r=m;for(let v=0;v<f.marks.length;v++)t.allowsMarkType(f.marks[v].type)||n.step(new di(u,p,f.marks[v]));if(i&&f.isText&&t.whitespace!="pre"){let v,E=/\r?\n|\r/g,T;for(;v=E.exec(f.text);)T||(T=new pe(le.from(t.schema.text(" ",t.allowedMarks(f.marks))),0,0)),a.push(new gn(u+v.index,u+v.index+v[0].length,T))}}u=p}if(!r.validEnd){let h=r.fillBefore(le.empty,!0);n.replace(u,u,new pe(h,0,0))}for(let h=a.length-1;h>=0;h--)n.step(a[h])}function HY(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Mc(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,i=0,s=0;;--r){let a=n.$from.node(r),u=n.$from.index(r)+i,h=n.$to.indexAfter(r)-s;if(r<n.depth&&a.canReplace(u,h,t))return r;if(r==0||a.type.spec.isolating||!HY(a,u,h))break;u&&(i=1),h<a.childCount&&(s=1)}return null}function qY(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),u=i.after(s+1),h=a,f=u,p=le.empty,m=0;for(let T=s,S=!1;T>t;T--)S||r.index(T)>0?(S=!0,p=le.from(r.node(T).copy(p)),m++):h--;let v=le.empty,E=0;for(let T=s,S=!1;T>t;T--)S||i.after(T+1)<i.end(T)?(S=!0,v=le.from(i.node(T).copy(v)),E++):f++;n.step(new yn(h,f,a,u,new pe(p.append(v),m,E),p.size-m,!0))}function $S(n,e,t=null,r=n){let i=$Y(n,e),s=i&&GY(r,e);return s?i.map(xI).concat({type:e,attrs:t}).concat(s.map(xI)):null}function xI(n){return{type:n,attrs:null}}function $Y(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function GY(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let h=(a.length?a[a.length-1]:e).contentMatch;for(let f=r;h&&f<i;f++)h=h.matchType(t.child(f).type);return!h||!h.validEnd?null:a}function KY(n,e,t){let r=le.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=le.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new yn(i,s,i,s,new pe(r,0,0),t.length,!0))}function WY(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let h=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,h)&&YY(n.doc,n.mapping.slice(s).map(u),r)){let f=null;if(r.schema.linebreakReplacement){let E=r.whitespace=="pre",T=!!r.contentMatch.matchType(r.schema.linebreakReplacement);E&&!T?f=!1:!E&&T&&(f=!0)}f===!1&&ML(n,a,u,s),qS(n,n.mapping.slice(s).map(u,1),r,void 0,f===null);let p=n.mapping.slice(s),m=p.map(u,1),v=p.map(u+a.nodeSize,1);return n.step(new yn(m,v,m+1,v-1,new pe(le.from(r.create(h,null,a.marks)),0,0),1,!0)),f===!0&&IL(n,a,u,s),!1}})}function IL(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(i.text);){let h=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function ML(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function YY(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function QY(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new yn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new pe(le.from(a),0,0),1,!0))}function Bs(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,p=t-2;f>s;f--,p--){let m=i.node(f),v=i.index(f);if(m.type.spec.isolating)return!1;let E=m.content.cutByIndex(v,m.childCount),T=r&&r[p+1];T&&(E=E.replaceChild(0,T.type.create(T.attrs)));let S=r&&r[p]||m;if(!m.canReplace(v+1,m.childCount)||!S.type.validContent(E))return!1}let u=i.indexAfter(s),h=r&&r[0];return i.node(s).canReplaceWith(u,u,h?h.type:i.node(s+1).type)}function XY(n,e,t=1,r){let i=n.doc.resolve(e),s=le.empty,a=le.empty;for(let u=i.depth,h=i.depth-t,f=t-1;u>h;u--,f--){s=le.from(i.node(u).copy(s));let p=r&&r[f];a=le.from(p?p.type.create(p.attrs,a):i.node(u).copy(a))}n.step(new gn(e,e,new pe(s.append(a),t,t),!0))}function Sa(n,e){let t=n.resolve(e),r=t.index();return DL(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function JY(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function DL(n,e){return!!(n&&e&&!n.isLeaf&&JY(n,e))}function Jy(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,a,u=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):t>0?(s=r.node(i+1),u++,a=r.node(i).maybeChild(u)):(s=r.node(i).maybeChild(u-1),a=r.node(i+1)),s&&!s.isTextblock&&DL(s,a)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function ZY(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",m=!!a.contentMatch.matchType(i);p&&!m?r=!1:!p&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);ML(n,p.node(),p.before(),u)}a.inlineContent&&qS(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let h=n.mapping.slice(u),f=h.map(e-t);if(n.step(new gn(f,h.map(e+t,-1),pe.empty,!0)),r===!0){let p=n.doc.resolve(f);IL(n,p.node(),p.before(),n.steps.length)}return n}function eQ(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function NL(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,h=r.index(a)+(u>0?1:0),f=r.node(a),p=!1;if(s==1)p=f.canReplace(h,h,i);else{let m=f.contentMatchAt(h).findWrapping(i.firstChild.type);p=m&&f.canReplaceWith(h,h,m[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function Zy(n,e,t=e,r=pe.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return OL(i,s,r)?new gn(e,t,r):new tQ(i,s,r).fit()}function OL(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class tQ{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=le.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=le.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,u=i.depth;for(;a&&u&&s.childCount==1;)s=s.firstChild.content,a--,u--;let h=new pe(s,a,u);return e>-1?new yn(r.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||r.pos!=this.$to.pos?new gn(r.pos,i.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=eE(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:h,match:f}=this.frontier[u],p,m=null;if(t==1&&(a?f.matchType(a.type)||(m=f.fillBefore(le.from(a),!1)):s&&h.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:m};if(t==2&&a&&(p=f.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=eE(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new pe(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=eE(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new pe(nf(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new pe(nf(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let a=this.unplaced,u=r?r.content:a.content,h=a.openStart-e,f=0,p=[],{match:m,type:v}=this.frontier[t];if(i){for(let S=0;S<i.childCount;S++)p.push(i.child(S));m=m.matchFragment(i)}let E=u.size+e-(a.content.size-a.openEnd);for(;f<u.childCount;){let S=u.child(f),w=m.matchType(S.type);if(!w)break;f++,(f>1||h==0||S.content.size)&&(m=w,p.push(PL(S.mark(v.allowedMarks(S.marks)),f==1?h:0,f==u.childCount?E:-1)))}let T=f==u.childCount;T||(E=-1),this.placed=rf(this.placed,t,le.from(p)),this.frontier[t].match=m,T&&E<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=u;S<E;S++){let C=w.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),w=C.content}this.unplaced=T?e==0?pe.empty:new pe(nf(a.content,e-1,1),e-1,E<0?a.openEnd:e-1):new pe(nf(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!tE(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=tE(e,t,i,r,s);if(a){for(let u=t-1;u>=0;u--){let{match:h,type:f}=this.frontier[u],p=tE(e,u,f,h,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=rf(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=rf(this.placed,this.depth,le.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(le.empty,!0);t.childCount&&(this.placed=rf(this.placed,this.frontier.length,t))}}function nf(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(nf(n.firstChild.content,e-1,t)))}function rf(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(rf(n.lastChild.content,e-1,t)))}function eE(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function PL(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,PL(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(le.empty,!0)))),n.copy(r)}function tE(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,a);return u&&!nQ(t,s.content,a)?u:null}function nQ(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function rQ(n){return n.spec.defining||n.spec.definingForContent}function iQ(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(OL(i,s,r))return n.step(new gn(e,t,r));let a=VL(i,s);a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let v=i.depth,E=i.pos-1;v>0;v--,E--){let T=i.node(v).type.spec;if(T.defining||T.definingAsContext||T.isolating)break;a.indexOf(v)>-1?u=v:i.before(v)==E&&a.splice(1,0,-v)}let h=a.indexOf(u),f=[],p=r.openStart;for(let v=r.content,E=0;;E++){let T=v.firstChild;if(f.push(T),E==r.openStart)break;v=T.content}for(let v=p-1;v>=0;v--){let E=f[v],T=rQ(E.type);if(T&&!E.sameMarkup(i.node(Math.abs(u)-1)))p=v;else if(T||!E.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let E=(v+p+1)%(r.openStart+1),T=f[E];if(T)for(let S=0;S<a.length;S++){let w=a[(S+h)%a.length],C=!0;w<0&&(C=!1,w=-w);let N=i.node(w-1),V=i.index(w-1);if(N.canReplaceWith(V,V,T.type,T.marks))return n.replace(i.before(w),C?s.after(w):t,new pe(LL(r.content,0,r.openStart,E),E,r.openEnd))}}let m=n.steps.length;for(let v=a.length-1;v>=0&&(n.replace(e,t,r),!(n.steps.length>m));v--){let E=a[v];E<0||(e=i.before(E),t=s.after(E))}}function LL(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(LL(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(le.empty,!0))}return n}function sQ(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=eQ(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new pe(le.from(r),0,0))}function oQ(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=VL(r,i);for(let a=0;a<s.length;a++){let u=s[a],h=a==s.length-1;if(h&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(h||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function VL(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class ic extends zn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return nn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return nn.fromReplace(e,this.pos,this.pos+1,new pe(le.from(i),0,t.isLeaf?0:1))}getMap(){return Er.empty}invert(e){return new ic(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ic(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ic(t.pos,t.attr,t.value)}}zn.jsonID("attr",ic);class Xf extends zn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return nn.ok(r)}getMap(){return Er.empty}invert(e){return new Xf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Xf(t.attr,t.value)}}zn.jsonID("docAttr",Xf);let fc=class extends Error{};fc=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};fc.prototype=Object.create(Error.prototype);fc.prototype.constructor=fc;fc.prototype.name="TransformError";class UL{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Qf}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new fc(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),t=i.map(t,-1)),i.forEach((s,a,u,h)=>{e=Math.min(e,u),t=Math.max(t,h)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=pe.empty){let i=Zy(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new pe(le.from(r),0,0))}delete(e,t){return this.replace(e,t,pe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return iQ(this,e,t,r),this}replaceRangeWith(e,t,r){return sQ(this,e,t,r),this}deleteRange(e,t){return oQ(this,e,t),this}lift(e,t){return qY(this,e,t),this}join(e,t=1){return ZY(this,e,t),this}wrap(e,t){return KY(this,e,t),this}setBlockType(e,t=e,r,i=null){return WY(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return QY(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new ic(e,t,r)),this}setDocAttribute(e,t){return this.step(new Xf(e,t)),this}addNodeMark(e,t){return this.step(new Go(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof pt)t.isInSet(r.marks)&&this.step(new Pl(e,t));else{let i=r.marks,s,a=[];for(;s=t.isInSet(i);)a.push(new Pl(e,s)),i=s.removeFromSet(i);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return XY(this,e,t,r),this}addMark(e,t,r){return jY(this,e,t,r),this}removeMark(e,t,r){return FY(this,e,t,r),this}clearIncompatible(e,t,r){return qS(this,e,t,r),this}}const nE=Object.create(null);class ze{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new aQ(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=pe.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:h,$to:f}=a[u],p=e.mapping.slice(s);e.replaceRange(p.map(h.pos),p.map(f.pos),u?pe.empty:t),u==0&&kI(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:u}=i[s],h=e.mapping.slice(r),f=h.map(a.pos),p=h.map(u.pos);s?e.deleteRange(f,p):(e.replaceRangeWith(f,p,t),kI(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Ie(e):ju(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?ju(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):ju(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new wr(e.node(0))}static atStart(e){return ju(e,e,0,0,1)||new wr(e)}static atEnd(e){return ju(e,e,e.content.size,e.childCount,-1)||new wr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=nE[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in nE)throw new RangeError("Duplicate use of selection JSON ID "+e);return nE[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Ie.between(this.$anchor,this.$head).getBookmark()}}ze.prototype.visible=!0;class aQ{constructor(e,t){this.$from=e,this.$to=t}}let CI=!1;function RI(n){!CI&&!n.parent.inlineContent&&(CI=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Ie extends ze{constructor(e,t=e){RI(e),RI(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ze.near(r);let i=e.resolve(t.map(this.anchor));return new Ie(i.parent.inlineContent?i:r,r)}replace(e,t=pe.empty){if(super.replace(e,t),t==pe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ie&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new e0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ie(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=ze.findFrom(t,r,!0)||ze.findFrom(t,-r,!0);if(s)t=s.$head;else return ze.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(ze.findFrom(e,-r,!0)||ze.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Ie(e,t)}}ze.jsonID("text",Ie);class e0{constructor(e,t){this.anchor=e,this.head=t}map(e){return new e0(e.map(this.anchor),e.map(this.head))}resolve(e){return Ie.between(e.resolve(this.anchor),e.resolve(this.head))}}class Se extends ze{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?ze.near(s):new Se(s)}content(){return new pe(le.from(this.node),0,0)}eq(e){return e instanceof Se&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new GS(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Se(e.resolve(t.anchor))}static create(e,t){return new Se(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Se.prototype.visible=!1;ze.jsonID("node",Se);class GS{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new e0(r,r):new GS(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Se.isSelectable(r)?new Se(t):ze.near(t)}}class wr extends ze{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=pe.empty){if(t==pe.empty){e.delete(0,e.doc.content.size);let r=ze.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new wr(e)}map(e){return new wr(e)}eq(e){return e instanceof wr}getBookmark(){return lQ}}ze.jsonID("all",wr);const lQ={map(){return this},resolve(n){return new wr(n)}};function ju(n,e,t,r,i,s=!1){if(e.inlineContent)return Ie.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!s&&Se.isSelectable(u))return Se.create(n,t-(i<0?u.nodeSize:0))}else{let h=ju(n,u,t+i,i<0?u.childCount:0,i,s);if(h)return h}t+=u.nodeSize*i}return null}function kI(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof gn||i instanceof yn))return;let s=n.mapping.maps[r],a;s.forEach((u,h,f,p)=>{a==null&&(a=p)}),n.setSelection(ze.near(n.doc.resolve(a),t))}const II=1,Em=2,MI=4;class uQ extends UL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|II)&~Em,this.storedMarks=null,this}get selectionSet(){return(this.updated&II)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Em,this}ensureMarks(e){return pt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Em)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Em,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||pt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(ze.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=MI,this}get scrolledIntoView(){return(this.updated&MI)>0}}function DI(n,e){return!e||!n?n:n.bind(e)}class sf{constructor(e,t,r){this.name=e,this.init=DI(t.init,r),this.apply=DI(t.apply,r)}}const cQ=[new sf("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new sf("selection",{init(n,e){return n.selection||ze.atStart(e.doc)},apply(n){return n.selection}}),new sf("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new sf("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class rE{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=cQ.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new sf(r.key,r.spec.state,r))})}}class Qu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let h=i?i[a].n:0,f=i?i[a].state:this,p=h<t.length&&u.spec.appendTransaction.call(u,h?t.slice(h):t,f,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new uQ(this)}static create(e){let t=new rE(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Qu(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new rE(this.schema,e.plugins),r=t.fields,i=new Qu(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new rE(e.schema,e.plugins),s=new Qu(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=vi.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=ze.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let h=r[u],f=h.spec.state;if(h.key==a.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){s[a.name]=f.fromJSON.call(h,e,t[u],s);return}}s[a.name]=a.init(e,s)}}),s}}function BL(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=BL(i,e,{})),t[r]=i}return t}class Rt{constructor(e){this.spec=e,this.props={},e.props&&BL(e.props,this,this.props),this.key=e.key?e.key.key:zL("plugin")}getState(e){return e[this.key]}}const iE=Object.create(null);function zL(n){return n in iE?n+"$"+ ++iE[n]:(iE[n]=0,n+"$")}class cn{constructor(e="key"){this.key=zL(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const KS=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function jL(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const FL=(n,e,t)=>{let r=jL(n,t);if(!r)return!1;let i=WS(r);if(!i){let a=r.blockRange(),u=a&&Mc(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(XL(n,i,e,-1))return!0;if(r.parent.content.size==0&&(dc(s,"end")||Se.isSelectable(s)))for(let a=r.depth;;a--){let u=Zy(n.doc,r.before(a),r.after(a),pe.empty);if(u&&u.slice.size<u.to-u.from){if(e){let h=n.tr.step(u);h.setSelection(dc(s,"end")?ze.findFrom(h.doc.resolve(h.mapping.map(i.pos,-1)),-1):Se.create(h.doc,i.pos-s.nodeSize)),e(h.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},hQ=(n,e,t)=>{let r=jL(n,t);if(!r)return!1;let i=WS(r);return i?HL(n,i,e):!1},fQ=(n,e,t)=>{let r=$L(n,t);if(!r)return!1;let i=YS(r);return i?HL(n,i,e):!1};function HL(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=e.nodeAfter,u=a,h=e.pos+1;for(;!u.isTextblock;h++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let f=Zy(n.doc,s,h,pe.empty);if(!f||f.from!=s||f instanceof gn&&f.slice.size>=h-s)return!1;if(t){let p=n.tr.step(f);p.setSelection(Ie.create(p.doc,s)),t(p.scrollIntoView())}return!0}function dc(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const qL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=WS(r)}let a=s&&s.nodeBefore;return!a||!Se.isSelectable(a)?!1:(e&&e(n.tr.setSelection(Se.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function WS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function $L(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const GL=(n,e,t)=>{let r=$L(n,t);if(!r)return!1;let i=YS(r);if(!i)return!1;let s=i.nodeAfter;if(XL(n,i,e,1))return!0;if(r.parent.content.size==0&&(dc(s,"start")||Se.isSelectable(s))){let a=Zy(n.doc,r.before(),r.after(),pe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(dc(s,"start")?ze.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):Se.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},KL=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=YS(r)}let a=s&&s.nodeAfter;return!a||!Se.isSelectable(a)?!1:(e&&e(n.tr.setSelection(Se.create(n.doc,s.pos)).scrollIntoView()),!0)};function YS(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const dQ=(n,e)=>{let t=n.selection,r=t instanceof Se,i;if(r){if(t.node.isTextblock||!Sa(n.doc,t.from))return!1;i=t.from}else if(i=Jy(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(Se.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},pQ=(n,e)=>{let t=n.selection,r;if(t instanceof Se){if(t.node.isTextblock||!Sa(n.doc,t.to))return!1;r=t.to}else if(r=Jy(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},mQ=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Mc(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},WL=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function QS(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const gQ=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=QS(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let u=t.after(),h=n.tr.replaceWith(u,u,a.createAndFill());h.setSelection(ze.near(h.doc.resolve(u),1)),e(h.scrollIntoView())}return!0},YL=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof wr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=QS(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,s.createAndFill());u.setSelection(Ie.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},QL=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Bs(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Mc(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function yQ(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Se&&e.selection.node.isBlock)return!r.parentOffset||!Bs(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,u,h=!1,f=!1;for(let E=r.depth;;E--)if(r.node(E).isBlock){h=r.end(E)==r.pos+(r.depth-E),f=r.start(E)==r.pos-(r.depth-E),u=QS(r.node(E-1).contentMatchAt(r.indexAfter(E-1))),s.unshift(h&&u?{type:u}:null),a=E;break}else{if(E==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof Ie||e.selection instanceof wr)&&p.deleteSelection();let m=p.mapping.map(r.pos),v=Bs(p.doc,m,s.length,s);if(v||(s[0]=u?{type:u}:null,v=Bs(p.doc,m,s.length,s)),!v)return!1;if(p.split(m,s.length,s),!h&&f&&r.node(a).type!=u){let E=p.mapping.map(r.before(a)),T=p.doc.resolve(E);u&&r.node(a-1).canReplaceWith(T.index(),T.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(a)),u)}return t&&t(p.scrollIntoView()),!0}}const vQ=yQ(),bQ=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(Se.create(n.doc,i))),!0)};function EQ(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Sa(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function XL(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,a,u,h=i.type.spec.isolating||s.type.spec.isolating;if(!h&&EQ(n,e,t))return!0;let f=!h&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(u=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&u.matchType(a[0]||s.type).validEnd){if(t){let E=e.pos+s.nodeSize,T=le.empty;for(let C=a.length-1;C>=0;C--)T=le.from(a[C].create(null,T));T=le.from(i.copy(T));let S=n.tr.step(new yn(e.pos-1,E,e.pos,E,new pe(T,1,0),a.length,!0)),w=S.doc.resolve(E+2*a.length);w.nodeAfter&&w.nodeAfter.type==i.type&&Sa(S.doc,w.pos)&&S.join(w.pos),t(S.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&h?null:ze.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),v=m&&Mc(m);if(v!=null&&v>=e.depth)return t&&t(n.tr.lift(m,v).scrollIntoView()),!0;if(f&&dc(s,"start",!0)&&dc(i,"end")){let E=i,T=[];for(;T.push(E),!E.isTextblock;)E=E.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(E.canReplace(E.childCount,E.childCount,S.content)){if(t){let C=le.empty;for(let V=T.length-1;V>=0;V--)C=le.from(T[V].copy(C));let N=n.tr.step(new yn(e.pos-T.length,e.pos+s.nodeSize,e.pos+w,e.pos+s.nodeSize-w,new pe(C,T.length,0),0,!0));t(N.scrollIntoView())}return!0}}return!1}function JL(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Ie.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const TQ=JL(-1),_Q=JL(1);function SQ(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),u=a&&$S(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function NI(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[s];t.doc.nodesBetween(a,u,(h,f)=>{if(i)return!1;if(!(!h.isTextblock||h.hasMarkup(n,e)))if(h.type==n)i=!0;else{let p=t.doc.resolve(f),m=p.index();i=p.parent.canReplaceWith(m,m+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:h}}=t.selection.ranges[a];s.setBlockType(u,h,n,e)}r(s.scrollIntoView())}return!0}}function XS(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}XS(KS,FL,qL);XS(KS,GL,KL);XS(WL,YL,QL,vQ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wQ(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s);if(!a)return!1;let u=r?t.tr:null;return AQ(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function AQ(n,e,t,r=null){let i=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=a.resolve(e.start-2);s=new Ng(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new Ng(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=$S(s,t,r,e);return u?(n&&xQ(n,e,u,i,t),!0):!1}function xQ(n,e,t,r,i){let s=le.empty;for(let p=t.length-1;p>=0;p--)s=le.from(t[p].type.create(t[p].attrs,s));n.step(new yn(e.start-(r?2:0),e.end,e.start,e.end,new pe(s,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==i&&(a=p+1);let u=t.length-a,h=e.start+t.length-(r?2:0),f=e.parent;for(let p=e.startIndex,m=e.endIndex,v=!0;p<m;p++,v=!1)!v&&Bs(n.doc,h,u)&&(n.split(h,u),h+=2*u),h+=f.child(p).nodeSize;return n}function CQ(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?RQ(e,t,n,s):kQ(e,t,s):!0:!1}}function RQ(n,e,t,r){let i=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new yn(s-1,a,s,a,new pe(le.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Ng(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const u=Mc(r);if(u==null)return!1;i.lift(r,u);let h=i.doc.resolve(i.mapping.map(s,-1)-1);return Sa(i.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&i.join(h.pos),e(i.scrollIntoView()),!0}function kQ(n,e,t){let r=n.tr,i=t.parent;for(let E=t.end,T=t.endIndex-1,S=t.startIndex;T>S;T--)E-=i.child(T).nodeSize,r.delete(E-1,E+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,h=t.endIndex==i.childCount,f=s.node(-1),p=s.index(-1);if(!f.canReplace(p+(u?0:1),p+1,a.content.append(h?le.empty:le.from(i))))return!1;let m=s.pos,v=m+a.nodeSize;return r.step(new yn(m-(u?1:0),v+(h?1:0),m+1,v-1,new pe((u?le.empty:le.from(i.copy(le.empty))).append(h?le.empty:le.from(i.copy(le.empty))),u?0:1,h?0:1),u?0:1)),e(r.scrollIntoView()),!0}function IQ(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let u=s.parent,h=u.child(a-1);if(h.type!=n)return!1;if(t){let f=h.lastChild&&h.lastChild.type==u.type,p=le.from(f?n.create():null),m=new pe(le.from(n.create(null,le.from(u.type.create(null,p)))),f?3:1,0),v=s.start,E=s.end;t(e.tr.step(new yn(v-(f?3:1),E,v,E,m,1,!0)).scrollIntoView())}return!0}}const Rn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},pc=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let kT=null;const Ms=function(n,e,t){let r=kT||(kT=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},MQ=function(){kT=null},Ll=function(n,e,t,r){return t&&(OI(n,e,t,r,-1)||OI(n,e,t,r,1))},DQ=/^(img|br|input|textarea|hr)$/i;function OI(n,e,t,r,i){for(var s;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Hr(n))){let a=n.parentNode;if(!a||a.nodeType!=1||xd(n)||DQ.test(n.nodeName)||n.contentEditable=="false")return!1;e=Rn(n)+(i<0?0:1),n=a}else if(n.nodeType==1){let a=n.childNodes[e+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else n=a,e=i<0?Hr(n):0}else return!1}}function Hr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function NQ(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Hr(n)}else if(n.parentNode&&!xd(n))e=Rn(n),n=n.parentNode;else return null}}function OQ(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!xd(n))e=Rn(n)+1,n=n.parentNode;else return null}}function PQ(n,e,t){for(let r=e==0,i=e==Hr(n);r||i;){if(n==t)return!0;let s=Rn(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==Hr(n)}}function xd(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const t0=function(n){return n.focusNode&&Ll(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function ll(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function LQ(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function VQ(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Hr(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Hr(r.startContainer),r.startOffset)}}}const is=typeof navigator<"u"?navigator:null,PI=typeof document<"u"?document:null,wa=is&&is.userAgent||"",IT=/Edge\/(\d+)/.exec(wa),ZL=/MSIE \d/.exec(wa),MT=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(wa),lr=!!(ZL||MT||IT),ea=ZL?document.documentMode:MT?+MT[1]:IT?+IT[1]:0,Gr=!lr&&/gecko\/(\d+)/i.test(wa);Gr&&+(/Firefox\/(\d+)/.exec(wa)||[0,0])[1];const DT=!lr&&/Chrome\/(\d+)/.exec(wa),Mn=!!DT,eV=DT?+DT[1]:0,Bn=!lr&&!!is&&/Apple Computer/.test(is.vendor),mc=Bn&&(/Mobile\/\w+/.test(wa)||!!is&&is.maxTouchPoints>2),Fr=mc||(is?/Mac/.test(is.platform):!1),tV=is?/Win/.test(is.platform):!1,Ps=/Android \d/.test(wa),Cd=!!PI&&"webkitFontSmoothing"in PI.documentElement.style,UQ=Cd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function BQ(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Cs(n,e){return typeof n=="number"?n:n[e]}function zQ(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function LI(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=pc(a);continue}let u=a,h=u==s.body,f=h?BQ(s):zQ(u),p=0,m=0;if(e.top<f.top+Cs(r,"top")?m=-(f.top-e.top+Cs(i,"top")):e.bottom>f.bottom-Cs(r,"bottom")&&(m=e.bottom-e.top>f.bottom-f.top?e.top+Cs(i,"top")-f.top:e.bottom-f.bottom+Cs(i,"bottom")),e.left<f.left+Cs(r,"left")?p=-(f.left-e.left+Cs(i,"left")):e.right>f.right-Cs(r,"right")&&(p=e.right-f.right+Cs(i,"right")),p||m)if(h)s.defaultView.scrollBy(p,m);else{let E=u.scrollLeft,T=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let S=u.scrollLeft-E,w=u.scrollTop-T;e={left:e.left-S,top:e.top-w,right:e.right-S,bottom:e.bottom-w}}let v=h?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(v))break;a=v=="absolute"?a.offsetParent:pc(a)}}function jQ(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(s,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let h=u.getBoundingClientRect();if(h.top>=t-20){r=u,i=h.top;break}}return{refDOM:r,refTop:i,stack:nV(n.dom)}}function nV(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=pc(r));return e}function FQ({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;rV(t,r==0?0:r-e)}function rV(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ou=null;function HQ(n){if(n.setActive)return n.setActive();if(Ou)return n.focus(Ou);let e=nV(n);n.focus(Ou==null?{get preventScroll(){return Ou={preventScroll:!0},!0}}:void 0),Ou||(Ou=!1,rV(e,0))}function iV(n,e){let t,r=2e8,i,s=0,a=e.top,u=e.top,h,f;for(let p=n.firstChild,m=0;p;p=p.nextSibling,m++){let v;if(p.nodeType==1)v=p.getClientRects();else if(p.nodeType==3)v=Ms(p).getClientRects();else continue;for(let E=0;E<v.length;E++){let T=v[E];if(T.top<=a&&T.bottom>=u){a=Math.max(T.bottom,a),u=Math.min(T.top,u);let S=T.left>e.left?T.left-e.left:T.right<e.left?e.left-T.right:0;if(S<r){t=p,r=S,i=S&&t.nodeType==3?{left:T.right<e.left?T.right:T.left,top:e.top}:e,p.nodeType==1&&S&&(s=m+(e.left>=(T.left+T.right)/2?1:0));continue}}else T.top>e.top&&!h&&T.left<=e.left&&T.right>=e.left&&(h=p,f={left:Math.max(T.left,Math.min(T.right,e.left)),top:T.top});!t&&(e.left>=T.right&&e.top>=T.top||e.left>=T.left&&e.top>=T.bottom)&&(s=m+1)}}return!t&&h&&(t=h,i=f,r=0),t&&t.nodeType==3?qQ(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:iV(t,i)}function qQ(n,e){let t=n.nodeValue.length,r=document.createRange(),i;for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let a=No(r,1);if(a.top!=a.bottom&&JS(e,a)){i={node:n,offset:s+(e.left>=(a.left+a.right)/2?1:0)};break}}return r.detach(),i||{node:n,offset:0}}function JS(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function $Q(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function GQ(n,e,t){let{node:r,offset:i}=iV(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function KQ(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let u=n.docView.nearestDesc(s,!0),h;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((h=u.dom.getBoundingClientRect()).width||h.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!a&&h.left>r.left||h.top>r.top?i=u.posBefore:(!a&&h.right<r.left||h.bottom<r.top)&&(i=u.posAfter),a=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(h.top+h.bottom)/2:r.left<(h.left+h.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function sV(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let u=a.getClientRects();for(let h=0;h<u.length;h++){let f=u[h];if(JS(e,f))return sV(a,e,f)}}if((s=(s+1)%r)==i)break}return n}function WQ(n,e){let t=n.dom.ownerDocument,r,i=0,s=VQ(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let f=n.dom.getBoundingClientRect();if(!JS(e,f)||(a=sV(n.dom,e,f),!a))return null}if(Bn)for(let f=a;r&&f;f=pc(f))f.draggable&&(r=void 0);if(a=$Q(a,e),r){if(Gr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let f;Cd&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=KQ(n,r,i,e))}u==null&&(u=GQ(n,a,e));let h=n.docView.nearestDesc(a,!0);return{pos:u,inside:h?h.posAtStart-h.border:-1}}function VI(n){return n.top<n.bottom||n.left<n.right}function No(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(VI(r))return r}return Array.prototype.find.call(t,VI)||n.getBoundingClientRect()}const YQ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function oV(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=Cd||Gr;if(r.nodeType==3)if(a&&(YQ.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let h=No(Ms(r,i,i),t);if(Gr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=No(Ms(r,i-1,i-1),-1);if(f.top==h.top){let p=No(Ms(r,i,i+1),-1);if(p.top!=h.top)return $h(p,p.left<f.left)}}return h}else{let h=i,f=i,p=t<0?1:-1;return t<0&&!i?(f++,p=-1):t>=0&&i==r.nodeValue.length?(h--,p=1):t<0?h--:f++,$h(No(Ms(r,h,f),p),p<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==Hr(r))){let h=r.childNodes[i-1];if(h.nodeType==1)return sE(h.getBoundingClientRect(),!1)}if(s==null&&i<Hr(r)){let h=r.childNodes[i];if(h.nodeType==1)return sE(h.getBoundingClientRect(),!0)}return sE(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==Hr(r))){let h=r.childNodes[i-1],f=h.nodeType==3?Ms(h,Hr(h)-(a?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(f)return $h(No(f,1),!1)}if(s==null&&i<Hr(r)){let h=r.childNodes[i];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let f=h?h.nodeType==3?Ms(h,0,a?0:1):h.nodeType==1?h:null:null;if(f)return $h(No(f,-1),!0)}return $h(No(r.nodeType==3?Ms(r):r,-t),t>=0)}function $h(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function sE(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function aV(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function QQ(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return aV(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let a=oV(n,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Ms(u,0,u.nodeValue.length).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const XQ=/[\u0590-\u08ac]/;function JQ(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,u=n.domSelection();return u?!XQ.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?s:a:aV(n,e,()=>{let{focusNode:h,focusOffset:f,anchorNode:p,anchorOffset:m}=n.domSelectionRange(),v=u.caretBidiLevel;u.modify("move",t,"character");let E=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:T,focusOffset:S}=n.domSelectionRange(),w=T&&!E.contains(T.nodeType==1?T:T.parentNode)||h==T&&f==S;try{u.collapse(p,m),h&&(h!=p||f!=m)&&u.extend&&u.extend(h,f)}catch{}return v!=null&&(u.caretBidiLevel=v),w}):r.pos==r.start()||r.pos==r.end()}let UI=null,BI=null,zI=!1;function ZQ(n,e,t){return UI==e&&BI==t?zI:(UI=e,BI=t,zI=t=="up"||t=="down"?QQ(n,e,t):JQ(n,e,t))}const Kr=0,jI=1,dl=2,ss=3;class Rd{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Kr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Rn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let u=i.children[a];if(u.size){i=u;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],u=s+a.size;if(u>e||a instanceof uV){i=e-s;break}s=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof lV&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Rn(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Rn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,u=0;;u++){let h=this.children[u],f=a+h.size;if(i==-1&&e<=f){let p=a+h.border;if(e>=p&&t<=f-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,p);e=a;for(let m=u;m>0;m--){let v=this.children[m-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){i=Rn(v.dom)+1;break}e-=v.size}i==-1&&(i=0)}if(i>-1&&(f>t||u==this.children.length-1)){t=f;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){s=Rn(m.dom);break}t+=m.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=f}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let E=0,T=0;E<this.children.length;E++){let S=this.children[E],w=T+S.size;if(s>T&&a<w)return S.setSelection(e-T-S.border,t-T-S.border,r,i);T=w}let u=this.domFromPos(e,e?-1:1),h=t==e?u:this.domFromPos(t,t?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Gr||Bn)&&e==t){let{node:E,offset:T}=u;if(E.nodeType==3){if(m=!!(T&&E.nodeValue[T-1]==`
`),m&&T==E.nodeValue.length)for(let S=E,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(u=h={node:w.parentNode,offset:Rn(w)+1});break}let C=S.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let S=E.childNodes[T-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Gr&&p.focusNode&&p.focusNode!=h.node&&p.focusNode.nodeType==1){let E=p.focusNode.childNodes[p.focusOffset];E&&E.contentEditable=="false"&&(i=!0)}if(!(i||m&&Bn)&&Ll(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Ll(h.node,h.offset,p.focusNode,p.focusOffset))return;let v=!1;if((f.extend||e==t)&&!(m&&Gr)){f.collapse(u.node,u.offset);try{e!=t&&f.extend(h.node,h.offset),v=!0}catch{}}if(!v){if(e>t){let T=u;u=h,h=T}let E=document.createRange();E.setEnd(h.node,h.offset),E.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(E)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+s.border,h=a-s.border;if(e>=u&&t<=h){this.dirty=e==r||t==a?dl:jI,e==u&&t==h&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ss:s.markDirty(e-u,t-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?dl:ss}r=a}this.dirty=dl}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?dl:jI;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class lV extends Rd{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==Kr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class eX extends Rd{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Vl extends Rd{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=Fl.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Vl(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&ss||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ss&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Kr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Kr}}slice(e,t,r){let i=Vl.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=OT(s,t,a,r)),e>0&&(s=OT(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ta extends Rd{constructor(e,t,r,i,s,a,u,h,f){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,s,a){let u=s.nodeViews[t.type.name],h,f=u&&u(t,s,()=>{if(!h)return a;if(h.parent)return h.parent.posBeforeChild(h)},r,i),p=f&&f.dom,m=f&&f.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Fl.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!m&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let v=p;return p=fV(p,r,t),f?h=new tX(e,t,r,i,p,m||null,v,f,s,a+1):t.isText?new n0(e,t,r,i,p,v,s):new ta(e,t,r,i,p,m||null,v,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>le.empty)}return e}matchesNode(e,t,r){return this.dirty==Kr&&e.eq(this.node)&&Pg(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,u=s&&s.pos<0,h=new rX(this,a&&a.node,e);oX(this.node,this.innerDeco,(f,p,m)=>{f.spec.marks?h.syncToMarks(f.spec.marks,r,e,p):f.type.side>=0&&!m&&h.syncToMarks(p==this.node.childCount?pt.none:this.node.child(p).marks,r,e,p),h.placeWidget(f,e,i)},(f,p,m,v)=>{h.syncToMarks(f.marks,r,e,v);let E;h.findNodeMatch(f,p,m,v)||u&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(E=h.findIndexWithChild(s.node))>-1&&h.updateNodeAt(f,p,m,E,e)||h.updateNextNode(f,p,m,e,v,i)||h.addNode(f,p,m,e,i),i+=f.nodeSize}),h.syncToMarks([],r,e,0),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==dl)&&(a&&this.protectLocalComposition(e,a),cV(this.contentDOM,this.children,e),mc&&aX(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ie)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,u=lX(this.node.content,a,r-t,i-t);return u<0?null:{node:s,pos:u,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new eX(this,s,t,i);e.input.compositionNodes.push(a),this.children=OT(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==ss||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Kr}updateOuterDeco(e){if(Pg(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=hV(this.dom,this.nodeDOM,NT(this.outerDeco,this.node,t),NT(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function FI(n,e,t,r,i){fV(r,e,n);let s=new ta(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class n0 extends ta{constructor(e,t,r,i,s,a,u){super(e,t,r,i,s,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==ss||this.dirty!=Kr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Kr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Kr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new n0(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ss)}get domAtom(){return!1}isText(e){return this.node.text==e}}class uV extends Rd{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Kr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class tX extends ta{constructor(e,t,r,i,s,a,u,h,f,p){super(e,t,r,i,s,a,u,f,p),this.spec=h}update(e,t,r,i){if(this.dirty==ss)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function cV(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=HI(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof Vl){let h=r?r.previousSibling:n.lastChild;cV(a.contentDOM,a.children,t),r=h?h.nextSibling:n.firstChild}}for(;r;)r=HI(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const _f=function(n){n&&(this.nodeName=n)};_f.prototype=Object.create(null);const pl=[new _f];function NT(n,e,t){if(n.length==0)return pl;let r=t?pl[0]:new _f,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new _f(a.nodeName));for(let u in a){let h=a[u];h!=null&&(t&&i.length==1&&i.push(r=new _f(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+h:u=="style"?r.style=(r.style?r.style+";":"")+h:u!="nodeName"&&(r[u]=h))}}}return i}function hV(n,e,t,r){if(t==pl&&r==pl)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],u=t[s];if(s){let h;u&&u.nodeName==a.nodeName&&i!=n&&(h=i.parentNode)&&h.nodeName.toLowerCase()==a.nodeName||(h=document.createElement(a.nodeName),h.pmIsDeco=!0,h.appendChild(i),u=pl[0]),i=h}nX(i,u||pl[0],a)}return i}function nX(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function fV(n,e,t){return hV(n,n,pl,NT(e,t,n.nodeType!=1))}function Pg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function HI(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class rX{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=iX(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r,i){let s=0,a=this.stack.length>>1,u=Math.min(a,e.length);for(;s<u&&(s==a-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<a;)this.destroyRest(),this.top.dirty=Kr,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let h=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let p=this.index;p<f;p++){let m=this.top.children[p];if(m.matchesMark(e[a])&&!this.isLocked(m.dom)){h=p;break}}if(h>-1)h>this.index&&(this.changed=!0,this.destroyBetween(this.index,h)),this.top=this.top.children[this.index];else{let p=Vl.create(this.top,e[a],t,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let u=this.index,h=Math.min(this.top.children.length,u+5);u<h;u++){let f=this.top.children[u];if(f.matchesNode(e,t,r)&&!this.preMatch.matched.has(f)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==ss&&a.dom==a.contentDOM&&(a.dirty=dl),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let u=this.index;u<this.top.children.length;u++){let h=this.top.children[u];if(h instanceof ta){let f=this.preMatch.matched.get(h);if(f!=null&&f!=s)return!1;let p=h.dom,m,v=this.isLocked(p)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=ss&&Pg(t,h.outerDeco));if(!v&&h.update(e,t,r,i))return this.destroyBetween(this.index,u),h.dom!=p&&(this.changed=!0),this.index++,!0;if(!v&&(m=this.recreateWrapper(h,e,t,r,i,a)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=dl,m.updateChildren(i,a+1),m.dirty=Kr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Pg(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=ta.create(this.top,t,r,i,s,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let h of u.children)h.parent=u}return e.destroy(),u}addNode(e,t,r,i,s){let a=ta.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new lV(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Vl;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof n0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Bn||Mn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new uV(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function iX(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let f=t.children[r-1];if(f instanceof Vl)t=f,r=f.children.length;else{u=f,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let h=u.node;if(h){if(h!=n.child(i-1))break;--i,s.set(u,i),a.push(u)}}return{index:i,matched:s,matches:a.reverse()}}function sX(n,e){return n.type.side-e.type.side}function oX(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let f=0;f<n.childCount;f++){let p=n.child(f);r(p,i,e.forChild(s,p),f),s+=p.nodeSize}return}let a=0,u=[],h=null;for(let f=0;;){let p,m;for(;a<i.length&&i[a].to==s;){let w=i[a++];w.widget&&(p?(m||(m=[p])).push(w):p=w)}if(p)if(m){m.sort(sX);for(let w=0;w<m.length;w++)t(m[w],f,!!h)}else t(p,f,!!h);let v,E;if(h)E=-1,v=h,h=null;else if(f<n.childCount)E=f,v=n.child(f++);else break;for(let w=0;w<u.length;w++)u[w].to<=s&&u.splice(w--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)u.push(i[a++]);let T=s+v.nodeSize;if(v.isText){let w=T;a<i.length&&i[a].from<w&&(w=i[a].from);for(let C=0;C<u.length;C++)u[C].to<w&&(w=u[C].to);w<T&&(h=v.cut(w-s),v=v.cut(0,w-s),T=w,E=-1)}else for(;a<i.length&&i[a].to<T;)a++;let S=v.isInline&&!v.isLeaf?u.filter(w=>!w.inline):u.slice();r(v,S,e.forChild(s,v),E),s=T}}function aX(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function lX(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),u=s;if(s+=a.nodeSize,!a.isText)continue;let h=a.text;for(;i<n.childCount;){let f=n.child(i++);if(s+=f.nodeSize,!f.isText)break;h+=f.text}if(s>=t){if(s>=r&&h.slice(r-e.length-u,r-u)==e)return r-e.length;let f=u<r?h.lastIndexOf(e,r-u-1):-1;if(f>=0&&f+e.length+u>=t)return u+f;if(t==r&&h.length>=r+e.length-u&&h.slice(r-u,r-u+e.length)==e)return r}}return-1}function OT(n,e,t,r,i){let s=[];for(let a=0,u=0;a<n.length;a++){let h=n[a],f=u,p=u+=h.size;f>=t||p<=e?s.push(h):(f<e&&s.push(h.slice(0,e-f,r)),i&&(s.push(i),i=void 0),p>t&&s.push(h.slice(t-f,h.size,r)))}return s}function ZS(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),h,f;if(t0(t)){for(h=a;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&Se.isSelectable(m)&&i.parent&&!(m.isInline&&PQ(t.focusNode,t.focusOffset,i.dom))){let v=i.posBefore;f=new Se(a==v?u:r.resolve(v))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=a,v=a;for(let E=0;E<t.rangeCount;E++){let T=t.getRangeAt(E);m=Math.min(m,n.docView.posFromDOM(T.startContainer,T.startOffset,1)),v=Math.max(v,n.docView.posFromDOM(T.endContainer,T.endOffset,-1))}if(m<0)return null;[h,a]=v==n.state.selection.anchor?[v,m]:[m,v],u=r.resolve(a)}else h=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let p=r.resolve(h);if(!f){let m=e=="pointer"||n.state.selection.head<u.pos&&!s?1:-1;f=ew(n,p,u,m)}return f}function dV(n){return n.editable?n.hasFocus():mV(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function zs(n,e=!1){let t=n.state.selection;if(pV(n,t),!!dV(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Mn){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ll(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)cX(n);else{let{anchor:r,head:i}=t,s,a;qI&&!(t instanceof Ie)&&(t.$from.parent.inlineContent||(s=$I(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=$I(n,t.to))),n.docView.setSelection(r,i,n,e),qI&&(s&&GI(s),a&&GI(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&uX(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const qI=Bn||Mn&&eV<63;function $I(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(Bn&&i&&i.contentEditable=="false")return oE(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return oE(i);if(s)return oE(s)}}function oE(n){return n.contentEditable="true",Bn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function GI(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function uX(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!dV(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function cX(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,Rn(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&lr&&ea<=11&&(t.disabled=!0,t.disabled=!1)}function pV(n,e){if(e instanceof Se){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(KI(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else KI(n)}function KI(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function ew(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Ie.between(e,t,r)}function WI(n){return n.editable&&!n.hasFocus()?!1:mV(n)}function mV(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function hX(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Ll(e.node,e.offset,t.anchorNode,t.anchorOffset)}function PT(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ze.findFrom(s,e)}function Oo(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function YI(n,e,t){let r=n.state.selection;if(r instanceof Ie)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Oo(n,new Ie(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=PT(n.state,e);return i&&i instanceof Se?Oo(n,i):!1}else if(!(Fr&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let u=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?Se.isSelectable(s)?Oo(n,new Se(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):Cd?Oo(n,new Ie(n.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Se&&r.node.isInline)return Oo(n,new Ie(e>0?r.$to:r.$from));{let i=PT(n.state,e);return i?Oo(n,i):!1}}}function Lg(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Sf(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Pu(n,e){return e<0?fX(n):dX(n)}function fX(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(Gr&&t.nodeType==1&&r<Lg(t)&&Sf(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Sf(u,-1))i=t,s=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(gV(t))break;{let u=t.previousSibling;for(;u&&Sf(u,-1);)i=t.parentNode,s=Rn(u),u=u.previousSibling;if(u)t=u,r=Lg(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?LT(n,t,r):i&&LT(n,i,s)}function dX(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Lg(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Sf(u,1))s=t,a=++r;else break}else{if(gV(t))break;{let u=t.nextSibling;for(;u&&Sf(u,1);)s=u.parentNode,a=Rn(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=Lg(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&LT(n,s,a)}function gV(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function pX(n,e){for(;n&&e==n.childNodes.length&&!xd(n);)e=Rn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function mX(n,e){for(;n&&!e&&!xd(n);)e=Rn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function LT(n,e,t){if(e.nodeType!=3){let s,a;(a=pX(e,t))?(e=a,t=0):(s=mX(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(t0(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&zs(n)},50)}function QI(n,e){let t=n.state.doc.resolve(e);if(!(Mn||tV)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function XI(n,e,t){let r=n.state.selection;if(r instanceof Ie&&!r.empty||t.indexOf("s")>-1||Fr&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=PT(n.state,e);if(a&&a instanceof Se)return Oo(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,u=r instanceof wr?ze.near(a,e):ze.findFrom(a,e);return u?Oo(n,u):!1}return!1}function JI(n,e){if(!(n.state.selection instanceof Ie))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function ZI(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function gX(n){if(!Bn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ZI(n,r,"true"),setTimeout(()=>ZI(n,r,"false"),20)}return!1}function yX(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function vX(n,e){let t=e.keyCode,r=yX(e);if(t==8||Fr&&t==72&&r=="c")return JI(n,-1)||Pu(n,-1);if(t==46&&!e.shiftKey||Fr&&t==68&&r=="c")return JI(n,1)||Pu(n,1);if(t==13||t==27)return!0;if(t==37||Fr&&t==66&&r=="c"){let i=t==37?QI(n,n.state.selection.from)=="ltr"?-1:1:-1;return YI(n,i,r)||Pu(n,i)}else if(t==39||Fr&&t==70&&r=="c"){let i=t==39?QI(n,n.state.selection.from)=="ltr"?1:-1:1;return YI(n,i,r)||Pu(n,i)}else{if(t==38||Fr&&t==80&&r=="c")return XI(n,-1,r)||Pu(n,-1);if(t==40||Fr&&t==78&&r=="c")return gX(n)||XI(n,1,r)||Pu(n,1);if(r==(Fr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function tw(n,e){n.someProp("transformCopied",E=>{e=E(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let E=r.firstChild;t.push(E.type.name,E.attrs!=E.type.defaultAttrs?E.attrs:null),r=E.content}let a=n.someProp("clipboardSerializer")||Fl.fromSchema(n.state.schema),u=_V(),h=u.createElement("div");h.appendChild(a.serializeFragment(r,{document:u}));let f=h.firstChild,p,m=0;for(;f&&f.nodeType==1&&(p=TV[f.nodeName.toLowerCase()]);){for(let E=p.length-1;E>=0;E--){let T=u.createElement(p[E]);for(;h.firstChild;)T.appendChild(h.firstChild);h.appendChild(T),m++}f=h.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${m?` -${m}`:""} ${JSON.stringify(t)}`);let v=n.someProp("clipboardTextSerializer",E=>E(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:v,slice:e}}function yV(n,e,t,r,i){let s=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let h=!!e&&(r||s||!t);if(h){if(n.someProp("transformPastedText",v=>{e=v(e,s||r,n)}),s)return u=new pe(le.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",v=>{u=v(u,n,!0)}),u;let m=n.someProp("clipboardTextParser",v=>v(e,i,r,n));if(m)u=m;else{let v=i.marks(),{schema:E}=n.state,T=Fl.fromSchema(E);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=a.appendChild(document.createElement("p"));S&&w.appendChild(T.serializeNode(E.text(S,v)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),a=_X(t),Cd&&SX(a);let f=a&&a.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let v=a.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;a=v}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Zo.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(h||p),context:i,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!bX.test(v.parentNode.nodeName)?{ignore:!0}:null}})),p)u=wX(eM(u,+p[1],+p[2]),p[4]);else if(u=pe.maxOpen(EX(u.content,i),!0),u.openStart||u.openEnd){let m=0,v=0;for(let E=u.content.firstChild;m<u.openStart&&!E.type.spec.isolating;m++,E=E.firstChild);for(let E=u.content.lastChild;v<u.openEnd&&!E.type.spec.isolating;v++,E=E.lastChild);u=eM(u,m,v)}return n.someProp("transformPasted",m=>{u=m(u,n,h)}),u}const bX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function EX(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(u=>{if(!a)return;let h=i.findWrapping(u.type),f;if(!h)return a=null;if(f=a.length&&s.length&&bV(h,s,u,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=EV(a[a.length-1],s.length));let p=vV(u,h);a.push(p),i=i.matchType(p.type),s=h}}),a)return le.from(a)}return n}function vV(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,le.from(n));return n}function bV(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=bV(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(le.from(vV(t,n,i+1))))}}function EV(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,EV(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(le.empty,!0);return n.copy(t.append(r))}function VT(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(s=0),i<r-1&&(u=VT(u,e,t,r,i+1,s)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,s<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(le.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function eM(n,e,t){return e<n.openStart&&(n=new pe(VT(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new pe(VT(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const TV={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let tM=null;function _V(){return tM||(tM=document.implementation.createHTMLDocument("title"))}let aE=null;function TX(n){let e=window.trustedTypes;return e?(aE||(aE=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),aE.createHTML(n)):n}function _X(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=_V().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&TV[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=TX(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function SX(n){let e=n.querySelectorAll(Mn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function wX(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let h=t.nodes[r[u]];if(!h||h.hasRequiredAttrs())break;i=le.from(h.create(r[u+1],i)),s++,a++}return new pe(i,s,a)}const Qn={},Xn={},AX={touchstart:!0,touchmove:!0};class xX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function CX(n){for(let e in Qn){let t=Qn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{kX(n,r)&&!nw(n,r)&&(n.editable||!(r.type in Xn))&&t(n,r)},AX[e]?{passive:!0}:void 0)}Bn&&n.dom.addEventListener("input",()=>null),UT(n)}function Ko(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function RX(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function UT(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>nw(n,r))})}function nw(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function kX(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function IX(n,e){!nw(n,e)&&Qn[e.type]&&(n.editable||!(e.type in Xn))&&Qn[e.type](n,e)}Xn.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!wV(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Ps&&Mn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),mc&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,ll(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||vX(n,t)?t.preventDefault():Ko(n,"key")};Xn.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Xn.keypress=(n,e)=>{let t=e;if(wV(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Fr&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Ie)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),s=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",a=>a(n,r.$from.pos,r.$to.pos,i,s))&&n.dispatch(s()),t.preventDefault()}};function r0(n){return{left:n.clientX,top:n.clientY}}function MX(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function rw(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,u=>a>s.depth?u(n,t,s.nodeAfter,s.before(a),i,!0):u(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function sc(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function DX(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Se.isSelectable(r)?(sc(n,new Se(t)),!0):!1}function NX(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Se&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let u=a>s.depth?s.nodeAfter:s.node(a);if(Se.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(sc(n,Se.create(n.state.doc,i)),!0):!1}function OX(n,e,t,r,i){return rw(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?NX(n,t):DX(n,t))}function PX(n,e,t,r){return rw(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function LX(n,e,t,r){return rw(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||VX(n,t,r)}function VX(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(sc(n,Ie.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(a.inlineContent)sc(n,Ie.create(r,u+1,u+1+a.content.size));else if(Se.isSelectable(a))sc(n,Se.create(r,u));else continue;return!0}}function iw(n){return Vg(n)}const SV=Fr?"metaKey":"ctrlKey";Qn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=iw(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&MX(t,n.input.lastClick)&&!t[SV]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s,button:t.button};let a=n.posAtCoords(r0(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new UX(n,a,t,!!r)):(s=="doubleClick"?PX:LX)(n,a.pos,a.inside,t)?t.preventDefault():Ko(n,"pointer"))};class UX{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[SV],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);s=p.parent,a=p.depth?p.before():0}const u=i?null:r.target,h=u?e.docView.nearestDesc(u,!0):null;this.target=h&&h.nodeDOM.nodeType==1?h.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof Se&&f.from<=a&&f.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ko(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>zs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(r0(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ko(this.view,"pointer"):OX(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Bn&&this.mightDrag&&!this.mightDrag.node.isAtom||Mn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(sc(this.view,ze.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ko(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ko(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Qn.touchstart=n=>{n.input.lastTouch=Date.now(),iw(n),Ko(n,"pointer")};Qn.touchmove=n=>{n.input.lastTouch=Date.now(),Ko(n,"pointer")};Qn.contextmenu=n=>iw(n);function wV(n,e){return n.composing?!0:Bn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const BX=Ps?5e3:-1;Xn.compositionstart=Xn.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Ie&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Mn&&tV&&zX(n)))n.markCursor=n.state.storedMarks||t.marks(),Vg(n,!0),n.markCursor=null;else if(Vg(n,!e.selection.empty),Gr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}AV(n,BX)};function zX(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let r=e.childNodes[t];return r.nodeType==1&&r.contentEditable=="false"}Xn.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,AV(n,20))};function AV(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Vg(n),e))}function xV(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=FX());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function jX(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=NQ(e.focusNode,e.focusOffset),r=OQ(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function FX(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Vg(n,e=!1){if(!(Ps&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),xV(n),e||n.docView&&n.docView.dirty){let t=ZS(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function HX(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Jf=lr&&ea<15||mc&&UQ<604;Qn.copy=Xn.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Jf?null:t.clipboardData,a=r.content(),{dom:u,text:h}=tw(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",h)):HX(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function qX(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function $X(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Zf(n,r.value,null,i,e):Zf(n,r.textContent,r.innerHTML,i,e)},50)}function Zf(n,e,t,r,i){let s=yV(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",h=>h(n,i,s||pe.empty)))return!0;if(!s)return!1;let a=qX(s),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function CV(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Xn.paste=(n,e)=>{let t=e;if(n.composing&&!Ps)return;let r=Jf?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Zf(n,CV(r),r.getData("text/html"),i,t)?t.preventDefault():$X(n,t)};class RV{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const GX=Fr?"altKey":"ctrlKey";function kV(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[GX]}Qn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(r0(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Se?i.to-1:i.to))){if(r&&r.mightDrag)a=Se.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(a=Se.create(n.state.doc,m.posBefore))}}let u=(a||n.state.selection).content(),{dom:h,text:f,slice:p}=tw(n,u);(!t.dataTransfer.files.length||!Mn||eV>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Jf?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",Jf||t.dataTransfer.setData("text/plain",f),n.dragging=new RV(p,kV(n,t),a)};Qn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Xn.dragover=Xn.dragenter=(n,e)=>e.preventDefault();Xn.drop=(n,e)=>{try{KX(n,e,n.dragging)}finally{n.dragging=null}};function KX(n,e,t){if(!e.dataTransfer)return;let r=n.posAtCoords(r0(e));if(!r)return;let i=n.state.doc.resolve(r.pos),s=t&&t.slice;s?n.someProp("transformPasted",E=>{s=E(s,n,!1)}):s=yV(n,CV(e.dataTransfer),Jf?null:e.dataTransfer.getData("text/html"),!1,i);let a=!!(t&&kV(n,e));if(n.someProp("handleDrop",E=>E(n,e,s||pe.empty,a))){e.preventDefault();return}if(!s)return;e.preventDefault();let u=s?NL(n.state.doc,i.pos,s):i.pos;u==null&&(u=i.pos);let h=n.state.tr;if(a){let{node:E}=t;E?E.replace(h):h.deleteSelection()}let f=h.mapping.map(u),p=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,m=h.doc;if(p?h.replaceRangeWith(f,f,s.content.firstChild):h.replaceRange(f,f,s),h.doc.eq(m))return;let v=h.doc.resolve(f);if(p&&Se.isSelectable(s.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(s.content.firstChild))h.setSelection(new Se(v));else{let E=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((T,S,w,C)=>E=C),h.setSelection(ew(n,v,h.doc.resolve(E)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))}Qn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&zs(n)},20))};Qn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Qn.beforeinput=(n,e)=>{if(Mn&&Ps&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,ll(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Xn)Qn[n]=Xn[n];function ed(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Ug{constructor(e,t){this.toDOM=e,this.spec=t||Tl,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Yn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ug&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ed(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class na{constructor(e,t){this.attrs=e,this.spec=t||Tl}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Yn(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof na&&ed(this.attrs,e.attrs)&&ed(this.spec,e.spec)}static is(e){return e.type instanceof na}destroy(){}}class sw{constructor(e,t){this.attrs=e,this.spec=t||Tl}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Yn(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof sw&&ed(this.attrs,e.attrs)&&ed(this.spec,e.spec)}destroy(){}}class Yn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Yn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Yn(e,e,new Ug(t,r))}static inline(e,t,r,i){return new Yn(e,t,new na(r,i))}static node(e,t,r,i){return new Yn(e,t,new sw(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof na}get widget(){return this.type instanceof Ug}}const Fu=[],Tl={};class At{constructor(e,t){this.local=e.length?e:Fu,this.children=t.length?t:Fu}static create(e,t){return t.length?Bg(t,e,0,Tl):Pn}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,s)}}map(e,t,r){return this==Pn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Tl)}mapInner(e,t,r,i,s){let a;for(let u=0;u<this.local.length;u++){let h=this.local[u].map(e,r,i);h&&h.type.valid(t,h)?(a||(a=[])).push(h):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?WX(this.children,a||[],e,t,r,i,s):a?new At(a.sort(_l),Fu):Pn}add(e,t){return t.length?this==Pn?At.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((u,h)=>{let f=h+r,p;if(p=MV(t,u,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<h;)s+=3;i[s]==h?i[s+2]=i[s+2].addInner(u,p,f+1):i.splice(s,0,h,h+u.nodeSize,Bg(p,u,f+1,Tl)),s+=3}});let a=IV(s?DV(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new At(a.length?this.local.concat(a).sort(_l):this.local,i||this.children)}remove(e){return e.length==0||this==Pn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,u=r[s]+t,h=r[s+1]+t;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<h&&(e[p]=null,(a||(a=[])).push(m));if(!a)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(a,u+1);f!=Pn?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new At(i,r):Pn}forChild(e,t){if(this==Pn)return this;if(t.isLeaf)return At.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,a=s+t.content.size;for(let u=0;u<this.local.length;u++){let h=this.local[u];if(h.from<a&&h.to>s&&h.type instanceof na){let f=Math.max(s,h.from)-s,p=Math.min(a,h.to)-s;f<p&&(i||(i=[])).push(h.copy(f,p))}}if(i){let u=new At(i.sort(_l),Fu);return r?new jo([u,r]):u}return r||Pn}eq(e){if(this==e)return!0;if(!(e instanceof At)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return ow(this.localsInner(e))}localsInner(e){if(this==Pn)return Fu;if(e.inlineContent||!this.local.some(na.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof na||t.push(this.local[r]);return t}forEachSet(e){e(this)}}At.empty=new At([],[]);At.removeOverlap=ow;const Pn=At.empty;class jo{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Tl));return jo.from(r)}forChild(e,t){if(t.isLeaf)return At.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Pn&&(s instanceof jo?r=r.concat(s.members):r.push(s))}return jo.from(r)}eq(e){if(!(e instanceof jo)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?ow(r?t:t.sort(_l)):Fu}static from(e){switch(e.length){case 0:return Pn;case 1:return e[0];default:return new jo(e.every(t=>t instanceof At)?e:e.reduce((t,r)=>t.concat(r instanceof At?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function WX(n,e,t,r,i,s,a){let u=n.slice();for(let f=0,p=s;f<t.maps.length;f++){let m=0;t.maps[f].forEach((v,E,T,S)=>{let w=S-T-(E-v);for(let C=0;C<u.length;C+=3){let N=u[C+1];if(N<0||v>N+p-m)continue;let V=u[C]+p-m;E>=V?u[C+1]=v<=V?-2:-1:v>=p&&w&&(u[C]+=w,u[C+1]+=w)}m+=w}),p=t.maps[f].map(p,-1)}let h=!1;for(let f=0;f<u.length;f+=3)if(u[f+1]<0){if(u[f+1]==-2){h=!0,u[f+1]=-1;continue}let p=t.map(n[f]+s),m=p-i;if(m<0||m>=r.content.size){h=!0;continue}let v=t.map(n[f+1]+s,-1),E=v-i,{index:T,offset:S}=r.content.findIndex(m),w=r.maybeChild(T);if(w&&S==m&&S+w.nodeSize==E){let C=u[f+2].mapInner(t,w,p+1,n[f]+s+1,a);C!=Pn?(u[f]=m,u[f+1]=E,u[f+2]=C):(u[f+1]=-2,h=!0)}else h=!0}if(h){let f=YX(u,n,e,t,i,s,a),p=Bg(f,r,0,a);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,v=0;m<p.children.length;m+=3){let E=p.children[m];for(;v<u.length&&u[v]<E;)v+=3;u.splice(v,0,p.children[m],p.children[m+1],p.children[m+2])}}return new At(e.sort(_l),u)}function IV(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Yn(i.from+e,i.to+e,i.type))}return t}function YX(n,e,t,r,i,s,a){function u(h,f){for(let p=0;p<h.local.length;p++){let m=h.local[p].map(r,i,f);m?t.push(m):a.onRemove&&a.onRemove(h.local[p].spec)}for(let p=0;p<h.children.length;p+=3)u(h.children[p+2],h.children[p]+f+1)}for(let h=0;h<n.length;h+=3)n[h+1]==-1&&u(n[h+2],e[h]+s+1);return t}function MV(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function DV(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Bg(n,e,t,r){let i=[],s=!1;e.forEach((u,h)=>{let f=MV(n,u,h+t);if(f){s=!0;let p=Bg(f,u,t+h+1,r);p!=Pn&&i.push(h,h+u.nodeSize,p)}});let a=IV(s?DV(n):n,-t).sort(_l);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new At(a,i):Pn}function _l(n,e){return n.from-e.from||n.to-e.to}function ow(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),nM(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),nM(e,i,r.copy(s.from,r.to)));break}}}return e}function nM(n,e,t){for(;e<n.length&&_l(t,n[e])>0;)e++;n.splice(e,0,t)}function lE(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Pn&&e.push(r)}),n.cursorWrapper&&e.push(At.create(n.state.doc,[n.cursorWrapper.deco])),jo.from(e)}const QX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},XX=lr&&ea<=11;class JX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ZX{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new JX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);lr&&ea<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Bn&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),XX&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,QX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(WI(this.view)){if(this.suppressingSelectionUpdates)return zs(this.view);if(lr&&ea<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ll(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=pc(s))t.add(s);for(let s=e.anchorNode;s;s=pc(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&WI(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,u=!1,h=[];if(e.editable)for(let p=0;p<t.length;p++){let m=this.registerMutation(t[p],h);m&&(s=s<0?m.from:Math.min(m.from,s),a=a<0?m.to:Math.max(m.to,a),m.typeOver&&(u=!0))}if(h.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of h)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}else if(Gr&&h.length){let p=h.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,v]=p;m.parentNode&&m.parentNode.parentNode==v.parentNode?v.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let v of p){let E=v.parentNode;E&&E.nodeName=="LI"&&(!m||nJ(e,m)!=E)&&v.remove()}}}let f=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&t0(r)&&(f=ZS(e))&&f.eq(ze.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,zs(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),eJ(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,rJ(e,h)),this.handleDOMChange(s,a,u,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||zs(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];t.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(lr&&ea<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:v}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(s=v)}let a=i&&i.parentNode==e.target?Rn(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),h=s&&s.parentNode==e.target?Rn(s):e.target.childNodes.length,f=r.localPosFromDOM(e.target,h,1);return{from:u,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let rM=new WeakMap,iM=!1;function eJ(n){if(!rM.has(n)&&(rM.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Gr,iM)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),iM=!0}}function sM(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Ll(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function tJ(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return sM(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?sM(n,t):null}function nJ(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function rJ(n,e){var t;let{focusNode:r,focusOffset:i}=n.domSelectionRange();for(let s of e)if(((t=s.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let a=s.nextSibling;for(;a&&a.nodeName!="TD"&&a.nodeName!="TH";)a=a.nextSibling;if(a){let u=a;for(;;){let h=u.firstChild;if(!h||h.nodeType!=1||h.contentEditable=="false"||/^(BR|IMG)$/.test(h.nodeName))break;u=h}u.insertBefore(s,u.firstChild),r==s&&n.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function iJ(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:u}=n.docView.parseRange(e,t),h=n.domSelectionRange(),f,p=h.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:h.anchorOffset}],t0(h)||f.push({node:h.focusNode,offset:h.focusOffset})),Mn&&n.input.lastKeyCode===8)for(let w=s;w>i;w--){let C=r.childNodes[w-1],N=C.pmViewDesc;if(C.nodeName=="BR"&&!N){s=w;break}if(!N||N.size)break}let m=n.state.doc,v=n.someProp("domParser")||Zo.fromSchema(n.state.schema),E=m.resolve(a),T=null,S=v.parse(r,{topNode:E.parent,topMatch:E.parent.contentMatchAt(E.index()),topOpen:!0,from:i,to:s,preserveWhitespace:E.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:sJ,context:E});if(f&&f[0].pos!=null){let w=f[0].pos,C=f[1]&&f[1].pos;C==null&&(C=w),T={anchor:w+a,head:C+a}}return{doc:S,sel:T,from:a,to:u}}function sJ(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Bn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Bn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const oJ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function aJ(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let I=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,k=ZS(n,I);if(k&&!n.state.selection.eq(k)){if(Mn&&Ps&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",B=>B(n,ll(13,"Enter"))))return;let D=n.state.tr.setSelection(k);I=="pointer"?D.setMeta("pointer",!0):I=="key"&&D.scrollIntoView(),s&&D.setMeta("composition",s),n.dispatch(D)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let h=n.state.selection,f=iJ(n,e,t),p=n.state.doc,m=p.slice(f.from,f.to),v,E;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(v=n.state.selection.to,E="end"):(v=n.state.selection.from,E="start"),n.input.lastKeyCode=null;let T=cJ(m.content,f.doc.content,f.from,v,E);if(T&&n.input.domChangeCount++,(mc&&n.input.lastIOSEnter>Date.now()-225||Ps)&&i.some(I=>I.nodeType==1&&!oJ.test(I.nodeName))&&(!T||T.endA>=T.endB)&&n.someProp("handleKeyDown",I=>I(n,ll(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!T)if(r&&h instanceof Ie&&!h.empty&&h.$head.sameParent(h.$anchor)&&!n.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))T={start:h.from,endA:h.to,endB:h.to};else{if(f.sel){let I=oM(n,n.state.doc,f.sel);if(I&&!I.eq(n.state.selection)){let k=n.state.tr.setSelection(I);s&&k.setMeta("composition",s),n.dispatch(k)}}return}n.state.selection.from<n.state.selection.to&&T.start==T.endB&&n.state.selection instanceof Ie&&(T.start>n.state.selection.from&&T.start<=n.state.selection.from+2&&n.state.selection.from>=f.from?T.start=n.state.selection.from:T.endA<n.state.selection.to&&T.endA>=n.state.selection.to-2&&n.state.selection.to<=f.to&&(T.endB+=n.state.selection.to-T.endA,T.endA=n.state.selection.to)),lr&&ea<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>f.from&&f.doc.textBetween(T.start-f.from-1,T.start-f.from+1)==" "&&(T.start--,T.endA--,T.endB--);let S=f.doc.resolveNoCache(T.start-f.from),w=f.doc.resolveNoCache(T.endB-f.from),C=p.resolve(T.start),N=S.sameParent(w)&&S.parent.inlineContent&&C.end()>=T.endA;if((mc&&n.input.lastIOSEnter>Date.now()-225&&(!N||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!N&&S.pos<f.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&S.pos<w.pos&&!/\S/.test(f.doc.textBetween(S.pos,w.pos,"","")))&&n.someProp("handleKeyDown",I=>I(n,ll(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>T.start&&uJ(p,T.start,T.endA,S,w)&&n.someProp("handleKeyDown",I=>I(n,ll(8,"Backspace")))){Ps&&Mn&&n.domObserver.suppressSelectionUpdates();return}Mn&&T.endB==T.start&&(n.input.lastChromeDelete=Date.now()),Ps&&!N&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==T.endA&&(T.endB-=2,w=f.doc.resolveNoCache(T.endB-f.from),setTimeout(()=>{n.someProp("handleKeyDown",function(I){return I(n,ll(13,"Enter"))})},20));let V=T.start,$=T.endA,F=I=>{let k=I||n.state.tr.replace(V,$,f.doc.slice(T.start-f.from,T.endB-f.from));if(f.sel){let D=oM(n,k.doc,f.sel);D&&!(Mn&&n.composing&&D.empty&&(T.start!=T.endB||n.input.lastChromeDelete<Date.now()-100)&&(D.head==V||D.head==k.mapping.map($)-1)||lr&&D.empty&&D.head==V)&&k.setSelection(D)}return s&&k.setMeta("composition",s),k.scrollIntoView()},Z;if(N)if(S.pos==w.pos){lr&&ea<=11&&S.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>zs(n),20));let I=F(n.state.tr.delete(V,$)),k=p.resolve(T.start).marksAcross(p.resolve(T.endA));k&&I.ensureMarks(k),n.dispatch(I)}else if(T.endA==T.endB&&(Z=lJ(S.parent.content.cut(S.parentOffset,w.parentOffset),C.parent.content.cut(C.parentOffset,T.endA-C.start())))){let I=F(n.state.tr);Z.type=="add"?I.addMark(V,$,Z.mark):I.removeMark(V,$,Z.mark),n.dispatch(I)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let I=S.parent.textBetween(S.parentOffset,w.parentOffset),k=()=>F(n.state.tr.insertText(I,V,$));n.someProp("handleTextInput",D=>D(n,V,$,I,k))||n.dispatch(k())}else n.dispatch(F());else n.dispatch(F())}function oM(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:ew(n,e.resolve(t.anchor),e.resolve(t.head))}function lJ(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,u,h;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)s=t[p].removeFromSet(s);if(i.length==1&&s.length==0)u=i[0],a="add",h=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&s.length==1)u=s[0],a="remove",h=p=>p.mark(u.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(h(e.child(p)));if(le.from(f).eq(n))return{mark:u,type:a}}function uJ(n,e,t,r,i){if(t-e<=i.pos-r.pos||uE(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&t==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(uE(s,!0,!0));return!a.parent.isTextblock||a.pos>t||uE(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function uE(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function cJ(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let h=Math.max(0,s-Math.min(a,u));r-=a+h-s}if(a<s&&n.size<e.size){let h=r<=s&&r>=a?s-r:0;s-=h,s&&s<e.size&&aM(e.textBetween(s-1,s+1))&&(s+=h?1:-1),u=s+(u-a),a=s}else if(u<s){let h=r<=s&&r>=u?s-r:0;s-=h,s&&s<n.size&&aM(n.textBetween(s-1,s+1))&&(s+=h?1:-1),a=s+(a-u),u=s}return{start:s,endA:a,endB:u}}function aM(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class NV{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(fM),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=cM(this),uM(this),this.nodeViews=hM(this),this.docView=FI(this.state.doc,lM(this),lE(this),this.dom,this),this.domObserver=new ZX(this,(r,i,s,a)=>aJ(this,r,i,s,a)),this.domObserver.start(),CX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&UT(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(fM),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(xV(this),a=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let E=hM(this);fJ(E,this.nodeViews)&&(this.nodeViews=E,s=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&UT(this),this.editable=cM(this),uM(this);let h=lE(this),f=lM(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=s||!this.docView.matchesNode(e.doc,f,h);(m||!e.selection.eq(i.selection))&&(a=!0);let v=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&jQ(this);if(a){this.domObserver.stop();let E=m&&(lr||Mn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&hJ(i.selection,e.selection);if(m){let T=Mn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=jX(this)),(s||!this.docView.update(e.doc,f,h,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=FI(e.doc,f,h,this.dom,this)),T&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(E=!0)}E||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&hX(this))?zs(this,E):(pV(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():v&&FQ(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Se){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&LI(this,t.getBoundingClientRect(),e)}else LI(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new RV(e.slice,e.move,i<0?void 0:Se.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let u=s[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(lr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&HQ(this.dom),zs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return WQ(this,e)}coordsAtPos(e,t=1){return oV(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return ZQ(this,t||this.state,e)}pasteHTML(e,t){return Zf(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Zf(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return tw(this,e)}destroy(){this.docView&&(RX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lE(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,MQ())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return IX(this,e)}domSelectionRange(){let e=this.domSelection();return e?Bn&&this.root.nodeType===11&&LQ(this.dom.ownerDocument)==this.dom&&tJ(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}NV.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function lM(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Yn.node(0,n.state.doc.content.size,e)]}function uM(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Yn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function cM(n){return!n.someProp("editable",e=>e(n.state)===!1)}function hJ(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function hM(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function fJ(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function fM(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ha={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},zg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},dJ=typeof navigator<"u"&&/Mac/.test(navigator.platform),pJ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kn=0;kn<10;kn++)ha[48+kn]=ha[96+kn]=String(kn);for(var kn=1;kn<=24;kn++)ha[kn+111]="F"+kn;for(var kn=65;kn<=90;kn++)ha[kn]=String.fromCharCode(kn+32),zg[kn]=String.fromCharCode(kn);for(var cE in ha)zg.hasOwnProperty(cE)||(zg[cE]=ha[cE]);function mJ(n){var e=dJ&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||pJ&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?zg:ha)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const gJ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),yJ=typeof navigator<"u"&&/Win/.test(navigator.platform);function vJ(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u++){let h=e[u];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))gJ?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function bJ(n){let e=Object.create(null);for(let t in n)e[vJ(t)]=n[t];return e}function hE(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function EJ(n){return new Rt({props:{handleKeyDown:OV(n)}})}function OV(n){let e=bJ(n);return function(t,r){let i=mJ(r),s,a=e[hE(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[hE(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(yJ&&r.ctrlKey&&r.altKey)&&(s=ha[r.keyCode])&&s!=i){let u=e[hE(s,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}var TJ=Object.defineProperty,aw=(n,e)=>{for(var t in e)TJ(n,t,{get:e[t],enumerable:!0})};function i0(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}var s0=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:i}=t,s=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...f)=>{const p=u(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:s}=r,a=[],u=!!n,h=n||i.tr,f=()=>(!u&&e&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(h),a.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(t).map(([m,v])=>[m,(...T)=>{const S=this.buildProps(h,e),w=v(...T)(S);return a.push(w),p}])),run:f};return p}createCan(n){const{rawCommands:e,state:t}=this,r=!1,i=n||t.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([u,h])=>[u,(...f)=>h(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:s}=r,a={tr:n,editor:r,view:s,state:i0({state:i,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([u,h])=>[u,(...f)=>h(...f)(a)]))}};return a}},PV={};aw(PV,{blur:()=>_J,clearContent:()=>SJ,clearNodes:()=>wJ,command:()=>AJ,createParagraphNear:()=>xJ,cut:()=>CJ,deleteCurrentNode:()=>RJ,deleteNode:()=>kJ,deleteRange:()=>IJ,deleteSelection:()=>MJ,enter:()=>DJ,exitCode:()=>NJ,extendMarkRange:()=>OJ,first:()=>PJ,focus:()=>VJ,forEach:()=>UJ,insertContent:()=>BJ,insertContentAt:()=>FJ,joinBackward:()=>$J,joinDown:()=>qJ,joinForward:()=>GJ,joinItemBackward:()=>KJ,joinItemForward:()=>WJ,joinTextblockBackward:()=>YJ,joinTextblockForward:()=>QJ,joinUp:()=>HJ,keyboardShortcut:()=>JJ,lift:()=>ZJ,liftEmptyBlock:()=>eZ,liftListItem:()=>tZ,newlineInCode:()=>nZ,resetAttributes:()=>rZ,scrollIntoView:()=>iZ,selectAll:()=>sZ,selectNodeBackward:()=>oZ,selectNodeForward:()=>aZ,selectParentNode:()=>lZ,selectTextblockEnd:()=>uZ,selectTextblockStart:()=>cZ,setContent:()=>hZ,setMark:()=>MZ,setMeta:()=>DZ,setNode:()=>NZ,setNodeSelection:()=>OZ,setTextDirection:()=>PZ,setTextSelection:()=>LZ,sinkListItem:()=>VZ,splitBlock:()=>UZ,splitListItem:()=>BZ,toggleList:()=>zZ,toggleMark:()=>jZ,toggleNode:()=>FZ,toggleWrap:()=>HZ,undoInputRule:()=>qZ,unsetAllMarks:()=>$Z,unsetMark:()=>GZ,unsetTextDirection:()=>KZ,updateAttributes:()=>WZ,wrapIn:()=>YZ,wrapInList:()=>QZ});var _J=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),SJ=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),wJ=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:a})=>{n.doc.nodesBetween(s.pos,a.pos,(u,h)=>{if(u.type.isText)return;const{doc:f,mapping:p}=e,m=f.resolve(p.map(h)),v=f.resolve(p.map(h+u.nodeSize)),E=m.blockRange(v);if(!E)return;const T=Mc(E);if(u.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(E.start,S)}(T||T===0)&&e.lift(E,T)})}),!0},AJ=n=>e=>n(e),xJ=()=>({state:n,dispatch:e})=>YL(n,e),CJ=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new Ie(r.doc.resolve(Math.max(a-1,0)))),!0},RJ=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const u=i.before(s),h=i.after(s);n.delete(u,h).scrollIntoView()}return!0}return!1};function rn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var kJ=n=>({tr:e,state:t,dispatch:r})=>{const i=rn(n,t.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const h=s.before(a),f=s.after(a);e.delete(h,f).scrollIntoView()}return!0}return!1},IJ=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},MJ=()=>({state:n,dispatch:e})=>KS(n,e),DJ=()=>({commands:n})=>n.keyboardShortcut("Enter"),NJ=()=>({state:n,dispatch:e})=>gQ(n,e);function lw(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function jg(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:lw(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function LV(n,e,t={}){return n.find(r=>r.type===e&&jg(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function dM(n,e,t={}){return!!LV(n,e,t)}function uw(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])==null?void 0:r.attrs),!LV([...i.node.marks],e,t)))return;let a=i.index,u=n.start()+i.offset,h=a+1,f=u+i.node.nodeSize;for(;a>0&&dM([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;h<n.parent.childCount&&dM([...n.parent.child(h).marks],e,t);)f+=n.parent.child(h).nodeSize,h+=1;return{from:u,to:f}}function Ks(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var OJ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Ks(n,r.schema),{doc:a,selection:u}=t,{$from:h,from:f,to:p}=u;if(i){const m=uw(h,s,e);if(m&&m.from<=f&&m.to>=p){const v=Ie.create(a,m.from,m.to);t.setSelection(v)}}return!0},PJ=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function VV(n){return n instanceof Ie}function ml(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function UV(n,e=null){if(!e)return null;const t=ze.atStart(n),r=ze.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?Ie.create(n,ml(0,i,s),ml(n.content.size,i,s)):Ie.create(n,ml(e,i,s),ml(e,i,s))}function pM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Fg(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function LJ(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var VJ=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(Fg()||pM())&&r.dom.focus(),LJ()&&!Fg()&&!pM()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};try{if(r.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(s&&n===null&&!VV(t.state.selection))return a(),!0;const u=UV(i.doc,n)||t.state.selection,h=t.state.selection.eq(u);return s&&(h||i.setSelection(u),h&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},UJ=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),BJ=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),BV=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&BV(r)}return n};function Tm(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return BV(t)}function td(n,e,t){if(n instanceof vi||n instanceof le)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return le.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),td("",e,t)}if(i){if(t.errorOnInvalidContent){let a=!1,u="";const h=new _L({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(a=!0,u=typeof f=="string"?f:f.outerHTML,null)}]}})});if(t.slice?Zo.fromSchema(h).parseSlice(Tm(n),t.parseOptions):Zo.fromSchema(h).parse(Tm(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=Zo.fromSchema(e);return t.slice?s.parseSlice(Tm(n),t.parseOptions).content:s.parse(Tm(n),t.parseOptions)}return td("",e,t)}function zJ(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof gn||i instanceof yn))return;const s=n.mapping.maps[r];let a=0;s.forEach((u,h,f,p)=>{a===0&&(a=p)}),n.setSelection(ze.near(n.doc.resolve(a),t))}var jJ=n=>!("type"in n),FJ=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const h=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{td(e,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(w){h(w)}try{u=td(e,s.schema,{parseOptions:f,errorOnInvalidContent:(a=t.errorOnInvalidContent)!=null?a:s.options.enableContentCheck})}catch(w){return h(w),!1}let{from:p,to:m}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},v=!0,E=!0;if((jJ(u)?u:[u]).forEach(w=>{w.check(),v=v?w.isText&&w.marks.length===0:!1,E=E?w.isBlock:!1}),p===m&&E){const{parent:w}=r.doc.resolve(p);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(p-=1,m+=1)}let S;if(v){if(Array.isArray(e))S=e.map(w=>w.text||"").join("");else if(e instanceof le){let w="";e.forEach(C=>{C.text&&(w+=C.text)}),S=w}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else{S=u;const w=r.doc.resolve(p),C=w.node(),N=w.parentOffset===0,V=C.isText||C.isTextblock,$=C.content.size>0;N&&V&&$&&(p=Math.max(0,p-1)),r.replaceWith(p,m,S)}t.updateSelection&&zJ(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},HJ=()=>({state:n,dispatch:e})=>dQ(n,e),qJ=()=>({state:n,dispatch:e})=>pQ(n,e),$J=()=>({state:n,dispatch:e})=>FL(n,e),GJ=()=>({state:n,dispatch:e})=>GL(n,e),KJ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Jy(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},WJ=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Jy(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},YJ=()=>({state:n,dispatch:e})=>hQ(n,e),QJ=()=>({state:n,dispatch:e})=>fQ(n,e);function zV(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function XJ(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u+=1){const h=e[u];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))Fg()||zV()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${h}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}var JJ=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=XJ(n).split(/-(?!$)/),a=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),h=e.captureTransaction(()=>{t.someProp("handleKeyDown",f=>f(t,u))});return h?.steps.forEach(f=>{const p=f.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function fa(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,a=e?rn(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(m,v)=>{if(m.isText)return;const E=Math.max(r,v),T=Math.min(i,v+m.nodeSize);u.push({node:m,from:E,to:T})});const h=i-r,f=u.filter(m=>a?a.name===m.node.type.name:!0).filter(m=>jg(m.node.attrs,t,{strict:!1}));return s?!!f.length:f.reduce((m,v)=>m+v.to-v.from,0)>=h}var ZJ=(n,e={})=>({state:t,dispatch:r})=>{const i=rn(n,t.schema);return fa(t,i,e)?mQ(t,r):!1},eZ=()=>({state:n,dispatch:e})=>QL(n,e),tZ=n=>({state:e,dispatch:t})=>{const r=rn(n,e.schema);return CQ(r)(e,t)},nZ=()=>({state:n,dispatch:e})=>WL(n,e);function o0(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function mM(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}var rZ=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=o0(typeof n=="string"?n:n.name,r.schema);if(!u)return!1;u==="node"&&(s=rn(n,r.schema)),u==="mark"&&(a=Ks(n,r.schema));let h=!1;return t.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(p,m)=>{s&&s===p.type&&(h=!0,i&&t.setNodeMarkup(m,void 0,mM(p.attrs,e))),a&&p.marks.length&&p.marks.forEach(v=>{a===v.type&&(h=!0,i&&t.addMark(m,m+p.nodeSize,a.create(mM(v.attrs,e))))})})}),h},iZ=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),sZ=()=>({tr:n,dispatch:e})=>{if(e){const t=new wr(n.doc);n.setSelection(t)}return!0},oZ=()=>({state:n,dispatch:e})=>qL(n,e),aZ=()=>({state:n,dispatch:e})=>KL(n,e),lZ=()=>({state:n,dispatch:e})=>bQ(n,e),uZ=()=>({state:n,dispatch:e})=>_Q(n,e),cZ=()=>({state:n,dispatch:e})=>TQ(n,e);function BT(n,e,t={},r={}){return td(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}var hZ=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:a,commands:u})=>{const{doc:h}=s;if(r.preserveWhitespace!=="full"){const f=BT(n,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return a&&s.replaceWith(0,h.content.size,f).setMeta("preventUpdate",!t),!0}return a&&s.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:h.content.size},n,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function jV(n,e){const t=Ks(e,n.schema),{from:r,to:i,empty:s}=n.selection,a=[];s?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,h=>{a.push(...h.marks)});const u=a.find(h=>h.type.name===t.name);return u?{...u.attrs}:{}}function FV(n,e){const t=new UL(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function fZ(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function dZ(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function pZ(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function a0(n){return e=>pZ(e.$from,n)}function Ee(n,e,t){return n.config[e]===void 0&&n.parent?Ee(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ee(n.parent,e,t):null}):n.config[e]}function cw(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=Ee(e,"addExtensions",t);return r?[e,...cw(r())]:e}).flat(10)}function hw(n,e){const t=Fl.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function HV(n){return typeof n=="function"}function ot(n,e=void 0,...t){return HV(n)?e?n.bind(e)(...t):n(...t):n}function mZ(n={}){return Object.keys(n).length===0&&n.constructor===Object}function gc(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function qV(n){const e=[],{nodeExtensions:t,markExtensions:r}=gc(n),i=[...t,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},a=t.filter(f=>f.name!=="text").map(f=>f.name),u=r.map(f=>f.name),h=[...a,...u];return n.forEach(f=>{const p={name:f.name,options:f.options,storage:f.storage,extensions:i},m=Ee(f,"addGlobalAttributes",p);if(!m)return;m().forEach(E=>{let T;Array.isArray(E.types)?T=E.types:E.types==="*"?T=h:E.types==="nodes"?T=a:E.types==="marks"?T=u:T=[],T.forEach(S=>{Object.entries(E.attributes).forEach(([w,C])=>{e.push({type:S,name:w,attribute:{...s,...C}})})})})}),i.forEach(f=>{const p={name:f.name,options:f.options,storage:f.storage},m=Ee(f,"addAttributes",p);if(!m)return;const v=m();Object.entries(v).forEach(([E,T])=>{const S={...s,...T};typeof S?.default=="function"&&(S.default=S.default()),S?.isRequired&&S?.default===void 0&&delete S.default,e.push({type:f.name,name:E,attribute:S})})}),e}function Lt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const u=s?String(s).split(" "):[],h=r[i]?r[i].split(" "):[],f=u.filter(p=>!h.includes(p));r[i]=[...h,...f].join(" ")}else if(i==="style"){const u=s?s.split(";").map(p=>p.trim()).filter(Boolean):[],h=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;h.forEach(p=>{const[m,v]=p.split(":").map(E=>E.trim());f.set(m,v)}),u.forEach(p=>{const[m,v]=p.split(":").map(E=>E.trim());f.set(m,v)}),r[i]=Array.from(f.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[i]=s}),r},{})}function nd(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Lt(t,r),{})}function gZ(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function gM(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):gZ(t.getAttribute(a.name));return u==null?s:{...s,[a.name]:u}},{});return{...r,...i}}}}function yM(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&mZ(t)?!1:t!=null))}function vM(n){var e,t;const r={};return!((e=n?.attribute)!=null&&e.isRequired)&&"default"in(n?.attribute||{})&&(r.default=n.attribute.default),((t=n?.attribute)==null?void 0:t.validate)!==void 0&&(r.validate=n.attribute.validate),[n.name,r]}function yZ(n,e){var t;const r=qV(n),{nodeExtensions:i,markExtensions:s}=gc(n),a=(t=i.find(f=>Ee(f,"topNode")))==null?void 0:t.name,u=Object.fromEntries(i.map(f=>{const p=r.filter(C=>C.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},v=n.reduce((C,N)=>{const V=Ee(N,"extendNodeSchema",m);return{...C,...V?V(f):{}}},{}),E=yM({...v,content:ot(Ee(f,"content",m)),marks:ot(Ee(f,"marks",m)),group:ot(Ee(f,"group",m)),inline:ot(Ee(f,"inline",m)),atom:ot(Ee(f,"atom",m)),selectable:ot(Ee(f,"selectable",m)),draggable:ot(Ee(f,"draggable",m)),code:ot(Ee(f,"code",m)),whitespace:ot(Ee(f,"whitespace",m)),linebreakReplacement:ot(Ee(f,"linebreakReplacement",m)),defining:ot(Ee(f,"defining",m)),isolating:ot(Ee(f,"isolating",m)),attrs:Object.fromEntries(p.map(vM))}),T=ot(Ee(f,"parseHTML",m));T&&(E.parseDOM=T.map(C=>gM(C,p)));const S=Ee(f,"renderHTML",m);S&&(E.toDOM=C=>S({node:C,HTMLAttributes:nd(C,p)}));const w=Ee(f,"renderText",m);return w&&(E.toText=w),[f.name,E]})),h=Object.fromEntries(s.map(f=>{const p=r.filter(w=>w.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},v=n.reduce((w,C)=>{const N=Ee(C,"extendMarkSchema",m);return{...w,...N?N(f):{}}},{}),E=yM({...v,inclusive:ot(Ee(f,"inclusive",m)),excludes:ot(Ee(f,"excludes",m)),group:ot(Ee(f,"group",m)),spanning:ot(Ee(f,"spanning",m)),code:ot(Ee(f,"code",m)),attrs:Object.fromEntries(p.map(vM))}),T=ot(Ee(f,"parseHTML",m));T&&(E.parseDOM=T.map(w=>gM(w,p)));const S=Ee(f,"renderHTML",m);return S&&(E.toDOM=w=>S({mark:w,HTMLAttributes:nd(w,p)})),[f.name,E]}));return new _L({topNode:a,nodes:u,marks:h})}function vZ(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function wf(n){return n.sort((t,r)=>{const i=Ee(t,"priority")||100,s=Ee(r,"priority")||100;return i>s?-1:i<s?1:0})}function $V(n){const e=wf(cw(n)),t=vZ(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function GV(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,i,(h,f,p,m)=>{var v;h.isBlock&&f>r&&(u+=s);const E=a?.[h.type.name];if(E)return p&&(u+=E({node:h,pos:f,parent:p,index:m,range:e})),!1;h.isText&&(u+=(v=h?.text)==null?void 0:v.slice(Math.max(r,f)-f,i-f))}),u}function bZ(n,e){const t={from:0,to:n.content.size};return GV(n,t,e)}function KV(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function EZ(n,e){const t=rn(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,u=>{s.push(u)});const a=s.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function WV(n,e){const t=o0(typeof e=="string"?e:e.name,n.schema);return t==="node"?EZ(n,e):t==="mark"?jV(n,e):{}}function TZ(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function _Z(n){const e=TZ(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,a)=>a!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function YV(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((u,h)=>{a.push({from:u,to:h})});else{const{from:u,to:h}=t[s];if(u===void 0||h===void 0)return;a.push({from:u,to:h})}a.forEach(({from:u,to:h})=>{const f=e.slice(s).map(u,-1),p=e.slice(s).map(h),m=e.invert().map(f,-1),v=e.invert().map(p);r.push({oldRange:{from:m,to:v},newRange:{from:f,to:p}})})}),_Z(r)}function fw(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),a=uw(s,i.type);a&&r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}var SZ=(n,e,t,r=20)=>{const i=n.doc.resolve(t);let s=r,a=null;for(;s>0&&a===null;){const u=i.node(s);u?.type.name===e?a=u:s-=1}return[a,s]};function Gh(n,e){return e.nodes[n]||e.marks[n]||null}function Xm(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var wZ=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,a,u)=>{var h,f;const p=((f=(h=i.type.spec).toText)==null?void 0:f.call(h,{node:i,pos:s,parent:a,index:u}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-s))}),t};function zT(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Ks(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>s?s.name===m.type.name:!0).find(m=>jg(m.attrs,t,{strict:!1}));let a=0;const u=[];if(i.forEach(({$from:m,$to:v})=>{const E=m.pos,T=v.pos;n.doc.nodesBetween(E,T,(S,w)=>{if(s&&S.inlineContent&&!S.type.allowsMarkType(s))return!1;if(!S.isText&&!S.marks.length)return;const C=Math.max(E,w),N=Math.min(T,w+S.nodeSize),V=N-C;a+=V,u.push(...S.marks.map($=>({mark:$,from:C,to:N})))})}),a===0)return!1;const h=u.filter(m=>s?s.name===m.mark.type.name:!0).filter(m=>jg(m.mark.attrs,t,{strict:!1})).reduce((m,v)=>m+v.to-v.from,0),f=u.filter(m=>s?m.mark.type!==s&&m.mark.type.excludes(s):!0).reduce((m,v)=>m+v.to-v.from,0);return(h>0?h+f:h)>=a}function AZ(n,e,t={}){if(!e)return fa(n,null,t)||zT(n,null,t);const r=o0(e,n.schema);return r==="node"?fa(n,e,t):r==="mark"?zT(n,e,t):!1}var xZ=(n,e)=>{const{$from:t,$to:r,$anchor:i}=n.selection;if(e){const s=a0(u=>u.type.name===e)(n.selection);if(!s)return!1;const a=n.doc.resolve(s.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},CZ=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function bM(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function EM(n,e){const{nodeExtensions:t}=gc(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ot(Ee(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function l0(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(l0(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function QV(n){return n instanceof Se}var XV=class JV{constructor(e){this.position=e}static fromJSON(e){return new JV(e.position)}toJSON(){return{position:this.position}}};function RZ(n,e){const t=e.mapping.mapResult(n.position);return{position:new XV(t.pos),mapResult:t}}function kZ(n){return new XV(n)}function IZ(n,e,t){var r;const{selection:i}=e;let s=null;if(VV(i)&&(s=i.$cursor),s){const u=(r=n.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(t)&&(!!t.isInSet(u)||!u.some(f=>f.type.excludes(t)))}const{ranges:a}=i;return a.some(({$from:u,$to:h})=>{let f=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,h.pos,(p,m,v)=>{if(f)return!1;if(p.isInline){const E=!v||v.type.allowsMarkType(t),T=!!t.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(t));f=E&&T}return!f}),f})}var MZ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:a,ranges:u}=s,h=Ks(n,r.schema);if(i)if(a){const f=jV(r,h);t.addStoredMark(h.create({...f,...e}))}else u.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;r.doc.nodesBetween(p,m,(v,E)=>{const T=Math.max(E,p),S=Math.min(E+v.nodeSize,m);v.marks.find(C=>C.type===h)?v.marks.forEach(C=>{h===C.type&&t.addMark(T,S,h.create({...C.attrs,...e}))}):t.addMark(T,S,h.create(e))})});return IZ(r,t,h)},DZ=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),NZ=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=rn(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:u})=>NI(s,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>NI(s,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},OZ=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=ml(n,0,r.content.size),s=Se.create(r,i);e.setSelection(s)}return!0},PZ=(n,e)=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=r;let a,u;return typeof e=="number"?(a=e,u=e):e&&"from"in e&&"to"in e?(a=e.from,u=e.to):(a=s.from,u=s.to),i&&t.doc.nodesBetween(a,u,(h,f)=>{h.isText||t.setNodeMarkup(f,void 0,{...h.attrs,dir:n})}),!0},LZ=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,a=Ie.atStart(r).from,u=Ie.atEnd(r).to,h=ml(i,a,u),f=ml(s,a,u),p=Ie.create(r,h,f);e.setSelection(p)}return!0},VZ=n=>({state:e,dispatch:t})=>{const r=rn(n,e.schema);return IQ(r)(e,t)};function TM(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e?.includes(i.type.name));n.tr.ensureMarks(r)}}var UZ=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:a}=e,{$from:u,$to:h}=s,f=i.extensionManager.attributes,p=Xm(f,u.node().type.name,u.node().attrs);if(s instanceof Se&&s.node.isBlock)return!u.parentOffset||!Bs(a,u.pos)?!1:(r&&(n&&TM(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=h.parentOffset===h.parent.content.size,v=u.depth===0?void 0:fZ(u.node(-1).contentMatchAt(u.indexAfter(-1)));let E=m&&v?[{type:v,attrs:p}]:void 0,T=Bs(e.doc,e.mapping.map(u.pos),1,E);if(!E&&!T&&Bs(e.doc,e.mapping.map(u.pos),1,v?[{type:v}]:void 0)&&(T=!0,E=v?[{type:v,attrs:p}]:void 0),r){if(T&&(s instanceof Ie&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,E),v&&!m&&!u.parentOffset&&u.parent.type!==v)){const S=e.mapping.map(u.before()),w=e.doc.resolve(S);u.node(-1).canReplaceWith(w.index(),w.index()+1,v)&&e.setNodeMarkup(e.mapping.map(u.before()),v)}n&&TM(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return T},BZ=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var a;const u=rn(n,r.schema),{$from:h,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||h.depth<2||!h.sameParent(f))return!1;const m=h.node(-1);if(m.type!==u)return!1;const v=s.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==u||h.index(-2)!==h.node(-2).childCount-1)return!1;if(i){let C=le.empty;const N=h.index(-1)?1:h.index(-2)?2:3;for(let k=h.depth-N;k>=h.depth-3;k-=1)C=le.from(h.node(k).copy(C));const V=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,$={...Xm(v,h.node().type.name,h.node().attrs),...e},F=((a=u.contentMatch.defaultType)==null?void 0:a.createAndFill($))||void 0;C=C.append(le.from(u.createAndFill(null,F)||void 0));const Z=h.before(h.depth-(N-1));t.replace(Z,h.after(-V),new pe(C,4-N,0));let I=-1;t.doc.nodesBetween(Z,t.doc.content.size,(k,D)=>{if(I>-1)return!1;k.isTextblock&&k.content.size===0&&(I=D+1)}),I>-1&&t.setSelection(Ie.near(t.doc.resolve(I))),t.scrollIntoView()}return!0}const E=f.pos===h.end()?m.contentMatchAt(0).defaultType:null,T={...Xm(v,m.type.name,m.attrs),...e},S={...Xm(v,h.node().type.name,h.node().attrs),...e};t.delete(h.pos,f.pos);const w=E?[{type:u,attrs:T},{type:E,attrs:S}]:[{type:u,attrs:T}];if(!Bs(t.doc,h.pos,2))return!1;if(i){const{selection:C,storedMarks:N}=r,{splittableMarks:V}=s.extensionManager,$=N||C.$to.parentOffset&&C.$from.marks();if(t.split(h.pos,2,w).scrollIntoView(),!$||!i)return!0;const F=$.filter(Z=>V.includes(Z.type.name));t.ensureMarks(F)}return!0},fE=(n,e)=>{const t=a0(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===i?.type&&Sa(n.doc,t.pos)&&n.join(t.pos),!0},dE=(n,e)=>{const t=a0(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===i?.type&&Sa(n.doc,r)&&n.join(r),!0},zZ=(n,e,t,r={})=>({editor:i,tr:s,state:a,dispatch:u,chain:h,commands:f,can:p})=>{const{extensions:m,splittableMarks:v}=i.extensionManager,E=rn(n,a.schema),T=rn(e,a.schema),{selection:S,storedMarks:w}=a,{$from:C,$to:N}=S,V=C.blockRange(N),$=w||S.$to.parentOffset&&S.$from.marks();if(!V)return!1;const F=a0(Z=>EM(Z.type.name,m))(S);if(V.depth>=1&&F&&V.depth-F.depth<=1){if(F.node.type===E)return f.liftListItem(T);if(EM(F.node.type.name,m)&&E.validContent(F.node.content)&&u)return h().command(()=>(s.setNodeMarkup(F.pos,E),!0)).command(()=>fE(s,E)).command(()=>dE(s,E)).run()}return!t||!$||!u?h().command(()=>p().wrapInList(E,r)?!0:f.clearNodes()).wrapInList(E,r).command(()=>fE(s,E)).command(()=>dE(s,E)).run():h().command(()=>{const Z=p().wrapInList(E,r),I=$.filter(k=>v.includes(k.type.name));return s.ensureMarks(I),Z?!0:f.clearNodes()}).wrapInList(E,r).command(()=>fE(s,E)).command(()=>dE(s,E)).run()},jZ=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,a=Ks(n,r.schema);return zT(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,e)},FZ=(n,e,t={})=>({state:r,commands:i})=>{const s=rn(n,r.schema),a=rn(e,r.schema),u=fa(r,s,t);let h;return r.selection.$anchor.sameParent(r.selection.$head)&&(h=r.selection.$anchor.parent.attrs),u?i.setNode(a,h):i.setNode(s,{...h,...t})},HZ=(n,e={})=>({state:t,commands:r})=>{const i=rn(n,t.schema);return fa(t,i,e)?r.lift(i):r.wrapIn(i,e)},qZ=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const a=n.tr,u=s.transform;for(let h=u.steps.length-1;h>=0;h-=1)a.step(u.steps[h].invert(u.docs[h]));if(s.text){const h=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,h))}else a.delete(s.from,s.to)}return!0}}return!1},$Z=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},GZ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,h=Ks(n,r.schema),{$from:f,empty:p,ranges:m}=u;if(!i)return!0;if(p&&a){let{from:v,to:E}=u;const T=(s=f.marks().find(w=>w.type===h))==null?void 0:s.attrs,S=uw(f,h,T);S&&(v=S.from,E=S.to),t.removeMark(v,E,h)}else m.forEach(v=>{t.removeMark(v.$from.pos,v.$to.pos,h)});return t.removeStoredMark(h),!0},KZ=n=>({tr:e,state:t,dispatch:r})=>{const{selection:i}=t;let s,a;return typeof n=="number"?(s=n,a=n):n&&"from"in n&&"to"in n?(s=n.from,a=n.to):(s=i.from,a=i.to),r&&e.doc.nodesBetween(s,a,(u,h)=>{if(u.isText)return;const f={...u.attrs};delete f.dir,e.setNodeMarkup(h,void 0,f)}),!0},WZ=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=o0(typeof n=="string"?n:n.name,r.schema);if(!u)return!1;u==="node"&&(s=rn(n,r.schema)),u==="mark"&&(a=Ks(n,r.schema));let h=!1;return t.selection.ranges.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;let v,E,T,S;t.selection.empty?r.doc.nodesBetween(p,m,(w,C)=>{s&&s===w.type&&(h=!0,T=Math.max(C,p),S=Math.min(C+w.nodeSize,m),v=C,E=w)}):r.doc.nodesBetween(p,m,(w,C)=>{C<p&&s&&s===w.type&&(h=!0,T=Math.max(C,p),S=Math.min(C+w.nodeSize,m),v=C,E=w),C>=p&&C<=m&&(s&&s===w.type&&(h=!0,i&&t.setNodeMarkup(C,void 0,{...w.attrs,...e})),a&&w.marks.length&&w.marks.forEach(N=>{if(a===N.type&&(h=!0,i)){const V=Math.max(C,p),$=Math.min(C+w.nodeSize,m);t.addMark(V,$,a.create({...N.attrs,...e}))}}))}),E&&(v!==void 0&&i&&t.setNodeMarkup(v,void 0,{...E.attrs,...e}),a&&E.marks.length&&E.marks.forEach(w=>{a===w.type&&i&&t.addMark(T,S,a.create({...w.attrs,...e}))}))}),h},YZ=(n,e={})=>({state:t,dispatch:r})=>{const i=rn(n,t.schema);return SQ(i,e)(t,r)},QZ=(n,e={})=>({state:t,dispatch:r})=>{const i=rn(n,t.schema);return wQ(i,e)(t,r)},XZ=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(r=>r.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(r=>r!==e):delete this.callbacks[n]),this}once(n,e){const t=(...r)=>{this.off(n,t),e.apply(this,r)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},u0=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},JZ=(n,e)=>{if(lw(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function _m(n){var e;const{editor:t,from:r,to:i,text:s,rules:a,plugin:u}=n,{view:h}=t;if(h.composing)return!1;const f=h.state.doc.resolve(r);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let p=!1;const m=wZ(f)+s;return a.forEach(v=>{if(p)return;const E=JZ(m,v.find);if(!E)return;const T=h.state.tr,S=i0({state:h.state,transaction:T}),w={from:r-(E[0].length-s.length),to:i},{commands:C,chain:N,can:V}=new s0({editor:t,state:S});v.handler({state:S,range:w,match:E,commands:C,chain:N,can:V})===null||!T.steps.length||(v.undoable&&T.setMeta(u,{transform:T,from:r,to:i,text:s}),h.dispatch(T),p=!0)}),p}function ZZ(n){const{editor:e,rules:t}=n,r=new Rt({state:{init(){return null},apply(i,s,a){const u=i.getMeta(r);if(u)return u;const h=i.getMeta("applyInputRules");return h&&setTimeout(()=>{let{text:p}=h;typeof p=="string"?p=p:p=hw(le.from(p),a.schema);const{from:m}=h,v=m+p.length;_m({editor:e,from:m,to:v,text:p,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,u){return _m({editor:e,from:s,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&_m({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?_m({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function eee(n){return Object.prototype.toString.call(n).slice(8,-1)}function Sm(n){return eee(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ZV(n,e){const t={...n};return Sm(n)&&Sm(e)&&Object.keys(e).forEach(r=>{Sm(e[r])&&Sm(n[r])?t[r]=ZV(n[r],e[r]):t[r]=e[r]}),t}var dw=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...ot(Ee(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ot(Ee(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>ZV(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},Ws=class e3 extends dw{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new e3(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(f=>f?.type.name===t.name))return!1;const h=a.find(f=>f?.type.name===t.name);return h&&r.removeStoredMark(h),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function tee(n){return typeof n=="number"}var nee=class{constructor(n){this.find=n.find,this.handler=n.handler}},ree=(n,e,t)=>{if(lw(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function iee(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:a,dropEvent:u}=n,{commands:h,chain:f,can:p}=new s0({editor:e,state:t}),m=[];return t.doc.nodesBetween(r,i,(E,T)=>{var S,w,C,N,V;if((w=(S=E.type)==null?void 0:S.spec)!=null&&w.code||!(E.isText||E.isTextblock||E.isInline))return;const $=(V=(N=(C=E.content)==null?void 0:C.size)!=null?N:E.nodeSize)!=null?V:0,F=Math.max(r,T),Z=Math.min(i,T+$);if(F>=Z)return;const I=E.isText?E.text||"":E.textBetween(F-T,Z-T,void 0,"");ree(I,s.find,a).forEach(D=>{if(D.index===void 0)return;const B=F+D.index+1,z=B+D[0].length,H={from:t.tr.mapping.map(B),to:t.tr.mapping.map(z)},P=s.handler({state:t,range:H,match:D,commands:h,chain:f,can:p,pasteEvent:a,dropEvent:u});m.push(P)})}),m.every(E=>E!==null)}var wm=null,see=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function oee(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const h=({state:p,from:m,to:v,rule:E,pasteEvt:T})=>{const S=p.tr,w=i0({state:p,transaction:S});if(!(!iee({editor:e,state:w,from:Math.max(m-1,0),to:v.b-1,rule:E,pasteEvent:T,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return t.map(p=>new Rt({view(m){const v=T=>{var S;r=(S=m.dom.parentElement)!=null&&S.contains(T.target)?m.dom.parentElement:null,r&&(wm=e)},E=()=>{wm&&(wm=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",E),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",E)}}},props:{handleDOMEvents:{drop:(m,v)=>{if(s=r===m.dom.parentElement,u=v,!s){const E=wm;E?.isEditable&&setTimeout(()=>{const T=E.state.selection;T&&E.commands.deleteRange({from:T.from,to:T.to})},10)}return!1},paste:(m,v)=>{var E;const T=(E=v.clipboardData)==null?void 0:E.getData("text/html");return a=v,i=!!T?.includes("data-pm-slice"),!1}}},appendTransaction:(m,v,E)=>{const T=m[0],S=T.getMeta("uiEvent")==="paste"&&!i,w=T.getMeta("uiEvent")==="drop"&&!s,C=T.getMeta("applyPasteRules"),N=!!C;if(!S&&!w&&!N)return;if(N){let{text:F}=C;typeof F=="string"?F=F:F=hw(le.from(F),E.schema);const{from:Z}=C,I=Z+F.length,k=see(F);return h({rule:p,state:E,from:Z,to:{b:I},pasteEvt:k})}const V=v.doc.content.findDiffStart(E.doc.content),$=v.doc.content.findDiffEnd(E.doc.content);if(!(!tee(V)||!$||V===$.b))return h({rule:p,state:E,from:V,to:$,pasteEvt:a})}}))}var c0=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=$V(n),this.schema=yZ(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Gh(e.name,this.schema)},r=Ee(e,"addCommands",t);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this;return wf([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:n,type:Gh(r.name,this.schema)},s=[],a=Ee(r,"addKeyboardShortcuts",i);let u={};if(r.type==="mark"&&Ee(r,"exitable",i)&&(u.ArrowRight=()=>Ws.handleExit({editor:n,mark:r})),a){const v=Object.fromEntries(Object.entries(a()).map(([E,T])=>[E,()=>T({editor:n})]));u={...u,...v}}const h=EJ(u);s.push(h);const f=Ee(r,"addInputRules",i);if(bM(r,n.options.enableInputRules)&&f){const v=f();if(v&&v.length){const E=ZZ({editor:n,rules:v}),T=Array.isArray(E)?E:[E];s.push(...T)}}const p=Ee(r,"addPasteRules",i);if(bM(r,n.options.enablePasteRules)&&p){const v=p();if(v&&v.length){const E=oee({editor:n,rules:v});s.push(...E)}}const m=Ee(r,"addProseMirrorPlugins",i);if(m){const v=m();s.push(...v)}return s})}get attributes(){return qV(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=gc(this.extensions);return Object.fromEntries(e.filter(t=>!!Ee(t,"addNodeView")).map(t=>{const r=this.attributes.filter(h=>h.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:rn(t.name,this.schema)},s=Ee(t,"addNodeView",i);if(!s)return[];const a=s();if(!a)return[];const u=(h,f,p,m,v)=>{const E=nd(h,r);return a({node:h,view:f,getPos:p,decorations:m,innerDecorations:v,editor:n,extension:t,HTMLAttributes:E})};return[t.name,u]}))}dispatchTransaction(n){const{editor:e}=this;return wf([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Gh(i.name,this.schema)},a=Ee(i,"dispatchTransaction",s);return a?u=>{a.call(s,{transaction:u,next:r})}:r},n)}transformPastedHTML(n){const{editor:e}=this;return wf([...this.extensions]).reduce((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Gh(i.name,this.schema)},a=Ee(i,"transformPastedHTML",s);return a?(u,h)=>{const f=r(u,h);return a.call(s,f)}:r},n||(r=>r))}get markViews(){const{editor:n}=this,{markExtensions:e}=gc(this.extensions);return Object.fromEntries(e.filter(t=>!!Ee(t,"addMarkView")).map(t=>{const r=this.attributes.filter(u=>u.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Ks(t.name,this.schema)},s=Ee(t,"addMarkView",i);if(!s)return[];const a=(u,h,f)=>{const p=nd(u,r);return s()({mark:u,view:h,inline:f,editor:n,extension:t,HTMLAttributes:p,updateAttributes:m=>{Eee(u,n,m)}})};return[t.name,a]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Gh(e.name,this.schema)};e.type==="mark"&&((t=ot(Ee(e,"keepOnSplit",r)))==null||t)&&this.splittableMarks.push(e.name);const i=Ee(e,"onBeforeCreate",r),s=Ee(e,"onCreate",r),a=Ee(e,"onUpdate",r),u=Ee(e,"onSelectionUpdate",r),h=Ee(e,"onTransaction",r),f=Ee(e,"onFocus",r),p=Ee(e,"onBlur",r),m=Ee(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),u&&this.editor.on("selectionUpdate",u),h&&this.editor.on("transaction",h),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};c0.resolve=$V;c0.sort=wf;c0.flatten=cw;var aee={};aw(aee,{ClipboardTextSerializer:()=>n3,Commands:()=>r3,Delete:()=>i3,Drop:()=>s3,Editable:()=>o3,FocusEvents:()=>l3,Keymap:()=>u3,Paste:()=>c3,Tabindex:()=>h3,TextDirection:()=>f3,focusEventsPluginKey:()=>a3});var mt=class t3 extends dw{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new t3(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},n3=mt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Rt({key:new cn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,a=Math.min(...s.map(p=>p.$from.pos)),u=Math.max(...s.map(p=>p.$to.pos)),h=KV(t);return GV(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:h})}}})]}}),r3=mt.create({name:"commands",addCommands(){return{...PV}}}),i3=mt.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,i;const s=()=>{var a,u,h,f;if((f=(h=(u=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:u.filterTransaction)==null?void 0:h.call(u,n))!=null?f:n.getMeta("y-sync$"))return;const p=FV(n.before,[n,...e]);YV(p).forEach(E=>{p.mapping.mapResult(E.oldRange.from).deletedAfter&&p.mapping.mapResult(E.oldRange.to).deletedBefore&&p.before.nodesBetween(E.oldRange.from,E.oldRange.to,(T,S)=>{const w=S+T.nodeSize-2,C=E.oldRange.from<=S&&w<=E.oldRange.to;this.editor.emit("delete",{type:"node",node:T,from:S,to:w,newFrom:p.mapping.map(S),newTo:p.mapping.map(w),deletedRange:E.oldRange,newRange:E.newRange,partial:!C,editor:this.editor,transaction:n,combinedTransform:p})})});const v=p.mapping;p.steps.forEach((E,T)=>{var S,w;if(E instanceof di){const C=v.slice(T).map(E.from,-1),N=v.slice(T).map(E.to),V=v.invert().map(C,-1),$=v.invert().map(N),F=(S=p.doc.nodeAt(C-1))==null?void 0:S.marks.some(I=>I.eq(E.mark)),Z=(w=p.doc.nodeAt(N))==null?void 0:w.marks.some(I=>I.eq(E.mark));this.editor.emit("delete",{type:"mark",mark:E.mark,from:E.from,to:E.to,deletedRange:{from:V,to:$},newRange:{from:C,to:N},partial:!!(Z||F),editor:this.editor,transaction:n,combinedTransform:p})}})};(i=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),s3=mt.create({name:"drop",addProseMirrorPlugins(){return[new Rt({key:new cn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),o3=mt.create({name:"editable",addProseMirrorPlugins(){return[new Rt({key:new cn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),a3=new cn("focusEvents"),l3=mt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Rt({key:a3,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),u3=mt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:h,doc:f}=u,{empty:p,$anchor:m}=h,{pos:v,parent:E}=m,T=m.parent.isTextblock&&v>0?u.doc.resolve(v-1):m,S=T.parent.type.spec.isolating,w=m.pos-m.parentOffset,C=S&&T.parent.childCount===1?w===m.pos:ze.atStart(f).from===v;return!p||!E.type.isTextblock||E.textContent.length||!C||C&&m.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Fg()||zV()?s:i},addProseMirrorPlugins(){return[new Rt({key:new cn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(S=>S.getMeta("composition")))return;const r=n.some(S=>S.docChanged)&&!e.doc.eq(t.doc),i=n.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:u}=e.selection,h=ze.atStart(e.doc).from,f=ze.atEnd(e.doc).to;if(s||!(a===h&&u===f)||!l0(t.doc))return;const v=t.tr,E=i0({state:t,transaction:v}),{commands:T}=new s0({editor:this.editor,state:E});if(T.clearNodes(),!!v.steps.length)return v}})]}}),c3=mt.create({name:"paste",addProseMirrorPlugins(){return[new Rt({key:new cn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),h3=mt.create({name:"tabindex",addProseMirrorPlugins(){return[new Rt({key:new cn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),f3=mt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=gc(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Rt({key:new cn("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),lee=class of{constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new of(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new of(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new of(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,a=t.isInline,u=this.pos+r+(s?0:1);if(u<0||u>this.resolvedPos.doc.nodeSize-2)return;const h=this.resolvedPos.doc.resolve(u);if(!i&&!a&&h.depth<=this.depth)return;const f=new of(h,this.editor,i,i||a?t:null);i&&(f.actualDepth=this.depth+1),e.push(f)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,a=Object.keys(t);for(let u=0;u<a.length;u+=1){const h=a[u];if(s[h]!==t[h])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&s.every(h=>t[h]===a.node.attrs[h])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},uee=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function cee(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}var hee=class extends XZ{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:RZ,createMappablePosition:kZ},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=UV(e,this.options.autofocus);this.editorState=Qu.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=cee(uee,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=HV(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;t=t.filter(a=>!a.key.startsWith(s))}),e.length===t.length)return;const r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}createExtensionManager(){var n,e;const r=[...this.options.enableCoreExtensions?[o3,n3.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),r3,l3,u3,h3,s3,c3,i3,f3.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new c0(r,this)}createCommandManager(){this.commandManager=new s0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=BT(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=BT(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=t?this.extensionManager.dispatchTransaction(r):r,s=e.transformPastedHTML,a=this.extensionManager.transformPastedHTML(s);this.editorView=new NV(n,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:i,transformPastedHTML:a,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const u=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(u),this.prependClass(),this.injectCSS();const h=this.view.dom;h.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(f=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(f)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),r=!this.state.selection.eq(e.selection),i=t.includes(n),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const a=t.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),u=a?.getMeta("focus"),h=a?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:a}),h&&this.emit("blur",{editor:this,event:h.event,transaction:a}),!(n.getMeta("preventUpdate")||!t.some(f=>f.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return WV(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,r=typeof n=="string"?e:n;return AZ(this.state,t,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return hw(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return bZ(this.state.doc,{blockSeparator:e,textSerializers:{...KV(this.schema),...t}})}get isEmpty(){return l0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new lee(e,this)}get $doc(){return this.$pos(0)}};function Ul(n){return new u0({find:n.find,handler:({state:e,range:t,match:r})=>{const i=ot(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],u=r[0];if(a){const h=u.search(/\S/),f=t.from+u.indexOf(a),p=f+a.length;if(fw(t.from,t.to,e.doc).filter(E=>E.mark.type.excluded.find(S=>S===n.type&&S!==E.mark.type)).filter(E=>E.to>f).length)return null;p<t.to&&s.delete(p,t.to),f>t.from&&s.delete(t.from+h,f);const v=t.from+h+a.length;s.addMark(t.from+h,v,n.type.create(i||{})),s.removeStoredMark(n.type)}},undoable:n.undoable})}function fee(n){return new u0({find:n.find,handler:({state:e,range:t,match:r})=>{const i=ot(n.getAttributes,void 0,r)||{},{tr:s}=e,a=t.from;let u=t.to;const h=n.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=a+f;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];s.insertText(m,a+r[0].length-1),s.replaceWith(p,u,h)}else if(r[0]){const f=n.type.isInline?a:a-1;s.insert(f,n.type.create(i)).delete(s.mapping.map(a),s.mapping.map(u))}s.scrollIntoView()},undoable:n.undoable})}function jT(n){return new u0({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=ot(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)},undoable:n.undoable})}function yc(n){return new u0({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=ot(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),h=a.doc.resolve(t.from).blockRange(),f=h&&$S(h,n.type,s);if(!f)return null;if(a.wrap(h,f),n.keepMarks&&n.editor){const{selection:m,storedMarks:v}=e,{splittableMarks:E}=n.editor.extensionManager,T=v||m.$to.parentOffset&&m.$from.marks();if(T){const S=T.filter(w=>E.includes(w.type.name));a.ensureMarks(S)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,s).run()}const p=a.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&Sa(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&a.join(t.from-1)},undoable:n.undoable})}function dee(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof Se){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var pee={};aw(pee,{createAtomBlockMarkdownSpec:()=>mee,createBlockMarkdownSpec:()=>gee,createInlineMarkdownSpec:()=>bee,parseAttributes:()=>pw,parseIndentedBlocks:()=>FT,renderNestedMarkdownContent:()=>gw,serializeAttributes:()=>mw});function pw(n){if(!n?.trim())return{};const e={},t=[],r=n.replace(/["']([^"']*)["']/g,f=>(t.push(f),`__QUOTED_${t.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(p=>p.trim().slice(1));e.class=f.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(a)).forEach(([,f,p])=>{var m;const v=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),E=t[v];E&&(e[f]=E.slice(1,-1))});const h=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return h&&h.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function mw(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,r])=>{t==="class"||t==="id"||(r===!0?e.push(t):r!==!1&&r!=null&&e.push(`${t}="${String(r)}"`))}),e.join(" ")}function mee(n){const{nodeName:e,name:t,parseAttributes:r=pw,serializeAttributes:i=mw,defaultAttributes:s={},requiredAttributes:a=[],allowedAttributes:u}=n,h=t||e,f=p=>{if(!u)return p;const m={};return u.forEach(v=>{v in p&&(m[v]=p[v])}),m};return{parseMarkdown:(p,m)=>{const v={...s,...p.attributes};return m.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const v=new RegExp(`^:::${h}(?:\\s|$)`,"m"),E=(m=p.match(v))==null?void 0:m.index;return E!==void 0?E:-1},tokenize(p,m,v){const E=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),T=p.match(E);if(!T)return;const S=T[1]||"",w=r(S);if(!a.find(N=>!(N in w)))return{type:e,raw:T[0],attributes:w}}},renderMarkdown:p=>{const m=f(p.attrs||{}),v=i(m),E=v?` {${v}}`:"";return`:::${h}${E} :::`}}}function gee(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=pw,serializeAttributes:s=mw,defaultAttributes:a={},content:u="block",allowedAttributes:h}=n,f=t||e,p=m=>{if(!h)return m;const v={};return h.forEach(E=>{E in m&&(v[E]=m[E])}),v};return{parseMarkdown:(m,v)=>{let E;if(r){const S=r(m);E=typeof S=="string"?[{type:"text",text:S}]:S}else u==="block"?E=v.parseChildren(m.tokens||[]):E=v.parseInline(m.tokens||[]);const T={...a,...m.attributes};return v.createNode(e,T,E)},markdownTokenizer:{name:e,level:"block",start(m){var v;const E=new RegExp(`^:::${f}`,"m"),T=(v=m.match(E))==null?void 0:v.index;return T!==void 0?T:-1},tokenize(m,v,E){var T;const S=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),w=m.match(S);if(!w)return;const[C,N=""]=w,V=i(N);let $=1;const F=C.length;let Z="";const I=/^:::([\w-]*)(\s.*)?/gm,k=m.slice(F);for(I.lastIndex=0;;){const D=I.exec(k);if(D===null)break;const B=D.index,z=D[1];if(!((T=D[2])!=null&&T.endsWith(":::"))){if(z)$+=1;else if($-=1,$===0){const H=k.slice(0,B);Z=H.trim();const P=m.slice(0,F+B+D[0].length);let Oe=[];if(Z)if(u==="block")for(Oe=E.blockTokens(H),Oe.forEach(Ae=>{Ae.text&&(!Ae.tokens||Ae.tokens.length===0)&&(Ae.tokens=E.inlineTokens(Ae.text))});Oe.length>0;){const Ae=Oe[Oe.length-1];if(Ae.type==="paragraph"&&(!Ae.text||Ae.text.trim()===""))Oe.pop();else break}else Oe=E.inlineTokens(Z);return{type:e,raw:P,attributes:V,content:Z,tokens:Oe}}}}}},renderMarkdown:(m,v)=>{const E=p(m.attrs||{}),T=s(E),S=T?` {${T}}`:"",w=v.renderChildren(m.content||[],`

`);return`:::${f}${S}

${w}

:::`}}}function yee(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=t.exec(n);for(;r!==null;){const[,i,s,a]=r;e[i]=s||a,r=t.exec(n)}return e}function vee(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function bee(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=yee,serializeAttributes:s=vee,defaultAttributes:a={},selfClosing:u=!1,allowedAttributes:h}=n,f=t||e,p=v=>{if(!h)return v;const E={};return h.forEach(T=>{const S=typeof T=="string"?T:T.name,w=typeof T=="string"?void 0:T.skipIfDefault;if(S in v){const C=v[S];if(w!==void 0&&C===w)return;E[S]=C}}),E},m=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,E)=>{const T={...a,...v.attributes};if(u)return E.createNode(e,T);const S=r?r(v):v.content||"";return S?E.createNode(e,T,[E.createTextNode(S)]):E.createNode(e,T,[])},markdownTokenizer:{name:e,level:"inline",start(v){const E=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),T=v.match(E),S=T?.index;return S!==void 0?S:-1},tokenize(v,E,T){const S=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),w=v.match(S);if(!w)return;let C="",N="";if(u){const[,$]=w;N=$}else{const[,$,F]=w;N=$,C=F||""}const V=i(N.trim());return{type:e,raw:w[0],content:C.trim(),attributes:V}}},renderMarkdown:v=>{let E="";r?E=r(v):v.content&&v.content.length>0&&(E=v.content.filter(C=>C.type==="text").map(C=>C.text).join(""));const T=p(v.attrs||{}),S=s(T),w=S?` ${S}`:"";return u?`[${f}${w}]`:`[${f}${w}]${E}[/${f}]`}}}function FT(n,e,t){var r,i,s,a;const u=n.split(`
`),h=[];let f="",p=0;const m=e.baseIndentSize||2;for(;p<u.length;){const v=u[p],E=v.match(e.itemPattern);if(!E){if(h.length>0)break;if(v.trim()===""){p+=1,f=`${f}${v}
`;continue}else return}const T=e.extractItemData(E),{indentLevel:S,mainContent:w}=T;f=`${f}${v}
`;const C=[w];for(p+=1;p<u.length;){const F=u[p];if(F.trim()===""){const I=u.slice(p+1).findIndex(B=>B.trim()!=="");if(I===-1)break;if((((i=(r=u[p+1+I].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>S){C.push(F),f=`${f}${F}
`,p+=1;continue}else break}if((((a=(s=F.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:a.length)||0)>S)C.push(F),f=`${f}${F}
`,p+=1;else break}let N;const V=C.slice(1);if(V.length>0){const F=V.map(Z=>Z.slice(S+m)).join(`
`);F.trim()&&(e.customNestedParser?N=e.customNestedParser(F):N=t.blockTokens(F))}const $=e.createToken(T,N);h.push($)}if(h.length!==0)return{items:h,raw:f}}function gw(n,e,t,r){if(!n||!Array.isArray(n.content))return"";const i=typeof t=="function"?t(r):t,[s,...a]=n.content,u=e.renderChildren([s]),h=[`${i}${u}`];return a&&a.length>0&&a.forEach(f=>{const p=e.renderChildren([f]);if(p){const m=p.split(`
`).map(v=>v?e.indent(v):"").join(`
`);h.push(m)}}),h.join(`
`)}function Eee(n,e,t={}){const{state:r}=e,{doc:i,tr:s}=r,a=n;i.descendants((u,h)=>{const f=s.mapping.map(h),p=s.mapping.map(h)+u.nodeSize;let m=null;if(u.marks.forEach(E=>{if(E!==a)return!1;m=E}),!m)return;let v=!1;if(Object.keys(t).forEach(E=>{t[E]!==m.attrs[E]&&(v=!0)}),v){const E=n.type.create({...n.attrs,...t});s.removeMark(f,p,n.type),s.addMark(f,p,E)}}),s.docChanged&&e.view.dispatch(s)}var xr=class d3 extends dw{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new d3(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function da(n){return new nee({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=ot(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=e,u=r[r.length-1],h=r[0];let f=t.to;if(u){const p=h.search(/\S/),m=t.from+h.indexOf(u),v=m+u.length;if(fw(t.from,t.to,e.doc).filter(T=>T.mark.type.excluded.find(w=>w===n.type&&w!==T.mark.type)).filter(T=>T.to>m).length)return null;v<t.to&&a.delete(v,t.to),m>t.from&&a.delete(t.from+p,m),f=t.from+p+u.length,a.addMark(t.from+p,f,n.type.create(s||{})),a.removeStoredMark(n.type)}}})}const{getOwnPropertyNames:Tee,getOwnPropertySymbols:_ee}=Object,{hasOwnProperty:See}=Object.prototype;function pE(n,e){return function(r,i,s){return n(r,i,s)&&e(r,i,s)}}function Am(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);const{cache:s}=i,a=s.get(t),u=s.get(r);if(a&&u)return a===r&&u===t;s.set(t,r),s.set(r,t);const h=n(t,r,i);return s.delete(t),s.delete(r),h}}function wee(n){return n?.[Symbol.toStringTag]}function _M(n){return Tee(n).concat(_ee(n))}const Aee=Object.hasOwn||((n,e)=>See.call(n,e));function Hl(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const xee="__v",Cee="__o",Ree="_owner",{getOwnPropertyDescriptor:SM,keys:wM}=Object;function kee(n,e){return n.byteLength===e.byteLength&&Hg(new Uint8Array(n),new Uint8Array(e))}function Iee(n,e,t){let r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function Mee(n,e){return n.byteLength===e.byteLength&&Hg(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Dee(n,e){return Hl(n.getTime(),e.getTime())}function Nee(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function Oee(n,e){return n===e}function AM(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=n.entries();let a,u,h=0;for(;(a=s.next())&&!a.done;){const f=e.entries();let p=!1,m=0;for(;(u=f.next())&&!u.done;){if(i[m]){m++;continue}const v=a.value,E=u.value;if(t.equals(v[0],E[0],h,m,n,e,t)&&t.equals(v[1],E[1],v[0],E[0],n,e,t)){p=i[m]=!0;break}m++}if(!p)return!1;h++}return!0}const Pee=Hl;function Lee(n,e,t){const r=wM(n);let i=r.length;if(wM(e).length!==i)return!1;for(;i-- >0;)if(!p3(n,e,t,r[i]))return!1;return!0}function Kh(n,e,t){const r=_M(n);let i=r.length;if(_M(e).length!==i)return!1;let s,a,u;for(;i-- >0;)if(s=r[i],!p3(n,e,t,s)||(a=SM(n,s),u=SM(e,s),(a||u)&&(!a||!u||a.configurable!==u.configurable||a.enumerable!==u.enumerable||a.writable!==u.writable)))return!1;return!0}function Vee(n,e){return Hl(n.valueOf(),e.valueOf())}function Uee(n,e){return n.source===e.source&&n.flags===e.flags}function xM(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=n.values();let a,u;for(;(a=s.next())&&!a.done;){const h=e.values();let f=!1,p=0;for(;(u=h.next())&&!u.done;){if(!i[p]&&t.equals(a.value,u.value,a.value,u.value,n,e,t)){f=i[p]=!0;break}p++}if(!f)return!1}return!0}function Hg(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function Bee(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function p3(n,e,t,r){return(r===Ree||r===Cee||r===xee)&&(n.$$typeof||e.$$typeof)?!0:Aee(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}const zee="[object ArrayBuffer]",jee="[object Arguments]",Fee="[object Boolean]",Hee="[object DataView]",qee="[object Date]",$ee="[object Error]",Gee="[object Map]",Kee="[object Number]",Wee="[object Object]",Yee="[object RegExp]",Qee="[object Set]",Xee="[object String]",Jee={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Zee="[object URL]",ete=Object.prototype.toString;function tte({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:a,areNumbersEqual:u,areObjectsEqual:h,arePrimitiveWrappersEqual:f,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:v,areUrlsEqual:E,unknownTagComparators:T}){return function(w,C,N){if(w===C)return!0;if(w==null||C==null)return!1;const V=typeof w;if(V!==typeof C)return!1;if(V!=="object")return V==="number"?u(w,C,N):V==="function"?s(w,C,N):!1;const $=w.constructor;if($!==C.constructor)return!1;if($===Object)return h(w,C,N);if(Array.isArray(w))return e(w,C,N);if($===Date)return r(w,C,N);if($===RegExp)return p(w,C,N);if($===Map)return a(w,C,N);if($===Set)return m(w,C,N);const F=ete.call(w);if(F===qee)return r(w,C,N);if(F===Yee)return p(w,C,N);if(F===Gee)return a(w,C,N);if(F===Qee)return m(w,C,N);if(F===Wee)return typeof w.then!="function"&&typeof C.then!="function"&&h(w,C,N);if(F===Zee)return E(w,C,N);if(F===$ee)return i(w,C,N);if(F===jee)return h(w,C,N);if(Jee[F])return v(w,C,N);if(F===zee)return n(w,C,N);if(F===Hee)return t(w,C,N);if(F===Fee||F===Kee||F===Xee)return f(w,C,N);if(T){let Z=T[F];if(!Z){const I=wee(w);I&&(Z=T[I])}if(Z)return Z(w,C,N)}return!1}}function nte({circular:n,createCustomConfig:e,strict:t}){let r={areArrayBuffersEqual:kee,areArraysEqual:t?Kh:Iee,areDataViewsEqual:Mee,areDatesEqual:Dee,areErrorsEqual:Nee,areFunctionsEqual:Oee,areMapsEqual:t?pE(AM,Kh):AM,areNumbersEqual:Pee,areObjectsEqual:t?Kh:Lee,arePrimitiveWrappersEqual:Vee,areRegExpsEqual:Uee,areSetsEqual:t?pE(xM,Kh):xM,areTypedArraysEqual:t?pE(Hg,Kh):Hg,areUrlsEqual:Bee,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),n){const i=Am(r.areArraysEqual),s=Am(r.areMapsEqual),a=Am(r.areObjectsEqual),u=Am(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:u})}return r}function rte(n){return function(e,t,r,i,s,a,u){return n(e,t,u)}}function ite({circular:n,comparator:e,createState:t,equals:r,strict:i}){if(t)return function(u,h){const{cache:f=n?new WeakMap:void 0,meta:p}=t();return e(u,h,{cache:f,equals:r,meta:p,strict:i})};if(n)return function(u,h){return e(u,h,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(u,h){return e(u,h,s)}}const ste=Aa();Aa({strict:!0});Aa({circular:!0});Aa({circular:!0,strict:!0});Aa({createInternalComparator:()=>Hl});Aa({strict:!0,createInternalComparator:()=>Hl});Aa({circular:!0,createInternalComparator:()=>Hl});Aa({circular:!0,createInternalComparator:()=>Hl,strict:!0});function Aa(n={}){const{circular:e=!1,createInternalComparator:t,createState:r,strict:i=!1}=n,s=nte(n),a=tte(s),u=t?t(a):rte(a);return ite({circular:e,comparator:a,createState:r,equals:u,strict:i})}var mE={exports:{}},gE={};var CM;function ote(){if(CM)return gE;CM=1;var n=sd(),e=sL();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,h=n.useDebugValue;return gE.useSyncExternalStoreWithSelector=function(f,p,m,v,E){var T=s(null);if(T.current===null){var S={hasValue:!1,value:null};T.current=S}else S=T.current;T=u(function(){function C(Z){if(!N){if(N=!0,V=Z,Z=v(Z),E!==void 0&&S.hasValue){var I=S.value;if(E(I,Z))return $=I}return $=Z}if(I=$,r(V,Z))return I;var k=v(Z);return E!==void 0&&E(I,k)?(V=Z,I):(V=Z,$=k)}var N=!1,V,$,F=m===void 0?null:m;return[function(){return C(p())},F===null?void 0:function(){return C(F())}]},[p,m,v,E]);var w=i(f,T[0],T[1]);return a(function(){S.hasValue=!0,S.value=w},[w]),h(w),w},gE}var RM;function ate(){return RM||(RM=1,mE.exports=ote()),mE.exports}var lte=ate(),ute=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},cte=({contentComponent:n})=>{const e=oL.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return q.jsx(q.Fragment,{children:Object.values(e)})};function hte(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:yz.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}var fte=class extends wl.Component{constructor(n){var e;super(n),this.editorContentRef=wl.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=hte(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return q.jsxs(q.Fragment,{children:[q.jsx("div",{ref:ute(e,this.editorContentRef),...t}),n?.contentComponent&&q.jsx(cte,{contentComponent:n.contentComponent})]})}},dte=O.forwardRef((n,e)=>{const t=wl.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return wl.createElement(fte,{key:t,innerRef:e,...n})}),m3=wl.memo(dte),pte=typeof window<"u"?O.useLayoutEffect:O.useEffect,mte=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function gte(n){var e;const[t]=O.useState(()=>new mte(n.editor)),r=lte.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:ste);return pte(()=>t.watch(n.editor),[n.editor,t]),O.useDebugValue(r),r}var yte=!1,HT=typeof window>"u",vte=HT||!!(typeof window<"u"&&window.next),bte=class g3{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?HT||vte?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new hee(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var a;return i===((a=t.extensions)==null?void 0:a[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?g3.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Ete(n={},e=[]){const t=O.useRef(n);t.current=n;const[r]=O.useState(()=>new bte(t)),i=oL.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return O.useDebugValue(i),O.useEffect(r.onRender(e)),gte({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&s===0?0:s+1}),i}var y3=O.createContext({editor:null});y3.Consumer;var Tte=O.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),_te=()=>O.useContext(Tte);wl.forwardRef((n,e)=>{const{onDragStart:t}=_te(),r=n.as||"div";return q.jsx(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});wl.createContext({markViewContentRef:()=>{}});var yw=O.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});yw.displayName="TiptapContext";var Ste=()=>O.useContext(yw);function v3({editor:n,instance:e,children:t}){const r=n??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=O.useMemo(()=>({editor:r}),[r]),s=O.useMemo(()=>({editor:r}),[r]);return q.jsx(y3.Provider,{value:s,children:q.jsx(yw.Provider,{value:i,children:t})})}v3.displayName="Tiptap";function b3({...n}){const{editor:e}=Ste();return q.jsx(m3,{editor:e,...n})}b3.displayName="Tiptap.Content";Object.assign(v3,{Content:b3});var qg=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},wte=/^\s*>\s$/,Ate=xr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return qg("blockquote",{...Lt(this.options.HTMLAttributes,n),children:qg("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",r=[];return n.content.forEach(i=>{const u=e.renderChildren([i]).split(`
`).map(h=>h.trim()===""?t:`${t} ${h}`);r.push(u.join(`
`))}),r.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[yc({find:wte,type:this.type})]}}),xte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Cte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Rte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,kte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Ite=Ws.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return qg("strong",{...Lt(this.options.HTMLAttributes,n),children:qg("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ul({find:xte,type:this.type}),Ul({find:Rte,type:this.type})]},addPasteRules(){return[da({find:Cte,type:this.type}),da({find:kte,type:this.type})]}}),Mte=/(^|[^`])`([^`]+)`(?!`)$/,Dte=/(^|[^`])`([^`]+)`(?!`)/g,Nte=Ws.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Lt(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ul({find:Mte,type:this.type})]},addPasteRules(){return[da({find:Dte,type:this.type})]}}),yE=4,Ote=/^```([a-z]+)?[\s\n]$/,Pte=/^~~~([a-z]+)?[\s\n]$/,Lte=xr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:yE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const s=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Lt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let r="";const i=((t=n.attrs)==null?void 0:t.language)||"";return n.content?r=[`\`\`\`${i}`,e.renderChildren(n.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:yE,{state:r}=n,{selection:i}=r,{$from:s,empty:a}=i;if(s.parent.type!==this.type)return!1;const u=" ".repeat(t);return a?n.commands.insertContent(u):n.commands.command(({tr:h})=>{const{from:f,to:p}=i,E=r.doc.textBetween(f,p,`
`,`
`).split(`
`).map(T=>u+T).join(`
`);return h.replaceWith(f,p,r.schema.text(E)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:yE,{state:r}=n,{selection:i}=r,{$from:s,empty:a}=i;return s.parent.type!==this.type?!1:a?n.commands.command(({tr:u})=>{var h;const{pos:f}=s,p=s.start(),m=s.end(),E=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let T=0,S=0;const w=f-p;for(let Z=0;Z<E.length;Z+=1){if(S+E[Z].length>=w){T=Z;break}S+=E[Z].length+1}const N=((h=E[T].match(/^ */))==null?void 0:h[0])||"",V=Math.min(N.length,t);if(V===0)return!0;let $=p;for(let Z=0;Z<T;Z+=1)$+=E[Z].length+1;return u.delete($,$+V),f-$<=V&&u.setSelection(Ie.create(u.doc,$)),!0}):n.commands.command(({tr:u})=>{const{from:h,to:f}=i,v=r.doc.textBetween(h,f,`
`,`
`).split(`
`).map(E=>{var T;const S=((T=E.match(/^ */))==null?void 0:T[0])||"",w=Math.min(S.length,t);return E.slice(w)}).join(`
`);return u.replaceWith(h,f,r.schema.text(v)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:f})=>(f.setSelection(ze.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[jT({find:Ote,type:this.type,getAttributes:n=>({language:n[1]})}),jT({find:Pte,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Rt({key:new cn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!t||!s)return!1;const{tr:a,schema:u}=n.state,h=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},h)),a.selection.$from.parent.type!==this.type&&a.setSelection(Ie.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),Vte=xr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),Ute=xr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Lt(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,h=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&h&&a){const m=h.filter(v=>u.includes(v.type.name));f.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Bte=xr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Lt(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const r=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,i="#".repeat(r);return n.content?`${i} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>jT({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),zte=xr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Lt(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!dee(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,i=n();return QV(t)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:a,dispatch:u})=>{if(u){const{$to:h}=a.selection,f=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?a.setSelection(Ie.create(a.doc,h.pos+1)):h.nodeAfter.isBlock?a.setSelection(Se.create(a.doc,h.pos)):a.setSelection(Ie.create(a.doc,h.pos));else{const p=s.schema.nodes[this.options.nextNodeType]||h.parent.type.contentMatch.defaultType,m=p?.create();m&&(a.insert(f,m),a.setSelection(Ie.create(a.doc,f+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[fee({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),jte=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Fte=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Hte=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,qte=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$te=Ws.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Lt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ul({find:jte,type:this.type}),Ul({find:Hte,type:this.type})]},addPasteRules(){return[da({find:Fte,type:this.type}),da({find:qte,type:this.type})]}});const Gte="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Kte="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",qT="numeric",$T="ascii",GT="alpha",Af="asciinumeric",af="alphanumeric",KT="domain",E3="emoji",Wte="scheme",Yte="slashscheme",vE="whitespace";function Qte(n,e){return n in e||(e[n]=[]),e[n]}function gl(n,e,t){e[qT]&&(e[Af]=!0,e[af]=!0),e[$T]&&(e[Af]=!0,e[GT]=!0),e[Af]&&(e[af]=!0),e[GT]&&(e[af]=!0),e[af]&&(e[KT]=!0),e[E3]&&(e[KT]=!0);for(const r in e){const i=Qte(r,t);i.indexOf(n)<0&&i.push(n)}}function Xte(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function or(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}or.groups={};or.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||or.groups;let i;return e&&e.j?i=e:(i=new or(e),t&&r&&gl(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(n[a]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||or.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let a,u=i.go(n);if(u?(a=new or,Object.assign(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new or,s){if(r)if(a.t&&typeof a.t=="string"){const h=Object.assign(Xte(a.t,r),t);gl(s,h,r)}else t&&gl(s,t,r);a.t=s}return i.j[n]=a,a}};const Be=(n,e,t,r,i)=>n.ta(e,t,r,i),Mt=(n,e,t,r,i)=>n.tr(e,t,r,i),kM=(n,e,t,r,i)=>n.ts(e,t,r,i),ce=(n,e,t,r,i)=>n.tt(e,t,r,i),Is="WORD",WT="UWORD",T3="ASCIINUMERICAL",_3="ALPHANUMERICAL",rd="LOCALHOST",YT="TLD",QT="UTLD",Jm="SCHEME",Hu="SLASH_SCHEME",vw="NUM",XT="WS",bw="NL",xf="OPENBRACE",Cf="CLOSEBRACE",$g="OPENBRACKET",Gg="CLOSEBRACKET",Kg="OPENPAREN",Wg="CLOSEPAREN",Yg="OPENANGLEBRACKET",Qg="CLOSEANGLEBRACKET",Xg="FULLWIDTHLEFTPAREN",Jg="FULLWIDTHRIGHTPAREN",Zg="LEFTCORNERBRACKET",ey="RIGHTCORNERBRACKET",ty="LEFTWHITECORNERBRACKET",ny="RIGHTWHITECORNERBRACKET",ry="FULLWIDTHLESSTHAN",iy="FULLWIDTHGREATERTHAN",sy="AMPERSAND",oy="APOSTROPHE",ay="ASTERISK",Po="AT",ly="BACKSLASH",uy="BACKTICK",cy="CARET",Fo="COLON",Ew="COMMA",hy="DOLLAR",qi="DOT",fy="EQUALS",Tw="EXCLAMATION",jr="HYPHEN",Rf="PERCENT",dy="PIPE",py="PLUS",my="POUND",kf="QUERY",_w="QUOTE",S3="FULLWIDTHMIDDLEDOT",Sw="SEMI",$i="SLASH",If="TILDE",gy="UNDERSCORE",w3="EMOJI",yy="SYM";var A3=Object.freeze({__proto__:null,ALPHANUMERICAL:_3,AMPERSAND:sy,APOSTROPHE:oy,ASCIINUMERICAL:T3,ASTERISK:ay,AT:Po,BACKSLASH:ly,BACKTICK:uy,CARET:cy,CLOSEANGLEBRACKET:Qg,CLOSEBRACE:Cf,CLOSEBRACKET:Gg,CLOSEPAREN:Wg,COLON:Fo,COMMA:Ew,DOLLAR:hy,DOT:qi,EMOJI:w3,EQUALS:fy,EXCLAMATION:Tw,FULLWIDTHGREATERTHAN:iy,FULLWIDTHLEFTPAREN:Xg,FULLWIDTHLESSTHAN:ry,FULLWIDTHMIDDLEDOT:S3,FULLWIDTHRIGHTPAREN:Jg,HYPHEN:jr,LEFTCORNERBRACKET:Zg,LEFTWHITECORNERBRACKET:ty,LOCALHOST:rd,NL:bw,NUM:vw,OPENANGLEBRACKET:Yg,OPENBRACE:xf,OPENBRACKET:$g,OPENPAREN:Kg,PERCENT:Rf,PIPE:dy,PLUS:py,POUND:my,QUERY:kf,QUOTE:_w,RIGHTCORNERBRACKET:ey,RIGHTWHITECORNERBRACKET:ny,SCHEME:Jm,SEMI:Sw,SLASH:$i,SLASH_SCHEME:Hu,SYM:yy,TILDE:If,TLD:YT,UNDERSCORE:gy,UTLD:QT,UWORD:WT,WORD:Is,WS:XT});const Rs=/[a-z]/,Wh=new RegExp("\\p{L}","u"),bE=new RegExp("\\p{Emoji}","u"),ks=/\d/,EE=/\s/,IM="\r",TE=`
`,Jte="",Zte="",_E="";let xm=null,Cm=null;function ene(n=[]){const e={};or.groups=e;const t=new or;xm==null&&(xm=MM(Gte)),Cm==null&&(Cm=MM(Kte)),ce(t,"'",oy),ce(t,"{",xf),ce(t,"}",Cf),ce(t,"[",$g),ce(t,"]",Gg),ce(t,"(",Kg),ce(t,")",Wg),ce(t,"<",Yg),ce(t,">",Qg),ce(t,"",Xg),ce(t,"",Jg),ce(t,"",Zg),ce(t,"",ey),ce(t,"",ty),ce(t,"",ny),ce(t,"",ry),ce(t,"",iy),ce(t,"&",sy),ce(t,"*",ay),ce(t,"@",Po),ce(t,"`",uy),ce(t,"^",cy),ce(t,":",Fo),ce(t,",",Ew),ce(t,"$",hy),ce(t,".",qi),ce(t,"=",fy),ce(t,"!",Tw),ce(t,"-",jr),ce(t,"%",Rf),ce(t,"|",dy),ce(t,"+",py),ce(t,"#",my),ce(t,"?",kf),ce(t,'"',_w),ce(t,"/",$i),ce(t,";",Sw),ce(t,"~",If),ce(t,"_",gy),ce(t,"\\",ly),ce(t,"",S3);const r=Mt(t,ks,vw,{[qT]:!0});Mt(r,ks,r);const i=Mt(r,Rs,T3,{[Af]:!0}),s=Mt(r,Wh,_3,{[af]:!0}),a=Mt(t,Rs,Is,{[$T]:!0});Mt(a,ks,i),Mt(a,Rs,a),Mt(i,ks,i),Mt(i,Rs,i);const u=Mt(t,Wh,WT,{[GT]:!0});Mt(u,Rs),Mt(u,ks,s),Mt(u,Wh,u),Mt(s,ks,s),Mt(s,Rs),Mt(s,Wh,s);const h=ce(t,TE,bw,{[vE]:!0}),f=ce(t,IM,XT,{[vE]:!0}),p=Mt(t,EE,XT,{[vE]:!0});ce(t,_E,p),ce(f,TE,h),ce(f,_E,p),Mt(f,EE,p),ce(p,IM),ce(p,TE),Mt(p,EE,p),ce(p,_E,p);const m=Mt(t,bE,w3,{[E3]:!0});ce(m,"#"),Mt(m,bE,m),ce(m,Jte,m);const v=ce(m,Zte);ce(v,"#"),Mt(v,bE,m);const E=[[Rs,a],[ks,i]],T=[[Rs,null],[Wh,u],[ks,s]];for(let S=0;S<xm.length;S++)Io(t,xm[S],YT,Is,E);for(let S=0;S<Cm.length;S++)Io(t,Cm[S],QT,WT,T);gl(YT,{tld:!0,ascii:!0},e),gl(QT,{utld:!0,alpha:!0},e),Io(t,"file",Jm,Is,E),Io(t,"mailto",Jm,Is,E),Io(t,"http",Hu,Is,E),Io(t,"https",Hu,Is,E),Io(t,"ftp",Hu,Is,E),Io(t,"ftps",Hu,Is,E),gl(Jm,{scheme:!0,ascii:!0},e),gl(Hu,{slashscheme:!0,ascii:!0},e),n=n.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<n.length;S++){const w=n[S][0],N=n[S][1]?{[Wte]:!0}:{[Yte]:!0};w.indexOf("-")>=0?N[KT]=!0:Rs.test(w)?ks.test(w)?N[Af]=!0:N[$T]=!0:N[qT]=!0,kM(t,w,w,N)}return kM(t,"localhost",rd,{ascii:!0}),t.jd=new or(yy),{start:t,tokens:Object.assign({groups:e},A3)}}function x3(n,e){const t=tne(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,i=[];let s=0,a=0;for(;a<r;){let u=n,h=null,f=0,p=null,m=-1,v=-1;for(;a<r&&(h=u.go(t[a]));)u=h,u.accepts()?(m=0,v=0,p=u):m>=0&&(m+=t[a].length,v++),f+=t[a].length,s+=t[a].length,a++;s-=m,a-=v,f-=m,i.push({t:p.t,v:e.slice(s-f,s),s:s-f,e:s})}return i}function tne(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,a=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function Io(n,e,t,r,i){let s;const a=e.length;for(let u=0;u<a-1;u++){const h=e[u];n.j[h]?s=n.j[h]:(s=new or(r),s.jr=i.slice(),n.j[h]=s),n=s}return s=new or(t),s.jr=i.slice(),n.j[e[a-1]]=s,s}function MM(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+s),10);a>0;a--)t.pop();r+=s}else t.push(n[r]),r++}return e}const id={defaultProtocol:"http",events:null,format:DM,formatHref:DM,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ww(n,e=null){let t=Object.assign({},id);n&&(t=Object.assign(t,n instanceof ww?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}ww.prototype={o:id,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:id[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function DM(n){return n}function C3(n,e){this.t="token",this.v=n,this.tk=e}C3.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=id.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),a={},u=n.get("className",t,e),h=n.get("target",t,e),f=n.get("rel",t,e),p=n.getObj("attributes",t,e),m=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),h&&(a.target=h),f&&(a.rel=f),p&&Object.assign(a,p),{tagName:i,attributes:a,content:s,eventListeners:m}}};function h0(n,e){class t extends C3{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const NM=h0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),OM=h0("text"),nne=h0("nl"),Rm=h0("url",{isLink:!0,toHref(n=id.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==rd&&n[1].t===Fo}}),zr=n=>new or(n);function rne({groups:n}){const e=n.domain.concat([sy,ay,Po,ly,uy,cy,hy,fy,jr,vw,Rf,dy,py,my,$i,yy,If,gy]),t=[oy,Fo,Ew,qi,Tw,Rf,kf,_w,Sw,Yg,Qg,xf,Cf,Gg,$g,Kg,Wg,Xg,Jg,Zg,ey,ty,ny,ry,iy],r=[sy,oy,ay,ly,uy,cy,hy,fy,jr,xf,Cf,Rf,dy,py,my,kf,$i,yy,If,gy],i=zr(),s=ce(i,If);Be(s,r,s),Be(s,n.domain,s);const a=zr(),u=zr(),h=zr();Be(i,n.domain,a),Be(i,n.scheme,u),Be(i,n.slashscheme,h),Be(a,r,s),Be(a,n.domain,a);const f=ce(a,Po);ce(s,Po,f),ce(u,Po,f),ce(h,Po,f);const p=ce(s,qi);Be(p,r,s),Be(p,n.domain,s);const m=zr();Be(f,n.domain,m),Be(m,n.domain,m);const v=ce(m,qi);Be(v,n.domain,m);const E=zr(NM);Be(v,n.tld,E),Be(v,n.utld,E),ce(f,rd,E);const T=ce(m,jr);ce(T,jr,T),Be(T,n.domain,m),Be(E,n.domain,m),ce(E,qi,v),ce(E,jr,T);const S=ce(E,Fo);Be(S,n.numeric,NM);const w=ce(a,jr),C=ce(a,qi);ce(w,jr,w),Be(w,n.domain,a),Be(C,r,s),Be(C,n.domain,a);const N=zr(Rm);Be(C,n.tld,N),Be(C,n.utld,N),Be(N,n.domain,a),Be(N,r,s),ce(N,qi,C),ce(N,jr,w),ce(N,Po,f);const V=ce(N,Fo),$=zr(Rm);Be(V,n.numeric,$);const F=zr(Rm),Z=zr();Be(F,e,F),Be(F,t,Z),Be(Z,e,F),Be(Z,t,Z),ce(N,$i,F),ce($,$i,F);const I=ce(u,Fo),k=ce(h,Fo),D=ce(k,$i),B=ce(D,$i);Be(u,n.domain,a),ce(u,qi,C),ce(u,jr,w),Be(h,n.domain,a),ce(h,qi,C),ce(h,jr,w),Be(I,n.domain,F),ce(I,$i,F),ce(I,kf,F),Be(B,n.domain,F),Be(B,e,F),ce(B,$i,F);const z=[[xf,Cf],[$g,Gg],[Kg,Wg],[Yg,Qg],[Xg,Jg],[Zg,ey],[ty,ny],[ry,iy]];for(let H=0;H<z.length;H++){const[P,Oe]=z[H],Ae=ce(F,P);ce(Z,P,Ae),ce(Ae,Oe,F);const ee=zr(Rm);Be(Ae,e,ee);const ae=zr();Be(Ae,t),Be(ee,e,ee),Be(ee,t,ae),Be(ae,e,ee),Be(ae,t,ae),ce(ee,Oe,F),ce(ae,Oe,F)}return ce(i,rd,N),ce(i,bw,nne),{start:i,tokens:A3}}function ine(n,e,t){let r=t.length,i=0,s=[],a=[];for(;i<r;){let u=n,h=null,f=null,p=0,m=null,v=-1;for(;i<r&&!(h=u.go(t[i].t));)a.push(t[i++]);for(;i<r&&(f=h||u.go(t[i].t));)h=null,u=f,u.accepts()?(v=0,m=u):v>=0&&v++,i++,p++;if(v<0)i-=p,i<r&&(a.push(t[i]),i++);else{a.length>0&&(s.push(SE(OM,e,a)),a=[]),i-=v,p-=v;const E=m.t,T=t.slice(i-p,i);s.push(SE(E,e,T))}}return a.length>0&&s.push(SE(OM,e,a)),s}function SE(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const sne=typeof console<"u"&&console&&console.warn||(()=>{}),one="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",bt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ane(){return or.groups={},bt.scanner=null,bt.parser=null,bt.tokenQueue=[],bt.pluginQueue=[],bt.customSchemes=[],bt.initialized=!1,bt}function PM(n,e=!1){if(bt.initialized&&sne(`linkifyjs: already initialized - will not register custom scheme "${n}" ${one}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);bt.customSchemes.push([n,e])}function lne(){bt.scanner=ene(bt.customSchemes);for(let n=0;n<bt.tokenQueue.length;n++)bt.tokenQueue[n][1]({scanner:bt.scanner});bt.parser=rne(bt.scanner.tokens);for(let n=0;n<bt.pluginQueue.length;n++)bt.pluginQueue[n][1]({scanner:bt.scanner,parser:bt.parser});return bt.initialized=!0,bt}function Aw(n){return bt.initialized||lne(),ine(bt.parser.start,n,x3(bt.scanner.start,n))}Aw.scan=x3;function R3(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new ww(t),i=Aw(n),s=[];for(let a=0;a<i.length;a++){const u=i[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}var xw="[\0- -\u2029]",une=new RegExp(xw),cne=new RegExp(`${xw}$`),hne=new RegExp(xw,"g");function fne(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function dne(n){return new Rt({key:new cn("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(f=>f.docChanged)&&!t.doc.eq(r.doc),s=e.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,u=FV(t.doc,[...e]);if(YV(u).forEach(({newRange:f})=>{const p=dZ(r.doc,f,E=>E.isTextblock);let m,v;if(p.length>1)m=p[0],v=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const E=r.doc.textBetween(f.from,f.to," "," ");if(!cne.test(E))return;m=p[0],v=r.doc.textBetween(m.pos,f.to,void 0," ")}if(m&&v){const E=v.split(une).filter(Boolean);if(E.length<=0)return!1;const T=E[E.length-1],S=m.pos+v.lastIndexOf(T);if(!T)return!1;const w=Aw(T).map(C=>C.toObject(n.defaultProtocol));if(!fne(w))return!1;w.filter(C=>C.isLink).map(C=>({...C,from:S+C.start+1,to:S+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>n.validate(C.value)).filter(C=>n.shouldAutoLink(C.value)).forEach(C=>{fw(C.from,C.to,r.doc).some(N=>N.mark.type===n.type)||a.addMark(C.from,C.to,n.type.create({href:C.href}))})}}),!!a.steps.length)return a}})}function pne(n){return new Rt({key:new cn("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{const h=r.target;if(!h)return!1;const f=n.editor.view.dom;a=h.closest("a"),a&&!f.contains(a)&&(a=null)}if(!a)return!1;let u=!1;if(n.enableClickSelection&&(u=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const h=WV(e.state,n.type.name),f=(i=a.href)!=null?i:h.href,p=(s=a.target)!=null?s:h.target;f&&(window.open(f,p),u=!0)}return u}}})}function mne(n){return new Rt({key:new cn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{shouldAutoLink:i}=n,{state:s}=e,{selection:a}=s,{empty:u}=a;if(u)return!1;let h="";r.content.forEach(p=>{h+=p.textContent});const f=R3(h,{defaultProtocol:n.defaultProtocol}).find(p=>p.isLink&&p.value===h);return!h||!f||i!==void 0&&!i(f.value)?!1:n.editor.commands.setMark(n.type,{href:f.href})}}})}function il(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(hne,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var gne=Ws.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){PM(n);return}PM(n.scheme,n.optionalSlashes)})},onDestroy(){ane()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!il(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const i=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!il(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!il(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Lt(this.options.HTMLAttributes,n),0]:["a",Lt(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,r,i,s;const a=(r=(t=n.attrs)==null?void 0:t.href)!=null?r:"",u=(s=(i=n.attrs)==null?void 0:i.title)!=null?s:"",h=e.renderChildren(n);return u?`[${h}](${a} "${u}")`:`[${h}](${a})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!il(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!il(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[da({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=R3(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!il(a,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(dne({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!il(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(pne({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(mne({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),yne=Object.defineProperty,vne=(n,e)=>{for(var t in e)yne(n,t,{get:e[t],enumerable:!0})},bne="listItem",LM="textStyle",VM=/^\s*([-+*])\s$/,k3=xr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Lt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(bne,this.editor.getAttributes(LM)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=yc({find:VM,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=yc({find:VM,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(LM),editor:this.editor})),[n]}}),I3=xr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Lt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(i=>i.type==="paragraph"))t=e.parseChildren(n.tokens);else{const i=n.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(i.tokens)}],n.tokens.length>1){const a=n.tokens.slice(1),u=e.parseChildren(a);t.push(...u)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>gw(n,e,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ene={};vne(Ene,{findListItemPos:()=>kd,getNextListDepth:()=>Cw,handleBackspace:()=>JT,handleDelete:()=>ZT,hasListBefore:()=>M3,hasListItemAfter:()=>Tne,hasListItemBefore:()=>D3,listItemHasSubList:()=>N3,nextListIsDeeper:()=>O3,nextListIsHigher:()=>P3});var kd=(n,e)=>{const{$from:t}=e.selection,r=rn(n,e.schema);let i=null,s=t.depth,a=t.pos,u=null;for(;s>0&&u===null;)i=t.node(s),i.type===r?u=s:(s-=1,a-=1);return u===null?null:{$pos:e.doc.resolve(a),depth:u}},Cw=(n,e)=>{const t=kd(n,e);if(!t)return!1;const[,r]=SZ(e,n,t.$pos.pos+4);return r},M3=(n,e,t)=>{const{$anchor:r}=n.selection,i=Math.max(0,r.pos-2),s=n.doc.resolve(i).node();return!(!s||!t.includes(s.type.name))},D3=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((t=i.nodeBefore)==null?void 0:t.type.name)!==n)},N3=(n,e,t)=>{if(!t)return!1;const r=rn(n,e.schema);let i=!1;return t.descendants(s=>{s.type===r&&(i=!0)}),i},JT=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!fa(n.state,e)&&M3(n.state,e,t)){const{$anchor:u}=n.state.selection,h=n.state.doc.resolve(u.before()-1),f=[];h.node().descendants((v,E)=>{v.type.name===e&&f.push({node:v,pos:E})});const p=f.at(-1);if(!p)return!1;const m=n.state.doc.resolve(h.start()+p.pos+1);return n.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!fa(n.state,e)||!CZ(n.state))return!1;const r=kd(e,n.state);if(!r)return!1;const s=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=N3(e,n.state,s);return D3(e,n.state)&&!a?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},O3=(n,e)=>{const t=Cw(n,e),r=kd(n,e);return!r||!t?!1:t>r.depth},P3=(n,e)=>{const t=Cw(n,e),r=kd(n,e);return!r||!t?!1:t<r.depth},ZT=(n,e)=>{if(!fa(n.state,e)||!xZ(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:i}=t;return!t.empty&&r.sameParent(i)?!1:O3(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():P3(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},Tne=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((t=i.nodeAfter)==null?void 0:t.type.name)!==n)},L3=mt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&ZT(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&ZT(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&JT(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&JT(n,t,r)&&(e=!0)}),e}}}}),UM=/^(\s*)(\d+)\.\s+(.*)$/,_ne=/^\s/;function Sne(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t],s=i.match(UM);if(!s)break;const[,a,u,h]=s,f=a.length;let p=h,m=t+1;const v=[i];for(;m<n.length;){const E=n[m];if(E.match(UM))break;if(E.trim()==="")v.push(E),p+=`
`,m+=1;else if(E.match(_ne))v.push(E),p+=`
${E.slice(f+2)}`,m+=1;else break}e.push({indent:f,number:parseInt(u,10),content:p.trim(),raw:v.join(`
`)}),r=m,t=m}return[e,r]}function V3(n,e,t){var r;const i=[];let s=0;for(;s<n.length;){const a=n[s];if(a.indent===e){const u=a.content.split(`
`),h=((r=u[0])==null?void 0:r.trim())||"",f=[];h&&f.push({type:"paragraph",raw:h,tokens:t.inlineTokens(h)});const p=u.slice(1).join(`
`).trim();if(p){const E=t.blockTokens(p);f.push(...E)}let m=s+1;const v=[];for(;m<n.length&&n[m].indent>e;)v.push(n[m]),m+=1;if(v.length>0){const E=Math.min(...v.map(S=>S.indent)),T=V3(v,E,t);f.push({type:"list",ordered:!0,start:v[0].number,items:T,raw:v.map(S=>S.raw).join(`
`)})}i.push({type:"list_item",raw:a.raw,tokens:f}),s=m}else s+=1}return i}function wne(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const r=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var Ane="listItem",BM="textStyle",zM=/^(\d+)\.\s$/,U3=xr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Lt(this.options.HTMLAttributes,t),0]:["ol",Lt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,r=n.items?wne(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:r}:{type:"orderedList",content:r}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var r;const i=n.split(`
`),[s,a]=Sne(i);if(s.length===0)return;const u=V3(s,0,t);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:u,raw:i.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ane,this.editor.getAttributes(BM)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=yc({find:zM,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=yc({find:zM,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(BM)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),xne=/^\s*(\[([( |x])?\])\s$/,Cne=xr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Lt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const r=e.parseChildren(n.nestedTokens);t.push(...r)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const i=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return gw(n,e,i)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),u=document.createElement("input"),h=document.createElement("div"),f=m=>{var v,E;u.ariaLabel=((E=(v=this.options.a11y)==null?void 0:v.checkboxLabel)==null?void 0:E.call(v,m,u.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};f(n),s.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",m=>m.preventDefault()),u.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:v}=m.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:E})=>{const T=t();if(typeof T!="number")return!1;const S=E.doc.nodeAt(T);return E.setNodeMarkup(T,void 0,{...S?.attrs,checked:v}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,v)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,v])=>{i.setAttribute(m,v)}),i.dataset.checked=n.attrs.checked,u.checked=n.attrs.checked,s.append(u,a),i.append(s,h),Object.entries(e).forEach(([m,v])=>{i.setAttribute(m,v)});let p=new Set(Object.keys(e));return{dom:i,contentDOM:h,update:m=>{if(m.type!==this.type)return!1;i.dataset.checked=m.attrs.checked,u.checked=m.attrs.checked,f(m);const v=r.extensionManager.attributes,E=nd(m,v),T=new Set(Object.keys(E)),S=this.options.HTMLAttributes;return p.forEach(w=>{T.has(w)||(w in S?i.setAttribute(w,S[w]):i.removeAttribute(w))}),Object.entries(E).forEach(([w,C])=>{C==null?w in S?i.setAttribute(w,S[w]):i.removeAttribute(w):i.setAttribute(w,C)}),p=T,!0}}}},addInputRules(){return[yc({find:xne,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),Rne=xr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Lt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const r=s=>{const a=FT(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,h)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:t.inlineTokens(u.mainContent),nestedTokens:h}),customNestedParser:r},t);return a?[{type:"taskList",raw:a.raw,items:a.items}]:t.blockTokens(s)},i=FT(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,a)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:t.inlineTokens(s.mainContent),nestedTokens:a}),customNestedParser:r},t);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});mt.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(k3.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(I3.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(L3.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(U3.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(Cne.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(Rne.configure(this.options.taskList)),n}});var jM="&nbsp;",kne="",Ine=xr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Lt(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const r=e.parseInline(t);return r.length===1&&r[0].type==="text"&&(r[0].text===jM||r[0].text===kne)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?jM:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Mne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Dne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Nne=Ws.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Lt(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ul({find:Mne,type:this.type})]},addPasteRules(){return[da({find:Dne,type:this.type})]}}),One=xr.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),Pne=Ws.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Lt(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:t.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Lne(n={}){return new Rt({view(e){return new Vne(e,n)}})}class Vne{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,u=s.height/i.offsetHeight;if(t){let m=e.nodeBefore,v=e.nodeAfter;if(m||v){let E=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(E){let T=E.getBoundingClientRect(),S=m?T.bottom:T.top;m&&v&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*u;r={left:T.left,right:T.right,top:S-w,bottom:S+w}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*a;r={left:m.left-v,right:m.left+v,top:m.top,bottom:m.bottom}}let h=this.editorView.dom.offsetParent;this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let f,p;if(!h||h==document.body&&getComputedStyle(h).position=="static")f=-pageXOffset,p=-pageYOffset;else{let m=h.getBoundingClientRect(),v=m.width/h.offsetWidth,E=m.height/h.offsetHeight;f=m.left-h.scrollLeft*v,p=m.top-h.scrollTop*E}this.element.style.left=(r.left-f)/a+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=NL(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Nt extends ze{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Nt.valid(r)?new Nt(r):ze.near(r)}content(){return pe.empty}eq(e){return e instanceof Nt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Nt(e.resolve(t.pos))}getBookmark(){return new Rw(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Une(e)||!Bne(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Nt.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){s=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let h=e.doc.resolve(i);if(Nt.valid(h))return h}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!Se.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=a,i+=t;let u=e.doc.resolve(i);if(Nt.valid(u))return u}return null}}}Nt.prototype.visible=!1;Nt.findFrom=Nt.findGapCursorFrom;ze.jsonID("gapcursor",Nt);class Rw{constructor(e){this.pos=e}map(e){return new Rw(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Nt.valid(t)?new Nt(t):ze.near(t)}}function B3(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function Une(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||B3(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Bne(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||B3(i.type))return!0;if(i.inlineContent)return!1}}return!0}function zne(){return new Rt({props:{decorations:qne,createSelectionBetween(n,e,t){return e.pos==t.pos&&Nt.valid(t)?new Nt(t):null},handleClick:Fne,handleKeyDown:jne,handleDOMEvents:{beforeinput:Hne}}})}const jne=OV({ArrowLeft:km("horiz",-1),ArrowRight:km("horiz",1),ArrowUp:km("vert",-1),ArrowDown:km("vert",1)});function km(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,u=e>0?a.$to:a.$from,h=a.empty;if(a instanceof Ie){if(!s.endOfTextblock(t)||u.depth==0)return!1;h=!1,u=r.doc.resolve(e>0?u.after():u.before())}let f=Nt.findGapCursorFrom(u,e,h);return f?(i&&i(r.tr.setSelection(new Nt(f))),!0):!1}}function Fne(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Nt.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Se.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Nt(r))),!0)}function Hne(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Nt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=le.empty;for(let a=r.length-1;a>=0;a--)i=le.from(r[a].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new pe(i,0,0));return s.setSelection(Ie.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function qne(n){if(!(n.selection instanceof Nt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",At.create(n.doc,[Yn.widget(n.selection.head,e,{key:"gapcursor"})])}var vy=200,vn=function(){};vn.prototype.append=function(e){return e.length?(e=vn.from(e),!this.length&&e||e.length<vy&&this.leafAppend(e)||this.length<vy&&e.leafPrepend(this)||this.appendInner(e)):this};vn.prototype.prepend=function(e){return e.length?vn.from(e).append(this):this};vn.prototype.appendInner=function(e){return new $ne(this,e)};vn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?vn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};vn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};vn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};vn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},t,r),i};vn.from=function(e){return e instanceof vn?e:e&&e.length?new z3(e):vn.empty};var z3=(function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,u){for(var h=s;h<a;h++)if(i(this.values[h],u+h)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,u){for(var h=s-1;h>=a;h--)if(i(this.values[h],u+h)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=vy)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=vy)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(vn);vn.empty=new z3([]);var $ne=(function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(s,u),a)===!1||s>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,s)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(s,u)-u,a+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(i,u),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(vn);const Gne=500;class ci{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,u,h,f=[],p=[];return this.items.forEach((m,v)=>{if(!m.step){i||(i=this.remapping(r,v+1),s=i.maps.length),s--,p.push(m);return}if(i){p.push(new Gi(m.map));let E=m.step.map(i.slice(s)),T;E&&a.maybeStep(E).doc&&(T=a.mapping.maps[a.mapping.maps.length-1],f.push(new Gi(T,void 0,void 0,f.length+p.length))),s--,T&&i.appendMap(T,s)}else a.maybeStep(m.step);if(m.selection)return u=i?m.selection.map(i.slice(s)):m.selection,h=new ci(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:a,selection:u}}addTransform(e,t,r,i){let s=[],a=this.eventCount,u=this.items,h=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),v=new Gi(e.mapping.maps[p],m,t),E;(E=h&&h.merge(v))&&(v=E,p?s.pop():u=u.slice(0,u.length-1)),s.push(v),t&&(a++,t=void 0),i||(h=v)}let f=a-r.depth;return f>Wne&&(u=Kne(u,f),a-=f),new ci(u.append(s),a)}remapping(e,t){let r=new Qf;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new ci(this.items.append(e.map(t=>new Gi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},i);let h=t;this.items.forEach(v=>{let E=s.getMirror(--h);if(E==null)return;a=Math.min(a,E);let T=s.maps[E];if(v.step){let S=e.steps[E].invert(e.docs[E]),w=v.selection&&v.selection.map(s.slice(h+1,E));w&&u++,r.push(new Gi(T,S,w))}else r.push(new Gi(T))},i);let f=[];for(let v=t;v<a;v++)f.push(new Gi(s.maps[v]));let p=this.items.slice(0,i).append(f).append(r),m=new ci(p,u);return m.emptyItemCount()>Gne&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((a,u)=>{if(u>=e)i.push(a),a.selection&&s++;else if(a.step){let h=a.step.map(t.slice(r)),f=h&&h.getMap();if(r--,f&&t.appendMap(f,r),h){let p=a.selection&&a.selection.map(t.slice(r));p&&s++;let m=new Gi(f.invert(),h,p),v,E=i.length-1;(v=i.length&&i[E].merge(m))?i[E]=v:i.push(m)}}else a.map&&r--},this.items.length,0),new ci(vn.from(i.reverse()),s)}}ci.empty=new ci(vn.empty,0);function Kne(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Gi{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Gi(t.getMap().invert(),t,this.selection)}}}class Lo{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Wne=20;function Yne(n,e,t,r){let i=t.getMeta(Sl),s;if(i)return i.historyState;t.getMeta(Jne)&&(n=new Lo(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(Sl))return a.getMeta(Sl).redo?new Lo(n.done.addTransform(t,void 0,r,Zm(e)),n.undone,FM(t.mapping.maps),n.prevTime,n.prevComposition):new Lo(n.done,n.undone.addTransform(t,void 0,r,Zm(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),h=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!Qne(t,n.prevRanges)),f=a?wE(n.prevRanges,t.mapping):FM(t.mapping.maps);return new Lo(n.done.addTransform(t,h?e.selection.getBookmark():void 0,r,Zm(e)),ci.empty,f,t.time,u??n.prevComposition)}else return(s=t.getMeta("rebased"))?new Lo(n.done.rebased(t,s),n.undone.rebased(t,s),wE(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Lo(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),wE(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function Qne(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function FM(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,a)=>e.push(s,a));return e}function wE(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function Xne(n,e,t){let r=Zm(e),i=Sl.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),u=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),h=new Lo(t?u:s.remaining,t?s.remaining:u,null,0,-1);return s.transform.setSelection(a).setMeta(Sl,{redo:t,historyState:h})}let AE=!1,HM=null;function Zm(n){let e=n.plugins;if(HM!=e){AE=!1,HM=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){AE=!0;break}}return AE}const Sl=new cn("history"),Jne=new cn("closeHistory");function Zne(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Rt({key:Sl,state:{init(){return new Lo(ci.empty,ci.empty,null,0,-1)},apply(e,t,r){return Yne(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?F3:r=="historyRedo"?H3:null;return!i||!e.editable?!1:(t.preventDefault(),i(e.state,e.dispatch))}}}})}function j3(n,e){return(t,r)=>{let i=Sl.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=Xne(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const F3=j3(!1,!0),H3=j3(!0,!0);mt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new Rt({key:new cn("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const i=this.options.limit;if(i==null||i===0){n=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const a=s-i,u=0,h=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(u,h);return n=!0,f}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:t.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,h=s-r,f=u-h,p=u;return e.deleteRange(f,p),!(this.storage.characters({node:e.doc})>r)}})]}});var ere=mt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Lne(this.options)]}});mt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Rt({key:new cn("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!t||!r)return At.create(n,[]);let a=0;this.options.mode==="deepest"&&n.descendants((h,f)=>{if(h.isText)return;if(!(i>=f&&i<=f+h.nodeSize-1))return!1;a+=1});let u=0;return n.descendants((h,f)=>{if(h.isText||!(i>=f&&i<=f+h.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&a-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";s.push(Yn.node(f,f+h.nodeSize,{class:this.options.className}))}),At.create(n,s)}}})]}});var tre=mt.create({name:"gapCursor",addProseMirrorPlugins(){return[zne()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ot(Ee(n,"allowGapCursor",t)))!=null?e:null}}}),qM="placeholder";function nre(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}mt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:qM,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${nre(this.options.dataAttribute)}`:`data-${qM}`;return[new Rt({key:new cn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=t,s=[];if(!r)return null;const a=this.editor.isEmpty;return e.descendants((u,h)=>{const f=i>=h&&i<=h+u.nodeSize,p=!u.isLeaf&&l0(u);if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];a&&m.push(this.options.emptyEditorClass);const v=Yn.node(h,h+u.nodeSize,{class:m.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:u,pos:h,hasAnchor:f}):this.options.placeholder});s.push(v)}return this.options.includeChildren}),At.create(e,s)}}})]}});mt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new Rt({key:new cn("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||QV(t.selection)||n.view.dragging?null:At.create(t.doc,[Yn.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function $M({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var rre=mt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new cn(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(t).includes(i.name));return[new Rt({key:e,appendTransaction:(i,s,a)=>{const{doc:u,tr:h,schema:f}=a,p=e.getState(a),m=u.content.size,v=f.nodes[t];if(p)return h.insert(m,v.create())},state:{init:(i,s)=>{const a=s.tr.doc.lastChild;return!$M({node:a,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const a=i.doc.lastChild;return!$M({node:a,types:r})}}})]}}),ire=mt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>F3(n,e),redo:()=>({state:n,dispatch:e})=>H3(n,e)}},addProseMirrorPlugins(){return[Zne(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),sre=mt.create({name:"starterKit",addExtensions(){var n,e,t,r;const i=[];return this.options.bold!==!1&&i.push(Ite.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Ate.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(k3.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Nte.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Lte.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Vte.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(ere.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(tre.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Ute.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Bte.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(ire.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(zte.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push($te.configure(this.options.italic)),this.options.listItem!==!1&&i.push(I3.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(L3.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&i.push(gne.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(U3.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Ine.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Nne.configure(this.options.strike)),this.options.text!==!1&&i.push(One.configure(this.options.text)),this.options.underline!==!1&&i.push(Pne.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&i.push(rre.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),ore=sre,are=20,q3=(n,e=0)=>{const t=[];return!n.children.length||e>are||Array.from(n.children).forEach(r=>{r.tagName==="SPAN"?t.push(r):r.children.length&&t.push(...q3(r,e+1))}),t},lre=n=>{if(!n.children.length)return;const e=q3(n);e&&e.forEach(t=>{var r,i;const s=t.getAttribute("style"),a=(i=(r=t.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");t.setAttribute("style",`${a};${s}`)})},$3=Ws.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&lre(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Lt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleTextStyle:n=>({commands:e})=>e.toggleMark(this.name,n),removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),ure=mt.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const a=s[0].trim().toLowerCase(),u=s.slice(1).join(":").trim();if(a==="background-color")return u.replace(/['"]+/g,"")}}}return(e=n.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.backgroundColor?{style:`background-color: ${n.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:n=>({chain:e})=>e().setMark("textStyle",{backgroundColor:n}).run(),unsetBackgroundColor:()=>({chain:n})=>n().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),G3=mt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const a=s[0].trim().toLowerCase(),u=s.slice(1).join(":").trim();if(a==="color")return u.replace(/['"]+/g,"")}}}return(e=n.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),K3=mt.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:n=>({chain:e})=>e().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),W3=mt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),cre=mt.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:n=>n.style.lineHeight,renderHTML:n=>n.lineHeight?{style:`line-height: ${n.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:n=>({chain:e})=>e().setMark("textStyle",{lineHeight:n}).run(),unsetLineHeight:()=>({chain:n})=>n().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});mt.create({name:"textStyleKit",addExtensions(){const n=[];return this.options.backgroundColor!==!1&&n.push(ure.configure(this.options.backgroundColor)),this.options.color!==!1&&n.push(G3.configure(this.options.color)),this.options.fontFamily!==!1&&n.push(K3.configure(this.options.fontFamily)),this.options.fontSize!==!1&&n.push(W3.configure(this.options.fontSize)),this.options.lineHeight!==!1&&n.push(cre.configure(this.options.lineHeight)),this.options.textStyle!==!1&&n.push($3.configure(this.options.textStyle)),n}});var hre=G3,fre=K3,dre=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pre=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,mre=Ws.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",Lt(this.options.HTMLAttributes,n),0]},renderMarkdown:(n,e)=>`==${e.renderChildren(n)}==`,parseMarkdown:(n,e)=>e.applyMark("highlight",e.parseInline(n.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:n=>n.indexOf("=="),tokenize(n,e,t){const i=/^(==)([^=]+)(==)/.exec(n);if(i){const s=i[2].trim(),a=t.inlineTokens(s);return{type:"highlight",raw:i[0],text:s,tokens:a}}}},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Ul({find:dre,type:this.type})]},addPasteRules(){return[da({find:pre,type:this.type})]}}),gre=mre;const yre=864e5,GM=Symbol.for("constructDateFrom");function Y3(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&GM in n?n[GM](e):n instanceof Date?new n.constructor(e):new Date(e)}function Q3(n,e){return Y3(n,n)}function KM(n){const e=Q3(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function vre(n,...e){const t=Y3.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function by(n,e){const t=Q3(n);return t.setHours(0,0,0,0),t}function bre(n,e,t){const[r,i]=vre(t?.in,n,e),s=by(r),a=by(i),u=+s-KM(s),h=+a-KM(a);return Math.round((u-h)/yre)}function Ere(n,e,t){if(n===null)return{newStreak:1};const r=by(n),i=by(e),s=bre(i,r);return s===0?{newStreak:t}:s===1?{newStreak:t+1}:{newStreak:1}}function X3(n){return typeof n!="string"||n.trim().length===0?{valid:!1,error:"Title is required"}:n.trim().length>hI?{valid:!1,error:`Title must be ${hI} characters or less`}:{valid:!0}}function Tre(n){return ST.includes(n)?{valid:!0}:{valid:!1,error:`Mood must be one of: ${ST.join(", ")}`}}function _re(n){if(!Array.isArray(n))return{valid:!1,error:"Images must be an array"};if(n.length>al)return{valid:!1,error:`Maximum ${al} images allowed`};for(let e=0;e<n.length;e++)if(typeof n[e]!="string"||n[e].trim().length===0)return{valid:!1,error:`Image at index ${e} must be a non-empty string`};return{valid:!0}}function J3(n){return!(n instanceof Date)||isNaN(n.getTime())?{valid:!1,error:"Date must be a valid Date object"}:n>new Date?{valid:!1,error:"Entry date cannot be in the future"}:{valid:!0}}function Sre(n){const e=[],t=X3(n?.title);t.valid||e.push(t.error);const r=Tre(n?.mood);r.valid||e.push(r.error);const i=_re(n?.images??[]);i.valid||e.push(i.error);const s=J3(n?.date);return s.valid||e.push(s.error),e.length>0?{valid:!1,errors:e}:{valid:!0}}async function wre(n,e,t){const r=Sre(e);if(!r.valid)throw new Error(r.errors.join(", "));const i=ft.now(),s={userId:n,date:ft.fromDate(e.date),title:e.title.trim(),content:e.content,mood:e.mood,images:e.images??[],drawingURL:e.drawingURL??null,theme:e.theme,updatedAt:i};let a;return await zq(fi,async u=>{if(t){const h=Us(fi,"entries",t),f=await u.get(h);if(!f.exists())throw new Error("Entry not found");if(f.data().userId!==n)throw new Error("Permission denied");u.update(h,s),a=t}else{const h=Us(PO(fi,"entries"));u.set(h,{...s,createdAt:i}),a=h.id;const f=Us(fi,"users",n),p=await u.get(f);if(!p.exists())throw new Error("User not found");const m=p.data(),v=m.lastEntryDate?.toDate()??null,E=m.streak??0,T=m.longestStreak??0,{newStreak:S}=Ere(v,e.date,E);u.update(f,{streak:S,longestStreak:Math.max(T,S),lastEntryDate:ft.fromDate(e.date)})}}),a}async function Are(n,e){const t=Us(fi,"entries",n),r=await $y(t);if(!r.exists())throw new Error("Entry not found");const i=r.data();if(i.userId!==e)throw new Error("Permission denied");return{entryId:r.id,...i}}async function xre(n,e,t){if(!t)throw new Error("No file provided");if(t.size>nL)throw new Error("Image must be under 5MB");if(!rL.includes(t.type))throw new Error("Please upload a JPEG, PNG, GIF, or WebP image");const r=`images/${n}/${e}/${t.name}`,i=t7(a7,r),s=await Z8(i,t);return await e7(s.ref)}const Cre=[{label:"Poppins",value:"Poppins"},{label:"Caveat",value:"Caveat"},{label:"Pacifico",value:"Pacifico"}],Rre=[{label:"S",value:"14px"},{label:"M",value:"18px"},{label:"L",value:"24px"}],kre=["#4A2040","#1E3A5F","#744210","#22543D","#2D3748","#FF69B4","#63B3ED","#ECC94B","#48BB78","#A0AEC0","#E53E3E","#805AD5","#DD6B20","#319795","#718096"],Ire=["#FFE4E1","#E6E6FA","#FEFCBF","#F0FFF4","#EBF8FF","#FFF0F5","#FED7E2","#FEEBC8","#C6F6D5","#BEE3F8"];function Mre({editor:n}){if(!n)return null;const e=O.useCallback(s=>{n.chain().focus().setFontFamily(s).run()},[n]),t=O.useCallback(s=>{n.chain().focus().setFontSize(s).run()},[n]),r=O.useCallback(s=>{n.chain().focus().setColor(s).run()},[n]),i=O.useCallback(s=>{n.chain().focus().toggleHighlight({color:s}).run()},[n]);return q.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 bg-pink-50/80 rounded-2xl border border-pink-100 mb-4",children:[q.jsxs("div",{className:"flex items-center gap-1",children:[q.jsx("label",{className:"sr-only",htmlFor:"font-family-select",children:"Font family"}),q.jsx("select",{id:"font-family-select",onChange:s=>e(s.target.value),className:"px-2 py-1.5 rounded-lg bg-white border border-pink-200 text-sm font-['Poppins'] text-gray-700 cursor-pointer focus:outline-none focus:ring-2 focus:ring-pink-300","aria-label":"Font family",children:Cre.map(s=>q.jsx("option",{value:s.value,style:{fontFamily:s.value},children:s.label},s.value))})]}),q.jsx("div",{className:"w-px h-6 bg-pink-200","aria-hidden":"true"}),q.jsx("div",{className:"flex items-center gap-1",role:"group","aria-label":"Font size",children:Rre.map(s=>q.jsx("button",{type:"button",onClick:()=>t(s.value),className:"px-2.5 py-1 rounded-lg text-sm font-['Poppins'] bg-white border border-pink-200 hover:bg-pink-100 transition-colors text-gray-700","aria-label":`Font size ${s.label}`,children:s.label},s.value))}),q.jsx("div",{className:"w-px h-6 bg-pink-200","aria-hidden":"true"}),q.jsxs("div",{className:"flex items-center gap-1",role:"group","aria-label":"Text formatting",children:[q.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleBold().run(),className:`px-2.5 py-1 rounded-lg text-sm font-bold border transition-colors ${n.isActive("bold")?"bg-pink-200 border-pink-300 text-pink-800":"bg-white border-pink-200 hover:bg-pink-100 text-gray-700"}`,"aria-label":"Bold","aria-pressed":n.isActive("bold"),children:"B"}),q.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleItalic().run(),className:`px-2.5 py-1 rounded-lg text-sm italic border transition-colors ${n.isActive("italic")?"bg-pink-200 border-pink-300 text-pink-800":"bg-white border-pink-200 hover:bg-pink-100 text-gray-700"}`,"aria-label":"Italic","aria-pressed":n.isActive("italic"),children:"I"}),q.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleStrike().run(),className:`px-2.5 py-1 rounded-lg text-sm line-through border transition-colors ${n.isActive("strike")?"bg-pink-200 border-pink-300 text-pink-800":"bg-white border-pink-200 hover:bg-pink-100 text-gray-700"}`,"aria-label":"Strikethrough","aria-pressed":n.isActive("strike"),children:"S"})]}),q.jsx("div",{className:"w-px h-6 bg-pink-200","aria-hidden":"true"}),q.jsxs("div",{className:"flex items-center gap-1",children:[q.jsx("span",{className:"text-xs font-['Poppins'] text-gray-500 mr-1",children:"Text"}),q.jsx("div",{className:"flex flex-wrap gap-1",role:"group","aria-label":"Text color",children:kre.map(s=>q.jsx("button",{type:"button",onClick:()=>r(s),className:"w-5 h-5 rounded-full border border-gray-200 hover:scale-125 transition-transform cursor-pointer",style:{backgroundColor:s},"aria-label":`Text color ${s}`},s))})]}),q.jsx("div",{className:"w-px h-6 bg-pink-200","aria-hidden":"true"}),q.jsxs("div",{className:"flex items-center gap-1",children:[q.jsx("span",{className:"text-xs font-['Poppins'] text-gray-500 mr-1",children:"Highlight"}),q.jsx("div",{className:"flex flex-wrap gap-1",role:"group","aria-label":"Highlight color",children:Ire.map(s=>q.jsx("button",{type:"button",onClick:()=>i(s),className:"w-5 h-5 rounded-full border border-gray-200 hover:scale-125 transition-transform cursor-pointer",style:{backgroundColor:s},"aria-label":`Highlight color ${s}`},s))})]})]})}const kw="dearme-draft",Dre=3e4;function WM(){try{const n=localStorage.getItem(kw);return n?JSON.parse(n):null}catch{return null}}function Nre(n){try{localStorage.setItem(kw,JSON.stringify(n))}catch{}}function YM(){localStorage.removeItem(kw)}function Ore(){const{entryId:n}=_B(),e=ad(),{user:t}=Gy(),[r,i]=O.useState(""),[s,a]=O.useState("neutral"),[u,h]=O.useState([]),[f,p]=O.useState(null),[m,v]=O.useState([]),[E,T]=O.useState(!1),[S,w]=O.useState(!1),[C,N]=O.useState(!!n),[V,$]=O.useState(!1),[F,Z]=O.useState(n||null),[I,k]=O.useState(null),[D,B]=O.useState(!1),z=O.useRef(n||(typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():String(Date.now()))),H=O.useRef(null),P=O.useRef(null),Oe=O.useRef(!1),Ae=Ete({extensions:[ore,$3,W3,hre,fre,gre.configure({multicolor:!0})],content:"<p>Start writing your thoughts...</p>",editorProps:{attributes:{class:"prose prose-sm sm:prose-base max-w-none focus:outline-none min-h-[300px] font-['Poppins'] text-gray-800 p-4"}},onUpdate:()=>{Oe.current=!0}});O.useEffect(()=>{if(!n||!t)return;let L=!1;async function te(){try{N(!0);const ue=await Are(n,t.uid);if(L)return;i(ue.title||""),a(ue.mood||"neutral"),h(ue.images||[]),p(ue.drawingURL||null),Z(n),Ae&&ue.content&&Ae.commands.setContent(ue.content)}catch(ue){L||v([ue.message||"Failed to load entry"])}finally{L||N(!1)}}return te(),()=>{L=!0}},[n,t,Ae]),O.useEffect(()=>{if(n)return;const L=WM();L&&(L.title||L.mood!=="neutral"||L.content)&&$(!0)},[n]);const ee=O.useCallback(()=>{const L=WM();L&&(L.title&&i(L.title),L.mood&&a(L.mood),Ae&&L.content&&Ae.commands.setContent(L.content),$(!1))},[Ae]),ae=O.useCallback(()=>{YM(),$(!1)},[]);O.useEffect(()=>{if(!n)return P.current=setInterval(()=>{if(!Ae)return;const L={title:r,mood:s,content:Ae.getJSON(),savedAt:new Date().toISOString()};Nre(L)},Dre),()=>{P.current&&clearInterval(P.current)}},[n,r,s,Ae]);const me=O.useCallback(async L=>{const te=L.target.files?.[0];if(te){if(H.current&&(H.current.value=""),k(null),u.length>=al){k(`Maximum ${al} images per entry`);return}if(te.size>nL){k("Image must be under 5MB");return}if(!rL.includes(te.type)){k("Please upload a JPEG, PNG, GIF, or WebP image");return}B(!0);try{const ue=F||z.current,de=await xre(t.uid,ue,te);h(ke=>[...ke,de])}catch(ue){k(ue.message||"Failed to upload image. Please try again.")}finally{B(!1)}}},[u,F,t]),Ne=O.useCallback(L=>{h(te=>te.filter((ue,de)=>de!==L))},[]),je=O.useCallback(async()=>{if(!Ae||!t)return;const L=[],te=X3(r);te.valid||L.push(te.error);const ue=J3(new Date);if(ue.valid||L.push(ue.error),L.length>0){v(L);return}v([]),T(!0);try{const de={title:r.trim(),content:Ae.getJSON(),mood:s,images:u,drawingURL:f,theme:"pastel-pink",date:new Date};await wre(t.uid,de,F||void 0),YM(),w(!0),setTimeout(()=>{e("/dashboard")},1200)}catch(de){v([de.message||"Failed to save entry"])}finally{T(!1)}},[Ae,t,r,s,u,f,F,e]);return C?q.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:q.jsxs("div",{className:"text-center",children:[q.jsx("div",{className:"w-10 h-10 border-4 border-pink-200 border-t-pink-500 rounded-full animate-spin mx-auto mb-3"}),q.jsx("p",{className:"font-['Poppins'] text-gray-500",children:"Loading entry..."})]})}):q.jsxs("div",{className:"max-w-3xl mx-auto p-4 sm:p-6",children:[q.jsx(Qk,{children:S&&q.jsx(vr.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/20",children:q.jsxs(vr.div,{initial:{y:20},animate:{y:0},className:"bg-white rounded-3xl p-8 shadow-2xl text-center",children:[q.jsx("span",{className:"text-5xl mb-3 block",children:""}),q.jsx("p",{className:"font-['Caveat'] text-2xl text-pink-600",children:"Entry saved!"})]})})}),q.jsx(Qk,{children:V&&q.jsxs(vr.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-2xl flex items-center justify-between",children:[q.jsx("p",{className:"font-['Poppins'] text-sm text-yellow-800",children:"You have an unsaved draft. Would you like to restore it?"}),q.jsxs("div",{className:"flex gap-2 ml-4",children:[q.jsx("button",{type:"button",onClick:ee,className:"px-3 py-1.5 bg-yellow-400 text-yellow-900 rounded-lg text-sm font-medium hover:bg-yellow-500 transition-colors",children:"Restore"}),q.jsx("button",{type:"button",onClick:ae,className:"px-3 py-1.5 bg-white text-gray-600 rounded-lg text-sm border border-gray-200 hover:bg-gray-50 transition-colors",children:"Discard"})]})]})}),q.jsx("h1",{className:"font-['Caveat'] text-3xl sm:text-4xl text-[var(--color-text,#4A2040)] mb-6",children:F?" Edit Entry":" New Entry"}),m.length>0&&q.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-2xl",role:"alert",children:m.map((L,te)=>q.jsx("p",{className:"font-['Poppins'] text-sm text-red-600",children:L},te))}),q.jsxs("div",{className:"mb-4",children:[q.jsx("label",{htmlFor:"entry-title",className:"block font-['Poppins'] text-sm text-gray-600 mb-1",children:"Title"}),q.jsx("input",{id:"entry-title",type:"text",value:r,onChange:L=>i(L.target.value),placeholder:"Give your entry a title...",maxLength:200,className:"w-full px-4 py-3 rounded-2xl border border-pink-200 bg-white font-['Caveat'] text-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-300 focus:border-transparent transition-shadow"}),q.jsxs("p",{className:"mt-1 text-xs font-['Poppins'] text-gray-400 text-right",children:[r.length,"/200"]})]}),q.jsxs("div",{className:"mb-6",children:[q.jsx("p",{className:"font-['Poppins'] text-sm text-gray-600 mb-2",children:"How are you feeling?"}),q.jsx(iL,{value:s,onChange:a})]}),q.jsx(Mre,{editor:Ae}),q.jsx("div",{className:"bg-white rounded-2xl border border-pink-100 shadow-sm min-h-[350px] mb-6 overflow-hidden",style:{backgroundImage:"repeating-linear-gradient(transparent, transparent 31px, #f9e4ec 31px, #f9e4ec 32px)",backgroundSize:"100% 32px"},children:q.jsx(m3,{editor:Ae})}),q.jsxs("div",{className:"mb-6",children:[q.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[q.jsxs("label",{className:"font-['Poppins'] text-sm text-gray-600",children:["Images (",u.length,"/",al,")"]}),q.jsx("input",{ref:H,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:me,className:"hidden",id:"image-upload","aria-label":"Upload image"}),q.jsx("button",{type:"button",onClick:()=>H.current?.click(),disabled:D||u.length>=al,className:`px-4 py-1.5 rounded-xl font-['Poppins'] text-sm font-medium transition-colors ${D||u.length>=al?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-pink-100 text-pink-600 hover:bg-pink-200 cursor-pointer"}`,children:D?"Uploading...":" Add Image"})]}),I&&q.jsx("p",{className:"font-['Poppins'] text-sm text-red-500 mb-2",role:"alert",children:I}),u.length>0&&q.jsx("div",{className:"flex flex-wrap gap-3",children:u.map((L,te)=>q.jsxs("div",{className:"relative group w-24 h-24 rounded-xl overflow-hidden border border-pink-100 shadow-sm",children:[q.jsx("img",{src:L,alt:`Upload ${te+1}`,className:"w-full h-full object-cover"}),q.jsx("button",{type:"button",onClick:()=>Ne(te),className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer","aria-label":`Remove image ${te+1}`,children:""})]},L))})]}),q.jsx("div",{className:"flex justify-end",children:q.jsx(vr.button,{type:"button",onClick:je,disabled:E,whileHover:{scale:1.02},whileTap:{scale:.98},className:`px-8 py-3 rounded-2xl font-['Poppins'] font-medium text-white shadow-lg transition-colors ${E?"bg-pink-300 cursor-not-allowed":"bg-pink-500 hover:bg-pink-600 cursor-pointer"}`,children:E?"Saving...":F?"Update Entry":"Save Entry"})})]})}function Pre(){return q.jsxs("div",{className:"p-6",children:[q.jsx("h1",{className:"font-['Caveat'] text-3xl text-[var(--color-text)] mb-4",children:"Calendar"}),q.jsx("p",{className:"font-['Poppins'] text-[var(--color-text)]",children:"Your diary calendar view "})]})}function Lre(){return q.jsx(u7,{children:q.jsx(az,{children:q.jsxs(VB,{children:[q.jsx(Mo,{path:"/login",element:q.jsx(oY,{})}),q.jsx(Mo,{element:q.jsx(f7,{}),children:q.jsxs(Mo,{element:q.jsx(h7,{}),children:[q.jsx(Mo,{path:"/dashboard",element:q.jsx(pY,{})}),q.jsx(Mo,{path:"/editor/:entryId?",element:q.jsx(Ore,{})}),q.jsx(Mo,{path:"/calendar",element:q.jsx(Pre,{})})]})}),q.jsx(Mo,{path:"*",element:q.jsx(hD,{to:"/dashboard",replace:!0})})]})})})}VU.createRoot(document.getElementById("root")).render(q.jsx(O.StrictMode,{children:q.jsx(Lre,{})}));
